/*! For license information please see feedTheMonster.js.LICENSE.txt */
(()=>{var e={438:e=>{var t;self,t=()=>(()=>{"use strict";var e={"./node_modules/@statsig/client-core/src/$_StatsigGlobal.js":(e,t,n)=>{var i,s,r;Object.defineProperty(t,"__esModule",{value:!0}),t._getInstance=t._getStatsigGlobalFlag=t._getStatsigGlobal=void 0;const o=n("./node_modules/@statsig/client-core/src/Log.js");t._getStatsigGlobal=()=>__STATSIG__||h,t._getStatsigGlobalFlag=e=>(0,t._getStatsigGlobal)()[e],t._getInstance=e=>{const n=(0,t._getStatsigGlobal)();return e?n.instances&&n.instances[e]:(n.instances&&Object.keys(n.instances).length>1&&o.Log.warn("Call made to Statsig global instance without an SDK key but there is more than one client instance. If you are using mulitple clients, please specify the SDK key."),n.firstInstance)};const a="__STATSIG__",l="undefined"!=typeof window?window:{},c=void 0!==n.g?n.g:{},u="undefined"!=typeof globalThis?globalThis:{},h=null!==(r=null!==(s=null!==(i=l[a])&&void 0!==i?i:c[a])&&void 0!==s?s:u[a])&&void 0!==r?r:{instance:t._getInstance};l[a]=h,c[a]=h,u[a]=h},"./node_modules/@statsig/client-core/src/CacheKey.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getStorageKey=t._getUserStorageKey=void 0;const i=n("./node_modules/@statsig/client-core/src/Hashing.js");function s(e,t,n){var s;if(n)return n(e,t);const r=t&&t.customIDs?t.customIDs:{},o=[`uid:${null!==(s=null==t?void 0:t.userID)&&void 0!==s?s:""}`,`cids:${Object.keys(r).sort(((e,t)=>e.localeCompare(t))).map((e=>`${e}-${r[e]}`)).join(",")}`,`k:${e}`];return(0,i._DJB2)(o.join("|"))}t._getUserStorageKey=s,t._getStorageKey=function(e,t,n){return t?s(e,t,n):(0,i._DJB2)(`k:${e}`)}},"./node_modules/@statsig/client-core/src/ClientInterfaces.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/DataAdapterCore.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._makeDataAdapterResult=t.DataAdapterCore=void 0;const s=n("./node_modules/@statsig/client-core/src/Log.js"),r=n("./node_modules/@statsig/client-core/src/StableID.js"),o=n("./node_modules/@statsig/client-core/src/StatsigUser.js"),a=n("./node_modules/@statsig/client-core/src/StorageProvider.js"),l=n("./node_modules/@statsig/client-core/src/TypedJsonParse.js");function c(e,t,n,i){return{source:e,data:t,receivedAt:Date.now(),stableID:n,fullUserHash:(0,o._getFullUserHash)(i)}}t.DataAdapterCore=class{constructor(e,t){this._adapterName=e,this._cacheSuffix=t,this._options=null,this._sdkKey=null,this._lastModifiedStoreKey=`statsig.last_modified_time.${t}`,this._inMemoryCache=new u}attach(e,t){this._sdkKey=e,this._options=t}getDataSync(e){const t=e&&(0,o._normalizeUser)(e,this._options),n=this._getCacheKey(t),i=this._inMemoryCache.get(n,t);if(i)return i;const s=this._loadFromCache(n);return s?(this._inMemoryCache.add(n,s),this._inMemoryCache.get(n,t)):null}setData(e,t){const n=t&&(0,o._normalizeUser)(t,this._options),i=this._getCacheKey(n);this._inMemoryCache.add(i,c("Bootstrap",e,null,n))}_getDataAsyncImpl(e,t,n){return i(this,void 0,void 0,(function*(){a.Storage.isReady()||(yield a.Storage.isReadyResolver());const i=null!=e?e:this.getDataSync(t),r=[this._fetchAndPrepFromNetwork(i,t,n)];return(null==n?void 0:n.timeoutMs)&&r.push(new Promise((e=>setTimeout(e,n.timeoutMs))).then((()=>(s.Log.debug("Fetching latest value timed out"),null)))),yield Promise.race(r)}))}_prefetchDataImpl(e,t){return i(this,void 0,void 0,(function*(){const n=e&&(0,o._normalizeUser)(e,this._options),i=this._getCacheKey(n),s=yield this._getDataAsyncImpl(null,n,t);s&&this._inMemoryCache.add(i,Object.assign(Object.assign({},s),{source:"Prefetch"}))}))}_fetchAndPrepFromNetwork(e,t,n){return i(this,void 0,void 0,(function*(){let i=null;e&&this._isCachedResultValidFor204(e,t)&&(i=e.data);const o=yield this._fetchFromNetwork(i,t,n);if(!o)return s.Log.debug("No response returned for latest value"),null;const a=(0,l._typedJsonParse)(o,"has_updates","Response"),u=this._getSdkKey(),h=r.StableID.get(u);let d=null;if(!0===(null==a?void 0:a.has_updates))d=c("Network",o,h,t);else{if(!i||!1!==(null==a?void 0:a.has_updates))return null;d=c("NetworkNotModified",i,h,t)}const p=this._getCacheKey(t);return this._inMemoryCache.add(p,d),this._writeToCache(p,d),d}))}_getSdkKey(){return null!=this._sdkKey?this._sdkKey:(s.Log.error(`${this._adapterName} is not attached to a Client`),"")}_loadFromCache(e){var t;const n=null===(t=a.Storage.getItem)||void 0===t?void 0:t.call(a.Storage,e);if(null==n)return null;const i=(0,l._typedJsonParse)(n,"source","Cached Result");return i?Object.assign(Object.assign({},i),{source:"Cache"}):null}_writeToCache(e,t){a.Storage.setItem(e,JSON.stringify(t)),this._runLocalStorageCacheEviction(e)}_runLocalStorageCacheEviction(e){var t;const n=null!==(t=(0,a._getObjectFromStorage)(this._lastModifiedStoreKey))&&void 0!==t?t:{};n[e]=Date.now();const i=h(n,10);i&&(delete n[i],a.Storage.removeItem(i)),(0,a._setObjectInStorage)(this._lastModifiedStoreKey,n)}},t._makeDataAdapterResult=c;class u{constructor(){this._data={}}get(e,t){var n;const i=this._data[e],r=null==i?void 0:i.stableID,o=null===(n=null==t?void 0:t.customIDs)||void 0===n?void 0:n.stableID;return o&&r&&o!==r?(s.Log.warn("'StatsigUser.customIDs.stableID' mismatch"),null):i}add(e,t){const n=h(this._data,9);n&&delete this._data[n],this._data[e]=t}merge(e){this._data=Object.assign(Object.assign({},this._data),e)}}function h(e,t){const n=Object.keys(e);return n.length<=t?null:n.reduce(((t,n)=>{const i=e[t],s=e[n];return"object"==typeof i&&"object"==typeof s?s.receivedAt<i.receivedAt?n:t:s<i?n:t}))}},"./node_modules/@statsig/client-core/src/Diagnostics.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const n=new Map,i="start",s="end",r="statsig::diagnostics";function o(e,t,n,i){return Object.assign({key:n,action:t,step:i,timestamp:Date.now()},e)}function a(e,t){var i;const s=null!==(i=n.get(e))&&void 0!==i?i:[];s.push(t),n.set(e,s)}function l(e,t){if(t in e)return e[t]}t.Diagnostics={_getMarkers:e=>n.get(e),_markInitOverallStart:e=>{a(e,o({},i,"overall"))},_markInitOverallEnd:(e,t,n)=>{a(e,o({success:t,error:t?void 0:{name:"InitializeError",message:"Failed to initialize"},evaluationDetails:n},s,"overall"))},_markInitNetworkReqStart:(e,t)=>{a(e,o(t,i,"initialize","network_request"))},_markInitNetworkReqEnd:(e,t)=>{a(e,o(t,s,"initialize","network_request"))},_markInitProcessStart:e=>{a(e,o({},i,"initialize","process"))},_markInitProcessEnd:(e,t)=>{a(e,o(t,s,"initialize","process"))},_clearMarkers:e=>{n.delete(e)},_formatError(e){if(e&&"object"==typeof e)return{code:l(e,"code"),name:l(e,"name"),message:l(e,"message")}},_getDiagnosticsData(e,n,i,s){var r;return{success:!0===(null==e?void 0:e.ok),statusCode:null==e?void 0:e.status,sdkRegion:null===(r=null==e?void 0:e.headers)||void 0===r?void 0:r.get("x-statsig-region"),isDelta:!0===i.includes('"is_delta":true')||void 0,attempt:n,error:t.Diagnostics._formatError(s)}},_enqueueDiagnosticsEvent(e,n,i,s){const o=t.Diagnostics._getMarkers(i);if(null==o||o.length<=0)return-1;const a=o[o.length-1].timestamp-o[0].timestamp;t.Diagnostics._clearMarkers(i);const l=function(e,t){const n={eventName:r,user:e,value:null,metadata:t,time:Date.now()};return n}(e,{context:"initialize",markers:o.slice(),statsigOptions:s});return n.enqueue(l),a}}},"./node_modules/@statsig/client-core/src/DnsTxtQuery.js":function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._fetchTxtRecords=void 0;const i=new Uint8Array([0,0,1,0,0,1,0,0,0,0,0,0,13,102,101,97,116,117,114,101,97,115,115,101,116,115,3,111,114,103,0,0,16,0,1]),s=["i","e","d"],r=200;t._fetchTxtRecords=function(e){return n(this,void 0,void 0,(function*(){const t=yield e("https://cloudflare-dns.com/dns-query",{method:"POST",headers:{"Content-Type":"application/dns-message",Accept:"application/dns-message"},body:i});if(!t.ok){const e=new Error("Failed to fetch TXT records from DNS");throw e.name="DnsTxtFetchError",e}const n=yield t.arrayBuffer();return function(e){const t=e.findIndex(((t,n)=>n<r&&"="===String.fromCharCode(t)&&s.includes(String.fromCharCode(e[n-1]))));if(-1===t){const e=new Error("Failed to parse TXT records from DNS");throw e.name="DnsTxtParseError",e}let n="";for(let i=t-1;i<e.length;i++)n+=String.fromCharCode(e[i]);return n.split(",")}(new Uint8Array(n))}))}},"./node_modules/@statsig/client-core/src/DownloadConfigSpecsResponse.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/ErrorBoundary.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=t.EXCEPTION_ENDPOINT=void 0;const s=n("./node_modules/@statsig/client-core/src/Log.js"),r=n("./node_modules/@statsig/client-core/src/SDKType.js"),o=n("./node_modules/@statsig/client-core/src/StatsigMetadata.js");t.EXCEPTION_ENDPOINT="https://statsigapi.net/v1/sdk_exception";const a="[Statsig] UnknownError";function l(e){return e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred.")}t.ErrorBoundary=class{constructor(e,t,n,i){this._sdkKey=e,this._options=t,this._emitter=n,this._lastSeenError=i,this._seen=new Set}wrap(e){try{const t=e;(function(e){const t=new Set;let n=Object.getPrototypeOf(e);for(;n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).filter((e=>"function"==typeof(null==n?void 0:n[e]))).forEach((e=>t.add(e))),n=Object.getPrototypeOf(n);return Array.from(t)})(t).forEach((n=>{const i=t[n];"$EB"in i||(t[n]=(...t)=>this._capture(n,(()=>i.apply(e,t))),t[n].$EB=!0)}))}catch(e){this._onError("eb:wrap",e)}}logError(e,t){this._onError(e,t)}getLastSeenErrorAndReset(){const e=this._lastSeenError;return this._lastSeenError=void 0,null!=e?e:null}attachErrorIfNoneExists(e){this._lastSeenError||(this._lastSeenError=l(e))}_capture(e,t){try{const n=t();return n&&n instanceof Promise?n.catch((t=>this._onError(e,t))):n}catch(t){return this._onError(e,t),null}}_onError(e,n){try{s.Log.warn(`Caught error in ${e}`,{error:n}),(()=>i(this,void 0,void 0,(function*(){var i,s,c,u,h,d,p;const m=n||Error(a),g=m instanceof Error,f=g?m.name:"No Name",v=l(m);if(this._lastSeenError=v,this._seen.has(f))return;if(this._seen.add(f),null===(s=null===(i=this._options)||void 0===i?void 0:i.networkConfig)||void 0===s?void 0:s.preventAllNetworkTraffic)return void(null===(c=this._emitter)||void 0===c||c.call(this,{name:"error",error:n,tag:e}));const b=r.SDKType._get(this._sdkKey),y=o.StatsigMetadataProvider.get(),_=g?m.stack:function(e){try{return JSON.stringify(e)}catch(e){return a}}(m),w=JSON.stringify(Object.assign({tag:e,exception:f,info:_},Object.assign(Object.assign({},y),{sdkType:b}))),S=null!==(d=null===(h=null===(u=this._options)||void 0===u?void 0:u.networkConfig)||void 0===h?void 0:h.networkOverrideFunc)&&void 0!==d?d:fetch;yield S(t.EXCEPTION_ENDPOINT,{method:"POST",headers:{"STATSIG-API-KEY":this._sdkKey,"STATSIG-SDK-TYPE":String(b),"STATSIG-SDK-VERSION":String(y.sdkVersion),"Content-Type":"application/json"},body:w}),null===(p=this._emitter)||void 0===p||p.call(this,{name:"error",error:n,tag:e})})))().then((()=>{})).catch((()=>{}))}catch(e){}}}},"./node_modules/@statsig/client-core/src/EvaluationOptions.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/EvaluationTypes.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/EventLogger.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventLogger=void 0;const s=n("./node_modules/@statsig/client-core/src/CacheKey.js"),r=n("./node_modules/@statsig/client-core/src/Hashing.js"),o=n("./node_modules/@statsig/client-core/src/Log.js"),a=n("./node_modules/@statsig/client-core/src/NetworkConfig.js"),l=n("./node_modules/@statsig/client-core/src/SafeJs.js"),c=n("./node_modules/@statsig/client-core/src/StatsigEvent.js"),u=n("./node_modules/@statsig/client-core/src/StorageProvider.js"),h=n("./node_modules/@statsig/client-core/src/UrlConfiguration.js"),d=n("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),p={},m="startup",g="gained_focus";class f{static _safeFlushAndForget(e){var t;null===(t=p[e])||void 0===t||t.flush().catch((()=>{}))}static _safeRetryFailedLogs(e){var t;null===(t=p[e])||void 0===t||t._retryFailedLogs(g)}constructor(e,t,n,i){var s;this._sdkKey=e,this._emitter=t,this._network=n,this._options=i,this._queue=[],this._lastExposureTimeMap={},this._nonExposedChecks={},this._hasRunQuickFlush=!1,this._creationTime=Date.now(),this._isLoggingDisabled=!0===(null==i?void 0:i.disableLogging),this._maxQueueSize=null!==(s=null==i?void 0:i.loggingBufferMaxSize)&&void 0!==s?s:100;const r=null==i?void 0:i.networkConfig;this._logEventUrlConfig=new h.UrlConfiguration(a.Endpoint._rgstr,null==r?void 0:r.logEventUrl,null==r?void 0:r.api,null==r?void 0:r.logEventFallbackUrls)}setLoggingDisabled(e){this._isLoggingDisabled=e}enqueue(e){this._shouldLogEvent(e)&&(this._normalizeAndAppendEvent(e),this._quickFlushIfNeeded(),this._queue.length>this._maxQueueSize&&f._safeFlushAndForget(this._sdkKey))}incrementNonExposureCount(e){var t;const n=null!==(t=this._nonExposedChecks[e])&&void 0!==t?t:0;this._nonExposedChecks[e]=n+1}reset(){this._lastExposureTimeMap={}}start(){(0,l._isServerEnv)()||(p[this._sdkKey]=this,(0,d._subscribeToVisiblityChanged)((e=>{"background"===e?f._safeFlushAndForget(this._sdkKey):"foreground"===e&&f._safeRetryFailedLogs(this._sdkKey)})),this._retryFailedLogs(m),this._startBackgroundFlushInterval())}stop(){return i(this,void 0,void 0,(function*(){this._flushIntervalId&&(clearInterval(this._flushIntervalId),this._flushIntervalId=null),delete p[this._sdkKey],yield this.flush()}))}flush(){return i(this,void 0,void 0,(function*(){if(this._appendAndResetNonExposedChecks(),0===this._queue.length)return;const e=this._queue;this._queue=[],yield this._sendEvents(e)}))}_quickFlushIfNeeded(){this._hasRunQuickFlush||(this._hasRunQuickFlush=!0,Date.now()-this._creationTime>200||setTimeout((()=>f._safeFlushAndForget(this._sdkKey)),200))}_shouldLogEvent(e){if((0,l._isServerEnv)())return!1;if(!(0,c._isExposureEvent)(e))return!0;const t=e.user?e.user:{statsigEnvironment:void 0},n=(0,s._getUserStorageKey)(this._sdkKey,t),i=e.metadata?e.metadata:{},r=[e.eventName,n,i.gate,i.config,i.ruleID,i.allocatedExperiment,i.parameterName,String(i.isExplicitParameter),i.reason].join("|"),o=this._lastExposureTimeMap[r],a=Date.now();return!(o&&a-o<6e5||(Object.keys(this._lastExposureTimeMap).length>1e3&&(this._lastExposureTimeMap={}),this._lastExposureTimeMap[r]=a,0))}_sendEvents(e){var t,n;return i(this,void 0,void 0,(function*(){if(this._isLoggingDisabled)return this._saveFailedLogsToStorage(e),!1;try{const i=(0,d._isUnloading)()&&this._network.isBeaconSupported()&&null==(null===(n=null===(t=this._options)||void 0===t?void 0:t.networkConfig)||void 0===n?void 0:n.networkOverrideFunc);return this._emitter({name:"pre_logs_flushed",events:e}),(i?yield this._sendEventsViaBeacon(e):yield this._sendEventsViaPost(e)).success?(this._emitter({name:"logs_flushed",events:e}),!0):(o.Log.warn("Failed to flush events."),this._saveFailedLogsToStorage(e),!1)}catch(e){return o.Log.warn("Failed to flush events."),!1}}))}_sendEventsViaPost(e){var t;return i(this,void 0,void 0,(function*(){const n=yield this._network.post(this._getRequestData(e)),i=null!==(t=null==n?void 0:n.code)&&void 0!==t?t:-1;return{success:i>=200&&i<300}}))}_sendEventsViaBeacon(e){return i(this,void 0,void 0,(function*(){return{success:yield this._network.beacon(this._getRequestData(e))}}))}_getRequestData(e){return{sdkKey:this._sdkKey,data:{events:e},urlConfig:this._logEventUrlConfig,retries:3,isCompressable:!0,params:{[a.NetworkParam.EventCount]:String(e.length)}}}_saveFailedLogsToStorage(e){for(;e.length>500;)e.shift();const t=this._getStorageKey();try{(0,u._setObjectInStorage)(t,e)}catch(e){o.Log.warn("Unable to save failed logs to storage")}}_retryFailedLogs(e){const t=this._getStorageKey();(()=>i(this,void 0,void 0,(function*(){u.Storage.isReady()||(yield u.Storage.isReadyResolver());const n=(0,u._getObjectFromStorage)(t);n&&(e===m&&u.Storage.removeItem(t),(yield this._sendEvents(n))&&e===g&&u.Storage.removeItem(t))})))().catch((()=>{o.Log.warn("Failed to flush stored logs")}))}_getStorageKey(){return`statsig.failed_logs.${(0,r._DJB2)(this._sdkKey)}`}_normalizeAndAppendEvent(e){e.user&&(e.user=Object.assign({},e.user),delete e.user.privateAttributes);const t={},n=this._getCurrentPageUrl();n&&(t.statsigMetadata={currentPage:n});const i=Object.assign(Object.assign({},e),t);o.Log.debug("Enqueued Event:",i),this._queue.push(i)}_appendAndResetNonExposedChecks(){0!==Object.keys(this._nonExposedChecks).length&&(this._normalizeAndAppendEvent({eventName:"statsig::non_exposed_checks",user:null,time:Date.now(),metadata:{checks:Object.assign({},this._nonExposedChecks)}}),this._nonExposedChecks={})}_getCurrentPageUrl(){var e;if(!1!==(null===(e=this._options)||void 0===e?void 0:e.includeCurrentPageUrlWithEvents))return(0,l._getCurrentPageUrlSafe)()}_startBackgroundFlushInterval(){var e,t;const n=null!==(t=null===(e=this._options)||void 0===e?void 0:e.loggingIntervalMs)&&void 0!==t?t:1e4,i=setInterval((()=>{const e=p[this._sdkKey];e&&e._flushIntervalId===i?f._safeFlushAndForget(this._sdkKey):clearInterval(i)}),n);this._flushIntervalId=i}}t.EventLogger=f},"./node_modules/@statsig/client-core/src/Hashing.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getSortedObject=t._DJB2Object=t._DJB2=void 0;const i=n("./node_modules/@statsig/client-core/src/TypingUtils.js");t._DJB2=e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return String(t>>>0)},t._DJB2Object=(e,n)=>(0,t._DJB2)(JSON.stringify((0,t._getSortedObject)(e,n))),t._getSortedObject=(e,n)=>{if(null==e)return null;const s=Object.keys(e).sort(),r={};return s.forEach((s=>{const o=e[s];0!==n&&"object"===(0,i._typeOf)(o)?r[s]=(0,t._getSortedObject)(o,null!=n?n-1:n):r[s]=o})),r}},"./node_modules/@statsig/client-core/src/InitializeResponse.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/Log.js":(e,t)=>{function n(e){return e.unshift("[Statsig]"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.LogLevel=void 0,t.LogLevel={None:0,Error:1,Warn:2,Info:3,Debug:4};class i{static info(...e){i.level>=t.LogLevel.Info&&console.info("  INFO ",...n(e))}static debug(...e){i.level>=t.LogLevel.Debug&&console.debug(" DEBUG ",...n(e))}static warn(...e){i.level>=t.LogLevel.Warn&&console.warn("  WARN ",...n(e))}static error(...e){i.level>=t.LogLevel.Error&&console.error(" ERROR ",...n(e))}}t.Log=i,i.level=t.LogLevel.Warn},"./node_modules/@statsig/client-core/src/MemoKey.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createMemoKey=t.MemoPrefix=void 0,t.MemoPrefix={_gate:"g",_dynamicConfig:"c",_experiment:"e",_layer:"l",_paramStore:"p"};const n=new Set([]),i=new Set(["userPersistedValues"]);t.createMemoKey=function(e,t,s){let r=`${e}|${t}`;if(!s)return r;for(const e of Object.keys(s)){if(i.has(e))return;n.has(e)?r+=`|${e}=true`:r+=`|${e}=${s[e]}`}return r}},"./node_modules/@statsig/client-core/src/NetworkConfig.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkParam=t.NetworkDefault=t.Endpoint=void 0,t.Endpoint={_initialize:"initialize",_rgstr:"rgstr",_download_config_specs:"download_config_specs"},t.NetworkDefault={[t.Endpoint._rgstr]:"https://prodregistryv2.org/v1",[t.Endpoint._initialize]:"https://featureassets.org/v1",[t.Endpoint._download_config_specs]:"https://api.statsigcdn.com/v1"},t.NetworkParam={EventCount:"ec",SdkKey:"k",SdkType:"st",SdkVersion:"sv",Time:"t",SessionID:"sid",StatsigEncoded:"se",IsGzipped:"gz"}},"./node_modules/@statsig/client-core/src/NetworkCore.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkCore=void 0,n("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");const s=n("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),r=n("./node_modules/@statsig/client-core/src/Diagnostics.js"),o=n("./node_modules/@statsig/client-core/src/Log.js"),a=n("./node_modules/@statsig/client-core/src/NetworkConfig.js"),l=n("./node_modules/@statsig/client-core/src/NetworkFallbackResolver.js"),c=n("./node_modules/@statsig/client-core/src/SDKType.js"),u=n("./node_modules/@statsig/client-core/src/SafeJs.js"),h=n("./node_modules/@statsig/client-core/src/SessionID.js"),d=n("./node_modules/@statsig/client-core/src/StableID.js"),p=n("./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js"),m=n("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),g=n("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),f=new Set([408,500,502,503,504,522,524,599]);t.NetworkCore=class{constructor(e,t){this._emitter=t,this._errorBoundary=null,this._timeout=1e4,this._netConfig={},this._options={},this._leakyBucket={},this._lastUsedInitUrl=null,e&&(this._options=e),this._options.networkConfig&&(this._netConfig=this._options.networkConfig),this._netConfig.networkTimeoutMs&&(this._timeout=this._netConfig.networkTimeoutMs),this._fallbackResolver=new l.NetworkFallbackResolver(this._options)}setErrorBoundary(e){this._errorBoundary=e,this._errorBoundary.wrap(this),this._errorBoundary.wrap(this._fallbackResolver),this._fallbackResolver.setErrorBoundary(e)}isBeaconSupported(){return"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon}getLastUsedInitUrlAndReset(){const e=this._lastUsedInitUrl;return this._lastUsedInitUrl=null,e}beacon(e){return i(this,void 0,void 0,(function*(){if(!v(e))return!1;const t=this._getInternalRequestArgs("POST",e),n=yield this._getPopulatedBody(t,e.data),i=yield this._getPopulatedURL(t),s=navigator;return s.sendBeacon.bind(s)(i,n)}))}post(e){return i(this,void 0,void 0,(function*(){const t=this._getInternalRequestArgs("POST",e);return t.body=yield this._getPopulatedBody(t,e.data),e.isStatsigEncodable&&(t.body=this._attemptToEncodeString(t,t.body)),this._sendRequest(t)}))}get(e){const t=this._getInternalRequestArgs("GET",e);return this._sendRequest(t)}_sendRequest(e){var t,n,s,l;return i(this,void 0,void 0,(function*(){if(!v(e))return null;if(this._netConfig.preventAllNetworkTraffic)return null;const{method:c,body:u,retries:h,attempt:d}=e,m=e.urlConfig.endpoint;if(this._isRateLimited(m))return o.Log.warn(`Request to ${m} was blocked because you are making requests too frequently.`),null;const y=null!=d?d:1,_="undefined"!=typeof AbortController?new AbortController:null,w=setTimeout((()=>{null==_||_.abort(`Timeout of ${this._timeout}ms expired.`)}),this._timeout),S=yield this._getPopulatedURL(e);let E=null;const T=(0,g._isUnloading)();try{const n={method:c,body:u,headers:Object.assign({},e.headers),signal:null==_?void 0:_.signal,priority:e.priority,keepalive:T};!function(e,t){e.urlConfig.endpoint===a.Endpoint._initialize&&r.Diagnostics._markInitNetworkReqStart(e.sdkKey,{attempt:t})}(e,y);const i=this._leakyBucket[m];i&&(i.lastRequestTime=Date.now(),this._leakyBucket[m]=i);const s=null!==(t=this._netConfig.networkOverrideFunc)&&void 0!==t?t:fetch;if(E=yield s(S,n),clearTimeout(w),!E.ok){const e=yield E.text().catch((()=>"No Text")),t=new Error(`NetworkError: ${S} ${e}`);throw t.name="NetworkError",t}const o=yield E.text();return b(e,E,y,o),this._fallbackResolver.tryBumpExpiryTime(e.sdkKey,e.urlConfig),{body:o,code:E.status}}catch(t){const r=function(e,t){return(null==e?void 0:e.signal.aborted)&&"string"==typeof e.signal.reason?e.signal.reason:"string"==typeof t?t:t instanceof Error?`${t.name}: ${t.message}`:"Unknown Error"}(_,t),a=(null==(x=_)?void 0:x.signal.aborted)&&"string"==typeof x.signal.reason&&x.signal.reason.includes("Timeout")||!1;if(b(e,E,y,"",t),(yield this._fallbackResolver.tryFetchUpdatedFallbackInfo(e.sdkKey,e.urlConfig,r,a))&&(e.fallbackUrl=this._fallbackResolver.getActiveFallbackUrl(e.sdkKey,e.urlConfig)),!h||y>h||!f.has(null!==(n=null==E?void 0:E.status)&&void 0!==n?n:500)){null===(s=this._emitter)||void 0===s||s.call(this,{name:"error",error:t,tag:p.ErrorTag.NetworkError,requestArgs:e});const n=`A networking error occurred during ${c} request to ${S}.`;return o.Log.error(n,r,t),null===(l=this._errorBoundary)||void 0===l||l.attachErrorIfNoneExists(n),null}return yield function(e){return i(this,void 0,void 0,(function*(){yield new Promise((t=>setTimeout(t,Math.min(e*e*500,3e4))))}))}(y),this._sendRequest(Object.assign(Object.assign({},e),{retries:h,attempt:y+1}))}var x}))}_isRateLimited(e){var t;const n=Date.now(),i=null!==(t=this._leakyBucket[e])&&void 0!==t?t:{count:0,lastRequestTime:n},s=n-i.lastRequestTime,r=Math.floor(.05*s);return i.count=Math.max(0,i.count-r),i.count>=50||(i.count+=1,i.lastRequestTime=n,this._leakyBucket[e]=i,!1)}_getPopulatedURL(e){var t;return i(this,void 0,void 0,(function*(){const n=null!==(t=e.fallbackUrl)&&void 0!==t?t:e.urlConfig.getUrl();e.urlConfig.endpoint!==a.Endpoint._initialize&&e.urlConfig.endpoint!==a.Endpoint._download_config_specs||(this._lastUsedInitUrl=n);const i=Object.assign({[a.NetworkParam.SdkKey]:e.sdkKey,[a.NetworkParam.SdkType]:c.SDKType._get(e.sdkKey),[a.NetworkParam.SdkVersion]:m.SDK_VERSION,[a.NetworkParam.Time]:String(Date.now()),[a.NetworkParam.SessionID]:h.SessionID.get(e.sdkKey)},e.params),s=Object.keys(i).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`)).join("&");return`${n}${s?`?${s}`:""}`}))}_getPopulatedBody(e,t){return i(this,void 0,void 0,(function*(){const{sdkKey:n,fallbackUrl:i}=e,s=d.StableID.get(n),r=h.SessionID.get(n),o=c.SDKType._get(n);return JSON.stringify(Object.assign(Object.assign({},t),{statsigMetadata:Object.assign(Object.assign({},m.StatsigMetadataProvider.get()),{stableID:s,sessionID:r,sdkType:o,fallbackUrl:i})}))}))}_attemptToEncodeString(e,t){var n,i;const r=(0,u._getWindowSafe)();if(this._options.disableStatsigEncoding||null!=(0,s._getStatsigGlobalFlag)("no-encode")||!(null==r?void 0:r.btoa))return t;try{const s=null!==(n=r.btoa(t).split("").reverse().join(""))&&void 0!==n?n:t;return e.params=Object.assign(Object.assign({},null!==(i=e.params)&&void 0!==i?i:{}),{[a.NetworkParam.StatsigEncoded]:"1"}),s}catch(n){return o.Log.warn(`Request encoding failed for ${e.urlConfig.getUrl()}`),t}}_getInternalRequestArgs(e,t){const n=this._fallbackResolver.getActiveFallbackUrl(t.sdkKey,t.urlConfig);return Object.assign(Object.assign({},t),{method:e,fallbackUrl:n})}};const v=e=>!!e.sdkKey||(o.Log.warn("Unable to make request without an SDK key"),!1);function b(e,t,n,i,s){e.urlConfig.endpoint===a.Endpoint._initialize&&r.Diagnostics._markInitNetworkReqEnd(e.sdkKey,r.Diagnostics._getDiagnosticsData(t,n,i,s))}},"./node_modules/@statsig/client-core/src/NetworkFallbackResolver.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._isDomainFailure=t.NetworkFallbackResolver=void 0;const s=n("./node_modules/@statsig/client-core/src/DnsTxtQuery.js"),r=n("./node_modules/@statsig/client-core/src/Hashing.js"),o=n("./node_modules/@statsig/client-core/src/Log.js"),a=n("./node_modules/@statsig/client-core/src/StorageProvider.js"),l=6048e5;function c(e,t){var n;const i=null!==(n=null==e?void 0:e.toLowerCase())&&void 0!==n?n:"";return t||i.includes("uncaught exception")||i.includes("failed to fetch")||i.includes("networkerror when attempting to fetch resource")}function u(e){return`statsig.network_fallback.${(0,r._DJB2)(e)}`}function h(e,t){const n=u(e);t&&0!==Object.keys(t).length?a.Storage.setItem(n,JSON.stringify(t)):a.Storage.removeItem(n)}function d(e){try{return new URL(e).pathname}catch(e){return null}}t.NetworkFallbackResolver=class{constructor(e){var t;this._fallbackInfo=null,this._errorBoundary=null,this._dnsQueryCooldowns={},this._networkOverrideFunc=null===(t=e.networkConfig)||void 0===t?void 0:t.networkOverrideFunc}setErrorBoundary(e){this._errorBoundary=e}tryBumpExpiryTime(e,t){var n;const i=null===(n=this._fallbackInfo)||void 0===n?void 0:n[t.endpoint];i&&(i.expiryTime=Date.now()+l,h(e,Object.assign(Object.assign({},this._fallbackInfo),{[t.endpoint]:i})))}getActiveFallbackUrl(e,t){var n,i;let s=this._fallbackInfo;null==s&&(s=null!==(n=function(e){const t=u(e),n=a.Storage.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return o.Log.error("Failed to parse FallbackInfo"),null}}(e))&&void 0!==n?n:{},this._fallbackInfo=s);const r=s[t.endpoint];return!r||Date.now()>(null!==(i=r.expiryTime)&&void 0!==i?i:0)?(delete s[t.endpoint],this._fallbackInfo=s,h(e,this._fallbackInfo),null):r.url?r.url:null}getFallbackFromProvided(e){const t=d(e);return t?e.replace(t,""):null}tryFetchUpdatedFallbackInfo(e,t,n,s){var r,o;return i(this,void 0,void 0,(function*(){try{if(!c(n,s))return!1;const i=null==t.customUrl&&null==t.fallbackUrls?yield this._tryFetchFallbackUrlsFromNetwork(t):t.fallbackUrls,o=this._pickNewFallbackUrl(null===(r=this._fallbackInfo)||void 0===r?void 0:r[t.endpoint],i);return!!o&&(this._updateFallbackInfoWithNewUrl(e,t.endpoint,o),!0)}catch(e){return null===(o=this._errorBoundary)||void 0===o||o.logError("tryFetchUpdatedFallbackInfo",e),!1}}))}_updateFallbackInfoWithNewUrl(e,t,n){var i,s,r;const o={url:n,expiryTime:Date.now()+l,previous:[]},a=null===(i=this._fallbackInfo)||void 0===i?void 0:i[t];a&&o.previous.push(...a.previous),o.previous.length>10&&(o.previous=[]);const c=null===(r=null===(s=this._fallbackInfo)||void 0===s?void 0:s[t])||void 0===r?void 0:r.url;null!=c&&o.previous.push(c),this._fallbackInfo=Object.assign(Object.assign({},this._fallbackInfo),{[t]:o}),h(e,this._fallbackInfo)}_tryFetchFallbackUrlsFromNetwork(e){var t;return i(this,void 0,void 0,(function*(){const n=this._dnsQueryCooldowns[e.endpoint];if(n&&Date.now()<n)return null;this._dnsQueryCooldowns[e.endpoint]=Date.now()+144e5;const i=[],r=yield(0,s._fetchTxtRecords)(null!==(t=this._networkOverrideFunc)&&void 0!==t?t:fetch),o=d(e.defaultUrl);for(const t of r){if(!t.startsWith(e.endpointDnsKey+"="))continue;const n=t.split("=");if(n.length>1){let e=n[1];e.endsWith("/")&&(e=e.slice(0,-1)),i.push(`https://${e}${o}`)}}return i}))}_pickNewFallbackUrl(e,t){var n;if(null==t)return null;const i=new Set(null!==(n=null==e?void 0:e.previous)&&void 0!==n?n:[]),s=null==e?void 0:e.url;let r=null;for(const e of t){const t=e.endsWith("/")?e.slice(0,-1):e;if(!i.has(e)&&t!==s){r=t;break}}return r}},t._isDomainFailure=c},"./node_modules/@statsig/client-core/src/OverrideAdapter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/ParamStoreTypes.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/SDKFlags.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKFlags=void 0;const n={};t.SDKFlags={setFlags:(e,t)=>{n[e]=t},get:(e,t)=>{var i,s;return null!==(s=null===(i=n[e])||void 0===i?void 0:i[t])&&void 0!==s&&s}}},"./node_modules/@statsig/client-core/src/SDKType.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKType=void 0;const n={};let i;t.SDKType={_get:e=>{var t;return(null!==(t=n[e])&&void 0!==t?t:"js-mono")+(null!=i?i:"")},_setClientType(e,t){n[e]=t},_setBindingType(e){i&&"-react"!==i||(i="-"+e)}}},"./node_modules/@statsig/client-core/src/SafeJs.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getCurrentPageUrlSafe=t._addDocumentEventListenerSafe=t._addWindowEventListenerSafe=t._isServerEnv=t._getDocumentSafe=t._getWindowSafe=void 0,t._getWindowSafe=()=>"undefined"!=typeof window?window:null,t._getDocumentSafe=()=>{var e;const n=(0,t._getWindowSafe)();return null!==(e=null==n?void 0:n.document)&&void 0!==e?e:null},t._isServerEnv=()=>{if(null!==(0,t._getDocumentSafe)())return!1;const e="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;return"string"==typeof EdgeRuntime||e},t._addWindowEventListenerSafe=(e,n)=>{const i=(0,t._getWindowSafe)();"function"==typeof(null==i?void 0:i.addEventListener)&&i.addEventListener(e,n)},t._addDocumentEventListenerSafe=(e,n)=>{const i=(0,t._getDocumentSafe)();"function"==typeof(null==i?void 0:i.addEventListener)&&i.addEventListener(e,n)},t._getCurrentPageUrlSafe=()=>{var e;try{return null===(e=(0,t._getWindowSafe)())||void 0===e?void 0:e.location.href.split(/[?#]/)[0]}catch(e){return}}},"./node_modules/@statsig/client-core/src/SessionID.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSession=t.SessionID=void 0;const i=n("./node_modules/@statsig/client-core/src/CacheKey.js"),s=n("./node_modules/@statsig/client-core/src/Log.js"),r=n("./node_modules/@statsig/client-core/src/StorageProvider.js"),o=n("./node_modules/@statsig/client-core/src/UUID.js"),a=18e5,l=144e5,c={};function u(e,t){return setTimeout((()=>{const t=null===__STATSIG__||void 0===__STATSIG__?void 0:__STATSIG__.instance(e);t&&t.$emt({name:"session_expired"})}),t)}function h(e){return`statsig.session_id.${(0,i._getStorageKey)(e)}`}t.SessionID={get:e=>t.StatsigSession.get(e).data.sessionID},t.StatsigSession={get:e=>(null==c[e]&&(c[e]=function(e){let t=function(e){const t=h(e);return(0,r._getObjectFromStorage)(t)}(e);const n=Date.now();return t||(t={sessionID:(0,o.getUUID)(),startTime:n,lastUpdate:n}),{data:t,sdkKey:e}}(e)),function(e){const t=Date.now(),n=e.data;(function({lastUpdate:e}){return Date.now()-e>a}(n)||function({startTime:e}){return Date.now()-e>l}(n))&&(n.sessionID=(0,o.getUUID)(),n.startTime=t),n.lastUpdate=t,function(e,t){const n=h(t);try{(0,r._setObjectInStorage)(n,e)}catch(e){s.Log.warn("Failed to save SessionID")}}(n,e.sdkKey),clearTimeout(e.idleTimeoutID),clearTimeout(e.ageTimeoutID);const i=t-n.startTime,c=e.sdkKey;return e.idleTimeoutID=u(c,a),e.ageTimeoutID=u(c,l-i),e}(c[e])),overrideInitialSessionID:(e,t)=>{c[t]=function(e,t){const n=Date.now();return{data:{sessionID:e,startTime:n,lastUpdate:n},sdkKey:t}}(e,t)}}},"./node_modules/@statsig/client-core/src/StableID.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StableID=void 0;const i=n("./node_modules/@statsig/client-core/src/CacheKey.js"),s=n("./node_modules/@statsig/client-core/src/Log.js"),r=n("./node_modules/@statsig/client-core/src/StorageProvider.js"),o=n("./node_modules/@statsig/client-core/src/UUID.js"),a={};function l(e){return`statsig.stable_id.${(0,i._getStorageKey)(e)}`}function c(e,t){const n=l(t);try{(0,r._setObjectInStorage)(n,e)}catch(e){s.Log.warn("Failed to save StableID")}}t.StableID={get:e=>{if(null==a[e]){let t=function(e){const t=l(e);return(0,r._getObjectFromStorage)(t)}(e);null==t&&(t=(0,o.getUUID)(),c(t,e)),a[e]=t}return a[e]},setOverride:(e,t)=>{a[t]=e,c(e,t)}}},"./node_modules/@statsig/client-core/src/StatsigClientBase.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClientBase=void 0,n("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");const s=n("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),r=n("./node_modules/@statsig/client-core/src/ErrorBoundary.js"),o=n("./node_modules/@statsig/client-core/src/EventLogger.js"),a=n("./node_modules/@statsig/client-core/src/Log.js"),l=n("./node_modules/@statsig/client-core/src/MemoKey.js"),c=n("./node_modules/@statsig/client-core/src/SafeJs.js"),u=n("./node_modules/@statsig/client-core/src/SessionID.js"),h=n("./node_modules/@statsig/client-core/src/StorageProvider.js");t.StatsigClientBase=class{constructor(e,t,n,i){var l;this.loadingStatus="Uninitialized",this._initializePromise=null,this._listeners={};const d=this.$emt.bind(this);null!=(null==i?void 0:i.logLevel)&&(a.Log.level=i.logLevel),(null==i?void 0:i.disableStorage)&&h.Storage._setDisabled(!0),(null==i?void 0:i.initialSessionID)&&u.StatsigSession.overrideInitialSessionID(i.initialSessionID,e),(null==i?void 0:i.storageProvider)&&h.Storage._setProvider(i.storageProvider),this._sdkKey=e,this._options=null!=i?i:{},this._memoCache={},this.overrideAdapter=null!==(l=null==i?void 0:i.overrideAdapter)&&void 0!==l?l:null,this._logger=new o.EventLogger(e,d,n,i),this._errorBoundary=new r.ErrorBoundary(e,i,d),this._errorBoundary.wrap(this),this._errorBoundary.wrap(t),this._errorBoundary.wrap(this._logger),n.setErrorBoundary(this._errorBoundary),this.dataAdapter=t,this.dataAdapter.attach(e,i),this.storageProvider=h.Storage,this._primeReadyRipcord(),function(e,t){var n;if((0,c._isServerEnv)())return;const i=(0,s._getStatsigGlobal)(),r=null!==(n=i.instances)&&void 0!==n?n:{},o=t;null!=r[e]&&a.Log.warn("Creating multiple Statsig clients with the same SDK key can lead to unexpected behavior. Multi-instance support requires different SDK keys."),r[e]=o,i.firstInstance||(i.firstInstance=o),i.instances=r,__STATSIG__=i}(e,this)}updateRuntimeOptions(e){null!=e.disableLogging&&(this._options.disableLogging=e.disableLogging,this._logger.setLoggingDisabled(e.disableLogging)),null!=e.disableStorage&&(this._options.disableStorage=e.disableStorage,h.Storage._setDisabled(e.disableStorage))}flush(){return this._logger.flush()}shutdown(){return i(this,void 0,void 0,(function*(){this.$emt({name:"pre_shutdown"}),this._setStatus("Uninitialized",null),this._initializePromise=null,yield this._logger.stop()}))}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){if(this._listeners[e]){const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}}$on(e,t){t.__isInternal=!0,this.on(e,t)}$emt(e){var t;const n=t=>{try{t(e)}catch(n){if(!0===t.__isInternal)return void this._errorBoundary.logError(`__emit:${e.name}`,n);a.Log.error("An error occurred in a StatsigClientEvent listener. This is not an issue with Statsig.",e)}};this._listeners[e.name]&&this._listeners[e.name].forEach((e=>n(e))),null===(t=this._listeners["*"])||void 0===t||t.forEach(n)}_setStatus(e,t){this.loadingStatus=e,this._memoCache={},this.$emt({name:"values_updated",status:e,values:t})}_enqueueExposure(e,t,n){!0!==(null==n?void 0:n.disableExposureLog)?this._logger.enqueue(t):this._logger.incrementNonExposureCount(e)}_memoize(e,t){return(n,i)=>{if(this._options.disableEvaluationMemoization)return t(n,i);const s=(0,l.createMemoKey)(e,n,i);return s?(s in this._memoCache||(Object.keys(this._memoCache).length>=3e3&&(this._memoCache={}),this._memoCache[s]=t(n,i)),this._memoCache[s]):t(n,i)}}}},"./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTag=void 0,t.ErrorTag={NetworkError:"NetworkError"}},"./node_modules/@statsig/client-core/src/StatsigDataAdapter.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataAdapterCachePrefix=void 0,t.DataAdapterCachePrefix="statsig.cached"},"./node_modules/@statsig/client-core/src/StatsigEvent.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._createLayerParameterExposure=t._createConfigExposure=t._createGateExposure=t._isExposureEvent=void 0;const n="statsig::config_exposure",i="statsig::gate_exposure",s="statsig::layer_exposure",r=(e,t,n,i,s)=>(n.bootstrapMetadata&&(i.bootstrapMetadata=n.bootstrapMetadata),{eventName:e,user:t,value:null,metadata:o(n,i),secondaryExposures:s,time:Date.now()});t._isExposureEvent=({eventName:e})=>e===i||e===n||e===s,t._createGateExposure=(e,t)=>{var n,s,o;const a={gate:t.name,gateValue:String(t.value),ruleID:t.ruleID};return null!=(null===(n=t.__evaluation)||void 0===n?void 0:n.version)&&(a.configVersion=t.__evaluation.version),r(i,e,t.details,a,null!==(o=null===(s=t.__evaluation)||void 0===s?void 0:s.secondary_exposures)&&void 0!==o?o:[])},t._createConfigExposure=(e,t)=>{var i,s,o,a;const l={config:t.name,ruleID:t.ruleID};return null!=(null===(i=t.__evaluation)||void 0===i?void 0:i.version)&&(l.configVersion=t.__evaluation.version),null!=(null===(s=t.__evaluation)||void 0===s?void 0:s.passed)&&(l.rulePassed=String(t.__evaluation.passed)),r(n,e,t.details,l,null!==(a=null===(o=t.__evaluation)||void 0===o?void 0:o.secondary_exposures)&&void 0!==a?a:[])},t._createLayerParameterExposure=(e,t,n)=>{var i,o,a,l;const c=t.__evaluation,u=!0===(null===(i=null==c?void 0:c.explicit_parameters)||void 0===i?void 0:i.includes(n));let h="",d=null!==(o=null==c?void 0:c.undelegated_secondary_exposures)&&void 0!==o?o:[];u&&(h=null!==(a=c.allocated_experiment_name)&&void 0!==a?a:"",d=c.secondary_exposures);const p={config:t.name,parameterName:n,ruleID:t.ruleID,allocatedExperiment:h,isExplicitParameter:String(u)};return null!=(null===(l=t.__evaluation)||void 0===l?void 0:l.version)&&(p.configVersion=t.__evaluation.version),r(s,e,t.details,p,d)};const o=(e,t)=>(t.reason=e.reason,e.lcut&&(t.lcut=String(e.lcut)),e.receivedAt&&(t.receivedAt=String(e.receivedAt)),t)},"./node_modules/@statsig/client-core/src/StatsigMetadata.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigMetadataProvider=t.SDK_VERSION=void 0,t.SDK_VERSION="3.12.0";let n={sdkVersion:t.SDK_VERSION,sdkType:"js-mono"};t.StatsigMetadataProvider={get:()=>n,add:e=>{n=Object.assign(Object.assign({},n),e)}}},"./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigPlugin.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigTypeFactories.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeTypedGet=t._mergeOverride=t._makeLayer=t._makeExperiment=t._makeDynamicConfig=t._makeFeatureGate=void 0;const i=n("./node_modules/@statsig/client-core/src/Log.js"),s=n("./node_modules/@statsig/client-core/src/TypingUtils.js"),r="default";function o(e,t,n,i){var s;return{name:e,details:t,ruleID:null!==(s=null==n?void 0:n.rule_id)&&void 0!==s?s:r,__evaluation:n,value:i}}function a(e,t,n){var i;const s=null!==(i=null==n?void 0:n.value)&&void 0!==i?i:{};return Object.assign(Object.assign({},o(e,t,n,s)),{get:l(e,null==n?void 0:n.value)})}function l(e,t,n){return(r,o)=>{var a;const l=null!==(a=null==t?void 0:t[r])&&void 0!==a?a:null;return null==l?null!=o?o:null:null==o||(0,s._isTypeMatch)(l,o)?(null==n||n(r),l):(i.Log.warn(`Parameter type mismatch. '${e}.${r}' was found to be type '${typeof l}' but fallback/return type is '${typeof o}'. See https://docs.statsig.com/client/javascript-sdk/#typed-getters`),null!=o?o:null)}}t._makeFeatureGate=function(e,t,n){return o(e,t,n,!0===(null==n?void 0:n.value))},t._makeDynamicConfig=a,t._makeExperiment=function(e,t,n){var i;const s=a(e,t,n);return Object.assign(Object.assign({},s),{groupName:null!==(i=null==n?void 0:n.group_name)&&void 0!==i?i:null})},t._makeLayer=function(e,t,n,i){var s,r;return Object.assign(Object.assign({},o(e,t,n,void 0)),{get:l(e,null==n?void 0:n.value,i),groupName:null!==(s=null==n?void 0:n.group_name)&&void 0!==s?s:null,__value:null!==(r=null==n?void 0:n.value)&&void 0!==r?r:{}})},t._mergeOverride=function(e,t,n,i){return Object.assign(Object.assign(Object.assign({},e),t),{get:l(e.name,n,i)})},t._makeTypedGet=l},"./node_modules/@statsig/client-core/src/StatsigTypes.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},"./node_modules/@statsig/client-core/src/StatsigUpdateDetails.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_DETAIL_ERROR_MESSAGES=t.createUpdateDetails=void 0,t.createUpdateDetails=(e,t,n,i,s,r)=>({duration:n,source:t,success:e,error:i,sourceUrl:s,warnings:r}),t.UPDATE_DETAIL_ERROR_MESSAGES={NO_NETWORK_DATA:"No data was returned from the network. This may be due to a network timeout if a timeout value was specified in the options or ad blocker error."}},"./node_modules/@statsig/client-core/src/StatsigUser.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getFullUserHash=t._normalizeUser=void 0;const i=n("./node_modules/@statsig/client-core/src/Hashing.js"),s=n("./node_modules/@statsig/client-core/src/Log.js");t._normalizeUser=function(e,t,n){try{const i=JSON.parse(JSON.stringify(e));return null!=t&&null!=t.environment?i.statsigEnvironment=t.environment:null!=n&&(i.statsigEnvironment={tier:n}),i}catch(e){return s.Log.error("Failed to JSON.stringify user"),{statsigEnvironment:void 0}}},t._getFullUserHash=function(e){return e?(0,i._DJB2Object)(e):null}},"./node_modules/@statsig/client-core/src/StorageProvider.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._setObjectInStorage=t._getObjectFromStorage=t.Storage=void 0;const i=n("./node_modules/@statsig/client-core/src/Log.js"),s=n("./node_modules/@statsig/client-core/src/SafeJs.js"),r={},o={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"InMemory",getItem:e=>r[e]?r[e]:null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]},getAllKeys:()=>Object.keys(r)};let a=null;try{const e=(0,s._getWindowSafe)();e&&e.localStorage&&"function"==typeof e.localStorage.getItem&&(a={isReady:()=>!0,isReadyResolver:()=>null,getProviderName:()=>"LocalStorage",getItem:t=>e.localStorage.getItem(t),setItem:(t,n)=>e.localStorage.setItem(t,n),removeItem:t=>e.localStorage.removeItem(t),getAllKeys:()=>Object.keys(e.localStorage)})}catch(e){i.Log.warn("Failed to setup localStorageProvider.")}let l=null!=a?a:o,c=l;t.Storage={isReady:()=>c.isReady(),isReadyResolver:()=>c.isReadyResolver(),getProviderName:()=>c.getProviderName(),getItem:e=>function(e){try{return e()}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return t.Storage._setProvider(o),null;throw e}}((()=>c.getItem(e))),setItem:(e,t)=>c.setItem(e,t),removeItem:e=>c.removeItem(e),getAllKeys:()=>c.getAllKeys(),_setProvider:e=>{l=e,c=e},_setDisabled:e=>{c=e?o:l}},t._getObjectFromStorage=function(e){const n=t.Storage.getItem(e);return JSON.parse(null!=n?n:"null")},t._setObjectInStorage=function(e,n){t.Storage.setItem(e,JSON.stringify(n))}},"./node_modules/@statsig/client-core/src/TypedJsonParse.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._typedJsonParse=void 0;const i=n("./node_modules/@statsig/client-core/src/Log.js");t._typedJsonParse=function(e,t,n){try{const n=JSON.parse(e);if(n&&"object"==typeof n&&t in n)return n}catch(e){}return i.Log.error(`Failed to parse ${n}`),null}},"./node_modules/@statsig/client-core/src/TypingUtils.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._isTypeMatch=t._typeOf=void 0,t._typeOf=function(e){return Array.isArray(e)?"array":typeof e},t._isTypeMatch=function(e,t){const n=e=>Array.isArray(e)?"array":typeof e;return n(e)===n(t)}},"./node_modules/@statsig/client-core/src/UUID.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUUID=void 0,t.getUUID=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return`xxxxxxxx-xxxx-4xxx-${"89ab"[Math.floor(4*Math.random())]}xxx-xxxxxxxxxxxx`.replace(/[xy]/g,(n=>{let i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),("x"===n?i:7&i|8).toString(16)}))}},"./node_modules/@statsig/client-core/src/UrlConfiguration.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UrlConfiguration=void 0;const i=n("./node_modules/@statsig/client-core/src/NetworkConfig.js"),s={[i.Endpoint._initialize]:"i",[i.Endpoint._rgstr]:"e",[i.Endpoint._download_config_specs]:"d"};t.UrlConfiguration=class{constructor(e,t,n,r){this.customUrl=null,this.fallbackUrls=null,this.endpoint=e,this.endpointDnsKey=s[e],t&&(this.customUrl=t),!t&&n&&(this.customUrl=n.endsWith("/")?`${n}${e}`:`${n}/${e}`),r&&(this.fallbackUrls=r);const o=i.NetworkDefault[e];this.defaultUrl=`${o}/${e}`}getUrl(){var e;return null!==(e=this.customUrl)&&void 0!==e?e:this.defaultUrl}}},"./node_modules/@statsig/client-core/src/VisibilityObserving.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._notifyVisibilityChanged=t._subscribeToVisiblityChanged=t._isUnloading=t._isCurrentlyVisible=void 0;const i=n("./node_modules/@statsig/client-core/src/SafeJs.js"),s="foreground",r="background",o=[];let a=s,l=!1;t._isCurrentlyVisible=()=>a===s,t._isUnloading=()=>l,t._subscribeToVisiblityChanged=e=>{o.unshift(e)},t._notifyVisibilityChanged=e=>{e!==a&&(a=e,o.forEach((t=>t(e))))},(0,i._addWindowEventListenerSafe)("focus",(()=>{l=!1,(0,t._notifyVisibilityChanged)(s)})),(0,i._addWindowEventListenerSafe)("blur",(()=>(0,t._notifyVisibilityChanged)(r))),(0,i._addWindowEventListenerSafe)("beforeunload",(()=>{l=!0,(0,t._notifyVisibilityChanged)(r)})),(0,i._addDocumentEventListenerSafe)("visibilitychange",(()=>{(0,t._notifyVisibilityChanged)("visible"===document.visibilityState?s:r)}))},"./node_modules/@statsig/client-core/src/index.js":function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Log=t.EventLogger=t.Diagnostics=void 0,n("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js");const r=n("./node_modules/@statsig/client-core/src/Diagnostics.js");Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return r.Diagnostics}});const o=n("./node_modules/@statsig/client-core/src/EventLogger.js");Object.defineProperty(t,"EventLogger",{enumerable:!0,get:function(){return o.EventLogger}});const a=n("./node_modules/@statsig/client-core/src/Log.js");Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return a.Log}});const l=n("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),c=n("./node_modules/@statsig/client-core/src/StorageProvider.js");Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return c.Storage}}),s(n("./node_modules/@statsig/client-core/src/$_StatsigGlobal.js"),t),s(n("./node_modules/@statsig/client-core/src/CacheKey.js"),t),s(n("./node_modules/@statsig/client-core/src/ClientInterfaces.js"),t),s(n("./node_modules/@statsig/client-core/src/DataAdapterCore.js"),t),s(n("./node_modules/@statsig/client-core/src/Diagnostics.js"),t),s(n("./node_modules/@statsig/client-core/src/DownloadConfigSpecsResponse.js"),t),s(n("./node_modules/@statsig/client-core/src/ErrorBoundary.js"),t),s(n("./node_modules/@statsig/client-core/src/EvaluationOptions.js"),t),s(n("./node_modules/@statsig/client-core/src/EvaluationTypes.js"),t),s(n("./node_modules/@statsig/client-core/src/Hashing.js"),t),s(n("./node_modules/@statsig/client-core/src/InitializeResponse.js"),t),s(n("./node_modules/@statsig/client-core/src/Log.js"),t),s(n("./node_modules/@statsig/client-core/src/MemoKey.js"),t),s(n("./node_modules/@statsig/client-core/src/NetworkConfig.js"),t),s(n("./node_modules/@statsig/client-core/src/NetworkCore.js"),t),s(n("./node_modules/@statsig/client-core/src/OverrideAdapter.js"),t),s(n("./node_modules/@statsig/client-core/src/ParamStoreTypes.js"),t),s(n("./node_modules/@statsig/client-core/src/SafeJs.js"),t),s(n("./node_modules/@statsig/client-core/src/SDKType.js"),t),s(n("./node_modules/@statsig/client-core/src/SessionID.js"),t),s(n("./node_modules/@statsig/client-core/src/StableID.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigClientBase.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigClientEventEmitter.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigDataAdapter.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigEvent.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigMetadata.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigOptionsCommon.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigPlugin.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigTypeFactories.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigTypes.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigUser.js"),t),s(n("./node_modules/@statsig/client-core/src/StorageProvider.js"),t),s(n("./node_modules/@statsig/client-core/src/TypedJsonParse.js"),t),s(n("./node_modules/@statsig/client-core/src/TypingUtils.js"),t),s(n("./node_modules/@statsig/client-core/src/UrlConfiguration.js"),t),s(n("./node_modules/@statsig/client-core/src/UUID.js"),t),s(n("./node_modules/@statsig/client-core/src/VisibilityObserving.js"),t),s(n("./node_modules/@statsig/client-core/src/StatsigUpdateDetails.js"),t),s(n("./node_modules/@statsig/client-core/src/SDKFlags.js"),t),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{Log:a.Log,SDK_VERSION:l.SDK_VERSION})},"./node_modules/@statsig/js-client/src/EvaluationResponseDeltas.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._resolveDeltasResponse=void 0;const i=n("./node_modules/@statsig/client-core/src/index.js");function s(e,t){null==e||e.forEach((e=>{delete t[e]}))}t._resolveDeltasResponse=function(e,t){const n=(0,i._typedJsonParse)(t,"checksum","DeltasEvaluationResponse");if(!n)return{hadBadDeltaChecksum:!0};const r=function(e){const t=e;return s(e.deleted_gates,t.feature_gates),delete t.deleted_gates,s(e.deleted_configs,t.dynamic_configs),delete t.deleted_configs,s(e.deleted_layers,t.layer_configs),delete t.deleted_layers,t}(function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{feature_gates:Object.assign(Object.assign({},e.feature_gates),t.feature_gates),layer_configs:Object.assign(Object.assign({},e.layer_configs),t.layer_configs),dynamic_configs:Object.assign(Object.assign({},e.dynamic_configs),t.dynamic_configs)})}(e,n)),o=(0,i._DJB2Object)({feature_gates:r.feature_gates,dynamic_configs:r.dynamic_configs,layer_configs:r.layer_configs},2);return o===n.checksumV2?JSON.stringify(r):{hadBadDeltaChecksum:!0,badChecksum:o,badMergedConfigs:r,badFullResponse:n.deltas_full_response}}},"./node_modules/@statsig/js-client/src/EvaluationStore.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=n("./node_modules/@statsig/client-core/src/index.js");t.default=class{constructor(e){this._sdkKey=e,this._rawValues=null,this._values=null,this._source="Uninitialized",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null,this._warnings=new Set}reset(){this._values=null,this._rawValues=null,this._source="Loading",this._lcut=0,this._receivedAt=0,this._bootstrapMetadata=null}finalize(){this._values||(this._source="NoValues")}getValues(){return this._rawValues?(0,i._typedJsonParse)(this._rawValues,"has_updates","EvaluationStoreValues"):null}setValues(e,t){if(!e)return!1;const n=(0,i._typedJsonParse)(e.data,"has_updates","EvaluationResponse");return null!=n&&(this._source=e.source,!0!==(null==n?void 0:n.has_updates)||(this._rawValues=e.data,this._lcut=n.time,this._receivedAt=e.receivedAt,this._values=n,this._bootstrapMetadata=this._extractBootstrapMetadata(e.source,n),e.source&&n.user&&this._setWarningState(t,n),n.sdk_flags?i.SDKFlags.setFlags(this._sdkKey,n.sdk_flags):i.SDKFlags.setFlags(this._sdkKey,{})),!0)}getWarnings(){if(0!==this._warnings.size)return Array.from(this._warnings)}getGate(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.feature_gates,e)}getConfig(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.dynamic_configs,e)}getLayer(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.layer_configs,e)}getParamStore(e){var t;return this._getDetailedStoreResult(null===(t=this._values)||void 0===t?void 0:t.param_stores,e)}getSource(){return this._source}_extractBootstrapMetadata(e,t){if("Bootstrap"!==e)return null;const n={};return t.user&&(n.user=t.user),t.sdkInfo&&(n.generatorSDKInfo=t.sdkInfo),n.lcut=t.time,n}_getDetailedStoreResult(e,t){let n=null;return e&&(n=e[t]?e[t]:e[(0,i._DJB2)(t)]),{result:n,details:this._getDetails(null==n)}}_setWarningState(e,t){var n;const s=i.StableID.get(this._sdkKey);if((null===(n=e.customIDs)||void 0===n?void 0:n.stableID)===s){if("user"in t){const n=t.user;(0,i._getFullUserHash)(e)!==(0,i._getFullUserHash)(n)&&this._warnings.add("PartialUserMatch")}}else this._warnings.add("StableIDMismatch")}getCurrentSourceDetails(){if("Uninitialized"===this._source||"NoValues"===this._source)return{reason:this._source};const e={reason:this._source,lcut:this._lcut,receivedAt:this._receivedAt};return this._warnings.size>0&&(e.warnings=Array.from(this._warnings)),e}_getDetails(e){var t,n;const i=this.getCurrentSourceDetails();let s=i.reason;const r=null!==(t=i.warnings)&&void 0!==t?t:[];"Bootstrap"===this._source&&r.length>0&&(s+=r[0]),"Uninitialized"!==s&&"NoValues"!==s&&(s=`${s}:${e?"Unrecognized":"Recognized"}`);const o="Bootstrap"===this._source&&null!==(n=this._bootstrapMetadata)&&void 0!==n?n:void 0;return o&&(i.bootstrapMetadata=o),Object.assign(Object.assign({},i),{reason:s})}}},"./node_modules/@statsig/js-client/src/Network.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n("./node_modules/@statsig/client-core/src/index.js"),r=n("./node_modules/@statsig/js-client/src/EvaluationResponseDeltas.js");class o extends s.NetworkCore{constructor(e,t){super(e,t);const n=null==e?void 0:e.networkConfig;this._initializeUrlConfig=new s.UrlConfiguration(s.Endpoint._initialize,null==n?void 0:n.initializeUrl,null==n?void 0:n.api,null==n?void 0:n.initializeFallbackUrls)}fetchEvaluations(e,t,n,r){return i(this,void 0,void 0,(function*(){const i=t?(0,s._typedJsonParse)(t,"has_updates","InitializeResponse"):null;let o={user:r,hash:"djb2",deltasResponseRequested:!1,full_checksum:null};return(null==i?void 0:i.has_updates)&&(o=Object.assign(Object.assign({},o),{sinceTime:i.time,previousDerivedFields:"derived_fields"in i?i.derived_fields:{},deltasResponseRequested:!0,full_checksum:i.full_checksum})),this._fetchEvaluations(e,i,o,n)}))}_fetchEvaluations(e,t,n,s){var o,a;return i(this,void 0,void 0,(function*(){const i=yield this.post({sdkKey:e,urlConfig:this._initializeUrlConfig,data:n,retries:2,isStatsigEncodable:!0,priority:s});if(204===(null==i?void 0:i.code))return'{"has_updates": false}';if(200!==(null==i?void 0:i.code))return null!==(o=null==i?void 0:i.body)&&void 0!==o?o:null;if(!0!==(null==t?void 0:t.has_updates)||!0!==(null===(a=i.body)||void 0===a?void 0:a.includes('"is_delta":true'))||!0!==n.deltasResponseRequested)return i.body;const l=(0,r._resolveDeltasResponse)(t,i.body);return"string"==typeof l?l:this._fetchEvaluations(e,t,Object.assign(Object.assign(Object.assign({},n),l),{deltasResponseRequested:!1}),s)}))}}t.default=o},"./node_modules/@statsig/js-client/src/ParamStoreGetterFactory.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeParamStoreGetter=void 0;const i=n("./node_modules/@statsig/client-core/src/index.js"),s={disableExposureLog:!0};function r(e){return null==e||!1===e.disableExposureLog}function o(e,t){return null!=t&&!(0,i._isTypeMatch)(e,t)}t._makeParamStoreGetter=function(e,t,n){return(a,l)=>{if(null==t)return l;const c=t[a];if(null==c||null!=l&&(0,i._typeOf)(l)!==c.param_type)return l;switch(c.ref_type){case"static":return function(e,t){return e.value}(c);case"gate":return function(e,t,n){return e.getFeatureGate(t.gate_name,r(n)?void 0:s).value?t.pass_value:t.fail_value}(e,c,n);case"dynamic_config":return function(e,t,n,i){const a=e.getDynamicConfig(t.config_name,s).get(t.param_name);return o(a,n)?n:(r(i)&&e.getDynamicConfig(t.config_name),a)}(e,c,l,n);case"experiment":return function(e,t,n,i){const a=e.getExperiment(t.experiment_name,s).get(t.param_name);return o(a,n)?n:(r(i)&&e.getExperiment(t.experiment_name),a)}(e,c,l,n);case"layer":return function(e,t,n,i){const a=e.getLayer(t.layer_name,s).get(t.param_name);return o(a,n)?n:(r(i)&&e.getLayer(t.layer_name).get(t.param_name),a)}(e,c,l,n);default:return l}}}},"./node_modules/@statsig/js-client/src/StatsigClient.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n("./node_modules/@statsig/client-core/src/index.js"),r=n("./node_modules/@statsig/js-client/src/EvaluationStore.js"),o=n("./node_modules/@statsig/js-client/src/Network.js"),a=n("./node_modules/@statsig/js-client/src/ParamStoreGetterFactory.js"),l=n("./node_modules/@statsig/js-client/src/StatsigEvaluationsDataAdapter.js");class c extends s.StatsigClientBase{static instance(e){const t=(0,s._getStatsigGlobal)().instance(e);return t instanceof c?t:(s.Log.warn((0,s._isServerEnv)()?"StatsigClient.instance is not supported in server environments":"Unable to find StatsigClient instance"),new c(null!=e?e:"",{}))}constructor(e,t,n=null){var i,a;s.SDKType._setClientType(e,"javascript-client");const c=new o.default(n,(e=>{this.$emt(e)}));super(e,null!==(i=null==n?void 0:n.dataAdapter)&&void 0!==i?i:new l.StatsigEvaluationsDataAdapter,c,n),this.getFeatureGate=this._memoize(s.MemoPrefix._gate,this._getFeatureGateImpl.bind(this)),this.getDynamicConfig=this._memoize(s.MemoPrefix._dynamicConfig,this._getDynamicConfigImpl.bind(this)),this.getExperiment=this._memoize(s.MemoPrefix._experiment,this._getExperimentImpl.bind(this)),this.getLayer=this._memoize(s.MemoPrefix._layer,this._getLayerImpl.bind(this)),this.getParameterStore=this._memoize(s.MemoPrefix._paramStore,this._getParameterStoreImpl.bind(this)),this._store=new r.default(e),this._network=c,this._user=this._configureUser(t,n);const u=null!==(a=null==n?void 0:n.plugins)&&void 0!==a?a:[];for(const e of u)e.bind(this)}initializeSync(e){var t;return"Uninitialized"!==this.loadingStatus?(0,s.createUpdateDetails)(!0,this._store.getSource(),-1,null,null,["MultipleInitializations",...null!==(t=this._store.getWarnings())&&void 0!==t?t:[]]):(this._logger.start(),this.updateUserSync(this._user,e))}initializeAsync(e){return i(this,void 0,void 0,(function*(){return this._initializePromise||(this._initializePromise=this._initializeAsyncImpl(e)),this._initializePromise}))}updateUserSync(e,t){var n;const i=performance.now(),r=[...null!==(n=this._store.getWarnings())&&void 0!==n?n:[]];this._resetForUser(e);const o=this.dataAdapter.getDataSync(this._user);null==o&&r.push("NoCachedValues"),this._store.setValues(o,this._user),this._finalizeUpdate(o);const a=null==t?void 0:t.disableBackgroundCacheRefresh;return!0===a||null==a&&"Bootstrap"===(null==o?void 0:o.source)||this._runPostUpdate(null!=o?o:null,this._user),(0,s.createUpdateDetails)(!0,this._store.getSource(),performance.now()-i,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),r)}updateUserAsync(e,t){return i(this,void 0,void 0,(function*(){this._resetForUser(e);const n=this._user;s.Diagnostics._markInitOverallStart(this._sdkKey);let i=this.dataAdapter.getDataSync(n);if(this._store.setValues(i,this._user),this._setStatus("Loading",i),i=yield this.dataAdapter.getDataAsync(i,n,t),n!==this._user)return(0,s.createUpdateDetails)(!1,this._store.getSource(),-1,new Error("User changed during update"),this._network.getLastUsedInitUrlAndReset());let r=!1;null!=i&&(s.Diagnostics._markInitProcessStart(this._sdkKey),r=this._store.setValues(i,this._user),s.Diagnostics._markInitProcessEnd(this._sdkKey,{success:r})),this._finalizeUpdate(i),r||(this._errorBoundary.attachErrorIfNoneExists(s.UPDATE_DETAIL_ERROR_MESSAGES.NO_NETWORK_DATA),this.$emt({name:"initialization_failure"})),s.Diagnostics._markInitOverallEnd(this._sdkKey,r,this._store.getCurrentSourceDetails());const o=s.Diagnostics._enqueueDiagnosticsEvent(this._user,this._logger,this._sdkKey,this._options);return(0,s.createUpdateDetails)(r,this._store.getSource(),o,this._errorBoundary.getLastSeenErrorAndReset(),this._network.getLastUsedInitUrlAndReset(),this._store.getWarnings())}))}getContext(){return{sdkKey:this._sdkKey,options:this._options,values:this._store.getValues(),user:JSON.parse(JSON.stringify(this._user)),errorBoundary:this._errorBoundary,session:s.StatsigSession.get(this._sdkKey),stableID:s.StableID.get(this._sdkKey)}}checkGate(e,t){return this.getFeatureGate(e,t).value}logEvent(e,t,n){const i="string"==typeof e?{eventName:e,value:t,metadata:n}:e;this._logger.enqueue(Object.assign(Object.assign({},i),{user:this._user,time:Date.now()}))}_primeReadyRipcord(){this.$on("error",(()=>{"Loading"===this.loadingStatus&&this._finalizeUpdate(null)}))}_initializeAsyncImpl(e){return i(this,void 0,void 0,(function*(){return s.Storage.isReady()||(yield s.Storage.isReadyResolver()),this._logger.start(),this.updateUserAsync(this._user,e)}))}_finalizeUpdate(e){this._store.finalize(),this._setStatus("Ready",e)}_runPostUpdate(e,t){this.dataAdapter.getDataAsync(e,t,{priority:"low"}).catch((e=>{s.Log.error("An error occurred after update.",e)}))}_resetForUser(e){this._logger.reset(),this._store.reset(),this._user=this._configureUser(e,this._options)}_configureUser(e,t){var n;const i=(0,s._normalizeUser)(e,t),r=null===(n=i.customIDs)||void 0===n?void 0:n.stableID;return r&&s.StableID.setOverride(r,this._sdkKey),i}_getFeatureGateImpl(e,t){var n,i;const{result:r,details:o}=this._store.getGate(e),a=(0,s._makeFeatureGate)(e,o,r),l=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getGateOverride)||void 0===i?void 0:i.call(n,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,s._createGateExposure)(this._user,c),t),this.$emt({name:"gate_evaluation",gate:c}),c}_getDynamicConfigImpl(e,t){var n,i;const{result:r,details:o}=this._store.getConfig(e),a=(0,s._makeDynamicConfig)(e,o,r),l=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getDynamicConfigOverride)||void 0===i?void 0:i.call(n,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,s._createConfigExposure)(this._user,c),t),this.$emt({name:"dynamic_config_evaluation",dynamicConfig:c}),c}_getExperimentImpl(e,t){var n,i;const{result:r,details:o}=this._store.getConfig(e),a=(0,s._makeExperiment)(e,o,r),l=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getExperimentOverride)||void 0===i?void 0:i.call(n,a,this._user,t),c=null!=l?l:a;return this._enqueueExposure(e,(0,s._createConfigExposure)(this._user,c),t),this.$emt({name:"experiment_evaluation",experiment:c}),c}_getLayerImpl(e,t){var n,i,r;const{result:o,details:a}=this._store.getLayer(e),l=(0,s._makeLayer)(e,a,o),c=null===(i=null===(n=this.overrideAdapter)||void 0===n?void 0:n.getLayerOverride)||void 0===i?void 0:i.call(n,l,this._user,t);(null==t?void 0:t.disableExposureLog)&&this._logger.incrementNonExposureCount(e);const u=(0,s._mergeOverride)(l,c,null!==(r=null==c?void 0:c.__value)&&void 0!==r?r:l.__value,(n=>{(null==t?void 0:t.disableExposureLog)||this._enqueueExposure(e,(0,s._createLayerParameterExposure)(this._user,u,n),t)}));return this.$emt({name:"layer_evaluation",layer:u}),u}_getParameterStoreImpl(e,t){const{result:n,details:i}=this._store.getParamStore(e);return this._logger.incrementNonExposureCount(e),{name:e,details:i,__configuration:n,get:(0,a._makeParamStoreGetter)(this,n,t)}}}t.default=c},"./node_modules/@statsig/js-client/src/StatsigEvaluationsDataAdapter.js":function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigEvaluationsDataAdapter=void 0;const s=n("./node_modules/@statsig/client-core/src/index.js"),r=n("./node_modules/@statsig/js-client/src/Network.js");class o extends s.DataAdapterCore{constructor(){super("EvaluationsDataAdapter","evaluations"),this._network=null,this._options=null}attach(e,t){super.attach(e,t),this._network=new r.default(null!=t?t:{})}getDataAsync(e,t,n){return this._getDataAsyncImpl(e,(0,s._normalizeUser)(t,this._options),n)}prefetchData(e,t){return this._prefetchDataImpl(e,t)}setData(e){const t=(0,s._typedJsonParse)(e,"has_updates","data");t&&"user"in t?super.setData(e,t.user):s.Log.error("StatsigUser not found. You may be using an older server SDK version. Please upgrade your SDK or use setDataLegacy.")}setDataLegacy(e,t){super.setData(e,t)}_fetchFromNetwork(e,t,n){var s;return i(this,void 0,void 0,(function*(){const i=yield null===(s=this._network)||void 0===s?void 0:s.fetchEvaluations(this._getSdkKey(),e,null==n?void 0:n.priority,t);return null!=i?i:null}))}_getCacheKey(e){var t;const n=(0,s._getStorageKey)(this._getSdkKey(),e,null===(t=this._options)||void 0===t?void 0:t.customUserCacheKeyFunc);return`${s.DataAdapterCachePrefix}.${this._cacheSuffix}.${n}`}_isCachedResultValidFor204(e,t){return null!=e.fullUserHash&&e.fullUserHash===(0,s._getFullUserHash)(t)}}t.StatsigEvaluationsDataAdapter=o},"./node_modules/@statsig/js-client/src/index.js":function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigClient=void 0;const r=n("./node_modules/@statsig/js-client/src/StatsigClient.js");t.StatsigClient=r.default,s(n("./node_modules/@statsig/client-core/src/index.js"),t),__STATSIG__=Object.assign(Object.assign({},null!==__STATSIG__&&void 0!==__STATSIG__?__STATSIG__:{}),{StatsigClient:r.default}),t.default=__STATSIG__},"./src/services/feature-flag/feature-flag-service.ts":(e,t,n)=>{n.r(t),n.d(t,{FeatureFlagsService:()=>a});var i=n("./node_modules/@statsig/js-client/src/index.js"),s=n("./src/utils/storage/local-storage.ts"),r=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},o=function(e,t){var n,i,s,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((s=(s=r.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},a=function(){function e(t){var n;if(this.options=t,this.storage=new s.LocalStorageCache("CRFeatureFlags"),e.instance)return e.instance;this.statsigClient=new i.StatsigClient("client-SSmY5k5Cs39G7II74NdWqPfv5hQzrFiUqCc3C1IU9na",{userID:(null===(n=null==t?void 0:t.metaData)||void 0===n?void 0:n.userId)||null}),e.instance=this}return e.prototype.initialize=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.statsigClient.initializeAsync()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.loadFeatures=function(e){var t=this;e.forEach((function(e){t.storage.set(e,t.statsigClient.checkGate(e))}))},e.prototype.isFeatureEnabled=function(e){if(this.storage.isSet(e))return this.storage.get(e);var t=this.statsigClient.checkGate(e);return this.storage.set(e,t),t},e.prototype.getExperiment=function(e,t){var n;return void 0===t&&(t=[]),this.storage.isSet(e)?n=this.storage.get(e):(n=this.statsigClient.getLayer(e),this.storage.set(e,n)),t.length?t.map((function(e){return n.get(e)})):n},e}()},"./src/utils/storage/local-storage.ts":(e,t,n)=>{n.r(t),n.d(t,{LocalStorageCache:()=>i});var i=function(){function e(e){void 0===e&&(e="APP"),this.namespace=e}return e.prototype.clear=function(){localStorage.removeItem(this.namespace)},e.prototype.get=function(e){return this.getStorage()[e]},e.prototype.remove=function(e){var t=this.getStorage();t[e]=void 0,delete t[e],this.save(t)},e.prototype.isSet=function(e){return void 0!==this.getStorage()[e]},e.prototype.set=function(e,t){var n=this.getStorage();n[e]=t,this.save(n)},e.prototype.getStorage=function(){var e=localStorage.getItem(this.namespace);return e?this.deserialize(e):{}},e.prototype.serialize=function(e){return JSON.stringify(e)},e.prototype.deserialize=function(e){return JSON.parse(e)},e.prototype.save=function(e){localStorage.setItem(this.namespace,this.serialize(e))},e}()}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{FeatureFlagsService:()=>e.FeatureFlagsService});var e=n("./src/services/feature-flag/feature-flag-service.ts")})(),i})(),e.exports=t()},52:function(e){var t;t=()=>(()=>{"use strict";var e=[,(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var i,s=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,n,s=e;function r(){function e(e){const r=i;n=t=0,i=new Map,r.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),this.ob(),s&&s.Tb()}let t=0,n=0,i=new Map,s=null,r=null;this.requestAnimationFrame=function(s){t||(t=requestAnimationFrame(e.bind(this)));const r=++n;return i.set(r,s),r},this.cancelAnimationFrame=function(e){i.delete(e),t&&0==i.size&&(cancelAnimationFrame(t),t=0)},this.Rb=function(e){r&&(document.body.remove(r),r=null),e||(r=document.createElement("div"),r.style.backgroundColor="black",r.style.position="fixed",r.style.right=0,r.style.top=0,r.style.color="white",r.style.padding="4px",r.innerHTML="RIVE FPS",e=function(e){r.innerHTML="RIVE FPS "+e.toFixed(1)},document.body.appendChild(r)),s=new function(){let t=0,n=0;this.Tb=function(){var i=performance.now();n?(++t,1e3<(i-=n)&&(e(1e3*t/i),t=n=0)):(n=i,t=0)}}},this.Ob=function(){r&&(document.body.remove(r),r=null),s=null},this.ob=function(){}}function o(e){console.assert(!0);const t=new Map;let n=-1/0;this.push=function(i){return i=i+((1<<e)-1)>>e,t.has(i)&&clearTimeout(t.get(i)),t.set(i,setTimeout((function(){t.delete(i),0==t.length?n=-1/0:i==n&&(n=Math.max(...t.keys()),console.assert(n<i))}),1e3)),n=Math.max(i,n),n<<e}}s.ready=new Promise(((e,i)=>{t=e,n=i}));const a=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){a&&a();let e=s.decodeAudio;s.decodeAudio=function(t,n){n(t=e(t))};let t=s.decodeFont;s.decodeFont=function(e,n){n(e=t(e))};const n=s.FileAssetLoader;s.ptrToAsset=e=>{let t=s.ptrToFileAsset(e);return t.isImage?s.ptrToImageAsset(e):t.isFont?s.ptrToFontAsset(e):t.isAudio?s.ptrToAudioAsset(e):t},s.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:e}){this.__parent.__construct.call(this),this.Gb=e},loadContents:function(e,t){return e=s.ptrToAsset(e),this.Gb(e,t)}}),s.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(e){let t=s.ptrToAsset(e);return""!==(e=t.cdnUuid)&&(n=t.cdnBaseUrl+"/"+e,(i=new XMLHttpRequest).responseType="arraybuffer",i.onreadystatechange=function(){4==i.readyState&&200==i.status&&(e=>{t.decode(new Uint8Array(e.response))})(i)},i.open("GET",n,!0),i.send(null),!0);var n,i}}),s.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(e){this.kb.push(e)},loadContents:function(e,t){for(let n of this.kb)if(n.loadContents(e,t))return!0;return!1}})};const l="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),c=new function(){function e(){if(!t){var e=document.createElement("canvas"),o={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let a;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(a=e.getContext("webgl",o),n=1,!a)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(a=e.getContext("webgl2",o))n=2;else{if(!(a=e.getContext("webgl",o)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;n=1}function l(e,t,n){if(t=a.createShader(t),a.shaderSource(t,n),a.compileShader(t),0<((n=a.getShaderInfoLog(t))||"").length)throw n;a.attachShader(e,t)}if(a=new Proxy(a,{get:(e,t)=>e.isContextLost()?(c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",t),c=!0),"function"==typeof e[t]?function(){}:void 0):"function"==typeof e[t]?function(...n){return e[t].apply(e,n)}:e[t],set(e,t,n){if(!e.isContextLost())return e[t]=n,!0;c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+t),c=!0)}}),i=Math.min(a.getParameter(a.MAX_RENDERBUFFER_SIZE),a.getParameter(a.MAX_TEXTURE_SIZE)),l(e=a.createProgram(),a.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),l(e,a.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),a.bindAttribLocation(e,0,"vertex"),a.bindAttribLocation(e,1,"uv"),a.linkProgram(e),0<((o=a.getProgramInfoLog(e))||"").trim().length)throw o;s=a.getUniformLocation(e,"mat"),r=a.getUniformLocation(e,"translate"),a.useProgram(e),a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.enableVertexAttribArray(0),a.enableVertexAttribArray(1),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,a.createBuffer()),a.uniform1i(a.getUniformLocation(e,"image"),0),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=a}return!0}let t=null,n=0,i=0,s=null,r=null,a=0,l=0,c=!1;e(),this.hc=function(){return e(),i},this.Mb=function(e){t.deleteTexture&&t.deleteTexture(e)},this.Lb=function(i){if(!e())return null;const s=t.createTexture();return s?(t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),2==n?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),s):null};const u=new o(8),h=new o(8),d=new o(10),p=new o(10);this.Qb=function(n,i,o,c,m){if(e()){var g=u.push(n),f=h.push(i);if(t.canvas){for(var v of(t.canvas.width==g&&t.canvas.height==f||(t.canvas.width=g,t.canvas.height=f),t.viewport(0,f-i,n,i),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),o.sort(((e,t)=>t.wb-e.wb)),g=d.push(c),a!=g&&(t.bufferData(t.ARRAY_BUFFER,8*g,t.DYNAMIC_DRAW),a=g),g=0,o))t.bufferSubData(t.ARRAY_BUFFER,g,v.Ta),g+=4*v.Ta.length;for(var b of(console.assert(g==4*c),o))t.bufferSubData(t.ARRAY_BUFFER,g,b.Db),g+=4*b.Db.length;for(var y of(console.assert(g==8*c),g=p.push(m),l!=g&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*g,t.DYNAMIC_DRAW),l=g),v=0,o))t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,v,y.indices),v+=2*y.indices.length;console.assert(v==2*m),y=0,b=!0,g=v=0;for(const e of o){e.image.Ka!=y&&(t.bindTexture(t.TEXTURE_2D,e.image.Ja||null),y=e.image.Ka),e.mc?(t.scissor(e.Ya,f-e.Za-e.jb,e.Ac,e.jb),b=!0):b&&(t.scissor(0,f-i,n,i),b=!1),o=2/n;const a=-2/i;t.uniform4f(s,e.ha[0]*o*e.Ba,e.ha[1]*a*e.Ca,e.ha[2]*o*e.Ba,e.ha[3]*a*e.Ca),t.uniform2f(r,e.ha[4]*o*e.Ba+o*(e.Ya-e.ic*e.Ba)-1,e.ha[5]*a*e.Ca+a*(e.Za-e.jc*e.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,g),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,g+4*c),t.drawElements(t.TRIANGLES,e.indices.length,t.UNSIGNED_SHORT,v),g+=4*e.Ta.length,v+=2*e.indices.length}console.assert(g==4*c),console.assert(v==2*m)}}},this.canvas=function(){return e()&&t.canvas}},u=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){function e(e){switch(e){case m.srcOver:return"source-over";case m.screen:return"screen";case m.overlay:return"overlay";case m.darken:return"darken";case m.lighten:return"lighten";case m.colorDodge:return"color-dodge";case m.colorBurn:return"color-burn";case m.hardLight:return"hard-light";case m.softLight:return"soft-light";case m.difference:return"difference";case m.exclusion:return"exclusion";case m.multiply:return"multiply";case m.hue:return"hue";case m.saturation:return"saturation";case m.color:return"color";case m.luminosity:return"luminosity"}}function t(e){return"rgba("+((16711680&e)>>>16)+","+((65280&e)>>>8)+","+((255&e)>>>0)+","+((4278190080&e)>>>24)/255+")"}function n(){0<T.length&&(c.Qb(E.drawWidth(),E.drawHeight(),T,x,I),T=[],I=x=0,E.reset(512,512));for(const e of S){for(const t of e.H)t();e.H=[]}S.clear()}u&&u();var i=s.RenderPaintStyle;const o=s.RenderPath,a=s.RenderPaint,h=s.Renderer,d=s.StrokeCap,p=s.StrokeJoin,m=s.BlendMode,g=i.fill,f=i.stroke,v=s.FillRule.evenOdd;let b=1;var y=s.RenderImage.extend("CanvasRenderImage",{__construct:function({la:e,xa:t}={}){this.__parent.__construct.call(this),this.Ka=b,b=b+1&2147483647||1,this.la=e,this.xa=t},__destruct:function(){this.Ja&&(c.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(e){var t=this;t.xa&&t.xa(t);var n=new Image;t.Wa=URL.createObjectURL(new Blob([e],{type:"image/png"})),n.onload=function(){t.Fb=n,t.Ja=c.Lb(n),t.size(n.width,n.height),t.la&&t.la(t)},n.src=t.Wa}}),_=o.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(e,t,n,i,s,r,o){var a=this.T,l=a.addPath;e=e.T;const c=new DOMMatrix;c.a=t,c.b=n,c.c=i,c.d=s,c.e=r,c.f=o,l.call(a,e,c)},fillRule:function(e){this.Va=e},moveTo:function(e,t){this.T.moveTo(e,t)},lineTo:function(e,t){this.T.lineTo(e,t)},cubicTo:function(e,t,n,i,s,r){this.T.bezierCurveTo(e,t,n,i,s,r)},close:function(){this.T.closePath()}}),w=a.extend("CanvasRenderPaint",{color:function(e){this.Xa=t(e)},thickness:function(e){this.Ib=e},join:function(e){switch(e){case p.miter:this.Ia="miter";break;case p.round:this.Ia="round";break;case p.bevel:this.Ia="bevel"}},cap:function(e){switch(e){case d.butt:this.Ha="butt";break;case d.round:this.Ha="round";break;case d.square:this.Ha="square"}},style:function(e){this.Hb=e},blendMode:function(t){this.Eb=e(t)},clearGradient:function(){this.ja=null},linearGradient:function(e,t,n,i){this.ja={yb:e,zb:t,bb:n,cb:i,Ra:[]}},radialGradient:function(e,t,n,i){this.ja={yb:e,zb:t,bb:n,cb:i,Ra:[],ec:!0}},addStop:function(e,t){this.ja.Ra.push({color:e,stop:t})},completeGradient:function(){},draw:function(e,n,i){let s=this.Hb;var r=this.Xa,o=this.ja;if(e.globalCompositeOperation=this.Eb,null!=o){r=o.yb;var a=o.zb;const n=o.bb;var l=o.cb;const i=o.Ra;o.ec?(o=n-r,l-=a,r=e.createRadialGradient(r,a,0,r,a,Math.sqrt(o*o+l*l))):r=e.createLinearGradient(r,a,n,l);for(let e=0,n=i.length;e<n;e++)a=i[e],r.addColorStop(a.stop,t(a.color));this.Xa=r,this.ja=null}switch(s){case f:e.strokeStyle=r,e.lineWidth=this.Ib,e.lineCap=this.Ha,e.lineJoin=this.Ia,e.stroke(n);break;case g:e.fillStyle=r,e.fill(n,i)}}});const S=new Set;let E=null,T=[],x=0,I=0;var C=s.CanvasRenderer=h.extend("Renderer",{__construct:function(e){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=e.getContext("2d"),this.Ua=e,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const e=this.S.length-6;if(6>e)throw"restore() called without matching save().";this.S.splice(e),this.H.push(this.C.restore.bind(this.C))},transform:function(e,t,n,i,s,r){const o=this.S,a=o.length-6;o.splice(a,6,o[a]*e+o[a+2]*t,o[a+1]*e+o[a+3]*t,o[a]*n+o[a+2]*i,o[a+1]*n+o[a+3]*i,o[a]*s+o[a+2]*r+o[a+4],o[a+1]*s+o[a+3]*r+o[a+5]),this.H.push(this.C.transform.bind(this.C,e,t,n,i,s,r))},rotate:function(e){const t=Math.sin(e);e=Math.cos(e),this.transform(e,t,-t,e,0,0)},_drawPath:function(e,t){this.H.push(t.draw.bind(t,this.C,e.T,e.Va===v?"evenodd":"nonzero"))},_drawRiveImage:function(t,n,i){var s=t.Fb;if(s){var r=this.C,o=e(n);this.H.push((function(){r.globalCompositeOperation=o,r.globalAlpha=i,r.drawImage(s,0,0),r.globalAlpha=1}))}},_getMatrix:function(e){const t=this.S,n=t.length-6;for(let i=0;6>i;++i)e[i]=t[n+i]},_drawImageMesh:function(t,i,r,o,a,l,u,h,d,p){var m=this.C.canvas.width,g=this.C.canvas.height;const f=d-u,v=p-h;u=Math.max(u,0),h=Math.max(h,0),d=Math.min(d,m),p=Math.min(p,g);const b=d-u,y=p-h;if(console.assert(b<=Math.min(f,m)),console.assert(y<=Math.min(v,g)),!(0>=b||0>=y)){d=b<f||y<v,m=p=1;var _=Math.ceil(b*p),w=Math.ceil(y*m);g=c.hc(),_>g&&(p*=g/_,_=g),w>g&&(m*=g/w,w=g),E||(E=new s.DynamicRectanizer(g),E.reset(512,512)),0>(g=E.addRect(_,w))&&(n(),S.add(this),g=E.addRect(_,w),console.assert(0<=g));var C=65535&g,A=g>>16;T.push({ha:this.S.slice(this.S.length-6),image:t,Ya:C,Za:A,ic:u,jc:h,Ac:_,jb:w,Ba:p,Ca:m,Ta:new Float32Array(o),Db:new Float32Array(a),indices:new Uint16Array(l),mc:d,wb:t.Ka<<1|(d?1:0)}),x+=o.length,I+=l.length;var k=this.C,P=e(i);this.H.push((function(){k.save(),k.resetTransform(),k.globalCompositeOperation=P,k.globalAlpha=r;const e=c.canvas();e&&k.drawImage(e,C,A,_,w,u,h,b,y),k.restore()}))}},_clipPath:function(e){this.H.push(this.C.clip.bind(this.C,e.T,e.Va===v?"evenodd":"nonzero"))},clear:function(){S.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(e,t){this.transform(1,0,0,1,e,t)}});s.makeRenderer=function(e){const t=new C(e),n=t.C;return new Proxy(t,{get(e,i){if("function"==typeof e[i])return function(...t){return e[i].apply(e,t)};if("function"==typeof n[i]){if(-1<l.indexOf(i))throw Error("RiveException: Method call to '"+i+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...e){t.H.push(n[i].bind(n,...e))}}return e[i]},set(e,i,s){if(i in n)return t.H.push((()=>{n[i]=s})),!0}})},s.decodeImage=function(e,t){new y({la:t}).decode(e)},s.renderFactory={makeRenderPaint:function(){return new w},makeRenderPath:function(){return new _},makeRenderImage:function(){let e=k;return new y({xa:()=>{e.total++},la:()=>{if(e.loaded++,e.loaded===e.total){const t=e.ready;t&&(t(),e.ready=null)}}})}};let A=s.load,k=null;s.load=function(e,t,n=!0){const i=new s.FallbackFileAssetLoader;return void 0!==t&&i.addLoader(t),n&&(t=new s.CDNFileAssetLoader,i.addLoader(t)),new Promise((function(t){let n=null;k={total:0,loaded:0,ready:function(){t(n)}},n=A(e,i),0==k.total&&t(n)}))},i=new r,s.requestAnimationFrame=i.requestAnimationFrame.bind(i),s.cancelAnimationFrame=i.cancelAnimationFrame.bind(i),s.enableFPSCounter=i.Rb.bind(i),s.disableFPSCounter=i.Ob,i.ob=n,s.resolveAnimationFrame=n,s.cleanup=function(){E&&E.delete()}};var h,d,p=Object.assign({},s),m="./this.program",g="object"==typeof window,f="function"==typeof importScripts,v="";(g||f)&&(f?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),i&&(v=i),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",f&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=(e,t,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?t(i.response):n()},i.onerror=n,i.send(null)});var b,y=s.print||console.log.bind(console),_=s.printErr||console.error.bind(console);Object.assign(s,p),p=null,s.thisProgram&&(m=s.thisProgram),s.wasmBinary&&(b=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&V("no native wasm support detected");var w,S,E,T,x,I,C,A,k,P,L=!1;function D(){var e=w.buffer;s.HEAP8=E=new Int8Array(e),s.HEAP16=x=new Int16Array(e),s.HEAP32=C=new Int32Array(e),s.HEAPU8=T=new Uint8Array(e),s.HEAPU16=I=new Uint16Array(e),s.HEAPU32=A=new Uint32Array(e),s.HEAPF32=k=new Float32Array(e),s.HEAPF64=P=new Float64Array(e)}var j,M=[],B=[],O=[];function N(){var e=s.preRun.shift();M.unshift(e)}var R,z=0,F=null,U=null;function V(e){throw s.onAbort&&s.onAbort(e),_(e="Aborted("+e+")"),L=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function $(e){return e.startsWith("data:application/octet-stream;base64,")}if(!$(R="canvas_advanced.wasm")){var G=R;R=s.locateFile?s.locateFile(G,v):v+G}function W(e){if(e==R&&b)return new Uint8Array(b);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}function H(e,t,n){return function(e){if(!b&&(g||f)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>W(e)));if(h)return new Promise(((t,n)=>{h(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>W(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{_("failed to asynchronously prepare wasm: "+e),V(e)}))}var K,X,Y={437756:(e,t,n,i,s)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=i,window.h.ga.xb=s;let r=window.h;r.D=[],r.yc=function(e){for(var t=0;t<r.D.length;++t)if(null==r.D[t])return r.D[t]=e,t;return r.D.push(e),r.D.length-1},r.Cb=function(e){for(r.D[e]=null;0<r.D.length&&null==r.D[r.D.length-1];)r.D.pop()},r.Sc=function(e){for(var t=0;t<r.D.length;++t)if(r.D[t]==e)return r.Cb(t)},r.ra=function(e){return r.D[e]},r.Bb=["touchend","click"],r.unlock=function(){for(var e=0;e<r.D.length;++e){var t=r.D[e];null!=t&&null!=t.J&&t.state===r.ga.xb&&t.J.resume().then((()=>{Pn(t.pb)}),(e=>{console.error("Failed to resume audiocontext",e)}))}r.Bb.map((function(e){document.removeEventListener(e,r.unlock,!0)}))},r.Bb.map((function(e){document.addEventListener(e,r.unlock,!0)}))}return window.h.Aa+=1,1},439934:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},440098:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,440202:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch(e){return 0}},440373:(e,t,n,i,s,r)=>{if(void 0===window.h)return-1;var o={},a={};return e==window.h.I.ya&&0!=n&&(a.sampleRate=n),o.J=new(window.AudioContext||window.webkitAudioContext)(a),o.J.suspend(),o.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),o.Z=o.J.createScriptProcessor(i,n,t),o.Z.onaudioprocess=function(n){if(null!=o.sa&&0!=o.sa.length||(o.sa=new Float32Array(k.buffer,s,i*t)),e==window.h.I.capture||e==window.h.I.La){for(var a=0;a<t;a+=1)for(var l=n.inputBuffer.getChannelData(a),c=o.sa,u=0;u<i;u+=1)c[u*t+a]=l[u];Dn(r,i,s)}if(e==window.h.I.ya||e==window.h.I.La)for(jn(r,i,s),a=0;a<n.outputBuffer.numberOfChannels;++a)for(l=n.outputBuffer.getChannelData(a),c=o.sa,u=0;u<i;u+=1)l[u]=c[u*t+a];else for(a=0;a<n.outputBuffer.numberOfChannels;++a)n.outputBuffer.getChannelData(a).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){o.Da=o.J.createMediaStreamSource(e),o.Da.connect(o.Z),o.Z.connect(o.J.destination)})).catch((function(e){console.log("Failed to get user media: "+e)})),e==window.h.I.ya&&o.Z.connect(o.J.destination),o.pb=r,window.h.yc(o)},443250:e=>window.h.ra(e).J.sampleRate,443323:e=>{void 0!==(e=window.h.ra(e)).Z&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),void 0!==e.Da&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},443723:e=>{window.h.Cb(e)},443773:e=>{(e=window.h.ra(e)).J.resume(),e.state=window.h.ga.xb},443912:e=>{(e=window.h.ra(e)).J.suspend(),e.state=window.h.ga.stopped}},q=e=>{for(;0<e.length;)e.shift()(s)},J=(e,t)=>{for(var n=0,i=e.length-1;0<=i;i--){var s=e[i];"."===s?e.splice(i,1):".."===s?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Q=e=>{var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=J(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},Z=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ee=e=>{if("/"===e)return"/";var t=(e=(e=Q(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},te=e=>(te=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);V("initRandomDevice")})())(e);function ne(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=J(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}var ie="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,se=(e,t,n)=>{var i=t+n;for(n=t;e[n]&&!(n>=i);)++n;if(16<n-t&&e.buffer&&ie)return ie.decode(e.subarray(t,n));for(i="";t<n;){var s=e[t++];if(128&s){var r=63&e[t++];if(192==(224&s))i+=String.fromCharCode((31&s)<<6|r);else{var o=63&e[t++];65536>(s=224==(240&s)?(15&s)<<12|r<<6|o:(7&s)<<18|r<<12|o<<6|63&e[t++])?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else i+=String.fromCharCode(s)}return i},re=[],oe=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);127>=i?t++:2047>=i?t+=2:55296<=i&&57343>=i?(t+=4,++n):t+=3}return t},ae=(e,t,n,i)=>{if(!(0<i))return 0;var s=n;i=n+i-1;for(var r=0;r<e.length;++r){var o=e.charCodeAt(r);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++r)),127>=o){if(n>=i)break;t[n++]=o}else{if(2047>=o){if(n+1>=i)break;t[n++]=192|o>>6}else{if(65535>=o){if(n+2>=i)break;t[n++]=224|o>>12}else{if(n+3>=i)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63}t[n++]=128|o>>6&63}t[n++]=128|63&o}}return t[n]=0,n-s};function le(e,t){var n=Array(oe(e)+1);return e=ae(e,n,0,n.length),t&&(n.length=e),n}var ce=[];function ue(e,t){ce[e]={input:[],F:[],V:t},ze(e,he)}var he={open:function(e){var t=ce[e.node.za];if(!t)throw new Ie(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,i){if(!e.s||!e.s.V.ib)throw new Ie(60);for(var s=0,r=0;r<i;r++){try{var o=e.s.V.ib(e.s)}catch(e){throw new Ie(29)}if(void 0===o&&0===s)throw new Ie(6);if(null==o)break;s++,t[n+r]=o}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,i){if(!e.s||!e.s.V.Oa)throw new Ie(60);try{for(var s=0;s<i;s++)e.s.V.Oa(e.s,t[n+s])}catch(e){throw new Ie(29)}return i&&(e.node.timestamp=Date.now()),s}},de={ib:function(){e:{if(!re.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e){e=null;break e}re=le(e,!0)}e=re.shift()}return e},Oa:function(e,t){null===t||10===t?(y(se(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(y(se(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},pe={Oa:function(e,t){null===t||10===t?(_(se(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(_(se(e.F,0)),e.F=[])}};function me(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var ge,fe,ve,be,ye={O:null,U:()=>ye.createNode(null,"/",16895,0),createNode(e,t,n,i){if(24576==(61440&n)||4096==(61440&n))throw new Ie(63);return ye.O||(ye.O={dir:{node:{Y:ye.l.Y,P:ye.l.P,ka:ye.l.ka,va:ye.l.va,ub:ye.l.ub,Ab:ye.l.Ab,vb:ye.l.vb,sb:ye.l.sb,Ea:ye.l.Ea},stream:{ba:ye.m.ba}},file:{node:{Y:ye.l.Y,P:ye.l.P},stream:{ba:ye.m.ba,read:ye.m.read,write:ye.m.write,pa:ye.m.pa,lb:ye.m.lb,nb:ye.m.nb}},link:{node:{Y:ye.l.Y,P:ye.l.P,ma:ye.l.ma},stream:{}},$a:{node:{Y:ye.l.Y,P:ye.l.P},stream:Re}}),16384==(61440&(n=De(e,t,n,i)).mode)?(n.l=ye.O.dir.node,n.m=ye.O.dir.stream,n.j={}):32768==(61440&n.mode)?(n.l=ye.O.file.node,n.m=ye.O.file.stream,n.v=0,n.j=null):40960==(61440&n.mode)?(n.l=ye.O.link.node,n.m=ye.O.link.stream):8192==(61440&n.mode)&&(n.l=ye.O.$a.node,n.m=ye.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc:e=>e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0),l:{Y(e){var t={};return t.Jc=8192==(61440&e.mode)?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.v:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&(t=t.size,e.v!=t))if(0==t)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Ce[44]},va:(e,t,n,i)=>ye.createNode(e,t,n,i),ub(e,t,n){if(16384==(61440&e.mode)){try{var i=Le(t,n)}catch(e){}if(i)for(var s in i.j)throw new Ie(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n,i=Le(e,t);for(n in i.j)throw new Ie(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t,n=[".",".."];for(t in e.j)e.j.hasOwnProperty(t)&&n.push(t);return n},Ea:(e,t,n)=>((e=ye.createNode(e,t,41471,0)).link=n,e),ma(e){if(40960!=(61440&e.mode))throw new Ie(28);return e.link}},m:{read(e,t,n,i,s){var r=e.node.j;if(s>=e.node.v)return 0;if(8<(e=Math.min(e.node.v-s,i))&&r.subarray)t.set(r.subarray(s,s+e),n);else for(i=0;i<e;i++)t[n+i]=r[s+i];return e},write(e,t,n,i,s,r){if(t.buffer===E.buffer&&(r=!1),!i)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(r)return e.j=t.subarray(n,n+i),e.v=i;if(0===e.v&&0===s)return e.j=t.slice(n,n+i),e.v=i;if(s+i<=e.v)return e.j.set(t.subarray(n,n+i),s),i}if(me(e,s+i),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+i),s);else for(r=0;r<i;r++)e.j[s+r]=t[n+r];return e.v=Math.max(e.v,s+i),i},ba(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.v),0>t)throw new Ie(28);return t},pa(e,t,n){me(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,i,s){if(32768!=(61440&e.node.mode))throw new Ie(43);if(e=e.node.j,2&s||e.buffer!==E.buffer){if((0<n||n+t<e.length)&&(e=e.subarray?e.subarray(n,n+t):Array.prototype.slice.call(e,n,n+t)),n=!0,V(),!(t=void 0))throw new Ie(48);E.set(e,t)}else n=!1,t=e.byteOffset;return{o:t,M:n}},nb:(e,t,n,i)=>(ye.m.write(e,t,0,i,n,!1),0)}},_e=null,we={},Se=[],Ee=1,Te=null,xe=!0,Ie=null,Ce={},Ae=(e,t={})=>{if(!(e=ne(e)))return{path:"",node:null};if(8<(t=Object.assign({gb:!0,Qa:0},t)).Qa)throw new Ie(32);e=e.split("/").filter((e=>!!e));for(var n=_e,i="/",s=0;s<e.length;s++){var r=s===e.length-1;if(r&&t.parent)break;if(n=Le(n,e[s]),i=Q(i+"/"+e[s]),n.wa&&(!r||r&&t.gb)&&(n=n.wa.root),!r||t.fb)for(r=0;40960==(61440&n.mode);)if(n=Ge(i),i=ne(Z(i),n),n=Ae(i,{Qa:t.Qa+1}).node,40<r++)throw new Ie(32)}return{path:i,node:n}},ke=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?"/"!==e[e.length-1]?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},Pe=(e,t)=>{for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i)|0;return(e+n>>>0)%Te.length},Le=(e,t)=>{var n;if(n=(n=Me(e,"x"))?n:e.l.ka?0:2)throw new Ie(n,e);for(n=Te[Pe(e.id,t)];n;n=n.lc){var i=n.name;if(n.parent.id===e.id&&i===t)return n}return e.l.ka(e,t)},De=(e,t,n,i)=>(e=new Tn(e,t,n,i),t=Pe(e.parent.id,e.name),e.lc=Te[t],Te[t]=e),je=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},Me=(e,t)=>xe?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,Be=(e,t)=>{try{return Le(e,t),20}catch(e){}return Me(e,"wx")},Oe=e=>{if(!(e=Se[e]))throw new Ie(8);return e},Ne=(e,t=-1)=>(ve||((ve=function(){this.h={}}).prototype={},Object.defineProperties(ve.prototype,{object:{get(){return this.node},set(e){this.node=e}},flags:{get(){return this.h.flags},set(e){this.h.flags=e}},position:{get(){return this.h.position},set(e){this.h.position=e}}})),e=Object.assign(new ve,e),-1==t&&(t=(()=>{for(var e=0;4096>=e;e++)if(!Se[e])return e;throw new Ie(33)})()),e.X=t,Se[t]=e),Re={open:e=>{e.m=we[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new Ie(70)}},ze=(e,t)=>{we[e]={m:t}},Fe=(e,t)=>{var n="/"===t,i=!t;if(n&&_e)throw new Ie(10);if(!n&&!i){var s=Ae(t,{gb:!1});if(t=s.path,(s=s.node).wa)throw new Ie(10);if(16384!=(61440&s.mode))throw new Ie(54)}t={type:e,Qc:{},mb:t,kc:[]},(e=e.U(t)).U=t,t.root=e,n?_e=e:s&&(s.wa=t,s.U&&s.U.kc.push(t))},Ue=(e,t,n)=>{var i=Ae(e,{parent:!0}).node;if(!(e=ee(e))||"."===e||".."===e)throw new Ie(28);var s=Be(i,e);if(s)throw new Ie(s);if(!i.l.va)throw new Ie(63);return i.l.va(i,e,t,n)},Ve=(e,t,n)=>{void 0===n&&(n=t,t=438),Ue(e,8192|t,n)},$e=(e,t)=>{if(!ne(e))throw new Ie(44);var n=Ae(t,{parent:!0}).node;if(!n)throw new Ie(44);t=ee(t);var i=Be(n,t);if(i)throw new Ie(i);if(!n.l.Ea)throw new Ie(63);n.l.Ea(n,t,e)},Ge=e=>{if(!(e=Ae(e).node))throw new Ie(44);if(!e.l.ma)throw new Ie(28);return ne(ke(e.parent),e.l.ma(e))},We=(e,t,n)=>{if(""===e)throw new Ie(44);if("string"==typeof t){var i={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(void 0===i)throw Error(`Unknown file open mode: ${t}`);t=i}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var r=e;else{e=Q(e);try{r=Ae(e,{fb:!(131072&t)}).node}catch(e){}}if(i=!1,64&t)if(r){if(128&t)throw new Ie(20)}else r=Ue(e,n,0),i=!0;if(!r)throw new Ie(44);if(8192==(61440&r.mode)&&(t&=-513),65536&t&&16384!=(61440&r.mode))throw new Ie(54);if(!i&&(n=r?40960==(61440&r.mode)?32:16384==(61440&r.mode)&&("r"!==je(t)||512&t)?31:Me(r,je(t)):44))throw new Ie(n);if(512&t&&!i){if(!(n="string"==typeof(n=r)?Ae(n,{fb:!0}).node:n).l.P)throw new Ie(63);if(16384==(61440&n.mode))throw new Ie(31);if(32768!=(61440&n.mode))throw new Ie(28);if(i=Me(n,"w"))throw new Ie(i);n.l.P(n,{size:0,timestamp:Date.now()})}return t&=-131713,(r=Ne({node:r,path:ke(r),flags:t,seekable:!0,position:0,m:r.m,zc:[],error:!1})).m.open&&r.m.open(r),!s.logReadFiles||1&t||(be||(be={}),e in be||(be[e]=1)),r},He=(e,t,n)=>{if(null===e.X)throw new Ie(8);if(!e.seekable||!e.m.ba)throw new Ie(70);if(0!=n&&1!=n&&2!=n)throw new Ie(28);e.position=e.m.ba(e,t,n),e.zc=[]},Ke=()=>{Ie||((Ie=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(e){this.aa=e},this.pc(e),this.message="FS error"}).prototype=Error(),Ie.prototype.constructor=Ie,[44].forEach((e=>{Ce[e]=new Ie(e),Ce[e].stack="<generic error, no stack>"})))},Xe=(e,t,n)=>{e=Q("/dev/"+e);var i=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}(!!t,!!n);fe||(fe=64);var s=fe++<<8;ze(s,{open:e=>{e.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,n,i,s)=>{for(var r=0,o=0;o<s;o++){try{var a=t()}catch(e){throw new Ie(29)}if(void 0===a&&0===r)throw new Ie(6);if(null==a)break;r++,n[i+o]=a}return r&&(e.node.timestamp=Date.now()),r},write:(e,t,i,s)=>{for(var r=0;r<s;r++)try{n(t[i+r])}catch(e){throw new Ie(29)}return s&&(e.node.timestamp=Date.now()),r}}),Ve(e,i,s)},Ye={},qe=void 0;function Je(){return C[(qe+=4)-4>>2]}function Qe(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function Ze(e,t){return e=Qe(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function et(){this.M=[void 0],this.hb=[]}var tt=new et,nt=void 0;function it(e){throw new nt(e)}var st=e=>(e||it("Cannot use deleted val. handle = "+e),tt.get(e).value),rt=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return tt.pa({tb:1,value:e})}};function ot(e){var t=Error,n=Ze(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},n}var at=void 0,lt=void 0;function ct(e){for(var t="";T[e];)t+=lt[T[e++]];return t}var ut=[];function ht(){for(;ut.length;){var e=ut.pop();e.g.fa=!1,e.delete()}}var dt=void 0,pt={};function mt(e,t){for(void 0===t&&it("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var gt={};function ft(e){var t=ct(e=Bn(e));return An(e),t}function vt(e,t){var n=gt[e];return void 0===n&&it(t+" has unknown type "+ft(e)),n}function bt(){}var yt=!1;function _t(e){--e.count.value,0===e.count.value&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function wt(e,t,n){return t===n?e:void 0===n.A||null===(e=wt(e,t,n.A))?null:n.Pb(e)}var St={},Et=void 0;function Tt(e){throw new Et(e)}function xt(e,t){return t.u&&t.o||Tt("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&Tt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},It(Object.create(e,{g:{value:t}}))}function It(e){return"undefined"==typeof FinalizationRegistry?(It=e=>e,e):(yt=new FinalizationRegistry((e=>{_t(e.g)})),bt=e=>{yt.unregister(e)},(It=e=>{var t=e.g;return t.G&&yt.register(e,{g:t},e),e})(e))}var Ct={};function At(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function kt(e){return this.fromWireType(C[e>>2])}var Pt={},Lt={};function Dt(e,t,n){function i(t){(t=n(t)).length!==e.length&&Tt("Mismatched type converter count");for(var i=0;i<e.length;++i)Mt(e[i],t[i])}e.forEach((function(e){Lt[e]=t}));var s=Array(t.length),r=[],o=0;t.forEach(((e,t)=>{gt.hasOwnProperty(e)?s[t]=gt[e]:(r.push(e),Pt.hasOwnProperty(e)||(Pt[e]=[]),Pt[e].push((()=>{s[t]=gt[e],++o===r.length&&i(s)})))})),0===r.length&&i(s)}function jt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function Mt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(e,t,n={}){var i=t.name;if(e||it(`type "${i}" must have a positive integer typeid pointer`),gt.hasOwnProperty(e)){if(n.$b)return;it(`Cannot register type '${i}' twice`)}gt[e]=t,delete Lt[e],Pt.hasOwnProperty(e)&&(t=Pt[e],delete Pt[e],t.forEach((e=>e())))}(e,t,n)}function Bt(e){it(e.g.u.i.name+" instance already deleted")}function Ot(){}function Nt(e,t,n){if(void 0===e[t].B){var i=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||it(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[i.ea]=i}}function Rt(e,t,n){s.hasOwnProperty(e)?((void 0===n||void 0!==s[e].B&&void 0!==s[e].B[n])&&it(`Cannot register public name '${e}' twice`),Nt(s,e,e),s.hasOwnProperty(n)&&it(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),s[e].B[n]=t):(s[e]=t,void 0!==n&&(s[e].Pc=n))}function zt(e,t,n,i,s,r,o,a){this.name=e,this.constructor=t,this.N=n,this.W=i,this.A=s,this.Ub=r,this.na=o,this.Pb=a,this.qb=[]}function Ft(e,t,n){for(;t!==n;)t.na||it(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function Ut(e,t){return null===t?(this.Na&&it(`null is not a valid ${this.name}`),0):(t.g||it(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||it(`Cannot pass deleted object as a pointer of type ${this.name}`),Ft(t.g.o,t.g.u.i,this.i))}function Vt(e,t){if(null===t){if(this.Na&&it(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return null!==e&&e.push(this.W,n),n}return 0}if(t.g||it(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||it(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&it(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=Ft(t.g.o,t.g.u.i,this.i),this.ua)switch(void 0===t.g.G&&it("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:it(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var i=t.clone();n=this.oc(n,rt((function(){i.delete()}))),null!==e&&e.push(this.W,n)}break;default:it("Unsupporting sharing policy")}return n}function $t(e,t){return null===t?(this.Na&&it(`null is not a valid ${this.name}`),0):(t.g||it(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||it(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&it(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),Ft(t.g.o,t.g.u.i,this.i))}function Gt(e,t,n,i){this.name=e,this.i=t,this.Na=n,this.ta=i,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==t.A?this.toWireType=Vt:(this.toWireType=i?Ut:$t,this.K=null)}function Wt(e,t,n){s.hasOwnProperty(e)||Tt("Replacing nonexistant public symbol"),void 0!==s[e].B&&void 0!==n?s[e].B[n]=t:(s[e]=t,s[e].ea=n)}var Ht=[],Kt=e=>{var t=Ht[e];return t||(e>=Ht.length&&(Ht.length=e+1),Ht[e]=t=j.get(e)),t};function Xt(e,t){var n=(e=ct(e)).includes("j")?((e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var i=s["dynCall_"+e];i=n&&n.length?i.apply(null,[t].concat(n)):i.call(null,t)}else i=Kt(t).apply(null,n);return i}})(e,t):Kt(t);return"function"!=typeof n&&it(`unknown function pointer with signature ${e}: ${t}`),n}var Yt=void 0;function qt(e,t){var n=[],i={};throw t.forEach((function e(t){i[t]||gt[t]||(Lt[t]?Lt[t].forEach(e):(n.push(t),i[t]=!0))})),new Yt(`${e}: `+n.map(ft).join([", "]))}function Jt(e,t,n,i,s){var r=t.length;2>r&&it("argTypes array size mismatch! Must at least get return value and 'this' types!");var o=null!==t[1]&&null!==n,a=!1;for(n=1;n<t.length;++n)if(null!==t[n]&&void 0===t[n].K){a=!0;break}var l="void"!==t[0].name,c=r-2,u=Array(c),h=[],d=[];return function(){if(arguments.length!==c&&it(`function ${e} called with ${arguments.length} arguments, expected ${c} args!`),d.length=0,h.length=o?2:1,h[0]=s,o){var n=t[1].toWireType(d,this);h[1]=n}for(var r=0;r<c;++r)u[r]=t[r+2].toWireType(d,arguments[r]),h.push(u[r]);if(r=i.apply(null,h),a)At(d);else for(var p=o?1:2;p<t.length;p++){var m=1===p?n:u[p-2];null!==t[p].K&&t[p].K(m)}return n=l?t[0].fromWireType(r):void 0}}function Qt(e,t){for(var n=[],i=0;i<e;i++)n.push(A[t+4*i>>2]);return n}function Zt(e,t,n){return e instanceof Object||it(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||it(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||it(`cannot call emscripten binding method ${n} on deleted object`),Ft(e.g.o,e.g.u.i,t.i)}function en(e){e>=tt.h&&0==--tt.get(e).tb&&tt.Zb(e)}function tn(e,t,n){switch(t){case 0:return function(e){return this.fromWireType((n?E:T)[e])};case 1:return function(e){return this.fromWireType((n?x:I)[e>>1])};case 2:return function(e){return this.fromWireType((n?C:A)[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function nn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function sn(e,t){switch(t){case 2:return function(e){return this.fromWireType(k[e>>2])};case 3:return function(e){return this.fromWireType(P[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function rn(e,t,n){switch(t){case 0:return n?function(e){return E[e]}:function(e){return T[e]};case 1:return n?function(e){return x[e>>1]}:function(e){return I[e>>1]};case 2:return n?function(e){return C[e>>2]}:function(e){return A[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var on="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,an=(e,t)=>{for(var n=e>>1,i=n+t/2;!(n>=i)&&I[n];)++n;if(32<(n<<=1)-e&&on)return on.decode(T.subarray(e,n));for(n="",i=0;!(i>=t/2);++i){var s=x[e+2*i>>1];if(0==s)break;n+=String.fromCharCode(s)}return n},ln=(e,t,n)=>{if(void 0===n&&(n=2147483647),2>n)return 0;var i=t;n=(n-=2)<2*e.length?n/2:e.length;for(var s=0;s<n;++s)x[t>>1]=e.charCodeAt(s),t+=2;return x[t>>1]=0,t-i},cn=e=>2*e.length,un=(e,t)=>{for(var n=0,i="";!(n>=t/4);){var s=C[e+4*n>>2];if(0==s)break;++n,65536<=s?(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s)):i+=String.fromCharCode(s)}return i},hn=(e,t,n)=>{if(void 0===n&&(n=2147483647),4>n)return 0;var i=t;n=i+n-4;for(var s=0;s<e.length;++s){var r=e.charCodeAt(s);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++s)),C[t>>2]=r,(t+=4)+4>n)break}return C[t>>2]=0,t-i},dn=e=>{for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);55296<=i&&57343>=i&&++n,t+=4}return t},pn={};function mn(e){var t=pn[e];return void 0===t?ct(e):t}var gn,fn=[],vn=[],bn=[],yn={},_n=()=>{if(!gn){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(e in yn)void 0===yn[e]?delete t[e]:t[e]=yn[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);gn=n}return gn},wn=e=>0==e%4&&(0!=e%100||0==e%400),Sn=[31,29,31,30,31,30,31,31,30,31,30,31],En=[31,28,31,30,31,30,31,31,30,31,30,31];function Tn(e,t,n,i){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=Ee++,this.name=t,this.mode=n,this.l={},this.m={},this.za=i}Object.defineProperties(Tn.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Ke(),Te=Array(4096),Fe(ye,"/"),Ue("/tmp",16895,0),Ue("/home",16895,0),Ue("/home/web_user",16895,0),(()=>{Ue("/dev",16895,0),ze(259,{read:()=>0,write:(e,t,n,i)=>i}),Ve("/dev/null",259),ue(1280,de),ue(1536,pe),Ve("/dev/tty",1280),Ve("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(0===t&&(t=te(e).byteLength),e[--t]);Xe("random",n),Xe("urandom",n),Ue("/dev/shm",16895,0),Ue("/dev/shm/tmp",16895,0)})(),(()=>{Ue("/proc",16895,0);var e=Ue("/proc/self",16895,0);Ue("/proc/self/fd",16895,0),Fe({U:()=>{var t=De(e,"fd",16895,73);return t.l={ka:(e,t)=>{var n=Oe(+t);return(e={parent:null,U:{mb:"fake"},l:{ma:()=>n.path}}).parent=e}},t}},"/proc/self/fd")})(),Object.assign(et.prototype,{get(e){return this.M[e]},has(e){return void 0!==this.M[e]},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),nt=s.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},tt.M.push({value:void 0},{value:null},{value:!0},{value:!1}),tt.h=tt.M.length,s.count_emval_handles=function(){for(var e=0,t=tt.h;t<tt.M.length;++t)void 0!==tt.M[t]&&++e;return e},at=s.PureVirtualError=ot("PureVirtualError");for(var xn=Array(256),In=0;256>In;++In)xn[In]=String.fromCharCode(In);lt=xn,s.getInheritedInstanceCount=function(){return Object.keys(pt).length},s.getLiveInheritedInstances=function(){var e,t=[];for(e in pt)pt.hasOwnProperty(e)&&t.push(pt[e]);return t},s.flushPendingDeletes=ht,s.setDelayFunction=function(e){dt=e,ut.length&&dt&&dt(ht)},Et=s.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Ot.prototype.isAliasOf=function(e){if(!(this instanceof Ot&&e instanceof Ot))return!1;var t=this.g.u.i,n=this.g.o,i=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;i.A;)e=i.na(e),i=i.A;return t===i&&n===e},Ot.prototype.clone=function(){if(this.g.o||Bt(this),this.g.ia)return this.g.count.value+=1,this;var e=It,t=Object,n=t.create,i=Object.getPrototypeOf(this),s=this.g;return(e=e(n.call(t,i,{g:{value:{count:s.count,fa:s.fa,ia:s.ia,o:s.o,u:s.u,G:s.G,L:s.L}}}))).g.count.value+=1,e.g.fa=!1,e},Ot.prototype.delete=function(){this.g.o||Bt(this),this.g.fa&&!this.g.ia&&it("Object already scheduled for deletion"),bt(this),_t(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ot.prototype.isDeleted=function(){return!this.g.o},Ot.prototype.deleteLater=function(){return this.g.o||Bt(this),this.g.fa&&!this.g.ia&&it("Object already scheduled for deletion"),ut.push(this),1===ut.length&&dt&&dt(ht),this.g.fa=!0,this},Gt.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},Gt.prototype.ab=function(e){this.W&&this.W(e)},Gt.prototype.argPackAdvance=8,Gt.prototype.readValueFromPointer=kt,Gt.prototype.deleteObject=function(e){null!==e&&e.delete()},Gt.prototype.fromWireType=function(e){function t(){return this.ua?xt(this.i.N,{u:this.nc,o:n,L:this,G:e}):xt(this.i.N,{u:this,o:e})}var n=this.Vb(e);if(!n)return this.ab(e),null;var i=function(e,t){return t=mt(e,t),pt[t]}(this.i,n);if(void 0!==i)return 0===i.g.count.value?(i.g.o=n,i.g.G=e,i.clone()):(i=i.clone(),this.ab(e),i);if(i=this.i.Ub(n),!(i=St[i]))return t.call(this);i=this.ta?i.Kb:i.pointerType;var s=wt(n,this.i,i.i);return null===s?t.call(this):this.ua?xt(i.i.N,{u:i,o:s,L:this,G:e}):xt(i.i.N,{u:i,o:s})},Yt=s.UnboundTypeError=ot("UnboundTypeError");var Cn={__syscall_fcntl64:function(e,t,n){qe=n;try{var i=Oe(e);switch(t){case 0:var s=Je();return 0>s?-28:Ne(i,s).X;case 1:case 2:case 6:case 7:return 0;case 3:return i.flags;case 4:return s=Je(),i.flags|=s,0;case 5:return s=Je(),x[s+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return C[Mn()>>2]=28,-1}}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_ioctl:function(e,t,n){qe=n;try{var i=Oe(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return i.s?0:-59;case 21505:if(!i.s)return-59;if(i.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var s=Je();C[s>>2]=25856,C[s+4>>2]=5,C[s+8>>2]=191,C[s+12>>2]=35387;for(var r=0;32>r;r++)E[s+r+17|0]=t[r]||0}return 0;case 21506:case 21507:case 21508:if(!i.s)return-59;if(i.s.V.cc)for(s=Je(),t=[],r=0;32>r;r++)t.push(E[s+r+17|0]);return 0;case 21519:return i.s?(s=Je(),C[s>>2]=0):-59;case 21520:return i.s?-28:-59;case 21531:if(s=Je(),!i.m.ac)throw new Ie(59);return i.m.ac(i,t,s);case 21523:return i.s?(i.s.V.dc&&(r=[24,80],s=Je(),x[s>>1]=r[0],x[s+2>>1]=r[1]),0):-59;default:return-28}}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_openat:function(e,t,n,i){qe=i;try{var s=t=t?se(T,t):"";if("/"===s.charAt(0))t=s;else{var r=-100===e?"/":Oe(e).path;if(0==s.length)throw new Ie(44);t=Q(r+"/"+s)}var o=i?Je():0;return We(t,n,o).X}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return-e.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=ct(e),t=vt(t,"wrapper"),n=st(n);var i=[].slice,s=t.i,r=s.N,o=s.A.N,a=s.A.constructor;for(var l in e=Ze(e,(function(){s.A.qb.forEach(function(e){if(this[e]===o[e])throw new at(`Pure virtual function ${e} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:r}),this.__construct.apply(this,i.call(arguments))})),r.__construct=function(){this===r&&it("Pass correct 'this' to __construct");var e=a.implement.apply(void 0,[this].concat(i.call(arguments)));bt(e);var t=e.g;e.notifyOnDestruction(),t.ia=!0,Object.defineProperties(this,{g:{value:t}}),It(this),e=t.o,e=mt(s,e),pt.hasOwnProperty(e)?it(`Tried to register registered instance: ${e}`):pt[e]=this},r.__destruct=function(){this===r&&it("Pass correct 'this' to __destruct"),bt(this);var e=this.g.o;e=mt(s,e),pt.hasOwnProperty(e)?delete pt[e]:it(`Tried to unregister unregistered instance: ${e}`)},e.prototype=Object.create(r),n)e.prototype[l]=n[l];return rt(e)},_embind_finalize_value_object:function(e){var t=Ct[e];delete Ct[e];var n=t.Pa,i=t.W,s=t.eb;Dt([e],s.map((e=>e.Yb)).concat(s.map((e=>e.rc))),(e=>{var r={};return s.forEach(((t,n)=>{var i=e[n],o=t.Wb,a=t.Xb,l=e[n+s.length],c=t.qc,u=t.sc;r[t.Sb]={read:e=>i.fromWireType(o(a,e)),write:(e,t)=>{var n=[];c(u,e,l.toWireType(n,t)),At(n)}}})),[{name:t.name,fromWireType:function(e){var t,n={};for(t in r)n[t]=r[t].read(e);return i(e),n},toWireType:function(e,t){for(var s in r)if(!(s in t))throw new TypeError(`Missing field: "${s}"`);var o=n();for(s in r)r[s].write(o,t[s]);return null!==e&&e.push(i,o),o},argPackAdvance:8,readValueFromPointer:kt,K:i}]}))},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,i,s){var r=jt(n);Mt(e,{name:t=ct(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:s},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var i=E;else if(2===n)i=x;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);i=C}return this.fromWireType(i[e>>r])},K:null})},_embind_register_class:function(e,t,n,i,s,r,o,a,l,c,u,h,d){u=ct(u),r=Xt(s,r),a&&(a=Xt(o,a)),c&&(c=Xt(l,c)),d=Xt(h,d);var p=Qe(u);Rt(p,(function(){qt(`Cannot construct ${u} due to unbound types`,[i])})),Dt([e,t,n],i?[i]:[],(function(t){if(t=t[0],i)var n=t.i,s=n.N;else s=Ot.prototype;t=Ze(p,(function(){if(Object.getPrototypeOf(this)!==o)throw new nt("Use 'new' to construct "+u);if(void 0===l.$)throw new nt(u+" has no accessible constructor");var e=l.$[arguments.length];if(void 0===e)throw new nt(`Tried to invoke ctor of ${u} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(l.$).toString()}) parameters instead!`);return e.apply(this,arguments)}));var o=Object.create(s,{constructor:{value:t}});t.prototype=o;var l=new zt(u,t,o,d,n,r,a,c);l.A&&(void 0===l.A.oa&&(l.A.oa=[]),l.A.oa.push(l)),n=new Gt(u,l,!0,!1),s=new Gt(u+"*",l,!1,!1);var h=new Gt(u+" const*",l,!1,!0);return St[e]={pointerType:s,Kb:h},Wt(p,t),[n,s,h]}))},_embind_register_class_class_function:function(e,t,n,i,s,r,o){var a=Qt(n,i);t=ct(t),r=Xt(s,r),Dt([],[e],(function(e){function i(){qt(`Cannot call ${s} due to unbound types`,a)}var s=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var l=e.i.constructor;return void 0===l[t]?(i.ea=n-1,l[t]=i):(Nt(l,t,s),l[t].B[n-1]=i),Dt([],a,(function(i){if(i=Jt(s,[i[0],null].concat(i.slice(1)),null,r,o),void 0===l[t].B?(i.ea=n-1,l[t]=i):l[t].B[n-1]=i,e.i.oa)for(const n of e.i.oa)n.constructor.hasOwnProperty(t)||(n.constructor[t]=i);return[]})),[]}))},_embind_register_class_class_property:function(e,t,n,i,s,r,o,a){t=ct(t),r=Xt(s,r),Dt([],[e],(function(e){var s=`${(e=e[0]).name}.${t}`,l={get(){qt(`Cannot access ${s} due to unbound types`,[n])},enumerable:!0,configurable:!0};return l.set=a?()=>{qt(`Cannot access ${s} due to unbound types`,[n])}:()=>{it(`${s} is a read-only property`)},Object.defineProperty(e.i.constructor,t,l),Dt([],[n],(function(n){n=n[0];var s={get:()=>n.fromWireType(r(i)),enumerable:!0};return a&&(a=Xt(o,a),s.set=e=>{var t=[];a(i,n.toWireType(t,e)),At(t)}),Object.defineProperty(e.i.constructor,t,s),[]})),[]}))},_embind_register_class_constructor:function(e,t,n,i,s,r){var o=Qt(t,n);s=Xt(i,s),Dt([],[e],(function(e){var n=`constructor ${(e=e[0]).name}`;if(void 0===e.i.$&&(e.i.$=[]),void 0!==e.i.$[t-1])throw new nt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.i.$[t-1]=()=>{qt(`Cannot construct ${e.name} due to unbound types`,o)},Dt([],o,(function(i){return i.splice(1,0,null),e.i.$[t-1]=Jt(n,i,null,s,r),[]})),[]}))},_embind_register_class_function:function(e,t,n,i,s,r,o,a){var l=Qt(n,i);t=ct(t),r=Xt(s,r),Dt([],[e],(function(e){function i(){qt(`Cannot call ${s} due to unbound types`,l)}var s=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.i.qb.push(t);var c=e.i.N,u=c[t];return void 0===u||void 0===u.B&&u.className!==e.name&&u.ea===n-2?(i.ea=n-2,i.className=e.name,c[t]=i):(Nt(c,t,s),c[t].B[n-2]=i),Dt([],l,(function(i){return i=Jt(s,i,e,r,o),void 0===c[t].B?(i.ea=n-2,c[t]=i):c[t].B[n-2]=i,[]})),[]}))},_embind_register_class_property:function(e,t,n,i,s,r,o,a,l,c){t=ct(t),s=Xt(i,s),Dt([],[e],(function(e){var i=`${(e=e[0]).name}.${t}`,u={get(){qt(`Cannot access ${i} due to unbound types`,[n,o])},enumerable:!0,configurable:!0};return u.set=l?()=>{qt(`Cannot access ${i} due to unbound types`,[n,o])}:()=>{it(i+" is a read-only property")},Object.defineProperty(e.i.N,t,u),Dt([],l?[n,o]:[n],(function(n){var o=n[0],u={get(){var t=Zt(this,e,i+" getter");return o.fromWireType(s(r,t))},enumerable:!0};if(l){l=Xt(a,l);var h=n[1];u.set=function(t){var n=Zt(this,e,i+" setter"),s=[];l(c,n,h.toWireType(s,t)),At(s)}}return Object.defineProperty(e.i.N,t,u),[]})),[]}))},_embind_register_emval:function(e,t){Mt(e,{name:t=ct(t),fromWireType:function(e){var t=st(e);return en(e),t},toWireType:function(e,t){return rt(t)},argPackAdvance:8,readValueFromPointer:kt,K:null})},_embind_register_enum:function(e,t,n,i){function s(){}n=jt(n),t=ct(t),s.values={},Mt(e,{name:t,constructor:s,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:tn(t,n,i),K:null}),Rt(t,s)},_embind_register_enum_value:function(e,t,n){var i=vt(e,"enum");t=ct(t),e=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:Ze(`${i.name}_${t}`,(function(){}))}}),e.values[n]=i,e[t]=i},_embind_register_float:function(e,t,n){n=jt(n),Mt(e,{name:t=ct(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:sn(t,n),K:null})},_embind_register_function:function(e,t,n,i,s,r){var o=Qt(t,n);e=ct(e),s=Xt(i,s),Rt(e,(function(){qt(`Cannot call ${e} due to unbound types`,o)}),t-1),Dt([],o,(function(n){return Wt(e,Jt(e,[n[0],null].concat(n.slice(1)),null,s,r),t-1),[]}))},_embind_register_integer:function(e,t,n,i,s){t=ct(t),-1===s&&(s=4294967295),s=jt(n);var r=e=>e;if(0===i){var o=32-8*n;r=e=>e<<o>>>o}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},Mt(e,{name:t,fromWireType:r,toWireType:n,argPackAdvance:8,readValueFromPointer:rn(t,s,0!==i),K:null})},_embind_register_memory_view:function(e,t,n){function i(e){e>>=2;var t=A;return new s(t.buffer,t[e+1],t[e])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];Mt(e,{name:n=ct(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{$b:!0})},_embind_register_std_string:function(e,t){var n="std::string"===(t=ct(t));Mt(e,{name:t,fromWireType:function(e){var t=A[e>>2],i=e+4;if(n)for(var s=i,r=0;r<=t;++r){var o=i+r;if(r==t||0==T[o]){if(s=s?se(T,s,o-s):"",void 0===a)var a=s;else a+=String.fromCharCode(0),a+=s;s=o+1}}else{for(a=Array(t),r=0;r<t;++r)a[r]=String.fromCharCode(T[i+r]);a=a.join("")}return An(e),a},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"==typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||it("Cannot pass non-string to std::string");var s=n&&i?oe(t):t.length,r=kn(4+s+1),o=r+4;if(A[r>>2]=s,n&&i)ae(t,T,o,s+1);else if(i)for(i=0;i<s;++i){var a=t.charCodeAt(i);255<a&&(An(o),it("String has UTF-16 code units that do not fit in 8 bits")),T[o+i]=a}else for(i=0;i<s;++i)T[o+i]=t[i];return null!==e&&e.push(An,r),r},argPackAdvance:8,readValueFromPointer:kt,K:function(e){An(e)}})},_embind_register_std_wstring:function(e,t,n){if(n=ct(n),2===t)var i=an,s=ln,r=cn,o=()=>I,a=1;else 4===t&&(i=un,s=hn,r=dn,o=()=>A,a=2);Mt(e,{name:n,fromWireType:function(e){for(var n,s=A[e>>2],r=o(),l=e+4,c=0;c<=s;++c){var u=e+4+c*t;c!=s&&0!=r[u>>a]||(l=i(l,u-l),void 0===n?n=l:(n+=String.fromCharCode(0),n+=l),l=u+t)}return An(e),n},toWireType:function(e,i){"string"!=typeof i&&it(`Cannot pass non-string to C++ string type ${n}`);var o=r(i),l=kn(4+o+t);return A[l>>2]=o>>a,s(i,l+4,o+t),null!==e&&e.push(An,l),l},argPackAdvance:8,readValueFromPointer:kt,K:function(e){An(e)}})},_embind_register_value_object:function(e,t,n,i,s,r){Ct[e]={name:ct(t),Pa:Xt(n,i),W:Xt(s,r),eb:[]}},_embind_register_value_object_field:function(e,t,n,i,s,r,o,a,l,c){Ct[e].eb.push({Sb:ct(t),Yb:n,Wb:Xt(i,s),Xb:r,rc:o,qc:Xt(a,l),sc:c})},_embind_register_void:function(e,t){Mt(e,{fc:!0,name:t=ct(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=st(e),t=vt(t,"emval::as");var i=[],s=rt(i);return A[n>>2]=s,t.toWireType(i,e)},_emval_call_method:function(e,t,n,i,s){e=fn[e],t=st(t),n=mn(n);var r=[];return A[i>>2]=rt(r),e(t,n,r,s)},_emval_call_void_method:function(e,t,n,i){(e=fn[e])(t=st(t),n=mn(n),null,i)},_emval_decref:en,_emval_get_method_caller:function(e,t){var n=function(e,t){for(var n=Array(e),i=0;i<e;++i)n[i]=vt(A[t+4*i>>2],"parameter "+i);return n}(e,t),i=n[0];t=i.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var s=vn[t];if(void 0!==s)return s;var r=Array(e-1);return s=function(e){var t=fn.length;return fn.push(e),t}(((t,s,o,a)=>{for(var l=0,c=0;c<e-1;++c)r[c]=n[c+1].readValueFromPointer(a+l),l+=n[c+1].argPackAdvance;for(t=t[s].apply(t,r),c=0;c<e-1;++c)n[c+1].Nb&&n[c+1].Nb(r[c]);if(!i.fc)return i.toWireType(o,t)})),vn[t]=s},_emval_get_module_property:function(e){return e=mn(e),rt(s[e])},_emval_get_property:function(e,t){return e=st(e),t=st(t),rt(e[t])},_emval_incref:function(e){4<e&&(tt.get(e).tb+=1)},_emval_new_cstring:function(e){return rt(mn(e))},_emval_new_object:function(){return rt({})},_emval_run_destructors:function(e){At(st(e)),en(e)},_emval_set_property:function(e,t,n){e=st(e),t=st(t),n=st(n),e[t]=n},_emval_take_value:function(e,t){return e=(e=vt(e,"_emval_take_value")).readValueFromPointer(t),rt(e)},abort:()=>{V("")},emscripten_asm_const_int:(e,t,n)=>{var i;for(bn.length=0,n>>=2;i=T[t++];)n+=105!=i&n,bn.push(105==i?C[n]:P[n++>>1]),++n;return Y[e].apply(null,bn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>T.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=T.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=t*(1+.2/n);i=Math.min(i,e+100663296);var s=Math;i=Math.max(e,i);e:{s=s.min.call(s,2147483648,i+(65536-i%65536)%65536)-w.buffer.byteLength+65535>>>16;try{w.grow(s),D();var r=1;break e}catch(e){}r=void 0}if(r)return!0}return!1},environ_get:(e,t)=>{var n=0;return _n().forEach((function(i,s){var r=t+n;for(s=A[e+4*s>>2]=r,r=0;r<i.length;++r)E[0|s++]=i.charCodeAt(r);E[0|s]=0,n+=i.length+1})),0},environ_sizes_get:(e,t)=>{var n=_n();A[e>>2]=n.length;var i=0;return n.forEach((function(e){i+=e.length+1})),A[t>>2]=i,0},fd_close:function(e){try{var t=Oe(e);if(null===t.X)throw new Ie(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(e){throw e}finally{Se[t.X]=null}return t.X=null,0}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return e.aa}},fd_read:function(e,t,n,i){try{e:{var s=Oe(e);e=t;for(var r,o=t=0;o<n;o++){var a=A[e>>2],l=A[e+4>>2];e+=8;var c=s,u=a,h=l,d=r,p=E;if(0>h||0>d)throw new Ie(28);if(null===c.X)throw new Ie(8);if(1==(2097155&c.flags))throw new Ie(8);if(16384==(61440&c.node.mode))throw new Ie(31);if(!c.m.read)throw new Ie(28);var m=void 0!==d;if(m){if(!c.seekable)throw new Ie(70)}else d=c.position;var g=c.m.read(c,p,u,h,d);m||(c.position+=g);var f=g;if(0>f){var v=-1;break e}if(t+=f,f<l)break;void 0!==r&&(r+=f)}v=t}return A[i>>2]=v,0}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return e.aa}},fd_seek:function(e,t,n,i,s){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN;try{if(isNaN(t))return 61;var r=Oe(e);return He(r,t,i),X=[r.position>>>0,(K=r.position,1<=+Math.abs(K)?0<K?+Math.floor(K/4294967296)>>>0:~~+Math.ceil((K-+(~~K>>>0))/4294967296)>>>0:0)],C[s>>2]=X[0],C[s+4>>2]=X[1],r.Ma&&0===t&&0===i&&(r.Ma=null),0}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return e.aa}},fd_write:function(e,t,n,i){try{e:{var s=Oe(e);e=t;for(var r,o=t=0;o<n;o++){var a=A[e>>2],l=A[e+4>>2];e+=8;var c=s,u=a,h=l,d=r,p=E;if(0>h||0>d)throw new Ie(28);if(null===c.X)throw new Ie(8);if(!(2097155&c.flags))throw new Ie(8);if(16384==(61440&c.node.mode))throw new Ie(31);if(!c.m.write)throw new Ie(28);c.seekable&&1024&c.flags&&He(c,0,2);var m=void 0!==d;if(m){if(!c.seekable)throw new Ie(70)}else d=c.position;var g=c.m.write(c,p,u,h,d,void 0);m||(c.position+=g);var f=g;if(0>f){var v=-1;break e}t+=f,void 0!==r&&(r+=f)}v=t}return A[i>>2]=v,0}catch(e){if(void 0===Ye||"ErrnoError"!==e.name)throw e;return e.aa}},strftime_l:(e,t,n,i)=>((e,t,n,i)=>{function s(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function r(e,t){return s(e,t,"0")}function o(e,t){function n(e){return 0>e?-1:0<e?1:0}var i;return 0===(i=n(e.getFullYear()-t.getFullYear()))&&0===(i=n(e.getMonth()-t.getMonth()))&&(i=n(e.getDate()-t.getDate())),i}function a(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.ca;for(e=new Date(new Date(e.da+1900,0,1).getTime());0<t;){var n=e.getMonth(),i=(wn(e.getFullYear())?Sn:En)[n];if(!(t>i-e.getDate())){e.setDate(e.getDate()+t);break}t-=i-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=a(new Date(e.getFullYear(),0,4)),n=a(n),0>=o(t,e)?0>=o(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=C[i+40>>2];for(var u in i={wc:C[i>>2],vc:C[i+4>>2],Fa:C[i+8>>2],Sa:C[i+12>>2],Ga:C[i+16>>2],da:C[i+20>>2],R:C[i+24>>2],ca:C[i+28>>2],Rc:C[i+32>>2],uc:C[i+36>>2],xc:c&&c?se(T,c):""},n=n?se(T,n):"",c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(u,"g"),c[u]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(u in c={"%a":e=>h[e.R].substring(0,3),"%A":e=>h[e.R],"%b":e=>d[e.Ga].substring(0,3),"%B":e=>d[e.Ga],"%C":e=>r((e.da+1900)/100|0,2),"%d":e=>r(e.Sa,2),"%e":e=>s(e.Sa,2," "),"%g":e=>l(e).toString().substring(2),"%G":e=>l(e),"%H":e=>r(e.Fa,2),"%I":e=>(0==(e=e.Fa)?e=12:12<e&&(e-=12),r(e,2)),"%j":e=>{for(var t=0,n=0;n<=e.Ga-1;t+=(wn(e.da+1900)?Sn:En)[n++]);return r(e.Sa+t,3)},"%m":e=>r(e.Ga+1,2),"%M":e=>r(e.vc,2),"%n":()=>"\n","%p":e=>0<=e.Fa&&12>e.Fa?"AM":"PM","%S":e=>r(e.wc,2),"%t":()=>"\t","%u":e=>e.R||7,"%U":e=>r(Math.floor((e.ca+7-e.R)/7),2),"%V":e=>{var t=Math.floor((e.ca+7-(e.R+6)%7)/7);if(2>=(e.R+371-e.ca-2)%7&&t++,t)53==t&&(4==(n=(e.R+371-e.ca)%7)||3==n&&wn(e.da)||(t=1));else{t=52;var n=(e.R+7-e.ca-1)%7;(4==n||5==n&&wn(e.da%400-1))&&t++}return r(t,2)},"%w":e=>e.R,"%W":e=>r(Math.floor((e.ca+7-(e.R+6)%7)/7),2),"%y":e=>(e.da+1900).toString().substring(2),"%Y":e=>e.da+1900,"%z":e=>{var t=0<=(e=e.uc);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),c)n.includes(u)&&(n=n.replace(new RegExp(u,"g"),c[u](i)));return(u=le(n=n.replace(/\0\0/g,"%"),!1)).length>t?0:(E.set(u,e),u.length-1)})(e,t,n,i)};!function(){function e(e){if(S=e=e.exports,w=S.memory,D(),j=S.__indirect_function_table,B.unshift(S.__wasm_call_ctors),z--,s.monitorRunDependencies&&s.monitorRunDependencies(z),0==z&&(null!==F&&(clearInterval(F),F=null),U)){var t=U;U=null,t()}return e}var t={env:Cn,wasi_snapshot_preview1:Cn};if(z++,s.monitorRunDependencies&&s.monitorRunDependencies(z),s.instantiateWasm)try{return s.instantiateWasm(t,e)}catch(e){_("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var n=R;return b||"function"!=typeof WebAssembly.instantiateStreaming||$(n)||n.startsWith("file://")||"function"!=typeof fetch?H(n,e,t):fetch(n,{credentials:"same-origin"}).then((i=>WebAssembly.instantiateStreaming(i,e).then(t,(function(i){return _("wasm streaming compile failed: "+i),_("falling back to ArrayBuffer instantiation"),H(n,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}();var An=e=>(An=S.free)(e),kn=e=>(kn=S.malloc)(e),Pn=s._ma_device__on_notification_unlocked=e=>(Pn=s._ma_device__on_notification_unlocked=S.ma_device__on_notification_unlocked)(e);s._ma_malloc_emscripten=(e,t)=>(s._ma_malloc_emscripten=S.ma_malloc_emscripten)(e,t),s._ma_free_emscripten=(e,t)=>(s._ma_free_emscripten=S.ma_free_emscripten)(e,t);var Ln,Dn=s._ma_device_process_pcm_frames_capture__webaudio=(e,t,n)=>(Dn=s._ma_device_process_pcm_frames_capture__webaudio=S.ma_device_process_pcm_frames_capture__webaudio)(e,t,n),jn=s._ma_device_process_pcm_frames_playback__webaudio=(e,t,n)=>(jn=s._ma_device_process_pcm_frames_playback__webaudio=S.ma_device_process_pcm_frames_playback__webaudio)(e,t,n),Mn=()=>(Mn=S.__errno_location)(),Bn=e=>(Bn=S.__getTypeName)(e);function On(){function e(){if(!Ln&&(Ln=!0,s.calledRun=!0,!L)){if(s.noFSInit||ge||(ge=!0,Ke(),s.stdin=s.stdin,s.stdout=s.stdout,s.stderr=s.stderr,s.stdin?Xe("stdin",s.stdin):$e("/dev/tty","/dev/stdin"),s.stdout?Xe("stdout",null,s.stdout):$e("/dev/tty","/dev/stdout"),s.stderr?Xe("stderr",null,s.stderr):$e("/dev/tty1","/dev/stderr"),We("/dev/stdin",0),We("/dev/stdout",1),We("/dev/stderr",1)),xe=!1,q(B),t(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var e=s.postRun.shift();O.unshift(e)}q(O)}}if(!(0<z)){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)N();q(M),0<z||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e())}}if(s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=S._embind_initialize_bindings)(),s.dynCall_iiji=(e,t,n,i,r)=>(s.dynCall_iiji=S.dynCall_iiji)(e,t,n,i,r),s.dynCall_jiji=(e,t,n,i,r)=>(s.dynCall_jiji=S.dynCall_jiji)(e,t,n,i,r),s.dynCall_iiiji=(e,t,n,i,r,o)=>(s.dynCall_iiiji=S.dynCall_iiiji)(e,t,n,i,r,o),s.dynCall_iij=(e,t,n,i)=>(s.dynCall_iij=S.dynCall_iij)(e,t,n,i),s.dynCall_jii=(e,t,n)=>(s.dynCall_jii=S.dynCall_jii)(e,t,n),s.dynCall_viijii=(e,t,n,i,r,o,a)=>(s.dynCall_viijii=S.dynCall_viijii)(e,t,n,i,r,o,a),s.dynCall_iiiiij=(e,t,n,i,r,o,a)=>(s.dynCall_iiiiij=S.dynCall_iiiiij)(e,t,n,i,r,o,a),s.dynCall_iiiiijj=(e,t,n,i,r,o,a,l,c)=>(s.dynCall_iiiiijj=S.dynCall_iiiiijj)(e,t,n,i,r,o,a,l,c),s.dynCall_iiiiiijj=(e,t,n,i,r,o,a,l,c,u)=>(s.dynCall_iiiiiijj=S.dynCall_iiiiiijj)(e,t,n,i,r,o,a,l,c,u),U=function e(){Ln||On(),Ln||(U=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return On(),e.ready});const r=s},e=>{e.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.21.5","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>i.Animation});var i=n(4)},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>i});var i=function(){function e(e,t,n,i){this.animation=e,this.artboard=t,this.playing=i,this.loopCount=0,this.scrubTo=null,this.instance=new n.LinearAnimationInstance(e,t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.instance.time},set:function(e){this.instance.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){null===this.scrubTo?this.instance.advance(e):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},e.prototype.apply=function(e){this.instance.apply(e)},e.prototype.cleanup=function(){this.instance.delete()},e}()},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>s.BLANK_URL,registerTouchInteractions:()=>i.registerTouchInteractions,sanitizeUrl:()=>s.sanitizeUrl});var i=n(6),s=n(7)},(e,t,n)=>{n.r(t),n.d(t,{registerTouchInteractions:()=>i});var i=function(e){var t=e.canvas,n=e.artboard,i=e.stateMachines,s=void 0===i?[]:i,r=e.renderer,o=e.rive,a=e.fit,l=e.alignment,c=e.isTouchScrollEnabled,u=void 0!==c&&c;if(!(t&&s.length&&r&&o&&n&&"undefined"!=typeof window))return null;var h=null,d=!1,p=function(e){if(d&&e instanceof MouseEvent)"mouseup"==e.type&&(d=!1);else{d=u&&"touchend"===e.type&&"touchstart"===h,h=e.type;var t=e.currentTarget.getBoundingClientRect(),i=function(e,t){var n,i;return["touchstart","touchmove"].indexOf(e.type)>-1&&(null===(n=e.touches)||void 0===n?void 0:n.length)?(t||e.preventDefault(),{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):"touchend"===e.type&&(null===(i=e.changedTouches)||void 0===i?void 0:i.length)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}(e,u),r=i.clientX,c=i.clientY;if(r||c){var p=r-t.left,m=c-t.top,g=o.computeAlignment(a,l,{minX:0,minY:0,maxX:t.width,maxY:t.height},n.bounds),f=new o.Mat2D;g.invert(f);var v=new o.Vec2D(p,m),b=o.mapXY(f,v),y=b.x(),_=b.y();switch(b.delete(),f.delete(),v.delete(),g.delete(),e.type){case"mouseout":for(var w=0,S=s;w<S.length;w++)S[w].pointerMove(y<0?y-1e4:y+1e4,_<0?_-1e4:_+1e4);break;case"touchmove":case"mouseover":case"mousemove":for(var E=0,T=s;E<T.length;E++)T[E].pointerMove(y,_);break;case"touchstart":case"mousedown":for(var x=0,I=s;x<I.length;x++)I[x].pointerDown(y,_);break;case"touchend":case"mouseup":for(var C=0,A=s;C<A.length;C++)A[C].pointerUp(y,_)}}}}.bind(void 0);return t.addEventListener("mouseover",p),t.addEventListener("mouseout",p),t.addEventListener("mousemove",p),t.addEventListener("mousedown",p),t.addEventListener("mouseup",p),t.addEventListener("touchmove",p,{passive:u}),t.addEventListener("touchstart",p,{passive:u}),t.addEventListener("touchend",p),function(){t.removeEventListener("mouseover",p),t.removeEventListener("mouseout",p),t.removeEventListener("mousemove",p),t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",p),t.removeEventListener("touchmove",p),t.removeEventListener("touchstart",p),t.removeEventListener("touchend",p)}}},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>c,sanitizeUrl:()=>u});var i=/^([^\w]*)(javascript|data|vbscript)/im,s=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,o=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,a=/^.+(:|&colon;)/gim,l=[".","/"],c="about:blank";function u(e){if(!e)return c;var t,n=(t=e,t.replace(o,"").replace(s,(function(e,t){return String.fromCharCode(t)}))).replace(r,"").replace(o,"").trim();if(!n)return c;if(function(e){return l.indexOf(e[0])>-1}(n))return n;var u=n.match(a);if(!u)return n;var h=u[0];return i.test(h)?c:n}}],t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{Alignment:()=>s,EventType:()=>v,Fit:()=>t,Layout:()=>p,LoopType:()=>b,Rive:()=>P,RiveEventType:()=>g,RiveFile:()=>k,RuntimeLoader:()=>m,StateMachineInput:()=>f,StateMachineInputType:()=>d,Testing:()=>j,decodeAudio:()=>M,decodeFont:()=>O,decodeImage:()=>B});var e,t,s,r=n(1),o=n(2),a=n(3),l=n(5),c=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),u=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},h=function(e,t){var n,i,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};!function(e){e.Cover="cover",e.Contain="contain",e.Fill="fill",e.FitWidth="fitWidth",e.FitHeight="fitHeight",e.None="none",e.ScaleDown="scaleDown"}(t||(t={})),function(e){e.Center="center",e.TopLeft="topLeft",e.TopCenter="topCenter",e.TopRight="topRight",e.CenterLeft="centerLeft",e.CenterRight="centerRight",e.BottomLeft="bottomLeft",e.BottomCenter="bottomCenter",e.BottomRight="bottomRight"}(s||(s={}));var d,p=function(){function e(e){var n,i,r,o,a,l;this.fit=null!==(n=null==e?void 0:e.fit)&&void 0!==n?n:t.Contain,this.alignment=null!==(i=null==e?void 0:e.alignment)&&void 0!==i?i:s.Center,this.minX=null!==(r=null==e?void 0:e.minX)&&void 0!==r?r:0,this.minY=null!==(o=null==e?void 0:e.minY)&&void 0!==o?o:0,this.maxX=null!==(a=null==e?void 0:e.maxX)&&void 0!==a?a:0,this.maxY=null!==(l=null==e?void 0:e.maxY)&&void 0!==l?l:0}return e.new=function(t){var n=t.fit,i=t.alignment,s=t.minX,r=t.minY,o=t.maxX,a=t.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new e({fit:n,alignment:i,minX:s,minY:r,maxX:o,maxY:a})},e.prototype.copyWith=function(t){var n=t.fit,i=t.alignment,s=t.minX,r=t.minY,o=t.maxX,a=t.maxY;return new e({fit:null!=n?n:this.fit,alignment:null!=i?i:this.alignment,minX:null!=s?s:this.minX,minY:null!=r?r:this.minY,maxX:null!=o?o:this.maxX,maxY:null!=a?a:this.maxY})},e.prototype.runtimeFit=function(e){return this.cachedRuntimeFit?this.cachedRuntimeFit:(n=this.fit===t.Cover?e.Fit.cover:this.fit===t.Contain?e.Fit.contain:this.fit===t.Fill?e.Fit.fill:this.fit===t.FitWidth?e.Fit.fitWidth:this.fit===t.FitHeight?e.Fit.fitHeight:this.fit===t.ScaleDown?e.Fit.scaleDown:e.Fit.none,this.cachedRuntimeFit=n,n);var n},e.prototype.runtimeAlignment=function(e){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(t=this.alignment===s.TopLeft?e.Alignment.topLeft:this.alignment===s.TopCenter?e.Alignment.topCenter:this.alignment===s.TopRight?e.Alignment.topRight:this.alignment===s.CenterLeft?e.Alignment.centerLeft:this.alignment===s.CenterRight?e.Alignment.centerRight:this.alignment===s.BottomLeft?e.Alignment.bottomLeft:this.alignment===s.BottomCenter?e.Alignment.bottomCenter:this.alignment===s.BottomRight?e.Alignment.bottomRight:e.Alignment.center,this.cachedRuntimeAlignment=t,t);var t},e}(),m=function(){function e(){}return e.loadRuntime=function(){r.default({locateFile:function(){return e.wasmURL}}).then((function(t){var n;for(e.runtime=t;e.callBackQueue.length>0;)null===(n=e.callBackQueue.shift())||void 0===n||n(e.runtime)})).catch((function(){var t="https://cdn.jsdelivr.net/npm/".concat(o.name,"@").concat(o.version,"/rive_fallback.wasm");e.wasmURL.toLowerCase()!==t?(console.warn("Failed to load WASM from ".concat(e.wasmURL,", trying jsdelivr as a backup")),e.setWasmUrl(t),e.loadRuntime()):console.error("Could not load Rive WASM file from unpkg or jsdelivr, network connection may be down, or         you may need to call set a new WASM source via RuntimeLoader.setWasmUrl() and call         RuntimeLoader.loadRuntime() again")}))},e.getInstance=function(t){e.isLoading||(e.isLoading=!0,e.loadRuntime()),e.runtime?t(e.runtime):e.callBackQueue.push(t)},e.awaitInstance=function(){return new Promise((function(t){return e.getInstance((function(e){return t(e)}))}))},e.setWasmUrl=function(t){e.wasmURL=t},e.isLoading=!1,e.callBackQueue=[],e.wasmURL="https://unpkg.com/".concat(o.name,"@").concat(o.version,"/rive.wasm"),e}();!function(e){e[e.Number=56]="Number",e[e.Trigger=58]="Trigger",e[e.Boolean=59]="Boolean"}(d||(d={}));var g,f=function(){function e(e,t){this.type=e,this.runtimeInput=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(e){this.runtimeInput.value=e},enumerable:!1,configurable:!0}),e.prototype.fire=function(){this.type===d.Trigger&&this.runtimeInput.fire()},e}();!function(e){e[e.General=128]="General",e[e.OpenUrl=131]="OpenUrl"}(g||(g={}));var v,b,y=function(){function e(e,t,n,i){this.stateMachine=e,this.playing=n,this.artboard=i,this.inputs=[],this.instance=new t.StateMachineInstance(e,i),this.initInputs(t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statesChanged",{get:function(){for(var e=[],t=0;t<this.instance.stateChangedCount();t++)e.push(this.instance.stateChangedNameByIndex(t));return e},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){this.instance.advance(e)},e.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},e.prototype.reportedEventAt=function(e){return this.instance.reportedEventAt(e)},e.prototype.initInputs=function(e){for(var t=0;t<this.instance.inputCount();t++){var n=this.instance.input(t);this.inputs.push(this.mapRuntimeInput(n,e))}},e.prototype.mapRuntimeInput=function(e,t){return e.type===t.SMIInput.bool?new f(d.Boolean,e.asBool()):e.type===t.SMIInput.number?new f(d.Number,e.asNumber()):e.type===t.SMIInput.trigger?new f(d.Trigger,e.asTrigger()):void 0},e.prototype.cleanup=function(){this.instance.delete()},e}(),_=function(){function e(e,t,n,i,s){void 0===i&&(i=[]),void 0===s&&(s=[]),this.runtime=e,this.artboard=t,this.eventManager=n,this.animations=i,this.stateMachines=s}return e.prototype.add=function(e,t,n){if(void 0===n&&(n=!0),0===(e=D(e)).length)this.animations.forEach((function(e){return e.playing=t})),this.stateMachines.forEach((function(e){return e.playing=t}));else for(var i=this.animations.map((function(e){return e.name})),s=this.stateMachines.map((function(e){return e.name})),r=0;r<e.length;r++){var o=i.indexOf(e[r]),l=s.indexOf(e[r]);if(o>=0||l>=0)o>=0?this.animations[o].playing=t:this.stateMachines[l].playing=t;else{var c=this.artboard.animationByName(e[r]);if(c){var u=new a.Animation(c,this.artboard,this.runtime,t);u.advance(0),u.apply(1),this.animations.push(u)}else{var h=this.artboard.stateMachineByName(e[r]);if(h){var d=new y(h,this.runtime,t,this.artboard);this.stateMachines.push(d)}}}}return n&&(t?this.eventManager.fire({type:v.Play,data:this.playing}):this.eventManager.fire({type:v.Pause,data:this.paused})),t?this.playing:this.paused},e.prototype.initLinearAnimations=function(e,t){for(var n=this.animations.map((function(e){return e.name})),i=0;i<e.length;i++){var s=n.indexOf(e[i]);if(s>=0)this.animations[s].playing=t;else{var r=this.artboard.animationByName(e[i]);if(r){var o=new a.Animation(r,this.artboard,this.runtime,t);o.advance(0),o.apply(1),this.animations.push(o)}}}},e.prototype.initStateMachines=function(e,t){for(var n=this.stateMachines.map((function(e){return e.name})),i=0;i<e.length;i++){var s=n.indexOf(e[i]);if(s>=0)this.stateMachines[s].playing=t;else{var r=this.artboard.stateMachineByName(e[i]);if(r){var o=new y(r,this.runtime,t,this.artboard);this.stateMachines.push(o)}else this.initLinearAnimations([e[i]],t)}}},e.prototype.play=function(e){return this.add(e,!0)},e.prototype.pause=function(e){return this.add(e,!1)},e.prototype.scrub=function(e,t){var n=this.animations.filter((function(t){return e.includes(t.name)}));return n.forEach((function(e){return e.scrubTo=t})),n.map((function(e){return e.name}))},Object.defineProperty(e.prototype,"playing",{get:function(){return this.animations.filter((function(e){return e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),e.prototype.stop=function(e){var t=this,n=[];if(0===(e=D(e)).length)n=this.animations.map((function(e){return e.name})).concat(this.stateMachines.map((function(e){return e.name}))),this.animations.forEach((function(e){return e.cleanup()})),this.stateMachines.forEach((function(e){return e.cleanup()})),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var i=this.animations.filter((function(t){return e.includes(t.name)}));i.forEach((function(e){e.cleanup(),t.animations.splice(t.animations.indexOf(e),1)}));var s=this.stateMachines.filter((function(t){return e.includes(t.name)}));s.forEach((function(e){e.cleanup(),t.stateMachines.splice(t.stateMachines.indexOf(e),1)})),n=i.map((function(e){return e.name})).concat(s.map((function(e){return e.name})))}return this.eventManager.fire({type:v.Stop,data:n}),n},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animations.reduce((function(e,t){return e||t.playing}),!1)||this.stateMachines.reduce((function(e,t){return e||t.playing}),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),e.prototype.atLeastOne=function(e,t){var n;return void 0===t&&(t=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([n=this.artboard.animationByIndex(0).name],e,t):this.artboard.stateMachineCount()>0&&this.add([n=this.artboard.stateMachineByIndex(0).name],e,t)),n},e.prototype.handleLooping=function(){for(var e=0,t=this.animations.filter((function(e){return e.playing}));e<t.length;e++){var n=t[e];0===n.loopValue&&n.loopCount?(n.loopCount=0,this.stop(n.name)):1===n.loopValue&&n.loopCount?(this.eventManager.fire({type:v.Loop,data:{animation:n.name,type:b.Loop}}),n.loopCount=0):2===n.loopValue&&n.loopCount>1&&(this.eventManager.fire({type:v.Loop,data:{animation:n.name,type:b.PingPong}}),n.loopCount=0)}},e.prototype.handleStateChanges=function(){for(var e=[],t=0,n=this.stateMachines.filter((function(e){return e.playing}));t<n.length;t++){var i=n[t];e.push.apply(e,i.statesChanged)}e.length>0&&this.eventManager.fire({type:v.StateChange,data:e})},e.prototype.handleAdvancing=function(e){this.eventManager.fire({type:v.Advance,data:e})},e}();!function(e){e.Load="load",e.LoadError="loaderror",e.Play="play",e.Pause="pause",e.Stop="stop",e.Loop="loop",e.Draw="draw",e.Advance="advance",e.StateChange="statechange",e.RiveEvent="riveevent",e.AudioStatusChange="audiostatuschange"}(v||(v={})),function(e){e.OneShot="oneshot",e.Loop="loop",e.PingPong="pingpong"}(b||(b={}));var w,S=function(){function e(e){void 0===e&&(e=[]),this.listeners=e}return e.prototype.getListeners=function(e){return this.listeners.filter((function(t){return t.type===e}))},e.prototype.add=function(e){this.listeners.includes(e)||this.listeners.push(e)},e.prototype.remove=function(e){for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t];if(n.type===e.type&&n.callback===e.callback){this.listeners.splice(t,1);break}}},e.prototype.removeAll=function(e){var t=this;e?this.listeners.filter((function(t){return t.type===e})).forEach((function(e){return t.remove(e)})):this.listeners.splice(0,this.listeners.length)},e.prototype.fire=function(e){this.getListeners(e.type).forEach((function(t){return t.callback(e)}))},e}(),E=function(){function e(e){this.eventManager=e,this.queue=[]}return e.prototype.add=function(e){this.queue.push(e)},e.prototype.process=function(){for(;this.queue.length>0;){var e=this.queue.shift();(null==e?void 0:e.action)&&e.action(),(null==e?void 0:e.event)&&this.eventManager.fire(e.event)}},e}();!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.UNAVAILABLE=1]="UNAVAILABLE"}(w||(w={}));var T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._started=!1,t._enabled=!1,t._status=w.UNAVAILABLE,t}return c(t,e),t.prototype.delay=function(e){return u(this,void 0,void 0,(function(){return h(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},t.prototype.timeout=function(){return u(this,void 0,void 0,(function(){return h(this,(function(e){return[2,new Promise((function(e,t){return setTimeout(t,50)}))]}))}))},t.prototype.reportToListeners=function(){this.fire({type:v.AudioStatusChange}),this.removeAll()},t.prototype.enableAudio=function(){return u(this,void 0,void 0,(function(){return h(this,(function(e){return this._enabled||(this._enabled=!0,this._status=w.AVAILABLE,this.reportToListeners()),[2]}))}))},t.prototype.testAudio=function(){return u(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:if(this._status!==w.UNAVAILABLE||null===this._audioContext)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return e.sent(),this.enableAudio(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},t.prototype._establishAudio=function(){return u(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this._started?[3,5]:(this._started=!0,"undefined"!=typeof window?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),e.label=2;case 2:return this._status!==w.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return e.sent(),[4,this.delay(1e3)];case 4:return e.sent(),[3,2];case 5:return[2]}}))}))},t.prototype.listenForUserAction=function(){var e=this;document.addEventListener("pointerdown",(function(){return u(e,void 0,void 0,(function(){return h(this,(function(e){return this.enableAudio(),[2]}))}))}),{once:!0})},t.prototype.establishAudio=function(){return u(this,void 0,void 0,(function(){return h(this,(function(e){return this._establishAudio(),[2]}))}))},Object.defineProperty(t.prototype,"systemVolume",{get:function(){return this._status===w.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t}(S),x=new T,I=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),C=globalThis.ResizeObserver||I,A=new(function(){function e(){var e=this;this._elementsMap=new Map,this._onObservedEntry=function(t){var n=e._elementsMap.get(t.target);null!==n?n.onResize(0==t.target.clientWidth||0==t.target.clientHeight):e._resizeObserver.unobserve(t.target)},this._onObserved=function(t){t.forEach(e._onObservedEntry)},this._resizeObserver=new C(this._onObserved)}return e.prototype.add=function(e,t){var n={onResize:t,element:e};return this._elementsMap.set(e,n),this._resizeObserver.observe(e),n},e.prototype.remove=function(e){this._resizeObserver.unobserve(e.element),this._elementsMap.delete(e.element)},e}()),k=function(){function e(e){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=e.src,this.buffer=e.buffer,e.assetLoader&&(this.assetLoader=e.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new S,e.onLoad&&this.on(v.Load,e.onLoad),e.onLoadError&&this.on(v.LoadError,e.onLoadError)}return e.prototype.initData=function(){return u(this,void 0,void 0,(function(){var t,n,i;return h(this,(function(s){switch(s.label){case 0:return this.src?(t=this,[4,L(this.src)]):[3,2];case 1:t.buffer=s.sent(),s.label=2;case 2:return this.assetLoader&&(n=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),i=this,[4,this.runtime.load(new Uint8Array(this.buffer),n,this.enableRiveAssetCDN)];case 3:if(i.file=s.sent(),null===this.file)throw this.eventManager.fire({type:v.LoadError,data:null}),new Error(e.fileLoadErrorMessage);return this.eventManager.fire({type:v.Load,data:this}),[2]}}))}))},e.prototype.init=function(){return u(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:if(!this.src&&!this.buffer)throw new Error(e.missingErrorMessage);return t=this,[4,m.awaitInstance()];case 1:return t.runtime=n.sent(),[4,this.initData()];case 2:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.cleanup=function(){var e;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(e=this.file)||void 0===e||e.delete())},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},e.missingErrorMessage="Rive source file or data buffer required",e.fileLoadErrorMessage="The file failed to load",e}(),P=function(){function e(e){var t,n=this;this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._hasZeroSize=!1,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(e){n._hasZeroSize=e,n._layout.maxX&&n._layout.maxY||n.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=e.canvas,e.canvas.constructor===HTMLCanvasElement&&(this._observed=A.add(this.canvas,this.onCanvasResize)),this.src=e.src,this.buffer=e.buffer,this.riveFile=e.riveFile,this.layout=null!==(t=e.layout)&&void 0!==t?t:new p,this.shouldDisableRiveListeners=!!e.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!e.isTouchScrollEnabled,this.automaticallyHandleEvents=!!e.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new S,e.onLoad&&this.on(v.Load,e.onLoad),e.onLoadError&&this.on(v.LoadError,e.onLoadError),e.onPlay&&this.on(v.Play,e.onPlay),e.onPause&&this.on(v.Pause,e.onPause),e.onStop&&this.on(v.Stop,e.onStop),e.onLoop&&this.on(v.Loop,e.onLoop),e.onStateChange&&this.on(v.StateChange,e.onStateChange),e.onAdvance&&this.on(v.Advance,e.onAdvance),e.onload&&!e.onLoad&&this.on(v.Load,e.onload),e.onloaderror&&!e.onLoadError&&this.on(v.LoadError,e.onloaderror),e.onplay&&!e.onPlay&&this.on(v.Play,e.onplay),e.onpause&&!e.onPause&&this.on(v.Pause,e.onpause),e.onstop&&!e.onStop&&this.on(v.Stop,e.onstop),e.onloop&&!e.onLoop&&this.on(v.Loop,e.onloop),e.onstatechange&&!e.onStateChange&&this.on(v.StateChange,e.onstatechange),e.assetLoader&&(this.assetLoader=e.assetLoader),this.taskQueue=new E(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:e.autoplay,animations:e.animations,stateMachines:e.stateMachines,artboard:e.artboard,useOffscreenRenderer:e.useOffscreenRenderer})}return e.new=function(t){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new e(t)},e.prototype.onSystemAudioChanged=function(){this.volume=this._volume},e.prototype.init=function(t){var n=this,i=t.src,s=t.buffer,r=t.riveFile,o=t.animations,a=t.stateMachines,l=t.artboard,c=t.autoplay,u=void 0!==c&&c,h=t.useOffscreenRenderer,d=void 0!==h&&h;if(this.src=i,this.buffer=s,this.riveFile=r,!this.src&&!this.buffer&&!this.riveFile)throw new Error(e.missingErrorMessage);var p=D(o),g=D(a);this.loaded=!1,this.readyForPlaying=!1,m.awaitInstance().then((function(e){n.runtime=e,n.renderer=n.runtime.makeRenderer(n.canvas,d),n.canvas.width||n.canvas.height||n.resizeDrawingSurfaceToCanvas(),n.initData(l,p,g,u).then((function(){return n.setupRiveListeners()})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},e.prototype.setupRiveListeners=function(e){var t=this;if(!this.shouldDisableRiveListeners){var n=(this.animator.stateMachines||[]).filter((function(e){return e.playing&&t.runtime.hasListeners(e.instance)})).map((function(e){return e.instance})),i=this.isTouchScrollEnabled;e&&"isTouchScrollEnabled"in e&&(i=e.isTouchScrollEnabled),this.eventCleanup=(0,l.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:n,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:i})}},e.prototype.removeRiveListeners=function(){this.eventCleanup&&this.eventCleanup()},e.prototype.initializeAudio=function(){var e,t=this;x.status==w.UNAVAILABLE&&(null===(e=this.artboard)||void 0===e?void 0:e.hasAudio)&&(x.add({type:v.AudioStatusChange,callback:function(){return t.onSystemAudioChanged()}}),x.establishAudio())},e.prototype.initData=function(e,t,n,i){var s;return u(this,void 0,void 0,(function(){var r;return h(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),null!=this.riveFile?[3,2]:(this.riveFile=new k({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:o.sent(),o.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(e,t,n,i),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:v.Load,data:null!==(s=this.src)&&void 0!==s?s:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return o.sent(),r="Problem loading file; may be corrupt!",console.warn(r),this.eventManager.fire({type:v.LoadError,data:r}),[2,Promise.reject(r)];case 4:return[2]}}))}))},e.prototype.initArtboard=function(e,t,n,i){if(this.file){var s,r=e?this.file.artboardByName(e):this.file.defaultArtboard();if(!r){var o="Invalid artboard name or no default artboard";return console.warn(o),void this.eventManager.fire({type:v.LoadError,data:o})}if(this.artboard=r,r.volume=this._volume*x.systemVolume,this.artboard.animationCount()<1)throw o="Artboard has no animations",this.eventManager.fire({type:v.LoadError,data:o}),o;this.animator=new _(this.runtime,this.artboard,this.eventManager),t.length>0||n.length>0?(s=t.concat(n),this.animator.initLinearAnimations(t,i),this.animator.initStateMachines(n,i)):s=[this.animator.atLeastOne(i,!1)],this.taskQueue.add({event:{type:i?v.Play:v.Pause,data:s}})}},e.prototype.drawFrame=function(){this.startRendering()},e.prototype.draw=function(e,t){this.frameRequestId=null;var n=performance.now();this.lastRenderTime||(this.lastRenderTime=e),this.renderSecondTimer+=e-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==t||t());var i=(e-this.lastRenderTime)/1e3;this.lastRenderTime=e;for(var s=0,r=this.animator.animations.filter((function(e){return e.playing||e.needsScrub})).sort((function(e){return e.needsScrub?-1:1}));s<r.length;s++){var o=r[s];o.advance(i),o.instance.didLoop&&(o.loopCount+=1),o.apply(1)}for(var a=0,c=this.animator.stateMachines.filter((function(e){return e.playing}));a<c.length;a++){var u=c[a],h=u.reportedEventCount();if(h)for(var d=0;d<h;d++){var p=u.reportedEventAt(d);if(p)if(p.type===g.OpenUrl){if(this.eventManager.fire({type:v.RiveEvent,data:p}),this.automaticallyHandleEvents){var m=document.createElement("a"),f=p,b=f.url,y=f.target,_=(0,l.sanitizeUrl)(b);b&&m.setAttribute("href",_),y&&m.setAttribute("target",y),_&&_!==l.BLANK_URL&&m.click()}}else this.eventManager.fire({type:v.RiveEvent,data:p})}u.advance(i)}this.artboard.advance(i);var w=this.renderer;w.clear(),w.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(w),w.restore(),w.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(i),this.frameCount++;var S=performance.now();for(this.frameTimes.push(S),this.durations.push(S-n);this.frameTimes[0]<=S-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},e.prototype.alignRenderer=function(){var e=this,t=e.renderer,n=e.runtime,i=e._layout,s=e.artboard;t.align(i.runtimeFit(n),i.runtimeAlignment(n),{minX:i.minX,minY:i.minY,maxX:i.maxX,maxY:i.maxY},s.bounds)},Object.defineProperty(e.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce((function(e,t){return e+t}),0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){var e;this.stopRendering(),this.cleanupInstances(),null!==this._observed&&A.remove(this._observed),null===(e=this.riveFile)||void 0===e||e.cleanup(),this.riveFile=null,this.file=null},e.prototype.deleteRiveRenderer=function(){var e;null===(e=this.renderer)||void 0===e||e.delete(),this.renderer=null},e.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},e.prototype.retrieveTextRun=function(e){var t;if(e)if(this.artboard){var n=this.artboard.textRun(e);if(n)return n;console.warn("Could not access a text run with name '".concat(e,"' in the '").concat(null===(t=this.artboard)||void 0===t?void 0:t.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},e.prototype.getTextRunValue=function(e){var t=this.retrieveTextRun(e);return t?t.text:void 0},e.prototype.setTextRunValue=function(e,t){var n=this.retrieveTextRun(e);n&&(n.text=t)},e.prototype.play=function(e,t){var n=this;e=D(e),this.readyForPlaying?(this.animator.play(e),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return n.play(e,t)}})},e.prototype.pause=function(e){var t=this;e=D(e),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(e)):this.taskQueue.add({action:function(){return t.pause(e)}})},e.prototype.scrub=function(e,t){var n=this;e=D(e),this.readyForPlaying?(this.animator.scrub(e,t||0),this.drawFrame()):this.taskQueue.add({action:function(){return n.scrub(e,t)}})},e.prototype.stop=function(e){var t=this;e=D(e),this.readyForPlaying?(this.animator.stop(e),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return t.stop(e)}})},e.prototype.reset=function(e){var t,n=null==e?void 0:e.artboard,i=D(null==e?void 0:e.animations),s=D(null==e?void 0:e.stateMachines),r=null!==(t=null==e?void 0:e.autoplay)&&void 0!==t&&t;this.cleanupInstances(),this.initArtboard(n,i,s,r),this.taskQueue.process()},e.prototype.load=function(e){this.file=null,this.stop(),this.init(e)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,e.maxX&&e.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),e.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},e.prototype.resizeDrawingSurfaceToCanvas=function(e){if(this.canvas instanceof HTMLCanvasElement&&window){var t=this.canvas.getBoundingClientRect(),n=t.width,i=t.height,s=e||window.devicePixelRatio||1;this.canvas.width=s*n,this.canvas.height=s*i,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(e.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.animationCount();t++)e.push(this.artboard.animationByIndex(t).name);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.stateMachineCount();t++)e.push(this.artboard.stateMachineByIndex(t).name);return e},enumerable:!1,configurable:!0}),e.prototype.stateMachineInputs=function(e){if(this.loaded){var t=this.animator.stateMachines.find((function(t){return t.name===e}));return null==t?void 0:t.inputs}},e.prototype.retrieveInputAtPath=function(e,t){if(e)if(this.artboard){var n=this.artboard.inputByPath(e,t);if(n)return n;console.warn("Could not access an input with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access input: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(t,"'"))},e.prototype.setBooleanStateAtPath=function(e,t,n){var i=this.retrieveInputAtPath(e,n);i&&(i.type===d.Boolean?i.asBool().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(n,"' is not a boolean")))},e.prototype.setNumberStateAtPath=function(e,t,n){var i=this.retrieveInputAtPath(e,n);i&&(i.type===d.Number?i.asNumber().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(n,"' is not a number")))},e.prototype.fireStateAtPath=function(e,t){var n=this.retrieveInputAtPath(e,t);n&&(n.type===d.Trigger?n.asTrigger().fire():console.warn("Input with name: '".concat(e,"', at path:'").concat(t,"' is not a trigger")))},e.prototype.retrieveTextAtPath=function(e,t){if(e)if(t)if(this.artboard){var n=this.artboard.textByPath(e,t);if(n)return n;console.warn("Could not access text with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access text: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(e,"'"));else console.warn("No text name provided for path '".concat(t,"'"))},e.prototype.getTextRunValueAtPath=function(e,t){var n=this.retrieveTextAtPath(e,t);if(n)return n.text;console.warn("Could not get text with name: '".concat(e,"', at path:'").concat(t,"'"))},e.prototype.setTextRunValueAtPath=function(e,t,n){var i=this.retrieveTextAtPath(e,n);i?i.text=t:console.warn("Could not set text with name: '".concat(e,"', at path:'").concat(n,"'"))},Object.defineProperty(e.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.unsubscribe=function(e,t){console.warn("This function is deprecated: please use `off()` instead."),this.off(e,t)},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.unsubscribeAll=function(e){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(e)},e.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},e.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},e.prototype.enableFPSCounter=function(e){this.runtime.enableFPSCounter(e)},e.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(e.prototype,"contents",{get:function(){if(this.loaded){for(var e={artboards:[]},t=0;t<this.file.artboardCount();t++){for(var n=this.file.artboardByIndex(t),i={name:n.name,animations:[],stateMachines:[]},s=0;s<n.animationCount();s++){var r=n.animationByIndex(s);i.animations.push(r.name)}for(var o=0;o<n.stateMachineCount();o++){for(var a=n.stateMachineByIndex(o),l=a.name,c=new this.runtime.StateMachineInstance(a,n),u=[],h=0;h<c.inputCount();h++){var d=c.input(h);u.push({name:d.name,type:d.type})}i.stateMachines.push({name:l,inputs:u})}e.artboards.push(i)}return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(e){this._volume=e,this.artboard&&(this.artboard.volume=e*x.systemVolume)},enumerable:!1,configurable:!0}),e.missingErrorMessage="Rive source file or data buffer required",e}(),L=function(e){return u(void 0,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=new Request(e),[4,fetch(t)];case 1:return[4,n.sent().arrayBuffer()];case 2:return[2,n.sent()]}}))}))},D=function(e){return"string"==typeof e?[e]:e instanceof Array?e:[]},j={EventManager:S,TaskQueueManager:E},M=function(e){return new Promise((function(t){return m.getInstance((function(n){n.decodeAudio(e,t)}))}))},B=function(e){return new Promise((function(t){return m.getInstance((function(n){n.decodeImage(e,t)}))}))},O=function(e){return new Promise((function(t){return m.getInstance((function(n){n.decodeFont(e,t)}))}))}})(),i})(),e.exports=t()},424:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,".game-scene #play-button{position:relative;top:14vh;display:block;margin:0 auto;z-index:5}@media(max-width: 576px){#play-button{max-width:115px;max-height:115px}}@media(min-width: 768px){#play-button{max-width:200px;max-height:200px}}",""]);const a=o},632:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,".game-control .level_content-wrapper{position:absolute;z-index:5;max-width:130px;width:100%;top:5px;left:12%}.game-control .level_content-wrapper .bar-level-wrapper{position:absolute;width:100%;max-width:125px;top:1.4rem;left:0;display:flex;align-items:center;justify-content:center}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{position:relative;width:100%;max-width:10px;margin:0px 2.2px}@media(min-width: 320px)and (max-width: 360px){.game-control .level_content-wrapper .bar-level-wrapper{max-width:100px;top:1rem}.game-control .level_content-wrapper{max-width:100px;width:100%;top:5px;left:12%}}@media(min-width: 361px)and (max-width: 500px){.level_content-wrapper{top:.5rem}.game-control .level_content-wrapper{max-width:130px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:13px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:120px;top:1.4rem}}@media(min-width: 501px)and (max-width: 767px){.game-control .level_content-wrapper{max-width:200px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:190px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:22px;margin:0px 2.5px}}@media(min-width: 768px)and (max-width: 991px){.game-control .level_content-wrapper{max-width:215px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:205px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px;margin:0px 2.5px}}@media(min-width: 991px)and (max-width: 1024px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}@media(min-width: 1080px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}",""]);const a=o},636:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,".popup{display:none;position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000;height:100%;width:100%;font-family:Arial}.popup.show{display:block}.popup .popup__overlay{height:100%;width:100%;background-color:rgba(0,0,0,.5)}.popup .popup__content-wrapper{position:absolute;top:20vh;left:10vw;right:10vw;padding:35px 50px;height:80vw;background-repeat:no-repeat;background-size:contain}.popup .popup__content-wrapper [data-click=close]{position:absolute;top:-15px;left:15px;display:block}.popup .popup__content-wrapper .popup__content-container{padding:15px;color:#fff;display:flex;width:100%;height:100%;justify-content:center;align-items:center;align-content:center;flex-wrap:wrap}.popup #cancel-button{position:absolute;top:4px;left:24px}",""]);const a=o},278:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,"#timer-ticking{position:relative;top:120px;width:100%;display:flex}#timer-ticking #timer-empty{position:absolute;bottom:0px;width:100%;height:40px}#timer-ticking #rotating-clock{animation:rotateClock 2s linear infinite;position:absolute;width:55px;bottom:-5px;left:30px}#timer-ticking #timer-full-container{position:absolute;bottom:0;left:14%;width:100%;overflow:hidden;height:40px}#timer-ticking #timer-full-container .timer-mask{position:absolute;width:86%;background:repeating-linear-gradient(-45deg, red, red 20px, #ffb3b3 20px, #ffb3b3 40px);left:0px;height:25px;margin:6px 0px 0px 2px}@keyframes rotateClock{from{transform:translateX(-50%) rotate(0deg)}to{transform:translateX(-50%) rotate(360deg)}}@keyframes reduceWidth{from{width:100%}to{width:0%}}@media(min-width: 320px)and (max-width: 360px){#timer-ticking{top:100px}#timer-ticking #timer-full-container{height:30px}#timer-ticking #timer-empty{height:30px}#timer-ticking #timer-full-container .timer-mask{height:19px;margin:4px 0px 0px 2px}#timer-ticking #rotating-clock{width:40px;bottom:-5px;left:25px}}@media(min-width: 361px)and (max-width: 500px){#timer-ticking{top:120px}}@media(min-width: 501px)and (max-width: 768px){#timer-ticking{top:180px}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:80px;bottom:-8px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:37px;margin:9px 0px 0px 5px}}@media(min-width: 769px)and (max-width: 992px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:90px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:36px;margin:9px 0px 0px 5px}}@media(min-width: 993px)and (max-width: 1024px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:100px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 6px}}@media(min-width: 1080px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:100px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 5px}}",""]);const a=o},717:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,".buttons-container{position:absolute;width:100%;bottom:65px;display:flex;gap:40px;justify-content:center}",""]);const a=o},664:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),s=n.n(i),r=n(314),o=n.n(r)()(s());o.push([e.id,"button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.w-100{width:100%}.h-100{height:100%}.d-flex{display:flex}.justify-content-center{justify-content:center}.m-1{margin:8px}.ms-1{margin-left:8px}.me-1{margin-right:8px}.mt-1{margin-top:8px}.mb-1{margin-bottom:8px}.m-2{margin:16px}.ms-2{margin-left:16px}.me-2{margin-right:16px}.mt-2{margin-top:16px}.mb-2{margin-bottom:16px}.m-3{margin:24px}.ms-3{margin-left:24px}.me-3{margin-right:24px}.mt-3{margin-top:24px}.mb-3{margin-bottom:24px}.m-4{margin:32px}.ms-4{margin-left:32px}.me-4{margin-right:32px}.mt-4{margin-top:32px}.mb-4{margin-bottom:32px}.m-5{margin:40px}.ms-5{margin-left:40px}.me-5{margin-right:40px}.mt-5{margin-top:40px}.mb-5{margin-bottom:40px}.text-align-center{text-align:center}.font-size-1{font-size:8px}.font-size-2{font-size:16px}.font-size-3{font-size:24px}.font-size-4{font-size:32px}.font-size-5{font-size:40px}",""]);const a=o},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);i&&o[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},o=[],a=0;a<e.length;a++){var l=e[a],c=i.base?l[0]+i.base:l[0],u=r[c]||0,h="".concat(c," ").concat(u);r[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var m=s(p,i);i.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}o.push(h)}return o}function s(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var r=i(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=n(r[o]);t[a].references--}for(var l=i(e,s),c=0;c<r.length;c++){var u=n(r[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}r=l}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";class e{x;y;origx;origy;text;img;imageSize;textFontSize;canvasWidth;canvasHeight;imageCenterOffsetX;imageCenterOffsetY;context;tutorialInstance;timerTickingInstance;frame=0;constructor(e,t,n,i,s,r,o,a,l){this.x=s,this.y=r,this.origx=s,this.origy=r,this.canvasWidth=t,this.canvasHeight=n,this.tutorialInstance=l,this.text=i,this.img=o,this.context=e,this.calculateImageAndFontSize(),this.imageCenterOffsetX=this.imageSize/2.3,this.imageCenterOffsetY=this.imageSize/1.5,this.timerTickingInstance=a}calculateImageAndFontSize(){1.4*this.context.measureText(this.text).width>this.canvasHeight/9.5?(this.imageSize=1.1*this.context.measureText(this.text).width,this.textFontSize=this.canvasHeight/25,this.text.length>=3&&this.origx<50&&this.origx<this.canvasWidth/2&&(this.x=this.origx+21)):(this.imageSize=this.canvasHeight/9.5,this.textFontSize=this.canvasHeight/20)}getEase=(e,t,n,i)=>-n/2*(Math.cos(Math.PI*e/i)-1)+t;getX=()=>this.frame>=100?this.x:this.getEase(this.frame,0,this.x,100);getY=()=>this.frame>=100?this.y:this.getEase(this.frame,0,this.y,100);adjustSize(e,t){return e?1.25*t:t}draw(e,t=!1){const n=this.adjustSize(t,this.imageSize),i=this.adjustSize(t,this.imageCenterOffsetX),s=this.adjustSize(t,this.imageCenterOffsetY),r=this.getX()-i,o=this.getY()-s;t?(this.context.shadowColor="rgba(255, 255, 255, 1)",this.context.shadowBlur=12,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0):(this.context.shadowColor="transparent",this.context.shadowBlur=0,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0),this.context.drawImage(this.img,r,o,n,n),this.context.shadowColor="transparent",this.context.shadowBlur=0,this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${N}, monospace`,this.context.textAlign="center",this.context.fillText(this.text,this.getX(),this.getY()),this.frame<100?this.frame=this.frame+1:null==this.tutorialInstance&&null==this.tutorialInstance||this.tutorialInstance.draw(e,this.img,this.imageSize)}}const t={english:"Consolas",swahili:"Consolas",wolof:"Consolas",tajik:"Consolas",marathi:"Consolas",amharic:"Consolas",punjabi:"Consolas",tamil:"Consolas",sepedi:"Consolas",gujarati:"Consolas",telugu:"Consolas",tsonga:"Consolas",malay:"Consolas",ndebele:"Consolas",venda:"NotoSans-Regular",siswati:"Consolas",tswana:"Consolas",thai:"Consolas",fula:"Consolas",farsi:"Consolas",burmese:"Consolas",bengali:"Consolas",Azerbaijani:"NotoSans-Regular",Sesotho:"Consolas",Georgian:"Consolas",BrazilianPortuguese:"Consolas",Somali:"Consolas",Hausa:"NotoSans-Regular",Igbo:"Consolas",HatianCreole:"Consolas",Oromo:"Consolas",Luganda:"Consolas",Yoruba:"Consolas",Khmer:"Consolas",Javanese:"Consolas",Urdu:"Consolas",Kinyarwanda:"Consolas",Shona:"Consolas",Kurdish:"Consolas",French:"Consolas",isiXhosa:"Consolas",Afrikaans:"Consolas",Nepali:"Consolas",Ukrainian:"Consolas",Hindi:"Consolas",Tagalog:"Consolas",Vietnamese:"NotoSans-Regular",Pashto:"Consolas",Twi:"NotoSans-Regular",Arabic:"Adobe-Arabic-Bold"};class i{static UrlSubstring="/feedthemonster";static getConvertedDevProdURL(e){return R.DevelopmentLink?e.slice(0,e.indexOf(this.UrlSubstring)+this.UrlSubstring.length)+"dev"+e.slice(e.indexOf(this.UrlSubstring)+this.UrlSubstring.length):e}static getLanguageSpecificFont(e){const n=e.toLowerCase();for(const e in t)if(e.toLowerCase()===n)return t[e];return console.log(`Font not found for language: ${e}`),"NotoSans-Regular"}static getRandomNumber(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getExcludedCoordinates(e,t){return{excludeX:e.width*(t/100),excludeY:e.height*(t/100)}}}function s(e,t){const n={};let i=0;const s=Object.keys(e).length;for(let r in e)n[r]=new Image,n[r].onload=function(){++i>=s&&t(n)},n[r].src=e[r]}const r=async e=>{const t=Object.keys(e).map((async t=>{const n=await(async e=>{const t=new Image;return new Promise((n=>{t.onload=()=>n(t),t.src=e}))})(e[t]);return{[t]:n}}));return(await Promise.all(t)).reduce(((e,t)=>({...e,...t})),{})};const o=()=>"visible"===document.visibilityState,a=(e=!1,t)=>{e?t.classList.remove("show"):t.classList.add("show")},l="pwa_installed_status",c="storePreviousPlayedLevel",u="is_cached",h="./assets/audios/Eat.mp3",d=e=>`./assets/audios/Cheering-0${e}.mp3`,p="./assets/audios/intro.mp3",m=["./assets/audios/intro.mp3","./assets/audios/Cheering-02.mp3","./assets/audios/Cheering-03.mp3","./assets/audios/Cheering-01.mp3","./assets/audios/onDrag.mp3","./assets/audios/timeout.mp3","./assets/audios/LevelWinFanfare.mp3","./assets/audios/LevelLoseFanfare.mp3","./assets/audios/ButtonClick.mp3","./assets/audios/Monster Spits wrong stones-01.mp3","./assets/audios/Disapointed-05.mp3","./assets/audios/MonsterSpit.mp3","./assets/audios/Eat.mp3","./assets/audios/PointsAdd.wav","./assets/audios/are-you-sure.mp3"],g="./assets/images/Totem_v02_v01.webp",f="./assets/images/hill.webp",v="./assets/images/fence_v01.webp",b="./assets/images/bg_v01.webp",y="./assets/images/timer_empty.webp",w="./assets/images/timer.webp",S="./assets/images/next_btn.webp",E={DEFAULT_BACKGROUND_1:b,ASSETS_PATH_HILL:f,ASSETS_PATH_TOTEM:g,ASSETS_PATH_FENCE:v},T={AUTUMN_BACKGROUND_1:"./assets/images/Autumn_bg_v01.webp",AUTUMN_HILL_1:"./assets/images/Autumn_hill.webp",AUTUMN_PILLAR_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_SIGN_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_FENCE_1:"./assets/images/Autumn_fence_v01.webp"},x={WINTER_BACKGROUND_1:"./assets/images/Winter_bg_01.webp",WINTER_HILL_1:"./assets/images/Winter_hill.webp",WINTER_SIGN_1:"./assets/images/Winter_sign_v01.webp",WINTER_FENCE_1:"./assets/images/Winter_fence_v01.webp",WINTER_PILLAR_1:"./assets/images/Winter_sign_v01.webp"},I="LoadingTransition",C="StartScene",A="LevelSelection",k="GamePlay",P="LevelEnd",L=[5,13,20,30,42],D=new URLSearchParams(window.location.search);var j=D.get("cr_user_id"),M=null==D.get("source")?null:D.get("source"),B=null==D.get("campaign_id")?null:D.get("campaign_id"),O=null==D.get("cr_lang")?"english":D.get("cr_lang");const N=i.getLanguageSpecificFont(O),R={DevelopmentLink:!!window.location.href.includes("https://feedthemonsterdev.curiouscontent.org"),DebugMode:!1},z="loadpuzzle",F="stonesdropped",U="click",V="visibilitychange",$="./lang/"+O+"/ftm_"+O+".json";async function G(){return await fetch($,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json().then((e=>e))))}class W{title;otherAudios;levels;FeedbackTexts;FeedbackAudios;rightToLeft;majVersion;minVersion;version;constructor(e,t,n,i,s,r,o,a,l){this.title=e,this.otherAudios=new H(t),this.levels=this.getLevels(n),this.FeedbackTexts=new K(i),this.FeedbackAudios=new X(r),this.rightToLeft=s,this.majVersion=o,this.minVersion=a,this.version=l}getLevels(e){let t=[];for(let n=0;n<e.length;n++)t.push(new Y(e[n]));return t}}class H{selctYourPlayer;watchMeGrow;areYouSure;constructor(e){this.selctYourPlayer=e["Select your player"],this.watchMeGrow=e["Watch me grow"],this.areYouSure=e["Are you sure"]}}class K{fantastic;great;amazing;constructor(e){e.length>=1&&(this.fantastic=e[0]),e.length>=2&&(this.great=e[1]),e.length>=3&&(this.amazing=e[2])}}class X{fantastic;great;amazing;constructor(e){e.length>=1&&(this.fantastic=e[0]),e.length>=2&&(this.great=e[1]),e.length>=3&&(this.amazing=e[2])}}class Y{puzzles;levelMeta;levelNumber;constructor(e){this.puzzles=this.getPuzzleData(e),this.levelMeta=new Q(e.LevelMeta),this.levelNumber=e.LevelNumber}getPuzzleData(e){let t=[];return e.Puzzles.map(((e,n)=>{t.push(new q(e))})),t}}class q{segmentNumber;prompt;foilStones;targetStones;constructor(e){this.segmentNumber=e.SegmentNumber,this.prompt=new J(e.prompt),this.foilStones=this.getFoilStones(e),this.targetStones=this.getTargetStones(e)}getFoilStones(e){let t=[];return e.foilstones.map(((e,n)=>{t.push(e.StoneText)})),t}getTargetStones(e){let t=[];return e.targetstones.map(((e,n)=>{t.push(e.StoneText)})),t}}class J{promptText;promptAudio;constructor(e){this.promptText=e.PromptText,this.promptAudio=e.PromptAudio}}class Q{promptFadeOut;letterGroup;levelNumber;protoType;levelType;constructor(e){this.promptFadeOut=e.PromptFadeout,this.letterGroup=e.LetterGroup,this.levelNumber=e.LevelNumber,this.protoType=e.PromptType,this.levelType=e.LevelType}}class Z{static currentlanguage=O;static setGameLevelScore(e,t){let n=this.calculateStarCount(t),i={levelName:e.levelMeta.levelType,levelNumber:e.levelMeta.levelNumber,score:t,starCount:n};this.setTotalStarCount(n);let s=this.getAllGameLevelInfo(),r=-1;for(let e=0;e<s.length;e++)if(s[e].levelNumber===i.levelNumber){r=e;break}-1!==r&&i.score>s[r].score?s[r]=i:s.push(i),localStorage.setItem(this.currentlanguage+"gamePlayedInfo",JSON.stringify(s))}static getAllGameLevelInfo(){const e=localStorage.getItem(this.currentlanguage+"gamePlayedInfo");return null==e?[]:JSON.parse(e)}static setTotalStarCount(e){let t=this.getTotalStarCount()+e;localStorage.setItem(this.currentlanguage+"totalStarCount",t)}static getTotalStarCount(){const e=localStorage.getItem(this.currentlanguage+"totalStarCount");return null==e?0:parseInt(e)}static calculateStarCount(e){return 200==e?1:300==e||400==e?2:500==e?3:0}static getDatafromStorage(){return R.DebugMode?JSON.parse(localStorage.getItem(O+"ProfileDebug")||"{}"):JSON.parse(localStorage.getItem(O+"Profile")||"{}")}}const ee={default:"Atma-SemiBold",english:"Atma-SemiBold",swahili:"Atma-SemiBold",wolof:"Atma-SemiBold",tajik:"Atma-SemiBold",marathi:"Atma-SemiBold",amharic:"Atma-SemiBold",punjabi:"Atma-SemiBold",tamil:"Atma-SemiBold",sepedi:"Atma-SemiBold",gujarati:"Atma-SemiBold",telugu:"Atma-SemiBold",tsonga:"Atma-SemiBold",malay:"Atma-SemiBold",ndebele:"Atma-SemiBold",venda:"Atma-SemiBold",siswati:"Atma-SemiBold",tswana:"Atma-SemiBold",thai:"Atma-SemiBold",fula:"Atma-SemiBold",farsi:"Atma-SemiBold",burmese:"Atma-SemiBold",bengali:"Atma-SemiBold",Azerbaijani:"Atma-SemiBold",Sesotho:"Atma-SemiBold",Georgian:"Atma-SemiBold",BrazilianPortuguese:"Atma-SemiBold",Somali:"Atma-SemiBold",Hausa:"Atma-SemiBold",Igbo:"Atma-SemiBold",HatianCreole:"Atma-SemiBold",Oromo:"Atma-SemiBold",Luganda:"Atma-SemiBold",Yoruba:"Atma-SemiBold",Khmer:"Atma-SemiBold",Javanese:"Atma-SemiBold",Urdu:"Atma-SemiBold",Kinyarwanda:"Atma-SemiBold",Shona:"Atma-SemiBold",Kurdish:"Atma-SemiBold",French:"Atma-SemiBold",isiXhosa:"Atma-SemiBold",Afrikaans:"Atma-SemiBold",Nepali:"Atma-SemiBold",Ukrainian:"Atma-SemiBold",Hindi:"Atma-SemiBold",Tagalog:"Atma-SemiBold",Vietnamese:"Atma-SemiBold",Pashto:"Atma-SemiBold",Twi:"Atma-SemiBold",Arabic:"Atma-SemiBold"};class te{audioContext;sourceNode;audioQueue;promptAudioBuffer;clickSoundBuffer;static audioBuffers=new Map;audioSourcs=[];isClickSoundLoaded;constructor(){this.audioContext=ne.getAudioContext(),this.sourceNode=null,this.audioQueue=[],this.clickSoundBuffer=null,this.isClickSoundLoaded=!1}async playButtonClickSound(){const e="./assets/audios/ButtonClick.mp3";if(!this.isClickSoundLoaded)try{this.clickSoundBuffer=await this.loadAndDecodeAudio(e),te.audioBuffers.set(e,this.clickSoundBuffer),this.isClickSoundLoaded=!0}catch(e){return void console.error("Error loading or decoding click sound:",e)}if(this.clickSoundBuffer){const e=this.audioContext.createBufferSource();e.buffer=this.clickSoundBuffer,e.connect(this.audioContext.destination),e.start()}else console.error("Click sound buffer is not available.")}async loadAndDecodeAudio(e){return new Promise((async(t,n)=>{try{const n=await fetch(e),i=await n.arrayBuffer();t(await this.audioContext.decodeAudioData(i))}catch(e){console.error("Error loading or decoding audio:",e),n(e)}}))}async preloadPromptAudio(e){const t=await this.loadAndDecodeAudio(e);t&&(this.promptAudioBuffer=t)}async preloadGameAudio(e){if(te.audioBuffers.has(e))return;const t=await this.loadAndDecodeAudio(e);t&&te.audioBuffers.set(e,t)}playAudio(e){const t=te.audioBuffers.get(e);if(t){const e=this.audioContext.createBufferSource();e.buffer=t,e.connect(this.audioContext.destination),this.audioSourcs.push(e),e.start()}}playFeedbackAudios=(e=!1,...t)=>{t.length>0&&(this.audioQueue=t,this.playFetch(0,e))};playPromptAudio=e=>{if(this.promptAudioBuffer){const e=this.audioContext.createBufferSource();e.buffer=this.promptAudioBuffer,e.connect(this.audioContext.destination),this.audioSourcs.push(e),e.start()}};stopFeedbackAudio=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[]};stopAllAudios=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[],this.audioSourcs.forEach((e=>{e.stop()})),this.audioSourcs=[]};playFetch=(e,t)=>{e>=this.audioQueue.length?this.stopFeedbackAudio():this.audioQueue[e]&&fetch(this.audioQueue[e]).then((e=>e.arrayBuffer())).then((n=>{this.audioContext?.decodeAudioData(n,(n=>{this.sourceNode=this.audioContext?.createBufferSource(),this.sourceNode.buffer=n,this.sourceNode.connect(this.audioContext?.destination),this.sourceNode.loop=t,this.sourceNode.onended=()=>this.handleAudioEnded(e,t),this.sourceNode.start()}))}))};handleAudioEnded=(e,t)=>{this.sourceNode&&(this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.disconnect(),this.sourceNode=null),this.playFetch(e+1,t)}}class ne{static instance=null;static getAudioContext(){return ne.instance||(ne.instance=new(window.AudioContext||window.webkitAudioContext)),ne.instance}}class ie{id;element;audioPlayer;clickListener;constructor(e){this.id=e.id,this.audioPlayer=new te;const t=document.getElementById(e.id);t?this.element=t:(this.element=this.createButtonElement(e),this.injectButtonIntoTarget(e.targetId||"game-control")),e.onClick&&this.onClick(e.onClick)}onClick(e){this.clickListener=t=>{t.preventDefault(),this.element.hasAttribute("disabled")||(this.audioPlayer&&this.audioPlayer.playButtonClickSound(),this.element.style.transform="scale(0.90)",setTimeout((()=>{this.element.style.transform="scale(1)"}),100),e())},this.element.addEventListener("click",this.clickListener)}createButtonElement({id:e,className:t="",imageSrc:n,imageAlt:i="Button Image"}){const s=document.createElement("div");return s.innerHTML=`\n      <button id="${e}" class="dynamic-button ${t}">\n        ${n?`<img src="${n}" alt="${i}" class="button-image" />`:""}\n      </button>\n    `,s.firstElementChild}injectButtonIntoTarget(e){const t=document.getElementById(e);t&&t.appendChild(this.element)}setDisabled(e){e?(this.element.setAttribute("disabled","true"),this.element.classList.add("disabled")):(this.element.removeAttribute("disabled"),this.element.classList.remove("disabled"))}dispose(){this.clickListener&&(this.element.removeEventListener("click",this.clickListener),this.clickListener=null),this.audioPlayer=null}getElement(){return this.element}destroy(){const e=document.getElementById(this.id);e&&e.remove()}}class se extends ie{constructor(e={}){super({id:e.id||"pause-button",className:e.className||"pause-button-image",imageSrc:"./assets/images/pause_v01.webp",imageAlt:e.imageAlt||"Pause Icon",targetId:e.targetId||"game-control",...e})}}class re{handler;stoneDropCallbackHandler;loadPuzzleCallbackHandler;constructor(e){this.handler=e,this.stoneDropCallbackHandler=e.stoneDropCallbackHandler,this.loadPuzzleCallbackHandler=e.loadPuzzleCallbackHandler,document.addEventListener(F,this.handleStoneDroppedEvent,!1),document.addEventListener(z,this.handleLoadPuzzleEvent,!1)}handleStoneDroppedEvent=e=>{this.stoneDropCallbackHandler(e)};handleLoadPuzzleEvent=e=>{this.loadPuzzleCallbackHandler(e)};unregisterEventListener=()=>{document.removeEventListener(F,this.handleStoneDroppedEvent,!1),document.removeEventListener(z,this.handleLoadPuzzleEvent,!1)}}class oe{options;isRendered=!1;id;template;shouldSanitize;constructor(e,t,n,i=!1){this.options=e,this.id=t,this.template=n,this.shouldSanitize=i,this._init()}_init(){this.shouldSanitize&&this.sanitizeElement(),this.render()}render(){if(this.isRendered)return;const{root:e}=this.options.selectors,t=document.querySelector(e),n=this.template(this.id);t&&t.insertAdjacentHTML("beforeend",n),this.isRendered=!0}getElements(e){return document.querySelectorAll(e)}sanitizeElement(){const e=document.querySelectorAll(`#${this.id}`);e.length&&e.forEach((e=>{e.remove()}))}destroy(){const e=document.getElementById(this.id);e&&e.remove(),this.isRendered=!1}}var ae=n(72),le=n.n(ae),ce=n(825),ue=n.n(ce),he=n(659),de=n.n(he),pe=n(56),me=n.n(pe),ge=n(540),fe=n.n(ge),ve=n(113),be=n.n(ve),ye=n(632),_e={};_e.styleTagTransform=be(),_e.setAttributes=me(),_e.insert=de().bind(null,"head"),_e.domAPI=ue(),_e.insertStyleElement=fe();le()(ye.A,_e);ye.A&&ye.A.locals&&ye.A.locals;const we={root:".game-control",bars:".bar-level"},Se=e=>`\n    <div id="${e}" class="level_content-wrapper">\n        <img class="level-background" src="./assets/images/levels_v01.webp"/>\n        <div class="bar-level-wrapper">\n           ${Array(5).fill('<img class="bar-level" src="./assets/images/bar_empty_v01.webp" alt="bar" />').join("")}\n        </div>\n    </div>\n  `;class Ee extends oe{constructor(e="level-field",t={selectors:we}){super(t,e,Se)}updateLevel(e){const t=e-1;if(t<0)return;const{bars:n}=this.options.selectors,i=this.getElements(n);i.length&&i[t]&&(i[t].src="./assets/images/bar_full_v01.webp")}}class Te extends re{levelBarIndicator;constructor(){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.levelBarIndicator=new Ee}setIndicators(e){this.levelBarIndicator.updateLevel(e)}addDropStoneEvent(){document.addEventListener("dropstone",(e=>{this.setIndicators(2)}))}dispose(){this.unregisterEventListener(),this.levelBarIndicator.destroy()}handleStoneDrop(e){}handleLoadPuzzle(e){this.setIndicators(e.detail.counter)}}class xe extends re{width;height;levelData;currentPromptText;currentPuzzleData;canavsElement;context;prompt_image;targetStones;rightToLeft;imagesLoaded=!1;audioPlayer;isStoneDropped=!1;droppedStones=0;droppedStoneCount=0;time=0;promptImageWidth=0;isAppForeground=!0;scale=1;isScalingUp=!0;scaleFactor=5e-4;promptImageHeight=0;promptPlayButton;constructor(e,t,n,i,s){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.width=e,this.height=t,this.levelData=i,this.rightToLeft=s,this.currentPromptText=n.prompt.promptText,this.currentPuzzleData=n,this.targetStones=this.currentPuzzleData.targetStones,this.canavsElement=document.getElementById("canvas"),this.context=this.canavsElement.getContext("2d"),this.audioPlayer=new te,this.audioPlayer.preloadPromptAudio(this.getPromptAudioUrl()),this.prompt_image=new Image,this.promptPlayButton=new Image,this.loadImages(),this.time=0,this.promptImageWidth=.65*this.width,this.promptImageHeight=.3*this.height,document.addEventListener(V,this.handleVisibilityChange,!1)}handleMouseDown=e=>{const t=document.getElementById("canvas");e.preventDefault();var n=t.getBoundingClientRect();const i=e.clientX-n.left,s=e.clientY-n.top;this.onClick(i,s)&&this.playSound()};getPromptAudioUrl=()=>i.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio);playSound=()=>{this.isAppForeground&&this.audioPlayer.playPromptAudio(i.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio))};onClick(e,t){return Math.sqrt(e-this.width/3)<12&&Math.sqrt(t-this.height/5.5)<10}setCurrrentPuzzleData(e){this.currentPuzzleData=e,this.currentPromptText=e.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones}drawRTLLang(){var e=this.width/2;const t=.26*this.height;this.context.textAlign="center";var n=this.calculateFont();const i=this.promptImageWidth,s=this.promptImageHeight;if(this.context.font=`${n}px ${N}, monospace`,"LetterInWord"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){var r=this.currentPromptText.replace(new RegExp(this.currentPuzzleData.targetStones[0],"g"),"");this.context.fillStyle="red",this.context.fillText(this.targetStones[0],e+this.context.measureText(r).width/2,t),this.context.fillStyle="black",this.context.fillText(r,e-this.context.measureText(this.targetStones[0]).width/2,t)}else this.context.drawImage(this.promptPlayButton,this.width/2.4,t/1.15,i/4,s/4);else if("Word"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){e-=.5*this.context.measureText(this.currentPromptText).width;for(let n=this.targetStones.length-1;n>=0;n--)this.droppedStones>n||null==this.droppedStones?(this.context.fillStyle="black",this.context.fillText(this.targetStones[n],e,t)):(this.context.fillStyle="red",this.context.fillText(this.targetStones[n],e,t)),e=e+this.context.measureText(this.targetStones[n]).width+5}else this.context.drawImage(this.promptPlayButton,this.width/2.4,t/1.15,i/4,s/4);else if("audioPlayerWord"==this.levelData.levelMeta.levelType){const e=1.25*(this.width-i),t=.33*(this.height-s);this.context.drawImage(this.promptPlayButton,e,t,i/4,s/4)}else"Visible"==this.levelData.levelMeta.protoType?(this.context.fillStyle="black",this.context.fillText(this.currentPromptText,e,t)):this.context.drawImage(this.promptPlayButton,this.width/2.4,t/1.15,i/4,s/4)}drawOthers(){const e=this.currentPromptText.split(""),t=(this.width,.28*this.height),n=this.promptImageWidth,i=this.promptImageHeight;var s=this.calculateFont();this.context.font=`${s}px ${N}, monospace`;let r=this.width/2-this.context.measureText(this.currentPromptText).width/2,o=0;var a=this.currentPuzzleData.targetStones[0],l=this.currentPromptText.substring(0,this.currentPromptText.indexOf(a)),c=this.currentPromptText.substring(this.currentPromptText.indexOf(a)+a.length);"LetterInWord"===this.levelData.levelMeta.levelType&&"Visible"==this.levelData.levelMeta.protoType&&(l.length>0&&(this.context.fillStyle="black",this.context.fillText(l,r,t),o=(this.context.measureText(l).width+this.context.measureText(a).width)/2,r+=o),a.length>0&&(this.context.fillStyle="red",this.context.fillText(a,r,t),o=(this.context.measureText(a).width+this.context.measureText(c).width)/2,r+=o),c.length>0&&(this.context.fillStyle="black",this.context.fillText(c,r,t)));for(let s=0;s<e.length;s++){switch(this.levelData.levelMeta.levelType){case"LetterInWord":break;case"Word":if("Visible"==this.levelData.levelMeta.protoType){if(this.targetStones.length!=this.currentPromptText.length){this.targetStones.length>s&&(this.context.fillStyle=this.droppedStoneCount>s||null==this.droppedStoneCount?"black":"red",this.context.fillText(this.targetStones[s],r+r/10,t));break}this.context.fillStyle=this.droppedStones>s||null==this.droppedStones?"black":"red",this.context.fillText(e[s],r,t);break}this.context.drawImage(this.promptPlayButton,this.width/2.4,t/1.25,n/4,i/4);case"SoundWord":this.context.drawImage(this.promptPlayButton,this.width/2.4,t/1.25,n/4,i/4);break;default:if("Visible"==this.levelData.levelMeta.protoType){this.context.fillStyle="black",this.context.fillText(this.currentPromptText,this.width/2.1,t);break}this.context.drawImage(this.promptPlayButton,this.width/2.4,t/1.25,n/4,i/4)}o=(this.context.measureText(e[s]).width+this.context.measureText(e[s+1]).width)/2,r+=o}}draw(e){if(this.updateScaling(),this.time=e<17?this.time+Math.floor(e):this.time+16,Math.floor(this.time)>=1910&&Math.floor(this.time)<=1926&&this.playSound(),!this.isStoneDropped){const e=this.promptImageWidth*this.scale,t=this.promptImageHeight*this.scale,n=(this.width-e)/2,i=(this.height-t)/5;this.context.drawImage(this.prompt_image,n,i,e,t),this.context.fillStyle="black",this.rightToLeft?this.drawRTLLang():this.drawOthers()}}handleStoneDrop(e){this.isStoneDropped=!0}handleLoadPuzzle(e){this.droppedStones=0,this.droppedStoneCount=0,this.currentPuzzleData=this.levelData.puzzles[e.detail.counter],this.currentPromptText=this.currentPuzzleData.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones,this.audioPlayer.preloadPromptAudio(this.getPromptAudioUrl()),this.isStoneDropped=!1,this.time=0}dispose(){document.removeEventListener(V,this.handleVisibilityChange,!1),this.unregisterEventListener()}droppedStoneIndex(e){this.droppedStones=e,this.droppedStoneCount++}calculateFont(){return this.promptImageWidth/this.currentPromptText.length>35?35:.65*this.width/this.currentPromptText.length}updateScaling(){this.isScalingUp?(this.scale+=this.scaleFactor,this.scale>=1.05&&(this.isScalingUp=!1)):(this.scale-=this.scaleFactor,this.scale<=1&&(this.scale=1,this.isScalingUp=!0))}handleVisibilityChange=()=>{"hidden"==document.visibilityState&&(this.audioPlayer.stopAllAudios(),this.isAppForeground=!1),"visible"==document.visibilityState&&(this.isAppForeground=!0)};async loadImages(){const e=this.loadImage(this.prompt_image,"./assets/images/promptTextBg.webp"),t=this.loadImage(this.promptPlayButton,"./assets/images/promptPlayButton.webp");await Promise.all([e,t]),this.imagesLoaded=!0}loadImage(e,t){return new Promise(((n,i)=>{e.onload=()=>{n()},e.src=t,e.onerror=e=>{i(e)}}))}}class Ie{subscribers;listenerIdCounter;constructor(){this.subscribers={},this.listenerIdCounter=0}checkSubscribers(){console.log("checkSubscribers ",this.subscribers)}subscribe(e,t){const n=this.listenerIdCounter++;return this.subscribers[e]||(this.subscribers[e]={}),this.subscribers[e][n]=t,()=>{this.unsubscribe(e,n)}}unsubscribe(e,t){this.subscribers[e]&&this.subscribers[e][t]&&delete this.subscribers[e][t]}publish(e,t){this.subscribers[e]&&Object.keys(this.subscribers[e]).forEach((n=>{this.subscribers[e][n]&&this.subscribers[e][n](t)}))}}const Ce=new class extends Ie{EVENTS;data;canvas;width;height;canavsElement;context;gameCanvasContext;riveCanvas;riveCanvasWidth;riveCanvasHeight;loadingCanvas;loadingContext;isGamePaused;gamePlayData;feedbackTexts;rightToLeft;majVersion;minVersion;feedbackAudios;clickTrailToggle;offsetCoordinateValue;levelEndData;isLastLevel;constructor(){super(),this.EVENTS={SCENE_LOADING_EVENT:"SCENE_LOADING_EVENT",GAMEPLAY_DATA_EVENT:"GAMEPLAY_DATA_EVENT",GAME_START:"GAME_START",GAME_PAUSE_STATUS_EVENT:"GAME_PAUSE_STATUS_EVENT",GAME_TRAIL_EFFECT_TOGGLE_EVENT:"GAME_TRAIL_EFFECT_TOGGLE_EVENT",LEVEL_END_DATA_EVENT:"LEVEL_END_DATA_EVENT"},this.data=null,this.canvas=null,this.width=0,this.height=0,this.canavsElement=null,this.context=null,this.gameCanvasContext=null,this.riveCanvas=null,this.riveCanvasWidth=0,this.riveCanvasHeight=0,this.isGamePaused=!1,this.gamePlayData=null,this.feedbackAudios=null,this.feedbackTexts=null,this.rightToLeft=!1,this.majVersion=0,this.minVersion=0,this.clickTrailToggle=!1,this.offsetCoordinateValue=32,this.initListeners(),this.levelEndData=null,this.isLastLevel=!1}initListeners(){this.subscribe(this.EVENTS.GAMEPLAY_DATA_EVENT,(e=>{this.gameStateGamePlayDataListener(e)})),this.subscribe(this.EVENTS.GAME_PAUSE_STATUS_EVENT,(e=>{this.updateGamePauseActivity(e)})),this.subscribe(this.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,(e=>{this.updateGameTrailToggle(e)})),this.subscribe(this.EVENTS.LEVEL_END_DATA_EVENT,(e=>{this.levelEndSceneData(e)}))}gameStateGamePlayDataListener(e){this.gamePlayData=e,this.isGamePaused=!1}updateGamePauseActivity(e){this.isGamePaused=e}updateGameTrailToggle(e){this.clickTrailToggle=e}setDefaultGameStateValues(e,t,n){this.data=e,this.canvas=t,this.width=t.width,this.height=t.height,this.canavsElement=n,this.context=n.getContext("2d"),this.gameCanvasContext=t.getContext("2d",{willReadFrequently:!0}),this.loadingCanvas=document.getElementById("loading"),this.loadingContext=this.loadingCanvas.getContext("2d"),this.feedbackTexts=e.FeedbackTexts,this.feedbackAudios=e.FeedbackAudios,this.rightToLeft=e.rightToLeft,this.majVersion=e.majVersion,this.minVersion=e.minVersion}getLoadingSceneDetails(){return(e=>{const t=e.loadingCanvas;return t.height=e.height,t.width=e.width,{canvas:t,height:e.height,width:e.width,context:e.loadingContext}})(this)}getGamePlaySceneDetails(){return(e=>{const t=e.majVersion&&e.minVersion?e.majVersion.toString()+"."+e.minVersion.toString():"";return{canvas:e.canvas,width:e.width,height:e.height,canavsElement:e.canavsElement,gameCanvasContext:e.gameCanvasContext,levelData:{...e.gamePlayData.currentLevelData},levelNumber:e.gamePlayData.selectedLevelNumber,feedBackTexts:{...e.feedbackTexts},rightToLeft:e?.rightToLeft,jsonVersionNumber:t,feedbackAudios:{...e.feedbackAudios},isGamePaused:e.isGamePaused,data:e.data,isLastLevel:e.isLastLevel}})(this)}getStonePositions(){return(({offsetCoordinateValue:e,width:t,height:n,riveCanvasWidth:i,riveCanvasHeight:s})=>{const r=i||t,o=s||n,a=(e,t)=>540>r?t:e;return[[5,1.9],[7,1.5],[a(4.3,4.5),1.28],[6.4,1.1],[a(2,1.3),1.07],[[2.3,2.1],1.9],[[a(2.8,2.5),2],1.2],[[a(3,2.4),2.1],1.42]].map(((t,n)=>{const i=t[0],s=t[1];return[(Array.isArray(i)?r/i[0]+r/i[1]:r/i)-e+(n<4?25:0),o/s-e]})).sort((()=>Math.random()-.5))})(this)}levelEndSceneData({levelEndData:e,data:t}){this.levelEndData={...e},this.data=t,this.isLastLevel=e.currentLevel===t.levels[t.levels.length-1].levelMeta.levelNumber}getLevelEndSceneData(){return{starCount:(e=this).levelEndData.starCount,currentLevel:e.levelEndData.currentLevel,isTimerEnded:e.levelEndData.isTimerEnded,data:e.data};var e}};class Ae extends re{context;canvas;currentPuzzleData;targetStones;stonePos;pickedStone;foilStones=new Array;answer="";puzzleNumber;levelData;correctAnswer;puzzleStartTime;showTutorial=null==Z.getDatafromStorage().length;correctStoneAudio;tutorial;correctTargetStone;stonebg;audioPlayer;feedbackAudios;timerTickingInstance;isGamePaused=!1;unsubscribeEvent;constructor(e,t,n,i,s,r){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.cleanup(),this.context=e,this.canvas=t,this.puzzleNumber=n,this.levelData=i,this.setTargetStone(this.puzzleNumber),this.stonePos=Ce.getStonePositions(),this.correctStoneAudio=new Audio("assets/audios/CorrectStoneFinal.mp3"),this.correctStoneAudio.loop=!1,this.feedbackAudios=this.convertFeedBackAudiosToList(s),this.puzzleStartTime=new Date,this.tutorial=new ke(e,t.width,t.height,n),this.stonebg=new Image,this.stonebg.src="./assets/images/stone_pink.webp",this.audioPlayer=new te,this.stonebg.onload=e=>{this.createStones(this.stonebg)},this.audioPlayer=new te,this.timerTickingInstance=r,document.addEventListener(V,this.handleVisibilityChange,!1),this.unsubscribeEvent=Ce.subscribe(Ce.EVENTS.GAME_PAUSE_STATUS_EVENT,(e=>{this.isGamePaused=e}))}createStones(t){const n=this.getFoilStones();for(let i=0;i<n.length;i++)this.foilStones.push(new e(this.context,this.canvas.width,this.canvas.height,n[i],this.stonePos[i][0],this.stonePos[i][1],t,this.timerTickingInstance,null))}draw(e){this.foilStones.length>0&&(this.foilStones.forEach((t=>{t&&void 0!==t.frame&&t.draw(e)})),this.foilStones[this.foilStones.length-1].frame>=100&&!this.isGamePaused&&this.timerTickingInstance.update(e))}drawWordPuzzleLetters(e,t,n){for(let i=0;i<this.foilStones.length;i++)t(i)&&this.foilStones[i].draw(e,Object.keys(n).length>1&&void 0!==n[i]);this.foilStones.length>0&&this.foilStones[this.foilStones.length-1].frame>=100&&!this.isGamePaused&&this.timerTickingInstance.update(e)}setTargetStone(e){this.currentPuzzleData=this.levelData.puzzles[e],this.targetStones=[...this.currentPuzzleData.targetStones],this.correctTargetStone=this.targetStones.join("")}handleStoneDrop(e){this.foilStones=[]}handleLoadPuzzle(e){this.foilStones=[],this.tutorial.setPuzzleNumber(e.detail.counter),this.puzzleNumber=e.detail.counter,this.setTargetStone(this.puzzleNumber),this.createStones(this.stonebg)}dispose(){this.unsubscribeEvent(),document.removeEventListener(V,this.handleVisibilityChange,!1),this.unregisterEventListener()}isStoneLetterDropCorrect(e,t,n=!1){const i=n?e==this.correctTargetStone.substring(0,e.length):e==this.correctTargetStone;return this.processLetterDropFeedbackAudio(t,i,n,e),i}processLetterDropFeedbackAudio(e,t,n,i){if(t){(n?i===this.getCorrectTargetStone():t)?this.playCorrectAnswerFeedbackSound(e):this.audioPlayer.playFeedbackAudios(!1,h,d(2))}else this.audioPlayer.playFeedbackAudios(!1,h,"./assets/audios/MonsterSpit.mp3",Math.round(Math.random())>0?"./assets/audios/Disapointed-05.mp3":null)}getCorrectTargetStone(){return this.correctTargetStone}getFoilStones(){this.currentPuzzleData.targetStones.forEach((e=>{const t=this.currentPuzzleData.foilStones.indexOf(e);-1!==t&&this.currentPuzzleData.foilStones.splice(t,1)}));const e=this.currentPuzzleData.targetStones.length+this.currentPuzzleData.foilStones.length;if(e>8){const t=e-8;this.currentPuzzleData.foilStones.splice(0,t)}return this.currentPuzzleData.targetStones.forEach((e=>{this.currentPuzzleData.foilStones.push(e)})),this.currentPuzzleData.foilStones.sort((()=>Math.random()-.5))}handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),this.correctStoneAudio.pause()};convertFeedBackAudiosToList(e){return[e.fantastic,e.great,e.amazing]}playCorrectAnswerFeedbackSound(e){const t=i.getRandomNumber(1,3).toString();this.audioPlayer.playFeedbackAudios(!1,h,d(t),"assets/audios/PointsAdd.wav",i.getConvertedDevProdURL(this.feedbackAudios[e])),this.correctStoneAudio.play()}cleanup(){this.foilStones=[],this.correctStoneAudio&&(this.correctStoneAudio.pause(),this.correctStoneAudio.src=""),document.removeEventListener(V,this.handleVisibilityChange),this.unsubscribeEvent&&this.unsubscribeEvent()}resetStonePosition(e,t,n){const i=t,s=n;if(i&&s&&i.text&&"number"==typeof s.origx&&"number"==typeof s.origy){const t=50,n=e/2;i.x=i.text.length<=3&&s.origx<t&&s.origx<n?s.origx+25:s.origx,i.y=s.origy}return i}computeCursorDistance(e,t,n){return Math.sqrt((e-n.x)**2+(t-n.y)**2)}handlePickStoneUp(e,t){let n=null,i=0;for(let s of this.foilStones){if(this.computeCursorDistance(e,t,s)<=40){n=s,n.foilStoneIndex=i;break}i++}return n}handleHoveringToAnotherStone(e,t,n){let i=null,s=0;for(let r of this.foilStones){if(this.computeCursorDistance(e,t,r)<=40&&n(r.text,s)){i=r,i.foilStoneIndex=s;break}s++}return i}handleMovingStoneLetter(e,t,n){const i=e,s=this.canvas.getBoundingClientRect();return i.x=t-s.left,i.y=n-s.top,i}playDragAudioIfNecessary(e){e.frame>99&&this.audioPlayer.playAudio("./assets/audios/onDrag.mp3")}}class ke{width;height;context;tutorialImg;imagesLoaded=!1;targetStonePositions;startx;starty;endx;endy;endTutorial=!1;puzzleNumber;playMnstrClkTtrlAnim=!0;totalTime=0;monsterStoneDifference=0;x;y;dx;dy;absdx;absdy;startRipple=!1;drawRipple;constructor(e,t,n,i){this.width=t,this.height=n,this.context=e,this.startx=0,this.starty=0,this.endx=this.width/2,this.endy=this.height/2,this.puzzleNumber=i>=0?i:null,this.tutorialImg=new Image,this.tutorialImg.src="./assets/images/tutorial_hand.webp",this.drawRipple=function(e){const t=e;if(!t)throw new Error("Canvas context is null");let n=0,i=0,s=10,r=10;return function(e,o,a){a&&(s=0,r=0),n=e,i=o,t.beginPath(),t.arc(n,i,s,0,2*Math.PI),t.strokeStyle="white",t.lineWidth=2,t.stroke(),t.closePath(),t.beginPath(),t.arc(n,i,r,0,2*Math.PI),t.strokeStyle="white",t.lineWidth=2,t.stroke(),t.closePath(),s+=.5,r+=.5,(s>=60||r>=60)&&(s=10,r=10)}}(this.context),this.tutorialImg.onload=()=>{this.imagesLoaded=!0}}updateTargetStonePositions(e){this.startx=e[0]-22,this.starty=e[1]-50,this.monsterStoneDifference=Math.sqrt((this.startx-this.endx)*(this.startx-this.endx)+(this.starty-this.endy)*(this.starty-this.endy)),this.animateImage()}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}setTutorialEnd(e){this.endTutorial=e}animateImage(){this.x=this.startx,this.y=this.starty,this.dx=(this.endx-this.startx)/5e3,this.dy=(this.endy-this.starty)/5e3,this.absdx=this.isMobile()?3*Math.abs(this.dx):Math.abs(this.dx),this.absdy=this.isMobile()?3*Math.abs(this.dy):Math.abs(this.dy),this.setTutorialEnd(!1)}draw(e,t,n){if(this.imagesLoaded&&!this.endTutorial&&this.shouldPlayTutorial()){this.x=this.dx>=0?this.x+this.absdx*e:this.x-this.absdx*e,this.y=this.dy>=0?this.y+this.absdy*e:this.y-this.absdy*e;const i=this.x-this.endx+this.absdx,s=this.y-this.endy+this.absdy;let r=100*Math.sqrt(i*i+s*s)/this.monsterStoneDifference;if(r<15)r>1?this.createHandScaleAnimation(e,this.endx,this.endy+30,!0):(this.x=this.startx,this.y=this.starty);else if(r>80)this.createHandScaleAnimation(e,this.startx+15,this.starty+10,!1);else{let e=this.context.globalAlpha;this.context.globalAlpha=.4,this.context.drawImage(t,this.x,this.y+20,n,n),this.context.globalAlpha=e,this.context.drawImage(this.tutorialImg,this.x+15,this.y+10)}}}createHandScaleAnimation(e,t,n,i){this.totalTime+=Math.floor(e);const s=this.sinusoidalInterpolation(this.totalTime,1,1.5,500),r=this.tutorialImg.width*s,o=this.tutorialImg.height*s;this.context.drawImage(this.tutorialImg,t,n,r,o),!i&&this.drawRipple(t+.02*this.width,n+this.tutorialImg.height/2,!1)}sinusoidalInterpolation(e,t,n,i){const s=(n-t)/2,r=Math.PI/i;return t+s*Math.sin(r*e)}clickOnMonsterTutorial(e){if(this.shouldPlayMonsterClickTutorialAnimation()){const t=2e3,n=this.height/1.9+this.tutorialImg.height/.8,i=this.height/1.9+this.tutorialImg.height/.8-this.tutorialImg.height;let s;const r=this.endx;this.totalTime<t/2?(s=i+this.totalTime/(t/2)*(n-i),this.drawRipple(r,this.height/1.9+this.tutorialImg.height/1.5,!0)):(s=n-(this.totalTime-t/2)/(t/2)*(n-i),this.drawRipple(r,this.height/1.9+this.tutorialImg.height/1.2+this.tutorialImg.height)),this.context.drawImage(this.tutorialImg,r,s,this.tutorialImg.width,this.tutorialImg.height),s<=i&&(this.totalTime=0),this.totalTime+=e}}shouldPlayTutorial(){return Z.getAllGameLevelInfo().length<=0&&0==this.puzzleNumber}shouldPlayMonsterClickTutorialAnimation(){return Z.getAllGameLevelInfo().length<=0&&this.playMnstrClkTtrlAnim}setPuzzleNumber(e){this.puzzleNumber=e}setPlayMonsterClickAnimation(e){this.playMnstrClkTtrlAnim=e}}class Pe{element;constructor(e){this.element=document.getElementById(e)}setClassName(e){this.element&&(this.element.className="",this.element.classList.add(e))}createElementWithImage(e,t,n,i){const s=document.createElement("div");s.className=e;const r=document.createElement("img");return r.src=t,r.alt=n,r.id=i,s.appendChild(r),s}}class Le extends Pe{constructor(){super("background")}generateBackground(e){const t=document.getElementById("background-elements");if(!t)return;const n=this.getAssetsForSeason(e);this.clearBackgroundContent();const i=this.createBackgroundSection(e,n);t.appendChild(i)}static createBackgroundComponent(e){const t=["summer","autumn","winter"],n=Math.floor(e/10)%t.length,i=e>=30?t[n%3]:t[n];return this.updateBackgroundClass(i),i}createBackgroundGameplay(e){const t=document.getElementById("background-elements");if(!t)return;const n=this.getAssetsForSeason(e),i=document.createElement("div");i.className=`${e}-section`;const s=this.createElementWithImage("ftm-mountain",n.hill,"Hill","hill-img"),r=this.createElementWithImage("ftm-fence",n.fence,"Fence","fence-img"),o=this.createElementWithImage("ftm-totem",n.totem,"Totem","totem-img");i.append(s,r,o),t.appendChild(i)}getAssetsForSeason(e){switch(e){case"summer":return{hill:E.ASSETS_PATH_HILL,fence:E.ASSETS_PATH_FENCE,totem:E.ASSETS_PATH_TOTEM};case"autumn":return{hill:T.AUTUMN_HILL_1,fence:T.AUTUMN_FENCE_1,totem:T.AUTUMN_SIGN_1};case"winter":return{hill:x.WINTER_HILL_1,fence:x.WINTER_FENCE_1,totem:x.WINTER_SIGN_1};default:throw new Error("Unknown season: "+e)}}clearBackgroundContent(){const e=document.getElementById("background-elements");e&&(e.innerHTML="")}createBackgroundSection(e,t){const n=document.createElement("div");n.className=e;const i=this.createElementWithImage("ftm-mountain",t.hill,"Hill","hill-img"),s=this.createElementWithImage("ftm-fence",t.fence,"Fence","fence-img"),r=this.createElementWithImage("ftm-totem",t.totem,"Totem","totem-img");return n.append(i,s,r),n}static updateBackgroundClass(e){const t=document.getElementById("background"),n=`${e}-bg`;t&&t.className!==n&&(t.className=n)}}class De{feedbackTextElement;hideTimeoutId;constructor(){this.feedbackTextElement=document.getElementById("feedback-text"),this.hideTimeoutId=null,this.initialize()}initialize(){this.isFeedbackElementAvailable()}isFeedbackElementAvailable(){return!!this.feedbackTextElement}wrapText(e){this.isFeedbackElementAvailable()&&(this.feedbackTextElement.textContent=e,a(!1,this.feedbackTextElement))}hideText(){this.isFeedbackElementAvailable()&&a(!0,this.feedbackTextElement)}}class je{ctx;particles;mouse;isDiamond;clickTrailToggle;unsubscribeEvent;constructor(e){this.ctx=e.getContext("2d"),this.particles=[],this.mouse={x:void 0,y:void 0},this.isDiamond=!1,this.clickTrailToggle=!1,this.init()}init(){this.draw(),this.unsubscribeEvent=Ce.subscribe(Ce.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,(e=>{this.clickTrailToggle=e}))}draw(){this.drawTrail();let e=[];for(let t=0;t<this.particles.length;t++)this.particles[t].time<=this.particles[t].ttl&&e.push(this.particles[t]);this.particles=e}drawTrail(){for(let e=0;e<this.particles.length;e++)this.particles[e].update(),this.isDiamond=!this.isDiamond,this.particles[e].draw(this.isDiamond)}addTrailParticlesOnMove(e,t){this.clickTrailToggle&&(this.mouse.x=e,this.mouse.y=t,this.particles.push(new Me(this.ctx,this.mouse)))}resetParticles(){this.mouse.x=void 0,this.mouse.y=void 0}clearTrailSubscription(){this.unsubscribeEvent()}}class Me{ctx;start;end;size;style;time;ttl;x;y;rgb;hyp;starX;starY;starAngle;constructor(e,t){const n=this.determineValueByScreenWidth(30,15),i=this.determineValueByScreenWidth(30,15),s=this.determineValueByScreenWidth(3,.5),r=this.determineValueByScreenWidth(2,.5);this.ctx=e,this.rgb=["rgb(255,255,255)","rgb(249,217,170)","rgb(244,182,81)","rgb(244,159,34)"],this.start={x:t.x+this.getRandomInt(-n,n),y:t.y+this.getRandomInt(-i,i),size:this.determineValueByScreenWidth(3,2)},this.end={x:this.start.x+this.getRandomInt(-s,s),y:this.start.y+this.getRandomInt(-r,r)},this.x=this.start.x,this.y=this.start.y,this.size=this.start.size,this.style=this.rgb[this.getRandomInt(0,this.rgb.length-1)],this.time=0,this.ttl=75,this.hyp=0,this.starX=0,this.starY=0,this.starAngle=0}determineValueByScreenWidth(e,t){return window.screen.width>768?e:t}update(){if(this.time<=this.ttl){const e=1-(this.ttl-this.time)/this.ttl;this.size=this.start.size*(1-this.easeOutQuart(e)),this.x=this.x+.01*(this.end.x-this.x),this.y=this.y+.01*(this.end.y-this.y)}this.time++}draw(e){e?this.starParticle():this.circleParticle()}circleParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill()}starParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y-this.size),this.ctx.lineTo(this.x+this.size,this.y),this.ctx.lineTo(this.x,this.y+this.size),this.ctx.lineTo(this.x-this.size,this.y),this.ctx.closePath(),this.ctx.fill()}getRandomInt(e,t){return Math.round(Math.random()*(t-e))+e}easeOutQuart(e){return 1-Math.pow(1-e,4)}}var Be=n(278),Oe={};Oe.styleTagTransform=be(),Oe.setAttributes=me(),Oe.insert=de().bind(null,"head"),Oe.domAPI=ue(),Oe.insertStyleElement=fe();le()(Be.A,Oe);Be.A&&Be.A.locals&&Be.A.locals;const Ne={root:"#background"},Re=e=>`\n  <div id="${e}" class="timer-ticking-wrapper">\n    <img id="timer-empty" class="timer-empty" src="${y}" alt="Timer Empty" />\n    <img id="rotating-clock" class="rotating-clock" src="${w}" alt="Rotating Clock" />\n    <div id="timer-full-container" class="timer-full-container">\n      <div class="timer-mask"></div>\n    </div>\n  </div>\n`;class ze extends oe{constructor(e="timer-html-component",t={selectors:Ne}){super(t,e,Re),this.render()}}class Fe extends re{width;height;timerWidth;timerHeight;widthToClear;timer;isTimerStarted;isTimerEnded;isTimerRunningOut;timer_full;pauseButtonClicked;images;loadedImages;callback;imagesLoaded=!1;startMyTimer=!0;isMyTimerOver=!1;isStoneDropped=!1;audioPlayer;playLevelEndAudioOnce=!0;timerFullContainer=null;timerHtmlComponent;constructor(e,t,n){super({stoneDropCallbackHandler:e=>this.handleStoneDrop(e),loadPuzzleCallbackHandler:e=>this.handleLoadPuzzle(e)}),this.width=e,this.height=t,this.widthToClear=this.width/3.4,this.callback=n,this.timer=0,this.isTimerStarted=!1,this.isTimerEnded=!1,this.isTimerRunningOut=!1,this.audioPlayer=new te,this.playLevelEndAudioOnce=!0,this.images={timer_empty:y,rotating_clock:w,timer_full:"./assets/images/timer_full.png"},this.timerHtmlComponent=new ze("timer-ticking"),setTimeout((()=>{this.timerFullContainer=document.getElementById("timer-full-container"),this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}),0),s(this.images,(e=>{this.loadedImages=Object.assign({},e),this.imagesLoaded=!0})),this.timerFullContainer=this.getTimerFullContainer()}startTimer(){this.readyTimer(),this.startMyTimer=!0,this.isMyTimerOver=!1}readyTimer(){this.timer=0,this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}update(e){if(this.startMyTimer&&!this.isStoneDropped){this.timer+=.008*e;const t=Math.max(0,100-this.timer);this.timerFullContainer.style.width=`${t}%`,t<10&&!this.isMyTimerOver&&(this.playLevelEndAudioOnce&&this.audioPlayer.playAudio("./assets/audios/timeout.mp3"),this.playLevelEndAudioOnce=!1),t<=0&&!this.isMyTimerOver&&(this.isMyTimerOver=!0,this.callback(!0))}}getTimerFullContainer(){return document.getElementById("timer-full-container")}stopTimer(){this.isTimerRunningOut=!1}handleStoneDrop(e){this.isStoneDropped=!0}handleLoadPuzzle(e){this.playLevelEndAudioOnce=!0,this.isStoneDropped=!1,this.startTimer()}destroy(){this.stopTimer(),this.timerHtmlComponent?.destroy()}}const Ue=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,r||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ue(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],r=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==r||null==o||null==a)throw new $e;const l=s<<2|r>>4;if(i.push(l),64!==o){const e=r<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ge=function(e){return function(e){const t=Ue(e);return Ve.encodeByteArray(t,!0)}(e).replace(/\./g,"")},We=function(e){try{return Ve.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const He=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ke=()=>{try{return He()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&We(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Xe=()=>{var e;return null===(e=Ke())||void 0===e?void 0:e.config};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qe(){try{return"object"==typeof indexedDB}catch(e){return!1}}function Je(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class Qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(et,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new Qe(i,o,n)}}const et=/\{\$([^}]+)}/g;function tt(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(nt(n)&&nt(r)){if(!tt(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function nt(e){return null!==e&&"object"==typeof e}const it=1e3,st=2,rt=144e5,ot=.5;function at(e,t=it,n=st){const i=t*Math.pow(n,e),s=Math.round(ot*i*(Math.random()-.5)*2);return Math.min(rt,i+s)}function lt(e){return e&&e._delegate?e._delegate:e}class ct{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ut="[DEFAULT]";class ht{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ye;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ut})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=ut){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=ut){return this.instances.has(e)}getOptions(e=ut){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===ut?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=ut){return this.component?this.component.multipleInstances?e:ut:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class dt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ht(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const pt=[];var mt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(mt||(mt={}));const gt={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},ft=mt.INFO,vt={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},bt=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=vt[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class yt{constructor(e){this.name=e,this._logLevel=ft,this._logHandler=bt,this._userLogHandler=null,pt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?gt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const _t=(e,t)=>t.some((t=>e instanceof t));let wt,St;const Et=new WeakMap,Tt=new WeakMap,xt=new WeakMap,It=new WeakMap,Ct=new WeakMap;let At={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Tt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function kt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(St||(St=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Dt(this),t),Lt(Et.get(this))}:function(...t){return Lt(e.apply(Dt(this),t))}:function(t,...n){const i=e.call(Dt(this),t,...n);return xt.set(i,t.sort?t.sort():[t]),Lt(i)}}function Pt(e){return"function"==typeof e?kt(e):(e instanceof IDBTransaction&&function(e){if(Tt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));Tt.set(e,t)}(e),_t(e,wt||(wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,At):e)}function Lt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(Lt(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&Et.set(t,e)})).catch((()=>{})),Ct.set(t,e),t}(e);if(It.has(e))return It.get(e);const t=Pt(e);return t!==e&&(It.set(e,t),Ct.set(t,e)),t}const Dt=e=>Ct.get(e);const jt=["get","getKey","getAll","getAllKeys","count"],Mt=["put","add","delete","clear"],Bt=new Map;function Ot(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Bt.get(t))return Bt.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=Mt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!jt.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&r.done]))[0]};return Bt.set(t,r),r}At=(e=>({...e,get:(t,n,i)=>Ot(t,n)||e.get(t,n,i),has:(t,n)=>!!Ot(t,n)||e.has(t,n)}))(At);class Nt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Rt="@firebase/app",zt="0.9.15",Ft=new yt("@firebase/app"),Ut="@firebase/app-compat",Vt="@firebase/analytics-compat",$t="@firebase/analytics",Gt="@firebase/app-check-compat",Wt="@firebase/app-check",Ht="@firebase/auth",Kt="@firebase/auth-compat",Xt="@firebase/database",Yt="@firebase/database-compat",qt="@firebase/functions",Jt="@firebase/functions-compat",Qt="@firebase/installations",Zt="@firebase/installations-compat",en="@firebase/messaging",tn="@firebase/messaging-compat",nn="@firebase/performance",sn="@firebase/performance-compat",rn="@firebase/remote-config",on="@firebase/remote-config-compat",an="@firebase/storage",ln="@firebase/storage-compat",cn="@firebase/firestore",un="@firebase/firestore-compat",hn="firebase",dn="[DEFAULT]",pn={[Rt]:"fire-core",[Ut]:"fire-core-compat",[$t]:"fire-analytics",[Vt]:"fire-analytics-compat",[Wt]:"fire-app-check",[Gt]:"fire-app-check-compat",[Ht]:"fire-auth",[Kt]:"fire-auth-compat",[Xt]:"fire-rtdb",[Yt]:"fire-rtdb-compat",[qt]:"fire-fn",[Jt]:"fire-fn-compat",[Qt]:"fire-iid",[Zt]:"fire-iid-compat",[en]:"fire-fcm",[tn]:"fire-fcm-compat",[nn]:"fire-perf",[sn]:"fire-perf-compat",[rn]:"fire-rc",[on]:"fire-rc-compat",[an]:"fire-gcs",[ln]:"fire-gcs-compat",[cn]:"fire-fst",[un]:"fire-fst-compat","fire-js":"fire-js",[hn]:"fire-js-all"},mn=new Map,gn=new Map;function fn(e,t){try{e.container.addComponent(t)}catch(n){Ft.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vn(e){const t=e.name;if(gn.has(t))return Ft.debug(`There were multiple attempts to register component ${t}.`),!1;gn.set(t,e);for(const t of mn.values())fn(t,e);return!0}function bn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const yn=new Ze("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _n{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ct("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}function wn(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:dn,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw yn.create("bad-app-name",{appName:String(s)});if(n||(n=Xe()),!n)throw yn.create("no-options");const r=mn.get(s);if(r){if(tt(n,r.options)&&tt(i,r.config))return r;throw yn.create("duplicate-app",{appName:s})}const o=new dt(s);for(const e of gn.values())o.addComponent(e);const a=new _n(n,i,o);return mn.set(s,a),a}function Sn(e,t,n){var i;let s=null!==(i=pn[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ft.warn(e.join(" "))}vn(new ct(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const En="firebase-heartbeat-database",Tn=1,xn="firebase-heartbeat-store";let In=null;function Cn(){return In||(In=function(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=Lt(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(Lt(o.result),e.oldVersion,e.newVersion,Lt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(En,Tn,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(xn)}}).catch((e=>{throw yn.create("idb-open",{originalErrorMessage:e.message})}))),In}async function An(e,t){try{const n=(await Cn()).transaction(xn,"readwrite"),i=n.objectStore(xn);await i.put(t,kn(e)),await n.done}catch(e){if(e instanceof Qe)Ft.warn(e.message);else{const t=yn.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Ft.warn(t.message)}}}function kn(e){return`${e.name}!${e.options.appId}`}class Pn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Dn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Ln();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ln(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),jn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jn(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Ge(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ln(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!qe()&&Je().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Cn();return await t.transaction(xn).objectStore(xn).get(kn(e))}catch(e){if(e instanceof Qe)Ft.warn(e.message);else{const t=yn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Ft.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return An(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return An(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function jn(e){return Ge(JSON.stringify({version:2,heartbeats:e})).length}var Mn;Mn="",vn(new ct("platform-logger",(e=>new Nt(e)),"PRIVATE")),vn(new ct("heartbeat",(e=>new Pn(e)),"PRIVATE")),Sn(Rt,zt,Mn),Sn(Rt,zt,"esm2017"),Sn("fire-js","");Sn("firebase","10.1.0","app");const Bn=(e,t)=>t.some((t=>e instanceof t));let On,Nn;const Rn=new WeakMap,zn=new WeakMap,Fn=new WeakMap,Un=new WeakMap,Vn=new WeakMap;let $n={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return zn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Gn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nn||(Nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Kn(this),t),Hn(Rn.get(this))}:function(...t){return Hn(e.apply(Kn(this),t))}:function(t,...n){const i=e.call(Kn(this),t,...n);return Fn.set(i,t.sort?t.sort():[t]),Hn(i)}}function Wn(e){return"function"==typeof e?Gn(e):(e instanceof IDBTransaction&&function(e){if(zn.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));zn.set(e,t)}(e),Bn(e,On||(On=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$n):e)}function Hn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(Hn(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&Rn.set(t,e)})).catch((()=>{})),Vn.set(t,e),t}(e);if(Un.has(e))return Un.get(e);const t=Wn(e);return t!==e&&(Un.set(e,t),Vn.set(t,e)),t}const Kn=e=>Vn.get(e);const Xn=["get","getKey","getAll","getAllKeys","count"],Yn=["put","add","delete","clear"],qn=new Map;function Jn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(qn.get(t))return qn.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=Yn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Xn.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&r.done]))[0]};return qn.set(t,r),r}!function(e){$n=e($n)}((e=>({...e,get:(t,n,i)=>Jn(t,n)||e.get(t,n,i),has:(t,n)=>!!Jn(t,n)||e.has(t,n)})));const Qn="@firebase/installations",Zn="0.6.4",ei=1e4,ti=`w:${Zn}`,ni="FIS_v2",ii="https://firebaseinstallations.googleapis.com/v1",si=36e5,ri=new Ze("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function oi(e){return e instanceof Qe&&e.code.includes("request-failed")}function ai({projectId:e}){return`${ii}/projects/${e}/installations`}function li(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ci(e,t){const n=(await t.json()).error;return ri.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ui({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function hi(e,{refreshToken:t}){const n=ui(e);return n.append("Authorization",function(e){return`${ni} ${e}`}(t)),n}async function di(e){const t=await e();return t.status>=500&&t.status<600?e():t}function pi(e){return new Promise((t=>{setTimeout(t,e)}))}const mi=/^[cdef][\w-]{21}$/,gi="";function fi(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return mi.test(t)?t:gi}catch(e){return gi}}function vi(e){return`${e.appName}!${e.appId}`}const bi=new Map;function yi(e,t){const n=vi(e);_i(n,t),function(e,t){const n=Si();n&&n.postMessage({key:e,fid:t});Ei()}(n,t)}function _i(e,t){const n=bi.get(e);if(n)for(const e of n)e(t)}let wi=null;function Si(){return!wi&&"BroadcastChannel"in self&&(wi=new BroadcastChannel("[Firebase] FID Change"),wi.onmessage=e=>{_i(e.data.key,e.data.fid)}),wi}function Ei(){0===bi.size&&wi&&(wi.close(),wi=null)}const Ti="firebase-installations-database",xi=1,Ii="firebase-installations-store";let Ci=null;function Ai(){return Ci||(Ci=function(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=Hn(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(Hn(o.result),e.oldVersion,e.newVersion,Hn(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}(Ti,xi,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ii)}})),Ci}async function ki(e,t){const n=vi(e),i=(await Ai()).transaction(Ii,"readwrite"),s=i.objectStore(Ii),r=await s.get(n);return await s.put(t,n),await i.done,r&&r.fid===t.fid||yi(e,t.fid),t}async function Pi(e){const t=vi(e),n=(await Ai()).transaction(Ii,"readwrite");await n.objectStore(Ii).delete(t),await n.done}async function Li(e,t){const n=vi(e),i=(await Ai()).transaction(Ii,"readwrite"),s=i.objectStore(Ii),r=await s.get(n),o=t(r);return void 0===o?await s.delete(n):await s.put(o,n),await i.done,!o||r&&r.fid===o.fid||yi(e,o.fid),o}async function Di(e){let t;const n=await Li(e.appConfig,(n=>{const i=function(e){const t=e||{fid:fi(),registrationStatus:0};return Bi(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(ri.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=ai(e),s=ui(e),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={fid:n,authVersion:ni,appId:e.appId,sdkVersion:ti},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await di((()=>fetch(i,a)));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:li(e.authToken)}}throw await ci("Create Installation",l)}(e,t);return ki(e.appConfig,n)}catch(n){throw oi(n)&&409===n.customData.serverCode?await Pi(e.appConfig):await ki(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ji(e)}:{installationEntry:t}}(e,i);return t=s.registrationPromise,s.installationEntry}));return n.fid===gi?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ji(e){let t=await Mi(e.appConfig);for(;1===t.registrationStatus;)await pi(100),t=await Mi(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Di(e);return n||t}return t}function Mi(e){return Li(e,(e=>{if(!e)throw ri.create("installation-not-found");return Bi(e)}))}function Bi(e){return 1===(t=e).registrationStatus&&t.registrationTime+ei<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Oi({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${ai(e)}/${t}/authTokens:generate`}(e,n),s=hi(e,n),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:ti,appId:e.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await di((()=>fetch(i,a)));if(l.ok){return li(await l.json())}throw await ci("Generate Auth Token",l)}async function Ni(e,t=!1){let n;const i=await Li(e.appConfig,(i=>{if(!zi(i))throw ri.create("not-registered");const s=i.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+si}(e)}(s))return i;if(1===s.requestStatus)return n=async function(e,t){let n=await Ri(e.appConfig);for(;1===n.authToken.requestStatus;)await pi(100),n=await Ri(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ni(e,t):i}(e,t),i;{if(!navigator.onLine)throw ri.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Oi(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await ki(e.appConfig,i),n}catch(n){if(!oi(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ki(e.appConfig,n)}else await Pi(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Ri(e){return Li(e,(e=>{if(!zi(e))throw ri.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ei<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function zi(e){return void 0!==e&&2===e.registrationStatus}async function Fi(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await Di(e);t&&await t}(n);return(await Ni(n,t)).token}function Ui(e){return ri.create("missing-app-config-values",{valueName:e})}const Vi="installations",$i=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ui("App Configuration");if(!e.name)throw Ui("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ui(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:bn(t,"heartbeat"),_delete:()=>Promise.resolve()}},Gi=e=>{const t=bn(e.getProvider("app").getImmediate(),Vi).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Di(t);return i?i.catch(console.error):Ni(t).catch(console.error),n.fid}(t),getToken:e=>Fi(t,e)}};vn(new ct(Vi,$i,"PUBLIC")),vn(new ct("installations-internal",Gi,"PRIVATE")),Sn(Qn,Zn),Sn(Qn,Zn,"esm2017");const Wi="analytics",Hi="firebase_id",Ki="origin",Xi=6e4,Yi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qi="https://www.googletagmanager.com/gtag/js",Ji=new yt("@firebase/analytics"),Qi=new Ze("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Zi(e){if(!e.startsWith(qi)){const t=Qi.create("invalid-gtag-resource",{gtagURL:e});return Ji.warn(t.message),""}return e}function es(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function ts(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Zi}),i=document.createElement("script"),s=`${qi}?l=${e}&id=${t}`;i.src=n?null==n?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function ns(e,t,n,i){return async function(s,...r){try{if("event"===s){const[i,s]=r;await async function(e,t,n,i,s){try{let r=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const i=await es(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){r=[];break}r.push(s)}}0===r.length&&(r=Object.values(t)),await Promise.all(r),e("event",i,s||{})}catch(e){Ji.error(e)}}(e,t,n,i,s)}else if("config"===s){const[s,o]=r;await async function(e,t,n,i,s,r){const o=i[s];try{if(o)await t[o];else{const e=(await es(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){Ji.error(e)}e("config",s,r)}(e,t,n,i,s,o)}else if("consent"===s){const[t]=r;e("consent","update",t)}else if("get"===s){const[t,n,i]=r;e("get",t,n,i)}else if("set"===s){const[t]=r;e("set",t)}else e(s,...r)}catch(e){Ji.error(e)}}}const is=30;const ss=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function rs(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function os(e,t=ss,n){const{appId:i,apiKey:s,measurementId:r}=e.options;if(!i)throw Qi.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Qi.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ls;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Xi),as({appId:i,apiKey:s,measurementId:r},o,a,t)}async function as(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=ss){var r;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,i)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(r),i(Qi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(a)return Ji.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:rs(i)},r=Yi.replace("{app-id}",n),o=await fetch(r,s);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Qi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(o),t}catch(t){const l=t;if(!function(e){if(!(e instanceof Qe&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(s.deleteThrottleMetadata(o),a)return Ji.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw t}const c=503===Number(null===(r=null==l?void 0:l.customData)||void 0===r?void 0:r.httpStatus)?at(n,s.intervalMillis,is):at(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return s.setThrottleMetadata(o,u),Ji.debug(`Calling attemptFetch again in ${c} millis`),as(e,u,i,s)}}class ls{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let cs,us;function hs(e){us=e}function ds(e){cs=e}async function ps(e,t,n,i,s,r,o){var a;const l=os(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ji.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Ji.error(e))),t.push(l);const c=async function(){if(!qe())return Ji.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Je()}catch(e){return Ji.warn(Qi.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(qi)&&n.src.includes(e))return n;return null})(r)||ts(r,u.measurementId),us&&(s("consent","default",us),hs(void 0)),s("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d[Ki]="firebase",d.update=!0,null!=h&&(d[Hi]=h),s("config",u.measurementId,d),cs&&(s("set",cs),ds(void 0)),u.measurementId}class ms{constructor(e){this.app=e}_delete(){return delete gs[this.app.options.appId],Promise.resolve()}}let gs={},fs=[];const vs={};let bs,ys,_s="dataLayer",ws="gtag",Ss=!1;function Es(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Qi.create("invalid-analytics-context",{errorInfo:t});Ji.warn(n.message)}}function Ts(e,t,n){Es();const i=e.options.appId;if(!i)throw Qi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Qi.create("no-api-key");Ji.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gs[i])throw Qi.create("already-exists",{id:i});if(!Ss){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(_s);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let r=function(...e){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(r=window[s]),window[s]=ns(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}(gs,fs,vs,_s,ws);ys=e,bs=t,Ss=!0}gs[i]=ps(e,fs,vs,t,bs,_s,n);return new ms(e)}function xs(e=function(e=dn){const t=mn.get(e);if(!t&&e===dn&&Xe())return wn();if(!t)throw yn.create("no-app",{appName:e});return t}()){const t=bn(e=lt(e),Wi);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=bn(e,Wi);if(n.isInitialized()){const e=n.getImmediate();if(tt(t,n.getOptions()))return e;throw Qi.create("already-initialized")}const i=n.initialize({options:t});return i}(e)}function Is(e,t,n){e=lt(e),async function(e,t,n,i){if(i&&i.global){const t={};for(const e of Object.keys(n))t[`user_properties.${e}`]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(ys,gs[e.app.options.appId],t,n).catch((e=>Ji.error(e)))}function Cs(e,t,n,i){e=lt(e),async function(e,t,n,i,s){if(s&&s.global)e("event",n,i);else{const s=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(ys,gs[e.app.options.appId],t,n,i).catch((e=>Ji.error(e)))}const As="@firebase/analytics",ks="0.10.0";vn(new ct(Wi,((e,{options:t})=>Ts(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),vn(new ct("analytics-internal",(function(e){try{const t=e.getProvider(Wi).getImmediate();return{logEvent:(e,n,i)=>Cs(t,e,n,i)}}catch(e){throw Qi.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Sn(As,ks),Sn(As,ks,"esm2017");const Ps={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:a63f4eaddc949f539de10c",measurementId:"G-FVLSN7D7NM"};class Ls{firebaseApp;analytics;constructor(){this.initializeFirebase(),console.log(" source : ",M," and  campaign_id: ",B),null==M&&null==B||this.setUserProperty(M,B)}customEvents(e,t){try{Cs(this.analytics,e,t)}catch(e){console.error("Error while logging custom event:",e)}}sessionEnd(){try{navigator.onLine&&void 0!==this.analytics&&Cs(this.analytics,"session_end")}catch(e){console.error("Error while logging session_end event:",e)}}setUserProperty(e,t){try{Is(this.analytics,{source:e,campaign_id:t},{global:!0}),console.log("User properties set: ",{source:e,campaignId:t})}catch(e){console.error("Error while setting user properties:",e)}}initializeFirebase(){try{this.firebaseApp=wn(Ps),this.analytics=xs(this.firebaseApp)}catch(e){console.error("Error while initializing Firebase:",e)}}}class Ds extends Ls{static instance;constructor(){super()}static getInstance(){return Ds.instance||(Ds.instance=new Ds),Ds.instance}sendSessionStartEvent(e){this.customEvents("session_start",e)}sendSessionEndEvent(e){this.customEvents("session_end",e)}sendSelectedLevelEvent(e){this.customEvents("selected_level",e)}sendTappedStartEvent(e){this.customEvents("tapped_start",e)}sendPuzzleCompletedEvent(e){this.customEvents("puzzle_completed",e)}sendLevelCompletedEvent(e){this.customEvents("level_completed",e)}sendUserClickedOnPlayEvent(){this.customEvents("user_clicked",{click:"Click"})}sendDownloadCompletedEvent(e){this.customEvents("download_completed",e)}}class js{levelData;puzzleNumber;groupedLetters;droppedLetters;groupedObj;droppedHistory;hideListObj;constructor(e,t){this.levelData=e,this.puzzleNumber=t,this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={}}getTargetWord(){return this.levelData.puzzles[this.puzzleNumber]?.prompt?.promptText}getValues(){return{groupedLetters:this.groupedLetters,droppedLetters:this.droppedLetters,groupedObj:{...this.groupedObj},droppedHistory:{...this.droppedHistory},hideListObj:{...this.hideListObj}}}checkIsWordPuzzle(){return"Word"===this.levelData?.levelMeta?.levelType}updatePuzzleLevel(e){this.clearAllValues(),this.puzzleNumber=e}clearPickedUp(){this.groupedLetters="",this.groupedObj={},this.hideListObj={...this.droppedHistory}}clearAllValues(){this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={},this.puzzleNumber=0}validateShouldHideLetter(e){return!this.hideListObj[e]}handleCheckHoveredStone(e,t){const n=this.groupedLetters,i=this.getTargetWord();if(!this.droppedLetters.length&&i[0]!==n[0])return!1;const s=!n.includes(e),r=!this.groupedObj[t];return i.includes(`${this.droppedLetters}${n}${e}`)&&(s||r)}validateFedLetters(){const e=this.getTargetWord();return this.droppedLetters===e.substring(0,this.droppedLetters.length)}validateWordPuzzle(){const e=this.getTargetWord();return this.droppedLetters===e}setGroupToDropped(){this.droppedLetters=`${this.droppedLetters}${this.groupedLetters}`,this.droppedHistory={...this.droppedHistory,...this.groupedObj}}setPickUpLetter(e,t){this.hideListObj={...this.hideListObj,...this.groupedObj},this.groupedLetters=`${this.groupedLetters}${e}`,this.groupedObj[t]=e}}class Ms extends ie{constructor(e={}){super({id:e.id||"close-button",className:e.className||"close-button-image",imageSrc:"./assets/images/map_btn.webp",imageAlt:e.imageAlt||"Close Icon",targetId:e.targetId||"game-control",...e})}}class Bs extends ie{constructor(e={}){super({id:e.id||"cancel-button",className:e.className||"cancel-button-image",imageSrc:"./assets/images/close_btn.webp",imageAlt:e.imageAlt||"Cancel Icon",targetId:e.targetId||"game-control",...e})}}class Os extends ie{constructor(e={}){super({id:e.id||"next-button",className:e.className||"next-button-image",imageSrc:S,imageAlt:e.imageAlt||"Next Icon",targetId:e.targetId||"game-control",...e})}}class Ns extends ie{constructor(e={}){super({id:e.id||"retry-button",className:e.className||"retry-button-image",imageSrc:"./assets/images/retry_btn.webp",imageAlt:e.imageAlt||"Retry Icon",targetId:e.targetId||"game-control",...e})}}class Rs extends ie{constructor(e={}){super({id:e.id||"yes-button",className:e.className||"yes-button-image",imageSrc:"./assets/images/confirm_btn.webp",imageAlt:e.imageAlt||"Yes Icon",targetId:e.targetId||"game-control",...e})}}class zs{context;levelData;posX;posY;originalPosX;originalPosY;size;radiusOffSet;bloonSize;btnSize;lockSize;textFontSize;constructor(e,t,n){this.context=t,this.levelData=n,this.posX=this.levelData.x,this.posY=this.levelData.y,this.originalPosX=this.posX,this.originalPosY=this.posY,this.size=e.height/5,this.radiusOffSet=e.height/20,this.bloonSize=this.isLevelSpecial(this.size),this.btnSize=this.bloonSize,this.lockSize=e.height/13,this.textFontSize=this.size/6}isSpecialLevel(e){return L.includes(e)}isLevelSpecial(e){return this.levelData?.isSpecial?.9*e:e}draw(e,t,n,i){this.context.drawImage(this.levelData?.balloonImg,this.posX,this.posY,this.btnSize,this.btnSize),this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${N}, monospace`,this.context.textAlign="center",this.context.fillText(`${this.levelData.index+e}`,this.levelData.x+this.size/3.5,this.levelData.y+this.size/3),this.context.font=this.textFontSize-this.size/30+`px ${N}, monospace`,this.btnSize<this.bloonSize?this.btnSize=this.btnSize+.5:(this.btnSize=this.bloonSize,this.posX=this.levelData.x,this.posY=this.levelData.y),this.drawIcons(e,t,n,i)}applyPulseEffect(){const e=.7,t=Date.now()%1500/1500,n=t<=e,i=n?t/e:(t-e)/(n?e:.30000000000000004),s=n?15*i:15+45*i,r=n?.5*(1-i):0;if(r<=0)return;const{x:o,y:a,radius:l}=this.levelData?.isSpecial?{x:3,y:2.5,radius:2.2}:{x:3.4,y:3.8,radius:3.2},c=this.posX+this.btnSize/o,u=this.posY+this.btnSize/a,h=this.btnSize/l+s;this.context.save(),this.context.beginPath(),this.context.arc(c,u,h,0,2*Math.PI),this.context.fillStyle=`rgba(255, 255, 255, ${r})`,this.context.fill(),this.context.restore()}drawIcons(e,t,n,i){const s=this.levelData.index;if(R.DebugMode||s+e-1>t+1&&this.drawLock(),n.length&&s+e<=i)for(let t=0;t<n.length;t++)if(s-1+e===parseInt(n[t].levelNumber)){this.checkStars(n[t].starCount);break}}drawLock(){this.context.drawImage(this.levelData?.lockImg,this.levelData.x,this.levelData.y,this.lockSize,this.lockSize)}checkStars(e){const t=this.levelData.x,n=this.levelData.y,i=this.size;e>=1&&this.drawStar(t,n-.01*i),e>1&&this.drawStar(t+i/2.5,n-.01*i),3===e&&this.drawStar(t+i/5,n-.1*i)}drawStar(e,t){this.context.drawImage(this.levelData?.starImg,e,t,this.size/5,this.size/5)}onClick(e,t,n,i,s){Math.sqrt((e-this.levelData.x-this.radiusOffSet)*(e-this.levelData.x-this.radiusOffSet)+(t-this.levelData.y-this.radiusOffSet)*(t-this.levelData.y-this.radiusOffSet))<45&&(R.DebugMode||this.levelData.index+n<=i)&&(this.btnSize=this.bloonSize-4,this.posX=this.originalPosX+.5,this.posY=this.originalPosY+1,s(this.levelData.index))}}var Fs=n(424),Us={};Us.styleTagTransform=be(),Us.setAttributes=me(),Us.insert=de().bind(null,"head"),Us.domAPI=ue(),Us.insertStyleElement=fe();le()(Fs.A,Us);Fs.A&&Fs.A.locals&&Fs.A.locals;class Vs extends ie{constructor(e={}){super({id:e.id||"play-button",className:e.className||"play-button-image",imageSrc:e?.imageSrc||"./assets/images/Play_button.webp",imageAlt:e.imageAlt||"Play Icon",targetId:e.targetId||"game-scene",...e})}}var $s=n(636),Gs={};Gs.styleTagTransform=be(),Gs.setAttributes=me(),Gs.insert=de().bind(null,"head"),Gs.domAPI=ue(),Gs.insertStyleElement=fe();le()($s.A,Gs);$s.A&&$s.A.locals&&$s.A.locals;const Ws={root:".game-scene",closeButton:'[data-click="close"]'},Hs="[data-click]",Ks="show";class Xs{popupEl;closeButton;static EVENTS={ON_CLOSE:"onClose",ON_BTN_CLICK:"onClick"};id="base-popup";template="";isRendered=!1;options;pubSub=new Ie;constructor(e){this.options={selectors:Ws,...e},this._init()}onInit(){}open(){this.isRendered||this.render(),this.setVisibility(!0)}close(e){this.setVisibility(!1),this.pubSub.publish(Xs.EVENTS.ON_CLOSE,e)}destroy(){this.popupEl?.remove(),this._removeEventListeners()}handleClick(e,t=300){setTimeout((()=>{this.close({data:e})}),t)}onButtonClick(e){return this.pubSub.subscribe(Xs.EVENTS.ON_BTN_CLICK,e)}onClose(e){return this.pubSub.subscribe(Xs.EVENTS.ON_CLOSE,e)}render(){if(this.isRendered)return;const e=(t=this.id,n=this.template,`\n  <div id="${t}" class="popup">\n    <div class="popup__overlay"></div>\n    <div id="${t}-content-wrapper" class="popup__content-wrapper" style="background-image: url(./assets/images/popup_bg_v01.webp)">\n      <div id="${t}-content-container" class="popup__content-container">${n}</div>\n    </div>\n  </div>\n`);var t,n;const{root:i}=this.options.selectors,s=document.querySelector(i);s.insertAdjacentHTML("beforeend",e),this.popupEl=s.querySelector(`#${this.id}`),this.options.hideClose||(this.closeButton=new Bs({targetId:this.contentWrapperId}),this.closeButton.onClick((()=>{setTimeout((()=>{this.close({data:!1})}),300)}))),this.isRendered=!0}get contentContainerId(){return`${this.id}-content-container`}get contentWrapperId(){return`${this.id}-content-wrapper`}_init(){setTimeout((()=>{this.render(),this.onInit(),this._addEventListeners()}))}_click=e=>{const t=e.target.closest(Hs).dataset.click,n="close"===t,i={data:t,event:e};setTimeout((()=>{n?this.close(i):this.pubSub.publish(Xs.EVENTS.ON_BTN_CLICK,i)}),300)};_addEventListeners(){const e=this.popupEl?.querySelectorAll(Hs);e?.length&&e.forEach((e=>{e.addEventListener("click",this._click)}))}_removeEventListeners(){const e=this.popupEl?.querySelectorAll(Hs);e?.length&&e.forEach((e=>{e.removeEventListener("click",this._click)}))}setVisibility(e){e?this.popupEl.classList.add(Ks):this.popupEl.classList.remove(Ks)}}class Ys extends Xs{confirmButton;cancelButton;enableTimeoutId;id="confirm-popup";template='\n    <div class="confirm-message text-align-center w-100 mb-3 font-size-3">Are you sure?</div>\n    <div id="confirm-button-container" class="button-container d-flex justify-content-center w-100"></div>\n  ';onInit(){const e="confirm-button-container";this.cancelButton=new Bs({id:this.createButtonId("cancel-button"),targetId:e,className:"me-4"}),this.cancelButton.onClick((()=>this.handleClick(!1))),this.confirmButton=new Rs({id:this.createButtonId("confirm-button"),targetId:e}),this.confirmButton.onClick((()=>this.handleClick(!0)))}createButtonId(e){return`${this.id}-${e}`}handleClick(e){this.disableButtons(),super.handleClick(e),this.scheduleEnableButtons(800)}disableButtons(){this.confirmButton?.setDisabled(!0),this.cancelButton?.setDisabled(!0)}enableButtons(){this.confirmButton?.setDisabled(!1),this.cancelButton?.setDisabled(!1)}scheduleEnableButtons(e){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),e)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),super.destroy()}}const qs=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Js="object"==typeof global&&global&&global.Object===Object&&global;var Qs="object"==typeof self&&self&&self.Object===Object&&self;const Zs=Js||Qs||Function("return this")();const er=function(){return Zs.Date.now()};var tr=/\s/;const nr=function(e){for(var t=e.length;t--&&tr.test(e.charAt(t)););return t};var ir=/^\s+/;const sr=function(e){return e?e.slice(0,nr(e)+1).replace(ir,""):e};const rr=Zs.Symbol;var or=Object.prototype,ar=or.hasOwnProperty,lr=or.toString,cr=rr?rr.toStringTag:void 0;const ur=function(e){var t=ar.call(e,cr),n=e[cr];try{e[cr]=void 0;var i=!0}catch(e){}var s=lr.call(e);return i&&(t?e[cr]=n:delete e[cr]),s};var hr=Object.prototype.toString;const dr=function(e){return hr.call(e)};var pr=rr?rr.toStringTag:void 0;const mr=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":pr&&pr in Object(e)?ur(e):dr(e)};const gr=function(e){return null!=e&&"object"==typeof e};const fr=function(e){return"symbol"==typeof e||gr(e)&&"[object Symbol]"==mr(e)};var vr=/^[-+]0x[0-9a-f]+$/i,br=/^0b[01]+$/i,yr=/^0o[0-7]+$/i,_r=parseInt;const wr=function(e){if("number"==typeof e)return e;if(fr(e))return NaN;if(qs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=sr(e);var n=br.test(e);return n||yr.test(e)?_r(e.slice(2),n?2:8):vr.test(e)?NaN:+e};var Sr=Math.max,Er=Math.min;const Tr=function(e,t,n){var i,s,r,o,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,r=s;return i=s=void 0,c=t,o=e.apply(r,n)}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=r}function g(){var e=er();if(m(e))return f(e);a=setTimeout(g,function(e){var n=t-(e-l);return h?Er(n,r-(e-c)):n}(e))}function f(e){return a=void 0,d&&i?p(e):(i=s=void 0,o)}function v(){var e=er(),n=m(e);if(i=arguments,s=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(g,t),u?p(e):o}(l);if(h)return clearTimeout(a),a=setTimeout(g,t),p(l)}return void 0===a&&(a=setTimeout(g,t)),o}return t=wr(t)||0,qs(n)&&(u=!!n.leading,r=(h="maxWait"in n)?Sr(wr(n.maxWait)||0,t):r,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=s=a=void 0},v.flush=function(){return void 0===a?o:f(er())},v},xr="select-level",Ir="restart-level";class Cr extends Xs{selectLevelButton;restartLevelButton;confirmPopup;openConfirm=()=>{};audioPlayer=new te;enableTimeoutId;id="pause-popup";onInit(){const e=this.contentContainerId;this.selectLevelButton=new Ms({id:"map-button",className:"me-4",targetId:e}),this.selectLevelButton&&this.selectLevelButton.onClick((()=>this.handleClick("select-level"))),this.restartLevelButton=new Ns({targetId:e}),this.restartLevelButton&&this.restartLevelButton.onClick((()=>this.handleClick("restart-level"))),this.confirmPopup=new Ys({hideClose:!0}),this.openConfirm=Tr((()=>{this.confirmPopup.open(),this.audioPlayer.playAudio("./assets/audios/are-you-sure.mp3")}),300)}handleClick(e){if(this.disableButtons(),"english"===O){const t=this.confirmPopup.onClose((n=>{t(),this.handleConfirmClose(n,e),this.scheduleEnableButtons(800)}));this.openConfirm()}else super.handleClick(e),this.scheduleEnableButtons(800)}handleConfirmClose(e,t){e.data&&super.handleClick(t),super.handleClick(!1,0)}disableButtons(){this.selectLevelButton?.setDisabled(!0),this.restartLevelButton?.setDisabled(!0)}enableButtons(){this.selectLevelButton?.setDisabled(!1),this.restartLevelButton?.setDisabled(!1)}scheduleEnableButtons(e){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),e)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.confirmPopup?.destroy(),super.destroy()}}var Ar=n(52);class kr{props;riveInstance;src="./assets/monsterrive.riv";stateMachines="State Machine 1";game;x;y;hitboxRangeX;hitboxRangeY;static Animations={OPENING_MOUTH_EAT:"Opening Mouth Eat",EAT_HAPPY:"Eat Happy",IDLE:"Idle",EAT_DISGUST:"Eat Disgust"};constructor(e){if(this.props=e,this.props.gameCanvas){this.game=this.props.gameCanvas,this.x=this.game.width/2-.243*this.game.width,this.y=this.game.width/3,this.hitboxRangeX={from:0,to:0},this.hitboxRangeY={from:0,to:0};const e=70,t=50,n=this.game.width/2,i=n/2;this.hitboxRangeX.from=n-e,this.hitboxRangeX.to=n+e,this.hitboxRangeY.from=i-t,this.hitboxRangeY.to=i+t}this.riveInstance=new Ar.Rive({src:this.src,canvas:this.props.canvas,autoplay:this.props.autoplay,stateMachines:this.stateMachines,layout:new Ar.Layout({fit:Ar.Fit[this.props.fit||"Contain"],alignment:Ar.Alignment[this.props.alignment||"TopCenter"]}),onLoad:()=>{this.props.onLoad&&this.props.onLoad()}})}play(e){this.riveInstance&&this.riveInstance.play(e)}stop(){this.riveInstance&&this.riveInstance.stop()}onStateChange(e){this.riveInstance.stateMachine.inputs.forEach((t=>{t.onStateChange((t=>{e(t)}))}))}checkHitboxDistance(e){const t=this.props.canvas.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top,s=n>=this.hitboxRangeX.from&&n<=this.hitboxRangeX.to,r=i>=this.hitboxRangeY.from&&i<=this.hitboxRangeY.to;return s&&r}onClick(e,t){const n=this.x+this.game.width/4,i=this.y+this.game.height/2.2;return Math.sqrt((e-n)*(e-n)+(t-i)*(t-i))<=100}stopRiveMonster(){this.riveInstance&&this.riveInstance.stop()}unregisterEventListener(){this.riveInstance&&this.riveInstance.cleanup()}dispose(){this.unregisterEventListener(),this.riveInstance&&(this.riveInstance=null)}}class Pr{width;height;monster;jsonVersionNumber;canvas;levelData;timerTicking;promptText;pauseButton;tutorial;id;context;levelIndicators;stonesCount=1;monsterPhaseNumber;pickedStone;puzzleStartTime;pausePopupComponent=new Cr;showTutorial;feedBackTexts;isPuzzleCompleted;rightToLeft;switchSceneToEnd;levelNumber;stoneHandler;counter=0;handler;pickedStoneObject;isPauseButtonClicked;background;feedBackTextCanavsElement;feedbackTextEffects;isGameStarted=!1;time=0;score=0;switchToLevelSelection;reloadScene;data;audioPlayer;firebaseIntegration;startTime;puzzleTime;isDisposing;trailParticles;wordPuzzleLogic;riveMonsterElement;gameControl;unsubscribeEvent;timeTicker;isFeedBackTriggered;constructor({monsterPhaseNumber:e,switchSceneToEnd:t,switchToLevelSelection:n,reloadScene:i}){const s=Ce.getGamePlaySceneDetails();this.initializeProperties(s),this.setupUIElements(),this.monsterPhaseNumber=e||1,this.switchSceneToEnd=t,this.switchToLevelSelection=n,this.reloadScene=i,this.isDisposing=!1,this.initializeGameComponents(s);var r=this.levelData.levelMeta.levelNumber;R.DebugMode?localStorage.setItem(c+O+"Debug",r):localStorage.setItem(c+O,r),this.addEventListeners(),this.startGameTime(),this.startPuzzleTime(),this.firebaseIntegration=new Ds,this.feedbackTextEffects=new De,this.audioPlayer=new te,this.wordPuzzleLogic=new js(this.levelData,this.counter),this.unsubscribeEvent=Ce.subscribe(Ce.EVENTS.GAME_PAUSE_STATUS_EVENT,(e=>{this.isPauseButtonClicked=e,e&&this.pausePopupComponent.open()})),this.pausePopupComponent.onClose((e=>{const{data:t}=e;switch(t){case Ir:Ce.publish(Ce.EVENTS.GAMEPLAY_DATA_EVENT,{currentLevelData:this.levelData,selectedLevelNumber:this.levelNumber}),Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,!0),this.reloadScene("GamePlay");break;case xr:Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,!0),Ce.publish(Ce.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),this.switchToLevelSelection("GamePlay");default:Ce.publish(Ce.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),this.resumeGame()}})),this.setupBg()}initializeRiveMonster(e=kr.Animations.IDLE){return new kr({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"topCenter",onLoad:()=>{this.monster.play(e)},gameCanvas:this.canvas})}initializeGameComponents(e){this.trailParticles=new je(this.canvas),this.pauseButton=new se,this.pauseButton.onClick((()=>{Ce.publish(Ce.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()})),this.timerTicking=new Fe(this.width,this.height,this.loadPuzzle),this.stoneHandler=new Ae(this.context,this.canvas,this.counter,this.levelData,e.feedbackAudios,this.timerTicking),this.tutorial=new ke(this.context,this.width,this.height),this.promptText=new xe(this.width,this.height,this.levelData.puzzles[this.counter],this.levelData,this.rightToLeft),this.levelIndicators=new Te,this.levelIndicators.setIndicators(this.counter),this.monster=this.initializeRiveMonster()}setupUIElements(){this.handler=document.getElementById("canvas"),this.riveMonsterElement=document.getElementById("rivecanvas"),this.riveMonsterElement.style.zIndex="4",this.gameControl=document.getElementById("game-control"),this.gameControl.style.zIndex="5"}initializeProperties(e){this.isPauseButtonClicked=e?.isGamePaused,this.width=e.width,this.height=e.height,this.rightToLeft=e.rightToLeft,this.canvas=e.canvas,this.context=e.gameCanvasContext,this.levelData=e.levelData,this.levelNumber=e.levelNumber,this.jsonVersionNumber=e.jsonVersionNumber,this.feedBackTexts=e.feedBackTexts,this.data=e.data}setupBg=()=>{const e=Le.createBackgroundComponent(this.levelData.levelMeta.levelNumber);(new Le).generateBackground(e)};resumeGame=()=>{this.addEventListeners()};getRandomFeedBackText(e){const t=Object.keys(this.feedBackTexts)[e];return this.feedBackTexts[t]}getRandomInt(e,t){const n=Object.values(this.feedBackTexts).filter((e=>null!=e)).length-1;return Math.floor(Math.random()*(n-e+1))+e}handleMouseUp=e=>{if(this.monster.checkHitboxDistance(e)&&this.pickedStone){const{text:e}=this.pickedStone;switch(this.levelData.levelMeta.levelType){case"LetterOnly":case"LetterInWord":this.letterPuzzle(e);break;case"Word":case"SoundWord":this.wordPuzzle(this.pickedStone)}}else this.pickedStone&&this.pickedStoneObject&&this.pickedStone.text&&"number"==typeof this.pickedStoneObject.origx&&"number"==typeof this.pickedStoneObject.origy&&(this.pickedStone.x=this.pickedStoneObject.origx,this.pickedStone.y=this.pickedStoneObject.origy);this.pickedStone=null,this.wordPuzzleLogic.clearPickedUp(),Ce.publish(Ce.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,!1)};handleMouseDown=e=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let t=this.canvas.getBoundingClientRect();const n=e.clientX-t.left,i=e.clientY-t.top;if(this.wordPuzzleLogic.checkIsWordPuzzle())this.setPickedUp(n,i);else for(let e of this.stoneHandler.foilStones){if(Math.sqrt((n-e.x)**2+(i-e.y)**2)<=40){this.pickedStoneObject=e,this.pickedStone=e,this.stoneHandler.playDragAudioIfNecessary(e);break}}Ce.publish(Ce.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,!0)};setPickedUp(e,t){if(this.pickedStone&&this.pickedStone.frame<=99)return;const n=this.stoneHandler.handlePickStoneUp(e,t);n&&(this.pickedStoneObject=n,this.pickedStone=n,this.stoneHandler.playDragAudioIfNecessary(n),"Word"===this.levelData?.levelMeta?.levelType&&this.wordPuzzleLogic.setPickUpLetter(n?.text,n?.foilStoneIndex))}handleMouseMove=e=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let t=e.clientX,n=e.clientY;if(this.pickedStone){if(this.wordPuzzleLogic.checkIsWordPuzzle()){const i=this.stoneHandler.handleMovingStoneLetter(this.pickedStone,e.clientX,e.clientY);if(this.pickedStone=i,t=i.x,n=i.y,this.wordPuzzleLogic.checkIsWordPuzzle()){const e=this.stoneHandler.handleHoveringToAnotherStone(t,n,((e,t)=>this.wordPuzzleLogic.handleCheckHoveredStone(e,t)));e&&(this.wordPuzzleLogic.setPickUpLetter(e?.text,e?.foilStoneIndex),this.pickedStone=this.stoneHandler.resetStonePosition(this.width,this.pickedStone,this.pickedStoneObject),this.pickedStoneObject=e,this.pickedStone=e)}}else{let i=this.canvas.getBoundingClientRect();const s=e.clientX-i.left,r=e.clientY-i.top;this.monster.play(kr.Animations.OPENING_MOUTH_EAT),this.pickedStone.x=s,this.pickedStone.y=r,t=s,n=r}this.monster.play(kr.Animations.OPENING_MOUTH_EAT)}this.trailParticles?.addTrailParticlesOnMove(t,n)};handleMouseClick=e=>{let t=this.canvas.getBoundingClientRect();const n=e.clientX-t.left,i=e.clientY-t.top;this.monster.onClick(n,i)&&(this.isGameStarted=!0,this.time=0,this.tutorial.setPlayMonsterClickAnimation(!1)),this.promptText.onClick(n,i)&&this.promptText.playSound()};handleTouchStart=e=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;const t=e.touches[0];this.handleMouseDown({clientX:t.clientX,clientY:t.clientY}),this.trailParticles?.resetParticles()};handleTouchMove=e=>{const t=e.touches[0];this.handleMouseMove({clientX:t.clientX,clientY:t.clientY}),this.trailParticles?.addTrailParticlesOnMove(t.clientX,t.clientY)};handleTouchEnd=e=>{const t=e.changedTouches[0];this.handleMouseUp({clientX:t.clientX,clientY:t.clientY}),this.trailParticles?.resetParticles()};draw(e){this.isGameStarted||this.isPauseButtonClicked||(this.time=this.time+e,this.time>=5e3&&(this.isGameStarted=!0,this.time=0,this.tutorial.setPlayMonsterClickAnimation(!1))),this.promptText.draw(e),this.trailParticles?.draw(),this.isPauseButtonClicked&&this.isGameStarted&&this.handleStoneLetterDrawing(e),this.isPauseButtonClicked||this.isGameStarted||0==this.counter&&this.tutorial.clickOnMonsterTutorial(e),!this.isPauseButtonClicked&&this.isGameStarted&&this.handleStoneLetterDrawing(e)}handleStoneLetterDrawing(e){if(this.wordPuzzleLogic.checkIsWordPuzzle()){const{groupedObj:t}=this.wordPuzzleLogic.getValues();this.stoneHandler.drawWordPuzzleLetters(e,(e=>this.wordPuzzleLogic.validateShouldHideLetter(e)),t)}else this.stoneHandler.draw(e)}addEventListeners(){this.handler.addEventListener("mouseup",this.handleMouseUp,!1),this.handler.addEventListener("mousemove",this.handleMouseMove,!1),this.handler.addEventListener("mousedown",this.handleMouseDown,!1),this.handler.addEventListener("touchstart",this.handleTouchStart,!1),this.handler.addEventListener("touchmove",this.handleTouchMove,!1),this.handler.addEventListener("touchend",this.handleTouchEnd,!1),this.handler.addEventListener(U,this.handleMouseClick,!1),document.addEventListener(V,this.handleVisibilityChange,!1)}removeEventListeners(){this.handler.removeEventListener(U,this.handleMouseClick,!1),this.handler.removeEventListener("mouseup",this.handleMouseUp,!1),this.handler.removeEventListener("mousemove",this.handleMouseMove,!1),this.handler.removeEventListener("mousedown",this.handleMouseDown,!1),this.handler.removeEventListener("touchstart",this.handleTouchStart,!1),this.handler.removeEventListener("touchmove",this.handleTouchMove,!1),this.handler.removeEventListener("touchend",this.handleTouchEnd,!1)}loadPuzzle=e=>{this.removeEventListeners(),this.stonesCount=1;const t=Boolean(e);if(t&&this.logPuzzleEndFirebaseEvent(!1),this.counter+=1,this.isGameStarted=!1,this.counter===this.levelData.puzzles.length){const e=()=>{this.levelIndicators.setIndicators(this.counter),this.logLevelEndFirebaseEvent(),Z.setGameLevelScore(this.levelData,this.score);const e={starCount:Z.calculateStarCount(this.score),currentLevel:this.levelNumber,isTimerEnded:t};Ce.publish(Ce.EVENTS.LEVEL_END_DATA_EVENT,{levelEndData:e,data:this.data}),this.switchSceneToEnd()};if(t)return void e();const n=setTimeout(e,4500);if(this.isFeedBackTriggered){const t=this.audioPlayer?.audioSourcs||[],i=t[t.length-1];i&&(i.onended=()=>{clearTimeout(n),e()})}}else{const e=new CustomEvent(z,{detail:{counter:this.counter}});setTimeout((()=>{this.isDisposing||(this.initNewPuzzle(e),this.timerTicking.startTimer())}),t?0:4500)}};dispose=()=>{this.timerTicking&&(this.timerTicking.destroy(),this.timerTicking=null),this.trailParticles.clearTrailSubscription(),this.unsubscribeEvent(),this.isDisposing=!0,this.audioPlayer.stopAllAudios(),this.monster.dispose(),this.levelIndicators.dispose(),this.stoneHandler.dispose(),this.promptText.dispose(),document.removeEventListener(V,this.handleVisibilityChange,!1),this.removeEventListeners(),this.pausePopupComponent.destroy(),this.pauseButton.dispose()};checkStoneDropped(e,t,n=!1){return this.stoneHandler.isStoneLetterDropCorrect(e,t,n)}letterPuzzle(e){if(this.pickedStone&&this.pickedStone.frame<=99)return;const t=this.getRandomInt(0,1),n=this.checkStoneDropped(e,t);n&&this.handleCorrectStoneDrop(t),this.isFeedBackTriggered=!0,this.handleStoneDropEnd(n)}wordPuzzle(e){if(e.frame<=99)return;this.audioPlayer.stopFeedbackAudio(),e.x=-999,e.y=-999;const t=this.getRandomInt(0,1);this.wordPuzzleLogic.setGroupToDropped();const{droppedLetters:n}=this.wordPuzzleLogic.getValues(),i=this.wordPuzzleLogic.validateFedLetters();if(this.stoneHandler.processLetterDropFeedbackAudio(t,i,!0,n),i){if(this.wordPuzzleLogic.validateWordPuzzle())return this.handleCorrectStoneDrop(t),this.handleStoneDropEnd(i,"Word"),void(this.stonesCount=1);this.timerTicking.startTimer(),this.monster.play(kr.Animations.EAT_HAPPY),this.promptText.droppedStoneIndex("arabic"==O?this.stonesCount:n.length),this.stonesCount++}else this.handleStoneDropEnd(i,"Word"),this.stonesCount=1}handleStoneDropEnd(e,t=null){e?this.monster.play(kr.Animations.EAT_HAPPY):this.monster.play(kr.Animations.EAT_DISGUST),this.logPuzzleEndFirebaseEvent(e,t),this.dispatchStoneDropEvent(e),this.loadPuzzle()}handleCorrectStoneDrop=e=>{this.score+=100;const t=this.getRandomFeedBackText(e);this.feedbackTextEffects.wrapText(t);setTimeout((()=>{this.feedbackTextEffects.hideText()}),4500)};dispatchStoneDropEvent(e){const t=new CustomEvent(F,{detail:{isCorrect:e}});document.dispatchEvent(t)}initNewPuzzle(e){this.monster=this.initializeRiveMonster(),this.removeEventListeners(),this.isGameStarted=!1,this.time=0,this.wordPuzzleLogic.updatePuzzleLevel(e?.detail?.counter),this.pickedStone=null,document.dispatchEvent(e),this.addEventListeners(),this.audioPlayer.stopAllAudios(),this.startPuzzleTime()}logPuzzleEndFirebaseEvent(e,t){let n=Date.now();const{droppedLetters:i}=this.wordPuzzleLogic.getValues(),s={cr_user_id:j,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:e?"success":"failure",level_number:this.levelData.levelMeta.levelNumber,puzzle_number:this.counter,item_selected:"Word"==t?null==i||null==i?"TIMEOUT":i:null==this.pickedStone||null==this.pickedStone?"TIMEOUT":this.pickedStone?.text,target:this.stoneHandler.getCorrectTargetStone(),foils:this.stoneHandler.getFoilStones(),response_time:(n-this.puzzleTime)/1e3};this.firebaseIntegration.sendPuzzleCompletedEvent(s)}logLevelEndFirebaseEvent(){let e=Date.now();const t={cr_user_id:j,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:Z.calculateStarCount(this.score)>=3?"success":"failure",number_of_successful_puzzles:this.score/100,level_number:this.levelData.levelMeta.levelNumber,duration:(e-this.startTime)/1e3};this.firebaseIntegration.sendLevelCompletedEvent(t)}startGameTime(){this.startTime=Date.now()}startPuzzleTime(){this.puzzleTime=Date.now()}pauseGamePlay=()=>{this.removeEventListeners(),this.audioPlayer.stopAllAudios()};handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),Ce.publish(Ce.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()}}function Lr(e,t,n,i){return{draw:()=>{e.drawImage(i?.LEVEL_SELECTION_BACKGROUND,0,0,t,n)}}}async function Dr(e,t,n,i){const s=(e=>L.includes(e))(n);return{...{x:e,y:t,index:n,isSpecial:s,...i,balloonImg:s?i?.specialBloonImg:i?.balloonImg}}}class jr{canvas;data;width;height;canvasElement;context;levels;gameLevelData;callBack;audioPlayer;images;loadedImages;imagesLoaded=!1;xDown;yDown;previousPlayedLevelNumber;levelSelectionPageIndex=0;levelNumber;levelsSectionCount;unlockLevelIndex;majVersion;minVersion;firebaseIntegration;background;rightBtnSize;rightBtnX;rightBtnY;leftBtnSize;leftBtnX;leftBtnY;levelButtons;riveMonsterElement;gameControl;constructor(e,t,n){this.canvas=e,this.data=t,this.width=e.width,this.height=e.height;let i=this;this.callBack=n,this.levelsSectionCount=i.data.levels.length/10>Math.floor(i.data.levels.length/10)?Math.floor(i.data.levels.length/10)+1:Math.floor(i.data.levels.length/10),this.levels=[],this.firebaseIntegration=new Ds,this.init(),this.riveMonsterElement=document.getElementById("rivecanvas"),this.gameControl=document.getElementById("game-control"),this.canvasElement=document.getElementById("canvas"),this.context=this.canvasElement.getContext("2d"),this.createLevelButtons(),this.gameLevelData=Z.getAllGameLevelInfo(),this.audioPlayer=new te,this.unlockLevelIndex=-1,this.previousPlayedLevelNumber=0|parseInt(R.DebugMode?localStorage.getItem(c+O+"Debug"):localStorage.getItem(c+O)),null!=this.previousPlayedLevelNumber&&(this.levelSelectionPageIndex=10*Math.floor(this.previousPlayedLevelNumber/10)),this.setupBg(),this.riveMonsterElement.style.zIndex="-1",this.images={nextbtn:S,backbtn:"./assets/images/back_btn.webp"},s(this.images,(e=>{this.loadedImages=Object.assign({},e),this.imagesLoaded=!0,"visible"===document.visibilityState&&this.audioPlayer.playAudio(p)})),this.addListeners(),this.rightBtnSize=10,this.rightBtnX=.73,this.rightBtnY=1.3,this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3,this.gameControl.style.zIndex="-1"}async init(){const e=await G();this.majVersion=e.majversion,this.minVersion=e.minversion}setupBg=async()=>{this.background=await async function(e,t,n,i,s){return{...{...s(e,t,n,{...await r(i)})}}}(this.context,this.width,this.height,{LEVEL_SELECTION_BACKGROUND:"./assets/images/map.webp"},Lr)};async createLevelButtons(){const e=await r({balloonImg:"./assets/images/mapIcon.webp",specialBloonImg:"./assets/images/map_icon_monster_level_v01.webp",lockImg:"./assets/images/mapLock.webp",starImg:"./assets/images/star.webp"}),t=[[[(n=this.canvas).width/10,n.height/10],[n.width/2.5,n.height/10],[n.width/3+n.width/2.8,n.height/10],[n.width/10,n.height/3],[n.width/2.5,n.height/3],[n.width/3+n.width/2.8,n.height/3],[n.width/10,n.height/1.8],[n.width/2.5,n.height/1.8],[n.width/3+n.width/2.8,n.height/1.8],[n.width/2.5,n.height/1.3]]];var n;const i=this.data.levels.length,s=Math.max(0,i-this.levelSelectionPageIndex),o=Math.min(10,s),a=t[0].slice(0,o).map(((t,n)=>Dr(t[0],t[1],n+1,e)));this.levels=await Promise.all(a),this.levelButtons=this.levels.map((e=>new zs(this.canvas,this.context,{...e})))}async updatePage(e){this.levelSelectionPageIndex=e,await this.createLevelButtons(),this.downButton(this.levelSelectionPageIndex)}addListeners(){document.getElementById("canvas").addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").addEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").addEventListener("touchmove",this.handleTouchMove,!1)}pausePlayAudios=()=>{"visible"===document.visibilityState?this.audioPlayer.playAudio(p):this.audioPlayer.stopAllAudios()};getTouches(e){return e.touches||e.originalEvent.touches}handleTouchStart=e=>{const t=this.getTouches(e)[0];this.xDown=t.clientX,this.yDown=t.clientY};handleTouchMove=e=>{if(!this.xDown||!this.yDown)return;let t=e.touches[0].clientX,n=e.touches[0].clientY,i=this.xDown-t,s=this.yDown-n;Math.abs(i)>Math.abs(s)&&(i>0?this.levelSelectionPageIndex!=10*this.levelsSectionCount-10&&this.updatePage(this.levelSelectionPageIndex+10):0!=this.levelSelectionPageIndex&&this.updatePage(this.levelSelectionPageIndex-10)),this.xDown=null,this.yDown=null};handleMouseDown=e=>{e.preventDefault();let t=document.getElementById("canvas").getBoundingClientRect();const n=e.clientX-t.left,i=e.clientY-t.top,s=(e,t=1.3)=>n>=e&&n<e+this.canvas.height/10&&i>this.canvas.height/t&&i<this.canvas.height/t+this.canvas.height/10,r=s(.7*this.canvas.width),o=s(this.canvas.width/10);if(o||r){const e=this.levelSelectionPageIndex;r&&e!=10*this.levelsSectionCount-10?(this.audioPlayer.playButtonClickSound(),this.updatePage(e+10),this.rightBtnSize=10.5,this.rightBtnY=1.299):o&&0!=e&&(this.audioPlayer.playButtonClickSound(),this.updatePage(e-10),this.leftBtnSize=10.3,this.leftBtnY=1.299)}for(let e of this.levelButtons)e.onClick(n,i,this.levelSelectionPageIndex-1,this.unlockLevelIndex+1,(e=>{this.audioPlayer.playButtonClickSound(),this.levelNumber=e+this.levelSelectionPageIndex-1,this.startGame(this.levelNumber)}))};isLevelCompleted(e,t){const n=t.find((t=>t.levelNumber===e));return(n?.starCount||0)>=2}drawLevel(e,t){const n=e.levelData.index+this.levelSelectionPageIndex,i=n-1;this.unlockLevelIndex+1!==i||this.isLevelCompleted(i,t)||e.applyPulseEffect(),n<=this.data.levels.length&&(this.checkUnlockedLevel(t),e.draw(this.levelSelectionPageIndex,this.unlockLevelIndex,t,this.data.levels.length),R.DebugMode&&this.context.fillText(this.data.levels[n-1].levelMeta.levelType,e.levelData.x+e.btnSize/3.5,e.levelData.y+e.btnSize/1.3))}drawLevelSelection(){for(let e of this.levelButtons)this.drawLevel(e,this.gameLevelData)}downButton(e){e!=10*this.levelsSectionCount-10?(this.context.drawImage(this.loadedImages.nextbtn,this.canvas.width*this.rightBtnX,this.canvas.height/this.rightBtnY,this.canvas.height/this.rightBtnSize,this.canvas.height/this.rightBtnSize),this.rightBtnSize>10&&(this.rightBtnSize=this.rightBtnSize-.025),this.rightBtnY=this.rightBtnSize>10?1.299:1.3):(this.rightBtnSize=10,this.rightBtnX=.7,this.rightBtnY=1.3),0!=e?(this.context.drawImage(this.loadedImages.backbtn,this.canvas.width/this.leftBtnX,this.canvas.height/this.leftBtnY,this.canvas.height/this.leftBtnSize,this.canvas.height/this.leftBtnSize),this.leftBtnSize>10&&(this.leftBtnSize=this.leftBtnSize-.025),this.leftBtnY=this.leftBtnSize>10?1.299:1.3):(this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3)}checkUnlockedLevel(e){if(null!=e.length)for(let t of e)this.unlockLevelIndex<parseInt(t.levelNumber)&&t.starCount>=2&&(this.unlockLevelIndex=parseInt(t.levelNumber))}startGame(e){this.dispose(),this.audioPlayer.stopAllAudios();const t={currentLevelData:{...this.data.levels[e],levelNumber:e},selectedLevelNumber:e};Ce.publish(Ce.EVENTS.GAMEPLAY_DATA_EVENT,t),Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,!0),this.logSelectedLevelEvent(),this.callBack(A)}logSelectedLevelEvent(){const e={cr_user_id:j,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",level_selected:this.levelNumber};this.firebaseIntegration.sendSelectedLevelEvent(e)}draw(){this.imagesLoaded&&(this.background?.draw(),this.drawLevelSelection(),this.downButton(this.levelSelectionPageIndex))}dispose(){this.audioPlayer.stopAllAudios(),document.getElementById("canvas").removeEventListener("mousedown",this.handleMouseDown,!1),document.removeEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").removeEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").removeEventListener("touchmove",this.handleTouchMove,!1)}}var Mr=n(717),Br={};Br.styleTagTransform=be(),Br.setAttributes=me(),Br.insert=de().bind(null,"head"),Br.domAPI=ue(),Br.insertStyleElement=fe();le()(Mr.A,Br);Mr.A&&Mr.A.locals&&Mr.A.locals;class Or{static renderButtonsHTML(){throw new Error("Method not implemented.")}starCount;currentLevel;switchToGameplayCB;switchToLevelSelectionCB;data;audioPlayer;isLastLevel;levelEndElement=document.getElementById("levelEnd");nextButtonInstance;retryButtonInstance;mapButtonInstance;riveMonster;canvasElement;constructor(e,t){const{starCount:n,currentLevel:i,data:s}=Ce.getLevelEndSceneData(),{isLastLevel:r,canvas:o}=Ce.getGamePlaySceneDetails();this.canvasElement=o,this.switchToGameplayCB=e,this.switchToLevelSelectionCB=t,this.data=s,this.audioPlayer=new te,this.canvasElement=document.getElementById("rivecanvas"),this.starCount=n,this.currentLevel=i,this.isLastLevel=r,this.initializeRiveMonster(),this.toggleLevelEndBackground(!0),this.showLevelEndScreen(),this.addEventListener(),this.renderStarsHTML(),this.switchToReactionAnimation()}initializeRiveMonster(){this.riveMonster=new kr({canvas:this.canvasElement,autoplay:!0,fit:"contain",alignment:"topCenter",onLoad:()=>{this.riveMonster.play(kr.Animations.IDLE)}})}toggleLevelEndBackground=e=>{this.levelEndElement&&(this.levelEndElement.style.display=e?"block":"none",this.levelEndElement.style.zIndex="11")};showLevelEndScreen(){this.toggleLevelEndBackground(!0),this.renderStarsHTML(),this.renderButtonsHTML()}switchToReactionAnimation=()=>{this.starCount<=1?(o()&&this.audioPlayer.playAudio("./assets/audios/LevelLoseFanfare.mp3"),this.riveMonster.play(kr.Animations.EAT_DISGUST)):(o()&&(this.audioPlayer.playAudio("./assets/audios/LevelWinFanfare.mp3"),this.audioPlayer.playAudio(p)),this.riveMonster.play(kr.Animations.EAT_HAPPY))};renderStarsHTML(){const e=document.querySelector(".stars-container");if(!e)return;e.innerHTML="";const t=["./assets/images/pinStar1.webp","./assets/images/pinStar2.webp","./assets/images/pinStar3.webp"];for(let n=0;n<this.starCount;n++){const i=document.createElement("img");i.src=t[n],i.alt=`Star ${n+1}`,i.classList.add("stars",`star${n+1}`),e.appendChild(i),setTimeout((()=>{i.classList.add("show")}),500*n)}}createButton(e,t,n){const i=new e({targetId:"levelEndButtons",id:t});e===Os?this.nextButtonInstance=i:e===Ns?this.retryButtonInstance=i:e===Ms&&(this.mapButtonInstance=i);const s=document.getElementById("game-control");i.onClick((()=>{this.levelEndElement.style.zIndex="7",s.style.zIndex="-1",n()}))}buttonCallbackFn(e){const t=e=>{const t={currentLevelData:{...this.data.levels[e],levelNumber:e},selectedLevelNumber:e};this.handlePublishEvent(!0,t),this.switchToGameplayCB()};switch(e){case"map":this.handlePublishEvent(!0),this.switchToLevelSelectionCB();break;case"retry":t(this.currentLevel);break;case"next":this.currentLevel<this.data.levels.length&&t(this.currentLevel+1);break;default:console.warn(`Unhandled action: ${e}`)}}renderButtonsHTML(){const e=document.getElementById("levelend-next-btn"),t=[{ButtonClass:Ms,id:"levelend-map-btn",onClick:()=>{this.buttonCallbackFn("map")}},{ButtonClass:Ns,id:"levelend-retry-btn",onClick:()=>{this.buttonCallbackFn("retry")}}];!this.isLastLevel&&this.starCount>=2?t.push({ButtonClass:Os,id:"levelend-next-btn",onClick:()=>{this.buttonCallbackFn("next")}}):e&&e.remove(),t.forEach((({ButtonClass:e,id:t,onClick:n})=>{this.createButton(e,t,n)}))}addEventListener(){document.addEventListener("visibilitychange",this.pauseAudios,!1)}handlePublishEvent(e,t=null){t&&Ce.publish(Ce.EVENTS.GAMEPLAY_DATA_EVENT,t),Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,e),setTimeout((()=>{this.toggleLevelEndBackground(!e)}),800)}handleMouseClick=e=>{var t=document.getElementById("canvas").getBoundingClientRect();e.clientX,t.left,e.clientY,t.top};pauseAudios=()=>{o()?this.starCount>=2&&this.audioPlayer.playAudio(p):this.audioPlayer.stopAllAudios()};dispose=()=>{this.audioPlayer.stopAllAudios(),document.removeEventListener("visibilitychange",this.pauseAudios,!1),this.nextButtonInstance&&(this.nextButtonInstance.dispose(),this.nextButtonInstance=null),this.retryButtonInstance&&(this.retryButtonInstance.dispose(),this.retryButtonInstance=null),this.mapButtonInstance&&(this.mapButtonInstance.dispose(),this.mapButtonInstance=null)}}class Nr{canvas;height;width;context;shouldShowLoading;images;loadedImages;imagesLoaded;cloudXPosition=-500;stopCloudMoving=!1;cloudMovingTimeOut=0;unsubscribeEvent;constructor(){const e=Ce.getLoadingSceneDetails();this.canvas=e.canvas,this.height=e.height,this.width=e.width,this.context=e.context,this.shouldShowLoading=!1,this.images={cloud6:"./assets/images/cloud_01.png",cloud7:"./assets/images/cloud_02.png",cloud8:"./assets/images/cloud_03.png"},s(this.images,(e=>{this.loadedImages=Object.assign({},e),this.imagesLoaded=!0})),this.unsubscribeEvent=Ce.subscribe(Ce.EVENTS.SCENE_LOADING_EVENT,(e=>{this.handleLoadingScreen(e)}))}handleLoadingScreen(e){e&&this.initCloud(),this.shouldShowLoading=e,document.getElementById("loading").style.zIndex=e?"10":"-1"}draw(e){this.shouldShowLoading&&(this.context.clearRect(0,0,this.width,this.height),this.cloudXPosition+=.75*e,this.cloudMovingTimeOut+=e,this.cloudMovingTimeOut>2983&&Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,!1),this.cloudXPosition>=.5*this.width&&!this.stopCloudMoving&&(this.cloudMovingTimeOut+=e,this.cloudMovingTimeOut>2e3&&(this.stopCloudMoving=!0,this.cloudXPosition=0)),this.imagesLoaded&&(this.stopCloudMoving?(this.context.drawImage(this.loadedImages.cloud6,0+this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.4*this.width+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,0+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*-this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.05*this.width+this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.6*-this.width+this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,.5*this.width+this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,.4*-this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.2*-this.width+this.cloudXPosition,.2*this.height,this.width,.5*this.height)):(this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=0?0:this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=0?0:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.05*this.width?.05*this.width:this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.6*-this.width?.6*-this.width:this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.5*this.width?.5*this.width:this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.2*-this.width?.2*-this.width:this.cloudXPosition,.2*this.height,this.width,.5*this.height))))}initCloud=()=>{this.cloudXPosition=-500,this.stopCloudMoving=!1,this.cloudMovingTimeOut=0}}class Rr{canvas;data;width;height;pickedStone;pwa_status;firebase_analytics;id;canavsElement;riveMonsterElement;context;buttonContext;playButton;images;loadedImages;imagesLoaded=!1;handler;static SceneName;audioPlayer;toggleBtn;pwa_install_status;titleTextElement;riveMonster;firebaseIntegration;loadingElement;onClickArea;constructor(e,t){this.canvas=e,this.data=t,this.width=e.width,this.height=e.height,this.riveMonsterElement=document.getElementById("rivecanvas"),this.canavsElement=document.getElementById("canvas"),this.context=this.canavsElement.getContext("2d"),this.toggleBtn=document.getElementById("toggle-btn"),this.loadingElement=document.getElementById("loading-screen"),this.riveMonster=new kr({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"topCenter",width:this.canavsElement.width,height:this.canavsElement.height,onLoad:()=>{this.riveMonster.play(kr.Animations.IDLE)}}),this.onClickArea=new oe({selectors:{root:"#background"}},"start-scene-click-area",(e=>`<div id="${e}"></div>`)),this.audioPlayer=new te,this.pwa_status=localStorage.getItem(l),this.handler=document.getElementById("start-scene-click-area"),this.devToggle(),this.createPlayButton(),window.addEventListener("beforeinstallprompt",this.handlerInstallPrompt),this.setupBg(),this.titleTextElement=document.getElementById("title"),this.generateGameTitle(),this.riveMonsterElement.style.zIndex="6",this.firebaseIntegration=new Ds,this.hideInitialLoading(),this.setOnClicknAreaStyle()}setupBg=async()=>{const e=Le.createBackgroundComponent(1);(new Le).generateBackground(e)};setOnClicknAreaStyle=()=>{this.handler.style.width="inherit",this.handler.style.height="inherit",this.handler.style.position="absolute",this.handler.style.zIndex="5"};hideInitialLoading=()=>{setTimeout((()=>{this.loadingElement.style.zIndex="-1",this.loadingElement.style.display="none"}),750)};devToggle=()=>{this.toggleBtn.addEventListener("click",(()=>(e=>{e.classList.toggle("on");const t=e.classList.contains("on");R.DebugMode=t,e.innerText="Dev"})(this.toggleBtn)))};generateGameTitle=()=>{this.titleTextElement.textContent=this.data.title};draw=e=>{this.context.clearRect(0,0,this.width,this.height)};createPlayButton(){this.playButton=new Vs({targetId:"background"}),this.playButton.onClick((()=>{this.toggleBtn.style.display="none",this.logTappedStartFirebaseEvent(),this.audioPlayer.playButtonClickSound(),Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,!0),Ce.publish(Ce.EVENTS.GAME_START,!0)})),document.addEventListener("selectstart",(function(e){e.preventDefault()})),this.handler.addEventListener("click",this.handleMouseClick,!1)}handleMouseClick=e=>{e.preventDefault(),Ds.getInstance().sendUserClickedOnPlayEvent(),fbq("trackCustom","user_clicked",{event:"click"}),this.toggleBtn.style.display="none",this.audioPlayer.playButtonClickSound(),Ce.publish(Ce.EVENTS.SCENE_LOADING_EVENT,!0),Ce.publish(Ce.EVENTS.GAME_START,!0)};dispose(){this.audioPlayer.stopAllAudios(),this.handler.removeEventListener("click",this.handleMouseClick,!1),this.playButton.dispose(),this.playButton.destroy(),this.onClickArea.destroy(),window.removeEventListener("beforeinstallprompt",this.handlerInstallPrompt,!1)}handlerInstallPrompt=e=>{e.preventDefault(),this.pwa_install_status=e,localStorage.setItem(l,"false")};logTappedStartFirebaseEvent(){Date.now();const e={cr_user_id:j,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.data.majVersion&&this.data.minVersion?this.data.majVersion.toString()+"."+this.data.minVersion.toString():""};this.firebaseIntegration.sendTappedStartEvent(e)}}const zr=new(n(438).FeatureFlagsService)({metaData:{userId:j||null}});class Fr{scenes;activeScene;canvas;data;width;height;canavasElement;context;lastTime=0;toggleBtn;titleTextElement;constructor(e,t){Ce.setDefaultGameStateValues(t,e,document.getElementById("canvas")),this.scenes={},this.activeScene=null,this.canvas=e,this.data=t,this.width=e.width,this.height=e.height,this.canavasElement=document.getElementById("canvas"),this.context=this.canavasElement.getContext("2d"),this.toggleBtn=document.getElementById("toggle-btn"),this.titleTextElement=document.getElementById("title"),window.addEventListener("beforeinstallprompt",this.handleInstallPrompt),this.startAnimationLoop(),this.init(e,t)}init(e,t){this.addScene(I,new Nr),this.addScene(C,new Rr(e,t)),this.gotoScene(C),Ce.subscribe(Ce.EVENTS.GAME_START,(e=>{if(zr.isFeatureEnabled("en-33")){const e=localStorage.getItem(c+O)||0,t={currentLevelData:{...this.data.levels[e],levelNumber:e},selectedLevelNumber:e};Ce.publish(Ce.EVENTS.GAMEPLAY_DATA_EVENT,t),this.switchSceneToGameplay()}else this.switchSceneToLevelSelection()}))}addScene(e,t){this.scenes[e]=t}gotoScene(e){this.activeScene&&this.activeScene?.dispose(),this.activeScene=this.scenes[e]}timerWrapper=(e,t=800)=>{setTimeout((()=>{e()}),t)};startAnimationLoop(){const e=t=>{this.animation(t),requestAnimationFrame(e)};requestAnimationFrame(e)}devToggle(){this.toggleBtn.addEventListener("click",(()=>{this.toggleBtn.classList.toggle("on"),this.toggleBtn.classList.contains("on")?(R.DebugMode=!0,this.toggleBtn.innerText="Dev"):(R.DebugMode=!1,this.toggleBtn.innerText="Dev")}))}checkMonsterPhaseUpdation(){const e=Z.getTotalStarCount(),t=Math.floor(e/12)+1||1;return t<=4?t:4}animation=e=>{const t=e-this.lastTime;this.lastTime=e,this.context.clearRect(0,0,this.width,this.height),this.scenes[I].draw(t),this.activeScene&&!(this.activeScene instanceof Or)&&this.activeScene.draw(t)};switchSceneToLevelSelection=()=>{this.timerWrapper((()=>{this.addScene(A,new jr(this.canvas,this.data,this.switchSceneToGameplay)),this.gotoScene(A),this.titleTextElement.style.display="none"}))};switchSceneToGameplay=()=>{this.timerWrapper((()=>{this.addScene(k,new Pr({monsterPhaseNumber:this.checkMonsterPhaseUpdation(),switchSceneToEnd:this.switchSceneToEndLevel,switchToLevelSelection:()=>{this.switchSceneToLevelSelection()},reloadScene:this.switchSceneToGameplay})),this.gotoScene(k),this.titleTextElement.style.display="none"}))};switchSceneToEndLevel=()=>{this.timerWrapper((()=>{this.addScene(P,new Or(this.switchSceneToGameplay,this.switchSceneToLevelSelection)),this.gotoScene(P)}))};handleInstallPrompt=e=>{e.preventDefault(),localStorage.setItem(l,"false")}}try{self["workbox:window:4.3.1"]&&_()}catch(Ur){}var Ur=function(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){return n(e.data)},e.postMessage(t,[i.port2])}))};function Vr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}try{self["workbox:core:4.3.1"]&&_()}catch(Ur){}var Gr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Wr=function(e,t){return new URL(e,location).href===new URL(t,location).href},Hr=function(e,t){Object.assign(this,t,{type:e})};function Kr(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Xr(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Yr(){}var qr=function(e){var t,n;function i(t,n){var i;return void 0===n&&(n={}),(i=e.call(this)||this).t=t,i.i=n,i.o=0,i.u=new Gr,i.s=new Gr,i.h=new Gr,i.v=i.v.bind($r($r(i))),i.l=i.l.bind($r($r(i))),i.g=i.g.bind($r($r(i))),i.m=i.m.bind($r($r(i))),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s,r,o=i.prototype;return o.register=Kr((function(e){var t,n,i=this,s=(void 0===e?{}:e).immediate,r=void 0!==s&&s;return t=function(){return i.p=Boolean(navigator.serviceWorker.controller),i.P=i.R(),Xr(i.k(),(function(e){i.B=e,i.P&&(i.O=i.P,i.s.resolve(i.P),i.h.resolve(i.P),i.j(i.P),i.P.addEventListener("statechange",i.l,{once:!0}));var t=i.B.waiting;return t&&Wr(t.scriptURL,i.t)&&(i.O=t,Promise.resolve().then((function(){i.dispatchEvent(new Hr("waiting",{sw:t,wasWaitingBeforeRegister:!0}))}))),i.O&&i.u.resolve(i.O),i.B.addEventListener("updatefound",i.g),navigator.serviceWorker.addEventListener("controllerchange",i.m,{once:!0}),"BroadcastChannel"in self&&(i.C=new BroadcastChannel("workbox"),i.C.addEventListener("message",i.v)),navigator.serviceWorker.addEventListener("message",i.v),i.B}))},(n=function(){if(!r&&"complete"!==document.readyState)return function(e,t){return e&&e.then?e.then(Yr):Promise.resolve()}(new Promise((function(e){return addEventListener("load",e)})))}())&&n.then?n.then(t):t()})),o.getSW=Kr((function(){return this.O||this.u.promise})),o.messageSW=Kr((function(e){return Xr(this.getSW(),(function(t){return Ur(t,e)}))})),o.R=function(){var e=navigator.serviceWorker.controller;if(e&&Wr(e.scriptURL,this.t))return e},o.k=Kr((function(){var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Xr(navigator.serviceWorker.register(e.t,e.i),(function(t){return e.L=performance.now(),t}))}),(function(e){throw e}))})),o.j=function(e){Ur(e,{type:"WINDOW_READY",meta:"workbox-window"})},o.g=function(){var e=this.B.installing;this.o>0||!Wr(e.scriptURL,this.t)||performance.now()>this.L+6e4?(this.W=e,this.B.removeEventListener("updatefound",this.g)):(this.O=e,this.u.resolve(e)),++this.o,e.addEventListener("statechange",this.l)},o.l=function(e){var t=this,n=e.target,i=n.state,s=n===this.W,r=s?"external":"",o={sw:n,originalEvent:e};!s&&this.p&&(o.isUpdate=!0),this.dispatchEvent(new Hr(r+i,o)),"installed"===i?this._=setTimeout((function(){"installed"===i&&t.B.waiting===n&&t.dispatchEvent(new Hr(r+"waiting",o))}),200):"activating"===i&&(clearTimeout(this._),s||this.s.resolve(n))},o.m=function(e){var t=this.O;t===navigator.serviceWorker.controller&&(this.dispatchEvent(new Hr("controlling",{sw:t,originalEvent:e})),this.h.resolve(t))},o.v=function(e){var t=e.data;this.dispatchEvent(new Hr("message",{data:t,originalEvent:e}))},s=i,(r=[{key:"active",get:function(){return this.s.promise}},{key:"controlling",get:function(){return this.h.promise}}])&&Vr(s.prototype,r),i}(function(){function e(){this.D={}}var t=e.prototype;return t.addEventListener=function(e,t){this.T(e).add(t)},t.removeEventListener=function(e,t){this.T(e).delete(t)},t.dispatchEvent=function(e){e.target=this,this.T(e.type).forEach((function(t){return t(e)}))},t.T=function(e){return this.D[e]=this.D[e]||new Set},e}()),Jr=n(664),Qr={};Qr.styleTagTransform=be(),Qr.setAttributes=me(),Qr.insert=de().bind(null,"head"),Qr.domAPI=ue(),Qr.insertStyleElement=fe();le()(Jr.A,Qr);Jr.A&&Jr.A.locals&&Jr.A.locals;new class{canvas;versionInfoElement;lang;is_cached;progressBar;progressBarContainer;channel;sceneHandler;loadingElement;majVersion;minVersion;dataModal;startSessionTime;titleTextElement;feedBackTextElement;currentProgress;background;firebaseIntegration;constructor(e){this.lang=e,this.currentProgress=10,this.canvas=document.getElementById("canvas"),this.background=document.getElementById("background"),this.channel=new BroadcastChannel("my-channel"),this.progressBar=document.getElementById("progress-bar"),this.titleTextElement=document.getElementById("title"),this.feedBackTextElement=document.getElementById("feedback-text"),this.progressBarContainer=document.getElementById("progress-bar-container"),this.versionInfoElement=document.getElementById("version-info-id"),this.loadingElement=document.getElementById("loading-screen"),this.is_cached=this.initializeCachedData(),this.firebaseIntegration=new Ds,this.startSessionTime=0,this.init(),this.channel.addEventListener("message",this.handleServiceWorkerMessage),window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener(V,this.handleVisibilityChange),window.addEventListener("resize",this.handleResize.bind(this))}async init(){const e=await i.getLanguageSpecificFont(this.lang);await this.loadAndCacheFont(e,`./assets/fonts/${e}.ttf`),await this.loadTitleFeedbackCustomFont(),await this.preloadGameAudios(),await zr.initialize(),this.handleLoadingScreen(),this.setupCanvas();const t=await G();this.majVersion=t.majversion,this.minVersion=t.minversion,this.dataModal=this.createDataModal(t),this.globalInitialization(t),this.logSessionStartFirebaseEvent(),window.addEventListener("resize",(async()=>{this.handleResize(this.dataModal)}));const n=localStorage.getItem(this.lang+"gamePlayedInfo"),s=n?JSON.parse(n).length-1:0,r=R.DebugMode?c+this.lang+"Debug":c+this.lang;localStorage.setItem(r,s.toString()),this.is_cached.has(this.lang)&&this.handleCachedScenario(this.dataModal),this.registerWorkbox()}async loadTitleFeedbackCustomFont(){const e=ee[this.lang]||ee.default,t=`'${e}', sans-serif`;await this.loadAndCacheFont(e,`./assets/fonts/${e}.ttf`),[this.titleTextElement,this.feedBackTextElement].forEach((e=>{e&&(e.style.fontFamily=t)}))}logSessionStartFirebaseEvent(){let e=localStorage.getItem("lastSessionEndTime"),t=0;if(this.startSessionTime=(new Date).getTime(),e){let n=parseInt(e);isNaN(n)||(t=Math.abs((new Date).getTime()-n))}const n=parseFloat((t?t/864e5:0).toFixed(3)),i={cr_user_id:j,ftm_language:O,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",days_since_last:n};this.firebaseIntegration.sendSessionStartEvent(i)}logSessionEndFirebaseEvent(){const e={cr_user_id:j,ftm_language:O,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",duration:((new Date).getTime()-this.startSessionTime)/1e3};localStorage.setItem("lastSessionEndTime",(new Date).getTime().toString()),this.firebaseIntegration.sendSessionEndEvent(e)}initializeCachedData(){const e=localStorage.getItem(u);return e?new Map(JSON.parse(e)):new Map}async loadAndCacheFont(e,t){try{const n=await caches.open("fontCache");if(!await n.match(t)){const e=await fetch(t),i=await e.blob();await n.put(t,new Response(i))}const i=new FontFace(e,`url(${t}) format('truetype')`);await i.load(),document.fonts.add(i)}catch(e){console.error(`Failed to load and cache font: ${e}`)}}handleLoadingScreen=()=>{this.is_cached.get(O)?(this.progressBarContainer.style.display="none",this.progressBar.style.display="none"):(this.progressBarContainer.style.display="flex",this.progressBar.style.display="flex",this.progressBar.style.width="10%")};async registerWorkbox(){if("serviceWorker"in navigator)try{const e=new qr("./sw.js",{});await e.register(),await navigator.serviceWorker.ready,this.is_cached.has(this.lang)?fetch($+"?cache-bust="+(new Date).getTime(),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store"}).then((async e=>{if(!e.ok)return void console.error("Failed to fetch the content file from the server!");const t=await e.json(),n=t.majversion+"."+t.minversion,i=localStorage.getItem("version"+O.toLowerCase());if(n&&i!=n){console.log("Content version mismatch! Reloading...");var s=JSON.parse(localStorage.getItem("is_cached"));console.log("current lang  "+O);var r=s.filter((e=>!e.toString().includes(O)));localStorage.setItem(u,JSON.stringify(r)),localStorage.removeItem("version"+O.toLowerCase()),caches.delete(O),this.handleUpdateFoundMessage()}})).catch((e=>{console.error("Error fetching the content file: "+e)})):this.channel.postMessage({command:"Cache",data:this.lang}),navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage)}catch(e){console.error(`Failed to register service worker: ${e}`)}}setupCanvas(){const e=window.screen.width>1024?768:window.innerWidth;this.canvas.height=window.innerHeight,this.canvas.width=e,this.background.style.width=`${e}px`}createDataModal(e){return new W(e.title,e.OtherAudios,e.Levels,e.FeedbackTexts,e.RightToLeft,e.FeedbackAudios,e.majversion,e.minversion,e.version)}globalInitialization(e){globalThis.aboutCompany=e.aboutCompany,globalThis.descriptionText=e.descriptionText}handleResize(e){this.is_cached.has(this.lang)&&(this.updateVersionInfoElement(e),this.setupCanvas(),this.reinitializeSceneHandler(e))}updateVersionInfoElement(e){this.is_cached.has(this.lang)&&R.DevelopmentLink&&(e.majVersion&&e.minVersion?this.versionInfoElement.innerHTML+=`/j.v${e.majVersion}.${e.minVersion}`:e.version&&(this.versionInfoElement.innerHTML+=`/j.v${e.version}`),document.getElementById("toggle-btn").style.display="block")}reinitializeSceneHandler(e){delete this.sceneHandler,this.sceneHandler=new Fr(this.canvas,e),this.passingDataToContainer()}handleCachedScenario(e){this.updateVersionInfoElement(e),this.sceneHandler=new Fr(this.canvas,e),this.passingDataToContainer()}passingDataToContainer=()=>{window.Android&&window.Android.cachedStatus(1==this.is_cached.get(this.lang))};setContainerAppOrientation(){window.Android&&window.Android.setContainerAppOrientation("portrait")}handleUpdateFoundMessage(){confirm("Update Found\nPress ok to update")&&window.location.reload()}handleLoadingMessage=e=>{if(this.progressBarContainer&&this.progressBar){this.showProgressBar();const t=Math.min(100,Math.max(0,e.data));t>this.currentProgress&&(this.currentProgress=t,this.progressBar.style.width=`${this.currentProgress}%`),this.isDownloadCompleted(this.currentProgress)&&(this.cacheLanguage(),this.sendCompletionEvent(),this.hideLoadingScreen())}};showProgressBar(){this.progressBarContainer.classList.add("visible"),this.progressBar.classList.add("visible")}isDownloadCompleted(e){return 100===e&&!this.is_cached.get(this.lang)}cacheLanguage(){try{this.is_cached.set(this.lang,!0),localStorage.setItem(u,JSON.stringify(Array.from(this.is_cached.entries())))}catch(e){console.error("Error caching language:",e)}}sendCompletionEvent(){const e={cr_user_id:j,ftm_language:O,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.getJsonVersionNumber()};this.firebaseIntegration.sendDownloadCompletedEvent(e)}getJsonVersionNumber(){return this.majVersion&&this.minVersion?this.majVersion+"."+this.minVersion:""}hideLoadingScreen(){try{localStorage.setItem("version"+this.lang,this.getJsonVersionNumber()),this.loadingElement.style.display="none",this.handleResize(this.dataModal)}catch(e){console.error("Error hiding loading screen:",e)}}handleServiceWorkerMessage=e=>{"Loading"===e.data.msg?this.handleLoadingMessage(e.data):"Update Found"===e.data.msg&&this.handleUpdateFoundMessage()};handleVisibilityChange=()=>{o()?this.logSessionStartFirebaseEvent():this.logSessionEndFirebaseEvent()};handleBeforeUnload=async e=>{this.logSessionEndFirebaseEvent(),this.dispose()};preloadGameAudios=async()=>{let e=m;return new Promise(((t,n)=>{const i=e.map((e=>(new te).preloadGameAudio(e)));Promise.all(i).then((()=>t())).catch((e=>{console.error("Error preloading audio:",e),n(e)}))}))};dispose(){this.channel.removeEventListener("message",this.handleServiceWorkerMessage),window.removeEventListener("beforeunload",this.handleBeforeUnload),document.removeEventListener(V,this.handleVisibilityChange),window.removeEventListener("resize",this.handleResize),navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",this.handleServiceWorkerMessage)}}(O)})()})();