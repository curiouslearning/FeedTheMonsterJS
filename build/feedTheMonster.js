/*! For license information please see feedTheMonster.js.LICENSE.txt */
(()=>{var t={52:function(t){var e;e=()=>(()=>{"use strict";var t=[,(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});var n,s=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t={}){var e,i,s=t;function a(){function t(t){const a=n;i=e=0,n=new Map,a.forEach((e=>{try{e(t)}catch(t){console.error(t)}})),this.ob(),s&&s.Tb()}let e=0,i=0,n=new Map,s=null,a=null;this.requestAnimationFrame=function(s){e||(e=requestAnimationFrame(t.bind(this)));const a=++i;return n.set(a,s),a},this.cancelAnimationFrame=function(t){n.delete(t),e&&0==n.size&&(cancelAnimationFrame(e),e=0)},this.Rb=function(t){a&&(document.body.remove(a),a=null),t||(a=document.createElement("div"),a.style.backgroundColor="black",a.style.position="fixed",a.style.right=0,a.style.top=0,a.style.color="white",a.style.padding="4px",a.innerHTML="RIVE FPS",t=function(t){a.innerHTML="RIVE FPS "+t.toFixed(1)},document.body.appendChild(a)),s=new function(){let e=0,i=0;this.Tb=function(){var n=performance.now();i?(++e,1e3<(n-=i)&&(t(1e3*e/n),e=i=0)):(i=n,e=0)}}},this.Ob=function(){a&&(document.body.remove(a),a=null),s=null},this.ob=function(){}}function r(t){console.assert(!0);const e=new Map;let i=-1/0;this.push=function(n){return n=n+((1<<t)-1)>>t,e.has(n)&&clearTimeout(e.get(n)),e.set(n,setTimeout((function(){e.delete(n),0==e.length?i=-1/0:n==i&&(i=Math.max(...e.keys()),console.assert(i<n))}),1e3)),i=Math.max(n,i),i<<t}}s.ready=new Promise(((t,n)=>{e=t,i=n}));const o=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){o&&o();let t=s.decodeAudio;s.decodeAudio=function(e,i){i(e=t(e))};let e=s.decodeFont;s.decodeFont=function(t,i){i(t=e(t))};const i=s.FileAssetLoader;s.ptrToAsset=t=>{let e=s.ptrToFileAsset(t);return e.isImage?s.ptrToImageAsset(t):e.isFont?s.ptrToFontAsset(t):e.isAudio?s.ptrToAudioAsset(t):e},s.CustomFileAssetLoader=i.extend("CustomFileAssetLoader",{__construct:function({loadContents:t}){this.__parent.__construct.call(this),this.Gb=t},loadContents:function(t,e){return t=s.ptrToAsset(t),this.Gb(t,e)}}),s.CDNFileAssetLoader=i.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(t){let e=s.ptrToAsset(t);return""!==(t=e.cdnUuid)&&(i=e.cdnBaseUrl+"/"+t,(n=new XMLHttpRequest).responseType="arraybuffer",n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(t=>{e.decode(new Uint8Array(t.response))})(n)},n.open("GET",i,!0),n.send(null),!0);var i,n}}),s.FallbackFileAssetLoader=i.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(t){this.kb.push(t)},loadContents:function(t,e){for(let i of this.kb)if(i.loadContents(t,e))return!0;return!1}});let n=s.computeAlignment;s.computeAlignment=function(t,e,i,s,a=1){return n.call(this,t,e,i,s,a)}};const l="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),c=new function(){function t(){if(!e){var t=document.createElement("canvas"),r={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let o;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(o=t.getContext("webgl",r),i=1,!o)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(o=t.getContext("webgl2",r))i=2;else{if(!(o=t.getContext("webgl",r)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;i=1}function l(t,e,i){if(e=o.createShader(e),o.shaderSource(e,i),o.compileShader(e),0<((i=o.getShaderInfoLog(e))||"").length)throw i;o.attachShader(t,e)}if(o=new Proxy(o,{get:(t,e)=>t.isContextLost()?(c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",e),c=!0),"function"==typeof t[e]?function(){}:void 0):"function"==typeof t[e]?function(...i){return t[e].apply(t,i)}:t[e],set(t,e,i){if(!t.isContextLost())return t[e]=i,!0;c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+e),c=!0)}}),n=Math.min(o.getParameter(o.MAX_RENDERBUFFER_SIZE),o.getParameter(o.MAX_TEXTURE_SIZE)),l(t=o.createProgram(),o.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),l(t,o.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),o.bindAttribLocation(t,0,"vertex"),o.bindAttribLocation(t,1,"uv"),o.linkProgram(t),0<((r=o.getProgramInfoLog(t))||"").trim().length)throw r;s=o.getUniformLocation(t,"mat"),a=o.getUniformLocation(t,"translate"),o.useProgram(t),o.bindBuffer(o.ARRAY_BUFFER,o.createBuffer()),o.enableVertexAttribArray(0),o.enableVertexAttribArray(1),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,o.createBuffer()),o.uniform1i(o.getUniformLocation(t,"image"),0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e=o}return!0}let e=null,i=0,n=0,s=null,a=null,o=0,l=0,c=!1;t(),this.hc=function(){return t(),n},this.Mb=function(t){e.deleteTexture&&e.deleteTexture(t)},this.Lb=function(n){if(!t())return null;const s=e.createTexture();return s?(e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),2==i?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),s):null};const h=new r(8),u=new r(8),d=new r(10),p=new r(10);this.Qb=function(i,n,r,c,m){if(t()){var f=h.push(i),g=u.push(n);if(e.canvas){for(var v of(e.canvas.width==f&&e.canvas.height==g||(e.canvas.width=f,e.canvas.height=g),e.viewport(0,g-n,i,n),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST),r.sort(((t,e)=>e.wb-t.wb)),f=d.push(c),o!=f&&(e.bufferData(e.ARRAY_BUFFER,8*f,e.DYNAMIC_DRAW),o=f),f=0,r))e.bufferSubData(e.ARRAY_BUFFER,f,v.Ta),f+=4*v.Ta.length;for(var b of(console.assert(f==4*c),r))e.bufferSubData(e.ARRAY_BUFFER,f,b.Db),f+=4*b.Db.length;for(var y of(console.assert(f==8*c),f=p.push(m),l!=f&&(e.bufferData(e.ELEMENT_ARRAY_BUFFER,2*f,e.DYNAMIC_DRAW),l=f),v=0,r))e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,v,y.indices),v+=2*y.indices.length;console.assert(v==2*m),y=0,b=!0,f=v=0;for(const t of r){t.image.Ka!=y&&(e.bindTexture(e.TEXTURE_2D,t.image.Ja||null),y=t.image.Ka),t.mc?(e.scissor(t.Ya,g-t.Za-t.jb,t.Ac,t.jb),b=!0):b&&(e.scissor(0,g-n,i,n),b=!1),r=2/i;const o=-2/n;e.uniform4f(s,t.ha[0]*r*t.Ba,t.ha[1]*o*t.Ca,t.ha[2]*r*t.Ba,t.ha[3]*o*t.Ca),e.uniform2f(a,t.ha[4]*r*t.Ba+r*(t.Ya-t.ic*t.Ba)-1,t.ha[5]*o*t.Ca+o*(t.Za-t.jc*t.Ca)+1),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,f),e.vertexAttribPointer(1,2,e.FLOAT,!1,0,f+4*c),e.drawElements(e.TRIANGLES,t.indices.length,e.UNSIGNED_SHORT,v),f+=4*t.Ta.length,v+=2*t.indices.length}console.assert(f==4*c),console.assert(v==2*m)}}},this.canvas=function(){return t()&&e.canvas}},h=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){function t(t){switch(t){case m.srcOver:return"source-over";case m.screen:return"screen";case m.overlay:return"overlay";case m.darken:return"darken";case m.lighten:return"lighten";case m.colorDodge:return"color-dodge";case m.colorBurn:return"color-burn";case m.hardLight:return"hard-light";case m.softLight:return"soft-light";case m.difference:return"difference";case m.exclusion:return"exclusion";case m.multiply:return"multiply";case m.hue:return"hue";case m.saturation:return"saturation";case m.color:return"color";case m.luminosity:return"luminosity"}}function e(t){return"rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+((255&t)>>>0)+","+((4278190080&t)>>>24)/255+")"}function i(){0<x.length&&(c.Qb(T.drawWidth(),T.drawHeight(),x,_,A),x=[],A=_=0,T.reset(512,512));for(const t of E){for(const e of t.H)e();t.H=[]}E.clear()}h&&h();var n=s.RenderPaintStyle;const r=s.RenderPath,o=s.RenderPaint,u=s.Renderer,d=s.StrokeCap,p=s.StrokeJoin,m=s.BlendMode,f=n.fill,g=n.stroke,v=s.FillRule.evenOdd;let b=1;var y=s.RenderImage.extend("CanvasRenderImage",{__construct:function({la:t,xa:e}={}){this.__parent.__construct.call(this),this.Ka=b,b=b+1&2147483647||1,this.la=t,this.xa=e},__destruct:function(){this.Ja&&(c.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(t){var e=this;e.xa&&e.xa(e);var i=new Image;e.Wa=URL.createObjectURL(new Blob([t],{type:"image/png"})),i.onload=function(){e.Fb=i,e.Ja=c.Lb(i),e.size(i.width,i.height),e.la&&e.la(e)},i.src=e.Wa}}),w=r.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(t,e,i,n,s,a,r){var o=this.T,l=o.addPath;t=t.T;const c=new DOMMatrix;c.a=e,c.b=i,c.c=n,c.d=s,c.e=a,c.f=r,l.call(o,t,c)},fillRule:function(t){this.Va=t},moveTo:function(t,e){this.T.moveTo(t,e)},lineTo:function(t,e){this.T.lineTo(t,e)},cubicTo:function(t,e,i,n,s,a){this.T.bezierCurveTo(t,e,i,n,s,a)},close:function(){this.T.closePath()}}),S=o.extend("CanvasRenderPaint",{color:function(t){this.Xa=e(t)},thickness:function(t){this.Ib=t},join:function(t){switch(t){case p.miter:this.Ia="miter";break;case p.round:this.Ia="round";break;case p.bevel:this.Ia="bevel"}},cap:function(t){switch(t){case d.butt:this.Ha="butt";break;case d.round:this.Ha="round";break;case d.square:this.Ha="square"}},style:function(t){this.Hb=t},blendMode:function(e){this.Eb=t(e)},clearGradient:function(){this.ja=null},linearGradient:function(t,e,i,n){this.ja={yb:t,zb:e,bb:i,cb:n,Ra:[]}},radialGradient:function(t,e,i,n){this.ja={yb:t,zb:e,bb:i,cb:n,Ra:[],ec:!0}},addStop:function(t,e){this.ja.Ra.push({color:t,stop:e})},completeGradient:function(){},draw:function(t,i,n){let s=this.Hb;var a=this.Xa,r=this.ja;if(t.globalCompositeOperation=this.Eb,null!=r){a=r.yb;var o=r.zb;const i=r.bb;var l=r.cb;const n=r.Ra;r.ec?(r=i-a,l-=o,a=t.createRadialGradient(a,o,0,a,o,Math.sqrt(r*r+l*l))):a=t.createLinearGradient(a,o,i,l);for(let t=0,i=n.length;t<i;t++)o=n[t],a.addColorStop(o.stop,e(o.color));this.Xa=a,this.ja=null}switch(s){case g:t.strokeStyle=a,t.lineWidth=this.Ib,t.lineCap=this.Ha,t.lineJoin=this.Ia,t.stroke(i);break;case f:t.fillStyle=a,t.fill(i,n)}}});const E=new Set;let T=null,x=[],_=0,A=0;var C=s.CanvasRenderer=u.extend("Renderer",{__construct:function(t){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=t.getContext("2d"),this.Ua=t,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const t=this.S.length-6;if(6>t)throw"restore() called without matching save().";this.S.splice(t),this.H.push(this.C.restore.bind(this.C))},transform:function(t,e,i,n,s,a){const r=this.S,o=r.length-6;r.splice(o,6,r[o]*t+r[o+2]*e,r[o+1]*t+r[o+3]*e,r[o]*i+r[o+2]*n,r[o+1]*i+r[o+3]*n,r[o]*s+r[o+2]*a+r[o+4],r[o+1]*s+r[o+3]*a+r[o+5]),this.H.push(this.C.transform.bind(this.C,t,e,i,n,s,a))},rotate:function(t){const e=Math.sin(t);t=Math.cos(t),this.transform(t,e,-e,t,0,0)},_drawPath:function(t,e){this.H.push(e.draw.bind(e,this.C,t.T,t.Va===v?"evenodd":"nonzero"))},_drawRiveImage:function(e,i,n){var s=e.Fb;if(s){var a=this.C,r=t(i);this.H.push((function(){a.globalCompositeOperation=r,a.globalAlpha=n,a.drawImage(s,0,0),a.globalAlpha=1}))}},_getMatrix:function(t){const e=this.S,i=e.length-6;for(let n=0;6>n;++n)t[n]=e[i+n]},_drawImageMesh:function(e,n,a,r,o,l,h,u,d,p){var m=this.C.canvas.width,f=this.C.canvas.height;const g=d-h,v=p-u;h=Math.max(h,0),u=Math.max(u,0),d=Math.min(d,m),p=Math.min(p,f);const b=d-h,y=p-u;if(console.assert(b<=Math.min(g,m)),console.assert(y<=Math.min(v,f)),!(0>=b||0>=y)){d=b<g||y<v,m=p=1;var w=Math.ceil(b*p),S=Math.ceil(y*m);f=c.hc(),w>f&&(p*=f/w,w=f),S>f&&(m*=f/S,S=f),T||(T=new s.DynamicRectanizer(f),T.reset(512,512)),0>(f=T.addRect(w,S))&&(i(),E.add(this),f=T.addRect(w,S),console.assert(0<=f));var C=65535&f,I=f>>16;x.push({ha:this.S.slice(this.S.length-6),image:e,Ya:C,Za:I,ic:h,jc:u,Ac:w,jb:S,Ba:p,Ca:m,Ta:new Float32Array(r),Db:new Float32Array(o),indices:new Uint16Array(l),mc:d,wb:e.Ka<<1|(d?1:0)}),_+=r.length,A+=l.length;var P=this.C,L=t(n);this.H.push((function(){P.save(),P.resetTransform(),P.globalCompositeOperation=L,P.globalAlpha=a;const t=c.canvas();t&&P.drawImage(t,C,I,w,S,h,u,b,y),P.restore()}))}},_clipPath:function(t){this.H.push(this.C.clip.bind(this.C,t.T,t.Va===v?"evenodd":"nonzero"))},clear:function(){E.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(t,e){this.transform(1,0,0,1,t,e)}});s.makeRenderer=function(t){const e=new C(t),i=e.C;return new Proxy(e,{get(t,n){if("function"==typeof t[n])return function(...e){return t[n].apply(t,e)};if("function"==typeof i[n]){if(-1<l.indexOf(n))throw Error("RiveException: Method call to '"+n+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...t){e.H.push(i[n].bind(i,...t))}}return t[n]},set(t,n,s){if(n in i)return e.H.push((()=>{i[n]=s})),!0}})},s.decodeImage=function(t,e){new y({la:e}).decode(t)},s.renderFactory={makeRenderPaint:function(){return new S},makeRenderPath:function(){return new w},makeRenderImage:function(){let t=P;return new y({xa:()=>{t.total++},la:()=>{if(t.loaded++,t.loaded===t.total){const e=t.ready;e&&(e(),t.ready=null)}}})}};let I=s.load,P=null;s.load=function(t,e,i=!0){const n=new s.FallbackFileAssetLoader;return void 0!==e&&n.addLoader(e),i&&(e=new s.CDNFileAssetLoader,n.addLoader(e)),new Promise((function(e){let i=null;P={total:0,loaded:0,ready:function(){e(i)}},i=I(t,n),0==P.total&&e(i)}))};let L=s.RendererWrapper.prototype.align;s.RendererWrapper.prototype.align=function(t,e,i,n,s=1){L.call(this,t,e,i,n,s)},n=new a,s.requestAnimationFrame=n.requestAnimationFrame.bind(n),s.cancelAnimationFrame=n.cancelAnimationFrame.bind(n),s.enableFPSCounter=n.Rb.bind(n),s.disableFPSCounter=n.Ob,n.ob=i,s.resolveAnimationFrame=i,s.cleanup=function(){T&&T.delete()}};var u,d,p=Object.assign({},s),m="./this.program",f="object"==typeof window,g="function"==typeof importScripts,v="";(f||g)&&(g?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),n&&(v=n),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",g&&(d=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=(t,e,i)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?e(n.response):i()},n.onerror=i,n.send(null)});var b,y=s.print||console.log.bind(console),w=s.printErr||console.error.bind(console);Object.assign(s,p),p=null,s.thisProgram&&(m=s.thisProgram),s.wasmBinary&&(b=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var S,E,T,x,_,A,C,I,P,L,k=!1;function D(){var t=S.buffer;s.HEAP8=T=new Int8Array(t),s.HEAP16=_=new Int16Array(t),s.HEAP32=C=new Int32Array(t),s.HEAPU8=x=new Uint8Array(t),s.HEAPU16=A=new Uint16Array(t),s.HEAPU32=I=new Uint32Array(t),s.HEAPF32=P=new Float32Array(t),s.HEAPF64=L=new Float64Array(t)}var M,B=[],z=[],N=[];function R(){var t=s.preRun.shift();B.unshift(t)}var O,F=0,j=null,V=null;function U(t){throw s.onAbort&&s.onAbort(t),w(t="Aborted("+t+")"),k=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),i(t),t}function W(t){return t.startsWith("data:application/octet-stream;base64,")}if(!W(O="canvas_advanced.wasm")){var H=O;O=s.locateFile?s.locateFile(H,v):v+H}function $(t){if(t==O&&b)return new Uint8Array(b);if(d)return d(t);throw"both async and sync fetching of the wasm failed"}function G(t,e,i){return function(t){if(!b&&(f||g)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>$(t)));if(u)return new Promise(((e,i)=>{u(t,(t=>e(new Uint8Array(t))),i)}))}return Promise.resolve().then((()=>$(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(i,(t=>{w("failed to asynchronously prepare wasm: "+t),U(t)}))}var X,Y,q={445436:(t,e,i,n,s)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=t,window.h.I.capture=e,window.h.I.La=i,window.h.ga={},window.h.ga.stopped=n,window.h.ga.xb=s;let a=window.h;a.D=[],a.yc=function(t){for(var e=0;e<a.D.length;++e)if(null==a.D[e])return a.D[e]=t,e;return a.D.push(t),a.D.length-1},a.Cb=function(t){for(a.D[t]=null;0<a.D.length&&null==a.D[a.D.length-1];)a.D.pop()},a.Sc=function(t){for(var e=0;e<a.D.length;++e)if(a.D[e]==t)return a.Cb(e)},a.ra=function(t){return a.D[t]},a.Bb=["touchend","click"],a.unlock=function(){for(var t=0;t<a.D.length;++t){var e=a.D[t];null!=e&&null!=e.J&&e.state===a.ga.xb&&e.J.resume().then((()=>{Pi(e.pb)}),(t=>{console.error("Failed to resume audiocontext",t)}))}a.Bb.map((function(t){document.removeEventListener(t,a.unlock,!0)}))},a.Bb.map((function(t){document.addEventListener(t,a.unlock,!0)}))}return window.h.Aa+=1,1},447614:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},447778:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,447882:()=>{try{var t=new(window.AudioContext||window.webkitAudioContext),e=t.sampleRate;return t.close(),e}catch(t){return 0}},448053:(t,e,i,n,s,a)=>{if(void 0===window.h)return-1;var r={},o={};return t==window.h.I.ya&&0!=i&&(o.sampleRate=i),r.J=new(window.AudioContext||window.webkitAudioContext)(o),r.J.suspend(),r.state=window.h.ga.stopped,i=0,t!=window.h.I.ya&&(i=e),r.Z=r.J.createScriptProcessor(n,i,e),r.Z.onaudioprocess=function(i){if(null!=r.sa&&0!=r.sa.length||(r.sa=new Float32Array(P.buffer,s,n*e)),t==window.h.I.capture||t==window.h.I.La){for(var o=0;o<e;o+=1)for(var l=i.inputBuffer.getChannelData(o),c=r.sa,h=0;h<n;h+=1)c[h*e+o]=l[h];ki(a,n,s)}if(t==window.h.I.ya||t==window.h.I.La)for(Di(a,n,s),o=0;o<i.outputBuffer.numberOfChannels;++o)for(l=i.outputBuffer.getChannelData(o),c=r.sa,h=0;h<n;h+=1)l[h]=c[h*e+o];else for(o=0;o<i.outputBuffer.numberOfChannels;++o)i.outputBuffer.getChannelData(o).fill(0)},t!=window.h.I.capture&&t!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){r.Da=r.J.createMediaStreamSource(t),r.Da.connect(r.Z),r.Z.connect(r.J.destination)})).catch((function(t){console.log("Failed to get user media: "+t)})),t==window.h.I.ya&&r.Z.connect(r.J.destination),r.pb=a,window.h.yc(r)},450930:t=>window.h.ra(t).J.sampleRate,451003:t=>{void 0!==(t=window.h.ra(t)).Z&&(t.Z.onaudioprocess=function(){},t.Z.disconnect(),t.Z=void 0),void 0!==t.Da&&(t.Da.disconnect(),t.Da=void 0),t.J.close(),t.J=void 0,t.pb=void 0},451403:t=>{window.h.Cb(t)},451453:t=>{(t=window.h.ra(t)).J.resume(),t.state=window.h.ga.xb},451592:t=>{(t=window.h.ra(t)).J.suspend(),t.state=window.h.ga.stopped}},K=t=>{for(;0<t.length;)t.shift()(s)},J=(t,e)=>{for(var i=0,n=t.length-1;0<=n;n--){var s=t[n];"."===s?t.splice(n,1):".."===s?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i;i--)t.unshift("..");return t},Q=t=>{var e="/"===t.charAt(0),i="/"===t.substr(-1);return(t=J(t.split("/").filter((t=>!!t)),!e).join("/"))||e||(t="."),t&&i&&(t+="/"),(e?"/":"")+t},Z=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},tt=t=>{if("/"===t)return"/";var e=(t=(t=Q(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},et=t=>(et=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>crypto.getRandomValues(t);U("initRandomDevice")})())(t);function it(){for(var t="",e=!1,i=arguments.length-1;-1<=i&&!e;i--){if("string"!=typeof(e=0<=i?arguments[i]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=J(t.split("/").filter((t=>!!t)),!e).join("/"))||"."}var nt="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,st=(t,e,i)=>{var n=e+i;for(i=e;t[i]&&!(i>=n);)++i;if(16<i-e&&t.buffer&&nt)return nt.decode(t.subarray(e,i));for(n="";e<i;){var s=t[e++];if(128&s){var a=63&t[e++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|a);else{var r=63&t[e++];65536>(s=224==(240&s)?(15&s)<<12|a<<6|r:(7&s)<<18|a<<12|r<<6|63&t[e++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}return n},at=[],rt=t=>{for(var e=0,i=0;i<t.length;++i){var n=t.charCodeAt(i);127>=n?e++:2047>=n?e+=2:55296<=n&&57343>=n?(e+=4,++i):e+=3}return e},ot=(t,e,i,n)=>{if(!(0<n))return 0;var s=i;n=i+n-1;for(var a=0;a<t.length;++a){var r=t.charCodeAt(a);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++a)),127>=r){if(i>=n)break;e[i++]=r}else{if(2047>=r){if(i+1>=n)break;e[i++]=192|r>>6}else{if(65535>=r){if(i+2>=n)break;e[i++]=224|r>>12}else{if(i+3>=n)break;e[i++]=240|r>>18,e[i++]=128|r>>12&63}e[i++]=128|r>>6&63}e[i++]=128|63&r}}return e[i]=0,i-s};function lt(t,e){var i=Array(rt(t)+1);return t=ot(t,i,0,i.length),e&&(i.length=t),i}var ct=[];function ht(t,e){ct[t]={input:[],F:[],V:e},Ft(t,ut)}var ut={open:function(t){var e=ct[t.node.za];if(!e)throw new At(43);t.s=e,t.seekable=!1},close:function(t){t.s.V.qa(t.s)},qa:function(t){t.s.V.qa(t.s)},read:function(t,e,i,n){if(!t.s||!t.s.V.ib)throw new At(60);for(var s=0,a=0;a<n;a++){try{var r=t.s.V.ib(t.s)}catch(t){throw new At(29)}if(void 0===r&&0===s)throw new At(6);if(null==r)break;s++,e[i+a]=r}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,i,n){if(!t.s||!t.s.V.Oa)throw new At(60);try{for(var s=0;s<n;s++)t.s.V.Oa(t.s,e[i+s])}catch(t){throw new At(29)}return n&&(t.node.timestamp=Date.now()),s}},dt={ib:function(){t:{if(!at.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t){t=null;break t}at=lt(t,!0)}t=at.shift()}return t},Oa:function(t,e){null===e||10===e?(y(st(t.F,0)),t.F=[]):0!=e&&t.F.push(e)},qa:function(t){t.F&&0<t.F.length&&(y(st(t.F,0)),t.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},pt={Oa:function(t,e){null===e||10===e?(w(st(t.F,0)),t.F=[]):0!=e&&t.F.push(e)},qa:function(t){t.F&&0<t.F.length&&(w(st(t.F,0)),t.F=[])}};function mt(t,e){var i=t.j?t.j.length:0;i>=e||(e=Math.max(e,i*(1048576>i?2:1.125)>>>0),0!=i&&(e=Math.max(e,256)),i=t.j,t.j=new Uint8Array(e),0<t.v&&t.j.set(i.subarray(0,t.v),0))}var ft,gt,vt,bt,yt={O:null,U:()=>yt.createNode(null,"/",16895,0),createNode(t,e,i,n){if(24576==(61440&i)||4096==(61440&i))throw new At(63);return yt.O||(yt.O={dir:{node:{Y:yt.l.Y,P:yt.l.P,ka:yt.l.ka,va:yt.l.va,ub:yt.l.ub,Ab:yt.l.Ab,vb:yt.l.vb,sb:yt.l.sb,Ea:yt.l.Ea},stream:{ba:yt.m.ba}},file:{node:{Y:yt.l.Y,P:yt.l.P},stream:{ba:yt.m.ba,read:yt.m.read,write:yt.m.write,pa:yt.m.pa,lb:yt.m.lb,nb:yt.m.nb}},link:{node:{Y:yt.l.Y,P:yt.l.P,ma:yt.l.ma},stream:{}},$a:{node:{Y:yt.l.Y,P:yt.l.P},stream:Ot}}),16384==(61440&(i=Dt(t,e,i,n)).mode)?(i.l=yt.O.dir.node,i.m=yt.O.dir.stream,i.j={}):32768==(61440&i.mode)?(i.l=yt.O.file.node,i.m=yt.O.file.stream,i.v=0,i.j=null):40960==(61440&i.mode)?(i.l=yt.O.link.node,i.m=yt.O.link.stream):8192==(61440&i.mode)&&(i.l=yt.O.$a.node,i.m=yt.O.$a.stream),i.timestamp=Date.now(),t&&(t.j[e]=i,t.timestamp=i.timestamp),i},Kc:t=>t.j?t.j.subarray?t.j.subarray(0,t.v):new Uint8Array(t.j):new Uint8Array(0),l:{Y(t){var e={};return e.Jc=8192==(61440&t.mode)?t.id:1,e.Mc=t.id,e.mode=t.mode,e.Oc=1,e.uid=0,e.Lc=0,e.za=t.za,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.v:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.Bc=new Date(t.timestamp),e.Nc=new Date(t.timestamp),e.Ic=new Date(t.timestamp),e.Jb=4096,e.Cc=Math.ceil(e.size/e.Jb),e},P(t,e){if(void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&(e=e.size,t.v!=e))if(0==e)t.j=null,t.v=0;else{var i=t.j;t.j=new Uint8Array(e),i&&t.j.set(i.subarray(0,Math.min(e,t.v))),t.v=e}},ka(){throw Ct[44]},va:(t,e,i,n)=>yt.createNode(t,e,i,n),ub(t,e,i){if(16384==(61440&t.mode)){try{var n=kt(e,i)}catch(t){}if(n)for(var s in n.j)throw new At(55)}delete t.parent.j[t.name],t.parent.timestamp=Date.now(),t.name=i,e.j[i]=t,e.timestamp=t.parent.timestamp,t.parent=e},Ab(t,e){delete t.j[e],t.timestamp=Date.now()},vb(t,e){var i,n=kt(t,e);for(i in n.j)throw new At(55);delete t.j[e],t.timestamp=Date.now()},sb(t){var e,i=[".",".."];for(e in t.j)t.j.hasOwnProperty(e)&&i.push(e);return i},Ea:(t,e,i)=>((t=yt.createNode(t,e,41471,0)).link=i,t),ma(t){if(40960!=(61440&t.mode))throw new At(28);return t.link}},m:{read(t,e,i,n,s){var a=t.node.j;if(s>=t.node.v)return 0;if(8<(t=Math.min(t.node.v-s,n))&&a.subarray)e.set(a.subarray(s,s+t),i);else for(n=0;n<t;n++)e[i+n]=a[s+n];return t},write(t,e,i,n,s,a){if(e.buffer===T.buffer&&(a=!1),!n)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.j||t.j.subarray)){if(a)return t.j=e.subarray(i,i+n),t.v=n;if(0===t.v&&0===s)return t.j=e.slice(i,i+n),t.v=n;if(s+n<=t.v)return t.j.set(e.subarray(i,i+n),s),n}if(mt(t,s+n),t.j.subarray&&e.subarray)t.j.set(e.subarray(i,i+n),s);else for(a=0;a<n;a++)t.j[s+a]=e[i+a];return t.v=Math.max(t.v,s+n),n},ba(t,e,i){if(1===i?e+=t.position:2===i&&32768==(61440&t.node.mode)&&(e+=t.node.v),0>e)throw new At(28);return e},pa(t,e,i){mt(t.node,e+i),t.node.v=Math.max(t.node.v,e+i)},lb(t,e,i,n,s){if(32768!=(61440&t.node.mode))throw new At(43);if(t=t.node.j,2&s||t.buffer!==T.buffer){if((0<i||i+e<t.length)&&(t=t.subarray?t.subarray(i,i+e):Array.prototype.slice.call(t,i,i+e)),i=!0,U(),!(e=void 0))throw new At(48);T.set(t,e)}else i=!1,e=t.byteOffset;return{o:e,M:i}},nb:(t,e,i,n)=>(yt.m.write(t,e,0,n,i,!1),0)}},wt=null,St={},Et=[],Tt=1,xt=null,_t=!0,At=null,Ct={},It=(t,e={})=>{if(!(t=it(t)))return{path:"",node:null};if(8<(e=Object.assign({gb:!0,Qa:0},e)).Qa)throw new At(32);t=t.split("/").filter((t=>!!t));for(var i=wt,n="/",s=0;s<t.length;s++){var a=s===t.length-1;if(a&&e.parent)break;if(i=kt(i,t[s]),n=Q(n+"/"+t[s]),i.wa&&(!a||a&&e.gb)&&(i=i.wa.root),!a||e.fb)for(a=0;40960==(61440&i.mode);)if(i=Ht(n),n=it(Z(n),i),i=It(n,{Qa:e.Qa+1}).node,40<a++)throw new At(32)}return{path:n,node:i}},Pt=t=>{for(var e;;){if(t===t.parent)return t=t.U.mb,e?"/"!==t[t.length-1]?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}},Lt=(t,e)=>{for(var i=0,n=0;n<e.length;n++)i=(i<<5)-i+e.charCodeAt(n)|0;return(t+i>>>0)%xt.length},kt=(t,e)=>{var i;if(i=(i=Bt(t,"x"))?i:t.l.ka?0:2)throw new At(i,t);for(i=xt[Lt(t.id,e)];i;i=i.lc){var n=i.name;if(i.parent.id===t.id&&n===e)return i}return t.l.ka(t,e)},Dt=(t,e,i,n)=>(t=new Ti(t,e,i,n),e=Lt(t.parent.id,t.name),t.lc=xt[e],xt[e]=t),Mt=t=>{var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},Bt=(t,e)=>_t?0:!e.includes("r")||292&t.mode?e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0:2,zt=(t,e)=>{try{return kt(t,e),20}catch(t){}return Bt(t,"wx")},Nt=t=>{if(!(t=Et[t]))throw new At(8);return t},Rt=(t,e=-1)=>(vt||((vt=function(){this.h={}}).prototype={},Object.defineProperties(vt.prototype,{object:{get(){return this.node},set(t){this.node=t}},flags:{get(){return this.h.flags},set(t){this.h.flags=t}},position:{get(){return this.h.position},set(t){this.h.position=t}}})),t=Object.assign(new vt,t),-1==e&&(e=(()=>{for(var t=0;4096>=t;t++)if(!Et[t])return t;throw new At(33)})()),t.X=e,Et[e]=t),Ot={open:t=>{t.m=St[t.node.za].m,t.m.open&&t.m.open(t)},ba:()=>{throw new At(70)}},Ft=(t,e)=>{St[t]={m:e}},jt=(t,e)=>{var i="/"===e,n=!e;if(i&&wt)throw new At(10);if(!i&&!n){var s=It(e,{gb:!1});if(e=s.path,(s=s.node).wa)throw new At(10);if(16384!=(61440&s.mode))throw new At(54)}e={type:t,Qc:{},mb:e,kc:[]},(t=t.U(e)).U=e,e.root=t,i?wt=t:s&&(s.wa=e,s.U&&s.U.kc.push(e))},Vt=(t,e,i)=>{var n=It(t,{parent:!0}).node;if(!(t=tt(t))||"."===t||".."===t)throw new At(28);var s=zt(n,t);if(s)throw new At(s);if(!n.l.va)throw new At(63);return n.l.va(n,t,e,i)},Ut=(t,e,i)=>{void 0===i&&(i=e,e=438),Vt(t,8192|e,i)},Wt=(t,e)=>{if(!it(t))throw new At(44);var i=It(e,{parent:!0}).node;if(!i)throw new At(44);e=tt(e);var n=zt(i,e);if(n)throw new At(n);if(!i.l.Ea)throw new At(63);i.l.Ea(i,e,t)},Ht=t=>{if(!(t=It(t).node))throw new At(44);if(!t.l.ma)throw new At(28);return it(Pt(t.parent),t.l.ma(t))},$t=(t,e,i)=>{if(""===t)throw new At(44);if("string"==typeof e){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===n)throw Error(`Unknown file open mode: ${e}`);e=n}if(i=64&e?4095&(void 0===i?438:i)|32768:0,"object"==typeof t)var a=t;else{t=Q(t);try{a=It(t,{fb:!(131072&e)}).node}catch(t){}}if(n=!1,64&e)if(a){if(128&e)throw new At(20)}else a=Vt(t,i,0),n=!0;if(!a)throw new At(44);if(8192==(61440&a.mode)&&(e&=-513),65536&e&&16384!=(61440&a.mode))throw new At(54);if(!n&&(i=a?40960==(61440&a.mode)?32:16384==(61440&a.mode)&&("r"!==Mt(e)||512&e)?31:Bt(a,Mt(e)):44))throw new At(i);if(512&e&&!n){if(!(i="string"==typeof(i=a)?It(i,{fb:!0}).node:i).l.P)throw new At(63);if(16384==(61440&i.mode))throw new At(31);if(32768!=(61440&i.mode))throw new At(28);if(n=Bt(i,"w"))throw new At(n);i.l.P(i,{size:0,timestamp:Date.now()})}return e&=-131713,(a=Rt({node:a,path:Pt(a),flags:e,seekable:!0,position:0,m:a.m,zc:[],error:!1})).m.open&&a.m.open(a),!s.logReadFiles||1&e||(bt||(bt={}),t in bt||(bt[t]=1)),a},Gt=(t,e,i)=>{if(null===t.X)throw new At(8);if(!t.seekable||!t.m.ba)throw new At(70);if(0!=i&&1!=i&&2!=i)throw new At(28);t.position=t.m.ba(t,e,i),t.zc=[]},Xt=()=>{At||((At=function(t,e){this.name="ErrnoError",this.node=e,this.pc=function(t){this.aa=t},this.pc(t),this.message="FS error"}).prototype=Error(),At.prototype.constructor=At,[44].forEach((t=>{Ct[t]=new At(t),Ct[t].stack="<generic error, no stack>"})))},Yt=(t,e,i)=>{t=Q("/dev/"+t);var n=function(t,e){var i=0;return t&&(i|=365),e&&(i|=146),i}(!!e,!!i);gt||(gt=64);var s=gt++<<8;Ft(s,{open:t=>{t.seekable=!1},close:()=>{i&&i.buffer&&i.buffer.length&&i(10)},read:(t,i,n,s)=>{for(var a=0,r=0;r<s;r++){try{var o=e()}catch(t){throw new At(29)}if(void 0===o&&0===a)throw new At(6);if(null==o)break;a++,i[n+r]=o}return a&&(t.node.timestamp=Date.now()),a},write:(t,e,n,s)=>{for(var a=0;a<s;a++)try{i(e[n+a])}catch(t){throw new At(29)}return s&&(t.node.timestamp=Date.now()),a}}),Ut(t,n,s)},qt={},Kt=void 0;function Jt(){return C[(Kt+=4)-4>>2]}function Qt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t}function Zt(t,e){return t=Qt(t),{[t]:function(){return e.apply(this,arguments)}}[t]}function te(){this.M=[void 0],this.hb=[]}var ee=new te,ie=void 0;function ne(t){throw new ie(t)}var se=t=>(t||ne("Cannot use deleted val. handle = "+t),ee.get(t).value),ae=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ee.pa({tb:1,value:t})}};function re(t){var e=Error,i=Zt(t,(function(e){this.name=t,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},i}var oe=void 0,le=void 0;function ce(t){for(var e="";x[t];)e+=le[x[t++]];return e}var he=[];function ue(){for(;he.length;){var t=he.pop();t.g.fa=!1,t.delete()}}var de=void 0,pe={};function me(t,e){for(void 0===e&&ne("ptr should not be undefined");t.A;)e=t.na(e),t=t.A;return e}var fe={};function ge(t){var e=ce(t=Bi(t));return Ci(t),e}function ve(t,e){var i=fe[t];return void 0===i&&ne(e+" has unknown type "+ge(t)),i}function be(){}var ye=!1;function we(t){--t.count.value,0===t.count.value&&(t.G?t.L.W(t.G):t.u.i.W(t.o))}function Se(t,e,i){return e===i?t:void 0===i.A||null===(t=Se(t,e,i.A))?null:i.Pb(t)}var Ee={},Te=void 0;function xe(t){throw new Te(t)}function _e(t,e){return e.u&&e.o||xe("makeClassHandle requires ptr and ptrType"),!!e.L!=!!e.G&&xe("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Ae(Object.create(t,{g:{value:e}}))}function Ae(t){return"undefined"==typeof FinalizationRegistry?(Ae=t=>t,t):(ye=new FinalizationRegistry((t=>{we(t.g)})),be=t=>{ye.unregister(t)},(Ae=t=>{var e=t.g;return e.G&&ye.register(t,{g:e},t),t})(t))}var Ce={};function Ie(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function Pe(t){return this.fromWireType(C[t>>2])}var Le={},ke={};function De(t,e,i){function n(e){(e=i(e)).length!==t.length&&xe("Mismatched type converter count");for(var n=0;n<t.length;++n)Be(t[n],e[n])}t.forEach((function(t){ke[t]=e}));var s=Array(e.length),a=[],r=0;e.forEach(((t,e)=>{fe.hasOwnProperty(t)?s[e]=fe[t]:(a.push(t),Le.hasOwnProperty(t)||(Le[t]=[]),Le[t].push((()=>{s[e]=fe[t],++r===a.length&&n(s)})))})),0===a.length&&n(s)}function Me(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${t}`)}}function Be(t,e,i={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(t,e,i={}){var n=e.name;if(t||ne(`type "${n}" must have a positive integer typeid pointer`),fe.hasOwnProperty(t)){if(i.$b)return;ne(`Cannot register type '${n}' twice`)}fe[t]=e,delete ke[t],Le.hasOwnProperty(t)&&(e=Le[t],delete Le[t],e.forEach((t=>t())))}(t,e,i)}function ze(t){ne(t.g.u.i.name+" instance already deleted")}function Ne(){}function Re(t,e,i){if(void 0===t[e].B){var n=t[e];t[e]=function(){return t[e].B.hasOwnProperty(arguments.length)||ne(`Function '${i}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[e].B})!`),t[e].B[arguments.length].apply(this,arguments)},t[e].B=[],t[e].B[n.ea]=n}}function Oe(t,e,i){s.hasOwnProperty(t)?((void 0===i||void 0!==s[t].B&&void 0!==s[t].B[i])&&ne(`Cannot register public name '${t}' twice`),Re(s,t,t),s.hasOwnProperty(i)&&ne(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),s[t].B[i]=e):(s[t]=e,void 0!==i&&(s[t].Pc=i))}function Fe(t,e,i,n,s,a,r,o){this.name=t,this.constructor=e,this.N=i,this.W=n,this.A=s,this.Ub=a,this.na=r,this.Pb=o,this.qb=[]}function je(t,e,i){for(;e!==i;)e.na||ne(`Expected null or instance of ${i.name}, got an instance of ${e.name}`),t=e.na(t),e=e.A;return t}function Ve(t,e){return null===e?(this.Na&&ne(`null is not a valid ${this.name}`),0):(e.g||ne(`Cannot pass "${ii(e)}" as a ${this.name}`),e.g.o||ne(`Cannot pass deleted object as a pointer of type ${this.name}`),je(e.g.o,e.g.u.i,this.i))}function Ue(t,e){if(null===e){if(this.Na&&ne(`null is not a valid ${this.name}`),this.ua){var i=this.Pa();return null!==t&&t.push(this.W,i),i}return 0}if(e.g||ne(`Cannot pass "${ii(e)}" as a ${this.name}`),e.g.o||ne(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&e.g.u.ta&&ne(`Cannot convert argument of type ${e.g.L?e.g.L.name:e.g.u.name} to parameter type ${this.name}`),i=je(e.g.o,e.g.u.i,this.i),this.ua)switch(void 0===e.g.G&&ne("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:e.g.L===this?i=e.g.G:ne(`Cannot convert argument of type ${e.g.L?e.g.L.name:e.g.u.name} to parameter type ${this.name}`);break;case 1:i=e.g.G;break;case 2:if(e.g.L===this)i=e.g.G;else{var n=e.clone();i=this.oc(i,ae((function(){n.delete()}))),null!==t&&t.push(this.W,i)}break;default:ne("Unsupporting sharing policy")}return i}function We(t,e){return null===e?(this.Na&&ne(`null is not a valid ${this.name}`),0):(e.g||ne(`Cannot pass "${ii(e)}" as a ${this.name}`),e.g.o||ne(`Cannot pass deleted object as a pointer of type ${this.name}`),e.g.u.ta&&ne(`Cannot convert argument of type ${e.g.u.name} to parameter type ${this.name}`),je(e.g.o,e.g.u.i,this.i))}function He(t,e,i,n){this.name=t,this.i=e,this.Na=i,this.ta=n,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==e.A?this.toWireType=Ue:(this.toWireType=n?Ve:We,this.K=null)}function $e(t,e,i){s.hasOwnProperty(t)||xe("Replacing nonexistant public symbol"),void 0!==s[t].B&&void 0!==i?s[t].B[i]=e:(s[t]=e,s[t].ea=i)}var Ge=[],Xe=t=>{var e=Ge[t];return e||(t>=Ge.length&&(Ge.length=t+1),Ge[t]=e=M.get(t)),e};function Ye(t,e){var i=(t=ce(t)).includes("j")?((t,e)=>{var i=[];return function(){if(i.length=0,Object.assign(i,arguments),t.includes("j")){var n=s["dynCall_"+t];n=i&&i.length?n.apply(null,[e].concat(i)):n.call(null,e)}else n=Xe(e).apply(null,i);return n}})(t,e):Xe(e);return"function"!=typeof i&&ne(`unknown function pointer with signature ${t}: ${e}`),i}var qe=void 0;function Ke(t,e){var i=[],n={};throw e.forEach((function t(e){n[e]||fe[e]||(ke[e]?ke[e].forEach(t):(i.push(e),n[e]=!0))})),new qe(`${t}: `+i.map(ge).join([", "]))}function Je(t,e,i,n,s){var a=e.length;2>a&&ne("argTypes array size mismatch! Must at least get return value and 'this' types!");var r=null!==e[1]&&null!==i,o=!1;for(i=1;i<e.length;++i)if(null!==e[i]&&void 0===e[i].K){o=!0;break}var l="void"!==e[0].name,c=a-2,h=Array(c),u=[],d=[];return function(){if(arguments.length!==c&&ne(`function ${t} called with ${arguments.length} arguments, expected ${c} args!`),d.length=0,u.length=r?2:1,u[0]=s,r){var i=e[1].toWireType(d,this);u[1]=i}for(var a=0;a<c;++a)h[a]=e[a+2].toWireType(d,arguments[a]),u.push(h[a]);if(a=n.apply(null,u),o)Ie(d);else for(var p=r?1:2;p<e.length;p++){var m=1===p?i:h[p-2];null!==e[p].K&&e[p].K(m)}return i=l?e[0].fromWireType(a):void 0}}function Qe(t,e){for(var i=[],n=0;n<t;n++)i.push(I[e+4*n>>2]);return i}function Ze(t,e,i){return t instanceof Object||ne(`${i} with invalid "this": ${t}`),t instanceof e.i.constructor||ne(`${i} incompatible with "this" of type ${t.constructor.name}`),t.g.o||ne(`cannot call emscripten binding method ${i} on deleted object`),je(t.g.o,t.g.u.i,e.i)}function ti(t){t>=ee.h&&0==--ee.get(t).tb&&ee.Zb(t)}function ei(t,e,i){switch(e){case 0:return function(t){return this.fromWireType((i?T:x)[t])};case 1:return function(t){return this.fromWireType((i?_:A)[t>>1])};case 2:return function(t){return this.fromWireType((i?C:I)[t>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function ii(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function ni(t,e){switch(e){case 2:return function(t){return this.fromWireType(P[t>>2])};case 3:return function(t){return this.fromWireType(L[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function si(t,e,i){switch(e){case 0:return i?function(t){return T[t]}:function(t){return x[t]};case 1:return i?function(t){return _[t>>1]}:function(t){return A[t>>1]};case 2:return i?function(t){return C[t>>2]}:function(t){return I[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var ai="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,ri=(t,e)=>{for(var i=t>>1,n=i+e/2;!(i>=n)&&A[i];)++i;if(32<(i<<=1)-t&&ai)return ai.decode(x.subarray(t,i));for(i="",n=0;!(n>=e/2);++n){var s=_[t+2*n>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},oi=(t,e,i)=>{if(void 0===i&&(i=2147483647),2>i)return 0;var n=e;i=(i-=2)<2*t.length?i/2:t.length;for(var s=0;s<i;++s)_[e>>1]=t.charCodeAt(s),e+=2;return _[e>>1]=0,e-n},li=t=>2*t.length,ci=(t,e)=>{for(var i=0,n="";!(i>=e/4);){var s=C[t+4*i>>2];if(0==s)break;++i,65536<=s?(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s)):n+=String.fromCharCode(s)}return n},hi=(t,e,i)=>{if(void 0===i&&(i=2147483647),4>i)return 0;var n=e;i=n+i-4;for(var s=0;s<t.length;++s){var a=t.charCodeAt(s);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),C[e>>2]=a,(e+=4)+4>i)break}return C[e>>2]=0,e-n},ui=t=>{for(var e=0,i=0;i<t.length;++i){var n=t.charCodeAt(i);55296<=n&&57343>=n&&++i,e+=4}return e},di={};function pi(t){var e=di[t];return void 0===e?ce(t):e}var mi,fi=[],gi=[],vi=[],bi={},yi=()=>{if(!mi){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in bi)void 0===bi[t]?delete e[t]:e[t]=bi[t];var i=[];for(t in e)i.push(`${t}=${e[t]}`);mi=i}return mi},wi=t=>0==t%4&&(0!=t%100||0==t%400),Si=[31,29,31,30,31,30,31,31,30,31,30,31],Ei=[31,28,31,30,31,30,31,31,30,31,30,31];function Ti(t,e,i,n){t||(t=this),this.parent=t,this.U=t.U,this.wa=null,this.id=Tt++,this.name=e,this.mode=i,this.l={},this.m={},this.za=n}Object.defineProperties(Ti.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),Xt(),xt=Array(4096),jt(yt,"/"),Vt("/tmp",16895,0),Vt("/home",16895,0),Vt("/home/web_user",16895,0),(()=>{Vt("/dev",16895,0),Ft(259,{read:()=>0,write:(t,e,i,n)=>n}),Ut("/dev/null",259),ht(1280,dt),ht(1536,pt),Ut("/dev/tty",1280),Ut("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,i=()=>(0===e&&(e=et(t).byteLength),t[--e]);Yt("random",i),Yt("urandom",i),Vt("/dev/shm",16895,0),Vt("/dev/shm/tmp",16895,0)})(),(()=>{Vt("/proc",16895,0);var t=Vt("/proc/self",16895,0);Vt("/proc/self/fd",16895,0),jt({U:()=>{var e=Dt(t,"fd",16895,73);return e.l={ka:(t,e)=>{var i=Nt(+e);return(t={parent:null,U:{mb:"fake"},l:{ma:()=>i.path}}).parent=t}},e}},"/proc/self/fd")})(),Object.assign(te.prototype,{get(t){return this.M[t]},has(t){return void 0!==this.M[t]},pa(t){var e=this.hb.pop()||this.M.length;return this.M[e]=t,e},Zb(t){this.M[t]=void 0,this.hb.push(t)}}),ie=s.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},ee.M.push({value:void 0},{value:null},{value:!0},{value:!1}),ee.h=ee.M.length,s.count_emval_handles=function(){for(var t=0,e=ee.h;e<ee.M.length;++e)void 0!==ee.M[e]&&++t;return t},oe=s.PureVirtualError=re("PureVirtualError");for(var xi=Array(256),_i=0;256>_i;++_i)xi[_i]=String.fromCharCode(_i);le=xi,s.getInheritedInstanceCount=function(){return Object.keys(pe).length},s.getLiveInheritedInstances=function(){var t,e=[];for(t in pe)pe.hasOwnProperty(t)&&e.push(pe[t]);return e},s.flushPendingDeletes=ue,s.setDelayFunction=function(t){de=t,he.length&&de&&de(ue)},Te=s.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Ne.prototype.isAliasOf=function(t){if(!(this instanceof Ne&&t instanceof Ne))return!1;var e=this.g.u.i,i=this.g.o,n=t.g.u.i;for(t=t.g.o;e.A;)i=e.na(i),e=e.A;for(;n.A;)t=n.na(t),n=n.A;return e===n&&i===t},Ne.prototype.clone=function(){if(this.g.o||ze(this),this.g.ia)return this.g.count.value+=1,this;var t=Ae,e=Object,i=e.create,n=Object.getPrototypeOf(this),s=this.g;return(t=t(i.call(e,n,{g:{value:{count:s.count,fa:s.fa,ia:s.ia,o:s.o,u:s.u,G:s.G,L:s.L}}}))).g.count.value+=1,t.g.fa=!1,t},Ne.prototype.delete=function(){this.g.o||ze(this),this.g.fa&&!this.g.ia&&ne("Object already scheduled for deletion"),be(this),we(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ne.prototype.isDeleted=function(){return!this.g.o},Ne.prototype.deleteLater=function(){return this.g.o||ze(this),this.g.fa&&!this.g.ia&&ne("Object already scheduled for deletion"),he.push(this),1===he.length&&de&&de(ue),this.g.fa=!0,this},He.prototype.Vb=function(t){return this.rb&&(t=this.rb(t)),t},He.prototype.ab=function(t){this.W&&this.W(t)},He.prototype.argPackAdvance=8,He.prototype.readValueFromPointer=Pe,He.prototype.deleteObject=function(t){null!==t&&t.delete()},He.prototype.fromWireType=function(t){function e(){return this.ua?_e(this.i.N,{u:this.nc,o:i,L:this,G:t}):_e(this.i.N,{u:this,o:t})}var i=this.Vb(t);if(!i)return this.ab(t),null;var n=function(t,e){return e=me(t,e),pe[e]}(this.i,i);if(void 0!==n)return 0===n.g.count.value?(n.g.o=i,n.g.G=t,n.clone()):(n=n.clone(),this.ab(t),n);if(n=this.i.Ub(i),!(n=Ee[n]))return e.call(this);n=this.ta?n.Kb:n.pointerType;var s=Se(i,this.i,n.i);return null===s?e.call(this):this.ua?_e(n.i.N,{u:n,o:s,L:this,G:t}):_e(n.i.N,{u:n,o:s})},qe=s.UnboundTypeError=re("UnboundTypeError");var Ai={__syscall_fcntl64:function(t,e,i){Kt=i;try{var n=Nt(t);switch(e){case 0:var s=Jt();return 0>s?-28:Rt(n,s).X;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:return s=Jt(),n.flags|=s,0;case 5:return s=Jt(),_[s+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return C[Mi()>>2]=28,-1}}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return-t.aa}},__syscall_ioctl:function(t,e,i){Kt=i;try{var n=Nt(t);switch(e){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return n.s?0:-59;case 21505:if(!n.s)return-59;if(n.s.V.bc){e=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var s=Jt();C[s>>2]=25856,C[s+4>>2]=5,C[s+8>>2]=191,C[s+12>>2]=35387;for(var a=0;32>a;a++)T[s+a+17|0]=e[a]||0}return 0;case 21506:case 21507:case 21508:if(!n.s)return-59;if(n.s.V.cc)for(s=Jt(),e=[],a=0;32>a;a++)e.push(T[s+a+17|0]);return 0;case 21519:return n.s?(s=Jt(),C[s>>2]=0):-59;case 21520:return n.s?-28:-59;case 21531:if(s=Jt(),!n.m.ac)throw new At(59);return n.m.ac(n,e,s);case 21523:return n.s?(n.s.V.dc&&(a=[24,80],s=Jt(),_[s>>1]=a[0],_[s+2>>1]=a[1]),0):-59;default:return-28}}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return-t.aa}},__syscall_openat:function(t,e,i,n){Kt=n;try{var s=e=e?st(x,e):"";if("/"===s.charAt(0))e=s;else{var a=-100===t?"/":Nt(t).path;if(0==s.length)throw new At(44);e=Q(a+"/"+s)}var r=n?Jt():0;return $t(e,i,r).X}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return-t.aa}},_embind_create_inheriting_constructor:function(t,e,i){t=ce(t),e=ve(e,"wrapper"),i=se(i);var n=[].slice,s=e.i,a=s.N,r=s.A.N,o=s.A.constructor;for(var l in t=Zt(t,(function(){s.A.qb.forEach(function(t){if(this[t]===r[t])throw new oe(`Pure virtual function ${t} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:a}),this.__construct.apply(this,n.call(arguments))})),a.__construct=function(){this===a&&ne("Pass correct 'this' to __construct");var t=o.implement.apply(void 0,[this].concat(n.call(arguments)));be(t);var e=t.g;t.notifyOnDestruction(),e.ia=!0,Object.defineProperties(this,{g:{value:e}}),Ae(this),t=e.o,t=me(s,t),pe.hasOwnProperty(t)?ne(`Tried to register registered instance: ${t}`):pe[t]=this},a.__destruct=function(){this===a&&ne("Pass correct 'this' to __destruct"),be(this);var t=this.g.o;t=me(s,t),pe.hasOwnProperty(t)?delete pe[t]:ne(`Tried to unregister unregistered instance: ${t}`)},t.prototype=Object.create(a),i)t.prototype[l]=i[l];return ae(t)},_embind_finalize_value_object:function(t){var e=Ce[t];delete Ce[t];var i=e.Pa,n=e.W,s=e.eb;De([t],s.map((t=>t.Yb)).concat(s.map((t=>t.rc))),(t=>{var a={};return s.forEach(((e,i)=>{var n=t[i],r=e.Wb,o=e.Xb,l=t[i+s.length],c=e.qc,h=e.sc;a[e.Sb]={read:t=>n.fromWireType(r(o,t)),write:(t,e)=>{var i=[];c(h,t,l.toWireType(i,e)),Ie(i)}}})),[{name:e.name,fromWireType:function(t){var e,i={};for(e in a)i[e]=a[e].read(t);return n(t),i},toWireType:function(t,e){for(var s in a)if(!(s in e))throw new TypeError(`Missing field: "${s}"`);var r=i();for(s in a)a[s].write(r,e[s]);return null!==t&&t.push(n,r),r},argPackAdvance:8,readValueFromPointer:Pe,K:n}]}))},_embind_register_bigint:function(){},_embind_register_bool:function(t,e,i,n,s){var a=Me(i);Be(t,{name:e=ce(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:s},argPackAdvance:8,readValueFromPointer:function(t){if(1===i)var n=T;else if(2===i)n=_;else{if(4!==i)throw new TypeError("Unknown boolean type size: "+e);n=C}return this.fromWireType(n[t>>a])},K:null})},_embind_register_class:function(t,e,i,n,s,a,r,o,l,c,h,u,d){h=ce(h),a=Ye(s,a),o&&(o=Ye(r,o)),c&&(c=Ye(l,c)),d=Ye(u,d);var p=Qt(h);Oe(p,(function(){Ke(`Cannot construct ${h} due to unbound types`,[n])})),De([t,e,i],n?[n]:[],(function(e){if(e=e[0],n)var i=e.i,s=i.N;else s=Ne.prototype;e=Zt(p,(function(){if(Object.getPrototypeOf(this)!==r)throw new ie("Use 'new' to construct "+h);if(void 0===l.$)throw new ie(h+" has no accessible constructor");var t=l.$[arguments.length];if(void 0===t)throw new ie(`Tried to invoke ctor of ${h} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(l.$).toString()}) parameters instead!`);return t.apply(this,arguments)}));var r=Object.create(s,{constructor:{value:e}});e.prototype=r;var l=new Fe(h,e,r,d,i,a,o,c);l.A&&(void 0===l.A.oa&&(l.A.oa=[]),l.A.oa.push(l)),i=new He(h,l,!0,!1),s=new He(h+"*",l,!1,!1);var u=new He(h+" const*",l,!1,!0);return Ee[t]={pointerType:s,Kb:u},$e(p,e),[i,s,u]}))},_embind_register_class_class_function:function(t,e,i,n,s,a,r){var o=Qe(i,n);e=ce(e),a=Ye(s,a),De([],[t],(function(t){function n(){Ke(`Cannot call ${s} due to unbound types`,o)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var l=t.i.constructor;return void 0===l[e]?(n.ea=i-1,l[e]=n):(Re(l,e,s),l[e].B[i-1]=n),De([],o,(function(n){if(n=Je(s,[n[0],null].concat(n.slice(1)),null,a,r),void 0===l[e].B?(n.ea=i-1,l[e]=n):l[e].B[i-1]=n,t.i.oa)for(const i of t.i.oa)i.constructor.hasOwnProperty(e)||(i.constructor[e]=n);return[]})),[]}))},_embind_register_class_class_property:function(t,e,i,n,s,a,r,o){e=ce(e),a=Ye(s,a),De([],[t],(function(t){var s=`${(t=t[0]).name}.${e}`,l={get(){Ke(`Cannot access ${s} due to unbound types`,[i])},enumerable:!0,configurable:!0};return l.set=o?()=>{Ke(`Cannot access ${s} due to unbound types`,[i])}:()=>{ne(`${s} is a read-only property`)},Object.defineProperty(t.i.constructor,e,l),De([],[i],(function(i){i=i[0];var s={get:()=>i.fromWireType(a(n)),enumerable:!0};return o&&(o=Ye(r,o),s.set=t=>{var e=[];o(n,i.toWireType(e,t)),Ie(e)}),Object.defineProperty(t.i.constructor,e,s),[]})),[]}))},_embind_register_class_constructor:function(t,e,i,n,s,a){var r=Qe(e,i);s=Ye(n,s),De([],[t],(function(t){var i=`constructor ${(t=t[0]).name}`;if(void 0===t.i.$&&(t.i.$=[]),void 0!==t.i.$[e-1])throw new ie(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.i.$[e-1]=()=>{Ke(`Cannot construct ${t.name} due to unbound types`,r)},De([],r,(function(n){return n.splice(1,0,null),t.i.$[e-1]=Je(i,n,null,s,a),[]})),[]}))},_embind_register_class_function:function(t,e,i,n,s,a,r,o){var l=Qe(i,n);e=ce(e),a=Ye(s,a),De([],[t],(function(t){function n(){Ke(`Cannot call ${s} due to unbound types`,l)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),o&&t.i.qb.push(e);var c=t.i.N,h=c[e];return void 0===h||void 0===h.B&&h.className!==t.name&&h.ea===i-2?(n.ea=i-2,n.className=t.name,c[e]=n):(Re(c,e,s),c[e].B[i-2]=n),De([],l,(function(n){return n=Je(s,n,t,a,r),void 0===c[e].B?(n.ea=i-2,c[e]=n):c[e].B[i-2]=n,[]})),[]}))},_embind_register_class_property:function(t,e,i,n,s,a,r,o,l,c){e=ce(e),s=Ye(n,s),De([],[t],(function(t){var n=`${(t=t[0]).name}.${e}`,h={get(){Ke(`Cannot access ${n} due to unbound types`,[i,r])},enumerable:!0,configurable:!0};return h.set=l?()=>{Ke(`Cannot access ${n} due to unbound types`,[i,r])}:()=>{ne(n+" is a read-only property")},Object.defineProperty(t.i.N,e,h),De([],l?[i,r]:[i],(function(i){var r=i[0],h={get(){var e=Ze(this,t,n+" getter");return r.fromWireType(s(a,e))},enumerable:!0};if(l){l=Ye(o,l);var u=i[1];h.set=function(e){var i=Ze(this,t,n+" setter"),s=[];l(c,i,u.toWireType(s,e)),Ie(s)}}return Object.defineProperty(t.i.N,e,h),[]})),[]}))},_embind_register_emval:function(t,e){Be(t,{name:e=ce(e),fromWireType:function(t){var e=se(t);return ti(t),e},toWireType:function(t,e){return ae(e)},argPackAdvance:8,readValueFromPointer:Pe,K:null})},_embind_register_enum:function(t,e,i,n){function s(){}i=Me(i),e=ce(e),s.values={},Be(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:ei(e,i,n),K:null}),Oe(e,s)},_embind_register_enum_value:function(t,e,i){var n=ve(t,"enum");e=ce(e),t=n.constructor,n=Object.create(n.constructor.prototype,{value:{value:i},constructor:{value:Zt(`${n.name}_${e}`,(function(){}))}}),t.values[i]=n,t[e]=n},_embind_register_float:function(t,e,i){i=Me(i),Be(t,{name:e=ce(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:ni(e,i),K:null})},_embind_register_function:function(t,e,i,n,s,a){var r=Qe(e,i);t=ce(t),s=Ye(n,s),Oe(t,(function(){Ke(`Cannot call ${t} due to unbound types`,r)}),e-1),De([],r,(function(i){return $e(t,Je(t,[i[0],null].concat(i.slice(1)),null,s,a),e-1),[]}))},_embind_register_integer:function(t,e,i,n,s){e=ce(e),-1===s&&(s=4294967295),s=Me(i);var a=t=>t;if(0===n){var r=32-8*i;a=t=>t<<r>>>r}i=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e},Be(t,{name:e,fromWireType:a,toWireType:i,argPackAdvance:8,readValueFromPointer:si(e,s,0!==n),K:null})},_embind_register_memory_view:function(t,e,i){function n(t){t>>=2;var e=I;return new s(e.buffer,e[t+1],e[t])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];Be(t,{name:i=ce(i),fromWireType:n,argPackAdvance:8,readValueFromPointer:n},{$b:!0})},_embind_register_std_string:function(t,e){var i="std::string"===(e=ce(e));Be(t,{name:e,fromWireType:function(t){var e=I[t>>2],n=t+4;if(i)for(var s=n,a=0;a<=e;++a){var r=n+a;if(a==e||0==x[r]){if(s=s?st(x,s,r-s):"",void 0===o)var o=s;else o+=String.fromCharCode(0),o+=s;s=r+1}}else{for(o=Array(e),a=0;a<e;++a)o[a]=String.fromCharCode(x[n+a]);o=o.join("")}return Ci(t),o},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n="string"==typeof e;n||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||ne("Cannot pass non-string to std::string");var s=i&&n?rt(e):e.length,a=Ii(4+s+1),r=a+4;if(I[a>>2]=s,i&&n)ot(e,x,r,s+1);else if(n)for(n=0;n<s;++n){var o=e.charCodeAt(n);255<o&&(Ci(r),ne("String has UTF-16 code units that do not fit in 8 bits")),x[r+n]=o}else for(n=0;n<s;++n)x[r+n]=e[n];return null!==t&&t.push(Ci,a),a},argPackAdvance:8,readValueFromPointer:Pe,K:function(t){Ci(t)}})},_embind_register_std_wstring:function(t,e,i){if(i=ce(i),2===e)var n=ri,s=oi,a=li,r=()=>A,o=1;else 4===e&&(n=ci,s=hi,a=ui,r=()=>I,o=2);Be(t,{name:i,fromWireType:function(t){for(var i,s=I[t>>2],a=r(),l=t+4,c=0;c<=s;++c){var h=t+4+c*e;c!=s&&0!=a[h>>o]||(l=n(l,h-l),void 0===i?i=l:(i+=String.fromCharCode(0),i+=l),l=h+e)}return Ci(t),i},toWireType:function(t,n){"string"!=typeof n&&ne(`Cannot pass non-string to C++ string type ${i}`);var r=a(n),l=Ii(4+r+e);return I[l>>2]=r>>o,s(n,l+4,r+e),null!==t&&t.push(Ci,l),l},argPackAdvance:8,readValueFromPointer:Pe,K:function(t){Ci(t)}})},_embind_register_value_object:function(t,e,i,n,s,a){Ce[t]={name:ce(e),Pa:Ye(i,n),W:Ye(s,a),eb:[]}},_embind_register_value_object_field:function(t,e,i,n,s,a,r,o,l,c){Ce[t].eb.push({Sb:ce(e),Yb:i,Wb:Ye(n,s),Xb:a,rc:r,qc:Ye(o,l),sc:c})},_embind_register_void:function(t,e){Be(t,{fc:!0,name:e=ce(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(t,e,i){t=se(t),e=ve(e,"emval::as");var n=[],s=ae(n);return I[i>>2]=s,e.toWireType(n,t)},_emval_call_method:function(t,e,i,n,s){t=fi[t],e=se(e),i=pi(i);var a=[];return I[n>>2]=ae(a),t(e,i,a,s)},_emval_call_void_method:function(t,e,i,n){(t=fi[t])(e=se(e),i=pi(i),null,n)},_emval_decref:ti,_emval_get_method_caller:function(t,e){var i=function(t,e){for(var i=Array(t),n=0;n<t;++n)i[n]=ve(I[e+4*n>>2],"parameter "+n);return i}(t,e),n=i[0];e=n.name+"_$"+i.slice(1).map((function(t){return t.name})).join("_")+"$";var s=gi[e];if(void 0!==s)return s;var a=Array(t-1);return s=function(t){var e=fi.length;return fi.push(t),e}(((e,s,r,o)=>{for(var l=0,c=0;c<t-1;++c)a[c]=i[c+1].readValueFromPointer(o+l),l+=i[c+1].argPackAdvance;for(e=e[s].apply(e,a),c=0;c<t-1;++c)i[c+1].Nb&&i[c+1].Nb(a[c]);if(!n.fc)return n.toWireType(r,e)})),gi[e]=s},_emval_get_module_property:function(t){return t=pi(t),ae(s[t])},_emval_get_property:function(t,e){return t=se(t),e=se(e),ae(t[e])},_emval_incref:function(t){4<t&&(ee.get(t).tb+=1)},_emval_new_cstring:function(t){return ae(pi(t))},_emval_new_object:function(){return ae({})},_emval_run_destructors:function(t){Ie(se(t)),ti(t)},_emval_set_property:function(t,e,i){t=se(t),e=se(e),i=se(i),t[e]=i},_emval_take_value:function(t,e){return t=(t=ve(t,"_emval_take_value")).readValueFromPointer(e),ae(t)},abort:()=>{U("")},emscripten_asm_const_int:(t,e,i)=>{var n;for(vi.length=0,i>>=2;n=x[e++];)i+=105!=n&i,vi.push(105==n?C[i]:L[i++>>1]),++i;return q[t].apply(null,vi)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(t,e,i)=>x.copyWithin(t,e,e+i),emscripten_resize_heap:t=>{var e=x.length;if(2147483648<(t>>>=0))return!1;for(var i=1;4>=i;i*=2){var n=e*(1+.2/i);n=Math.min(n,t+100663296);var s=Math;n=Math.max(t,n);t:{s=s.min.call(s,2147483648,n+(65536-n%65536)%65536)-S.buffer.byteLength+65535>>>16;try{S.grow(s),D();var a=1;break t}catch(t){}a=void 0}if(a)return!0}return!1},environ_get:(t,e)=>{var i=0;return yi().forEach((function(n,s){var a=e+i;for(s=I[t+4*s>>2]=a,a=0;a<n.length;++a)T[0|s++]=n.charCodeAt(a);T[0|s]=0,i+=n.length+1})),0},environ_sizes_get:(t,e)=>{var i=yi();I[t>>2]=i.length;var n=0;return i.forEach((function(t){n+=t.length+1})),I[e>>2]=n,0},fd_close:function(t){try{var e=Nt(t);if(null===e.X)throw new At(8);e.Ma&&(e.Ma=null);try{e.m.close&&e.m.close(e)}catch(t){throw t}finally{Et[e.X]=null}return e.X=null,0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},fd_read:function(t,e,i,n){try{t:{var s=Nt(t);t=e;for(var a,r=e=0;r<i;r++){var o=I[t>>2],l=I[t+4>>2];t+=8;var c=s,h=o,u=l,d=a,p=T;if(0>u||0>d)throw new At(28);if(null===c.X)throw new At(8);if(1==(2097155&c.flags))throw new At(8);if(16384==(61440&c.node.mode))throw new At(31);if(!c.m.read)throw new At(28);var m=void 0!==d;if(m){if(!c.seekable)throw new At(70)}else d=c.position;var f=c.m.read(c,p,h,u,d);m||(c.position+=f);var g=f;if(0>g){var v=-1;break t}if(e+=g,g<l)break;void 0!==a&&(a+=g)}v=e}return I[n>>2]=v,0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},fd_seek:function(t,e,i,n,s){e=i+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*i:NaN;try{if(isNaN(e))return 61;var a=Nt(t);return Gt(a,e,n),Y=[a.position>>>0,(X=a.position,1<=+Math.abs(X)?0<X?+Math.floor(X/4294967296)>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)],C[s>>2]=Y[0],C[s+4>>2]=Y[1],a.Ma&&0===e&&0===n&&(a.Ma=null),0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},fd_write:function(t,e,i,n){try{t:{var s=Nt(t);t=e;for(var a,r=e=0;r<i;r++){var o=I[t>>2],l=I[t+4>>2];t+=8;var c=s,h=o,u=l,d=a,p=T;if(0>u||0>d)throw new At(28);if(null===c.X)throw new At(8);if(!(2097155&c.flags))throw new At(8);if(16384==(61440&c.node.mode))throw new At(31);if(!c.m.write)throw new At(28);c.seekable&&1024&c.flags&&Gt(c,0,2);var m=void 0!==d;if(m){if(!c.seekable)throw new At(70)}else d=c.position;var f=c.m.write(c,p,h,u,d,void 0);m||(c.position+=f);var g=f;if(0>g){var v=-1;break t}e+=g,void 0!==a&&(a+=g)}v=e}return I[n>>2]=v,0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},strftime_l:(t,e,i,n)=>((t,e,i,n)=>{function s(t,e,i){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=i[0]+t;return t}function a(t,e){return s(t,e,"0")}function r(t,e){function i(t){return 0>t?-1:0<t?1:0}var n;return 0===(n=i(t.getFullYear()-e.getFullYear()))&&0===(n=i(t.getMonth()-e.getMonth()))&&(n=i(t.getDate()-e.getDate())),n}function o(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.ca;for(t=new Date(new Date(t.da+1900,0,1).getTime());0<e;){var i=t.getMonth(),n=(wi(t.getFullYear())?Si:Ei)[i];if(!(e>n-t.getDate())){t.setDate(t.getDate()+e);break}e-=n-t.getDate()+1,t.setDate(1),11>i?t.setMonth(i+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return i=new Date(t.getFullYear()+1,0,4),e=o(new Date(t.getFullYear(),0,4)),i=o(i),0>=r(e,t)?0>=r(i,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=C[n+40>>2];for(var h in n={wc:C[n>>2],vc:C[n+4>>2],Fa:C[n+8>>2],Sa:C[n+12>>2],Ga:C[n+16>>2],da:C[n+20>>2],R:C[n+24>>2],ca:C[n+28>>2],Rc:C[n+32>>2],uc:C[n+36>>2],xc:c&&c?st(x,c):""},i=i?st(x,i):"",c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(h,"g"),c[h]);var u="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(h in c={"%a":t=>u[t.R].substring(0,3),"%A":t=>u[t.R],"%b":t=>d[t.Ga].substring(0,3),"%B":t=>d[t.Ga],"%C":t=>a((t.da+1900)/100|0,2),"%d":t=>a(t.Sa,2),"%e":t=>s(t.Sa,2," "),"%g":t=>l(t).toString().substring(2),"%G":t=>l(t),"%H":t=>a(t.Fa,2),"%I":t=>(0==(t=t.Fa)?t=12:12<t&&(t-=12),a(t,2)),"%j":t=>{for(var e=0,i=0;i<=t.Ga-1;e+=(wi(t.da+1900)?Si:Ei)[i++]);return a(t.Sa+e,3)},"%m":t=>a(t.Ga+1,2),"%M":t=>a(t.vc,2),"%n":()=>"\n","%p":t=>0<=t.Fa&&12>t.Fa?"AM":"PM","%S":t=>a(t.wc,2),"%t":()=>"\t","%u":t=>t.R||7,"%U":t=>a(Math.floor((t.ca+7-t.R)/7),2),"%V":t=>{var e=Math.floor((t.ca+7-(t.R+6)%7)/7);if(2>=(t.R+371-t.ca-2)%7&&e++,e)53==e&&(4==(i=(t.R+371-t.ca)%7)||3==i&&wi(t.da)||(e=1));else{e=52;var i=(t.R+7-t.ca-1)%7;(4==i||5==i&&wi(t.da%400-1))&&e++}return a(e,2)},"%w":t=>t.R,"%W":t=>a(Math.floor((t.ca+7-(t.R+6)%7)/7),2),"%y":t=>(t.da+1900).toString().substring(2),"%Y":t=>t.da+1900,"%z":t=>{var e=0<=(t=t.uc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":t=>t.xc,"%%":()=>"%"},i=i.replace(/%%/g,"\0\0"),c)i.includes(h)&&(i=i.replace(new RegExp(h,"g"),c[h](n)));return(h=lt(i=i.replace(/\0\0/g,"%"),!1)).length>e?0:(T.set(h,t),h.length-1)})(t,e,i,n)};!function(){function t(t){if(E=t=t.exports,S=E.memory,D(),M=E.__indirect_function_table,z.unshift(E.__wasm_call_ctors),F--,s.monitorRunDependencies&&s.monitorRunDependencies(F),0==F&&(null!==j&&(clearInterval(j),j=null),V)){var e=V;V=null,e()}return t}var e={env:Ai,wasi_snapshot_preview1:Ai};if(F++,s.monitorRunDependencies&&s.monitorRunDependencies(F),s.instantiateWasm)try{return s.instantiateWasm(e,t)}catch(t){w("Module.instantiateWasm callback failed with error: "+t),i(t)}(function(t,e){var i=O;return b||"function"!=typeof WebAssembly.instantiateStreaming||W(i)||i.startsWith("file://")||"function"!=typeof fetch?G(i,t,e):fetch(i,{credentials:"same-origin"}).then((n=>WebAssembly.instantiateStreaming(n,t).then(e,(function(n){return w("wasm streaming compile failed: "+n),w("falling back to ArrayBuffer instantiation"),G(i,t,e)}))))})(e,(function(e){t(e.instance)})).catch(i)}();var Ci=t=>(Ci=E.free)(t),Ii=t=>(Ii=E.malloc)(t),Pi=s._ma_device__on_notification_unlocked=t=>(Pi=s._ma_device__on_notification_unlocked=E.ma_device__on_notification_unlocked)(t);s._ma_malloc_emscripten=(t,e)=>(s._ma_malloc_emscripten=E.ma_malloc_emscripten)(t,e),s._ma_free_emscripten=(t,e)=>(s._ma_free_emscripten=E.ma_free_emscripten)(t,e);var Li,ki=s._ma_device_process_pcm_frames_capture__webaudio=(t,e,i)=>(ki=s._ma_device_process_pcm_frames_capture__webaudio=E.ma_device_process_pcm_frames_capture__webaudio)(t,e,i),Di=s._ma_device_process_pcm_frames_playback__webaudio=(t,e,i)=>(Di=s._ma_device_process_pcm_frames_playback__webaudio=E.ma_device_process_pcm_frames_playback__webaudio)(t,e,i),Mi=()=>(Mi=E.__errno_location)(),Bi=t=>(Bi=E.__getTypeName)(t);function zi(){function t(){if(!Li&&(Li=!0,s.calledRun=!0,!k)){if(s.noFSInit||ft||(ft=!0,Xt(),s.stdin=s.stdin,s.stdout=s.stdout,s.stderr=s.stderr,s.stdin?Yt("stdin",s.stdin):Wt("/dev/tty","/dev/stdin"),s.stdout?Yt("stdout",null,s.stdout):Wt("/dev/tty","/dev/stdout"),s.stderr?Yt("stderr",null,s.stderr):Wt("/dev/tty1","/dev/stderr"),$t("/dev/stdin",0),$t("/dev/stdout",1),$t("/dev/stderr",1)),_t=!1,K(z),e(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var t=s.postRun.shift();N.unshift(t)}K(N)}}if(!(0<F)){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)R();K(B),0<F||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),t()}),1)):t())}}if(s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=E._embind_initialize_bindings)(),s.dynCall_iiji=(t,e,i,n,a)=>(s.dynCall_iiji=E.dynCall_iiji)(t,e,i,n,a),s.dynCall_jiji=(t,e,i,n,a)=>(s.dynCall_jiji=E.dynCall_jiji)(t,e,i,n,a),s.dynCall_iiiji=(t,e,i,n,a,r)=>(s.dynCall_iiiji=E.dynCall_iiiji)(t,e,i,n,a,r),s.dynCall_iij=(t,e,i,n)=>(s.dynCall_iij=E.dynCall_iij)(t,e,i,n),s.dynCall_jii=(t,e,i)=>(s.dynCall_jii=E.dynCall_jii)(t,e,i),s.dynCall_viijii=(t,e,i,n,a,r,o)=>(s.dynCall_viijii=E.dynCall_viijii)(t,e,i,n,a,r,o),s.dynCall_iiiiij=(t,e,i,n,a,r,o)=>(s.dynCall_iiiiij=E.dynCall_iiiiij)(t,e,i,n,a,r,o),s.dynCall_iiiiijj=(t,e,i,n,a,r,o,l,c)=>(s.dynCall_iiiiijj=E.dynCall_iiiiijj)(t,e,i,n,a,r,o,l,c),s.dynCall_iiiiiijj=(t,e,i,n,a,r,o,l,c,h)=>(s.dynCall_iiiiiijj=E.dynCall_iiiiiijj)(t,e,i,n,a,r,o,l,c,h),V=function t(){Li||zi(),Li||(V=t)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return zi(),t.ready});const a=s},t=>{t.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.25.1","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(t,e,i)=>{i.r(e),i.d(e,{Animation:()=>n.Animation});var n=i(4)},(t,e,i)=>{i.r(e),i.d(e,{Animation:()=>n});var n=function(){function t(t,e,i,n){this.animation=t,this.artboard=e,this.playing=n,this.loopCount=0,this.scrubTo=null,this.instance=new i.LinearAnimationInstance(t,e)}return Object.defineProperty(t.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.instance.time},set:function(t){this.instance.time=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),t.prototype.advance=function(t){null===this.scrubTo?this.instance.advance(t):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},t.prototype.apply=function(t){this.instance.apply(t)},t.prototype.cleanup=function(){this.instance.delete()},t}()},(t,e,i)=>{i.r(e),i.d(e,{BLANK_URL:()=>s.BLANK_URL,registerTouchInteractions:()=>n.registerTouchInteractions,sanitizeUrl:()=>s.sanitizeUrl});var n=i(6),s=i(7)},(t,e,i)=>{i.r(e),i.d(e,{registerTouchInteractions:()=>n});var n=function(t){var e=t.canvas,i=t.artboard,n=t.stateMachines,s=void 0===n?[]:n,a=t.renderer,r=t.rive,o=t.fit,l=t.alignment,c=t.isTouchScrollEnabled,h=void 0!==c&&c,u=t.layoutScaleFactor,d=void 0===u?1:u;if(!(e&&s.length&&a&&r&&i&&"undefined"!=typeof window))return null;var p=null,m=!1,f=function(t){if(m&&t instanceof MouseEvent)"mouseup"==t.type&&(m=!1);else{m=h&&"touchend"===t.type&&"touchstart"===p,p=t.type;var e=t.currentTarget.getBoundingClientRect(),n=function(t,e){var i,n;return["touchstart","touchmove"].indexOf(t.type)>-1&&(null===(i=t.touches)||void 0===i?void 0:i.length)?(e||t.preventDefault(),{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}):"touchend"===t.type&&(null===(n=t.changedTouches)||void 0===n?void 0:n.length)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}(t,h),a=n.clientX,c=n.clientY;if(a||c){var u=a-e.left,f=c-e.top,g=r.computeAlignment(o,l,{minX:0,minY:0,maxX:e.width,maxY:e.height},i.bounds,d),v=new r.Mat2D;g.invert(v);var b=new r.Vec2D(u,f),y=r.mapXY(v,b),w=y.x(),S=y.y();switch(y.delete(),v.delete(),b.delete(),g.delete(),t.type){case"mouseout":for(var E=0,T=s;E<T.length;E++)T[E].pointerMove(w,S);break;case"touchmove":case"mouseover":case"mousemove":for(var x=0,_=s;x<_.length;x++)_[x].pointerMove(w,S);break;case"touchstart":case"mousedown":for(var A=0,C=s;A<C.length;A++)C[A].pointerDown(w,S);break;case"touchend":case"mouseup":for(var I=0,P=s;I<P.length;I++)P[I].pointerUp(w,S)}}}}.bind(void 0);return e.addEventListener("mouseover",f),e.addEventListener("mouseout",f),e.addEventListener("mousemove",f),e.addEventListener("mousedown",f),e.addEventListener("mouseup",f),e.addEventListener("touchmove",f,{passive:h}),e.addEventListener("touchstart",f,{passive:h}),e.addEventListener("touchend",f),function(){e.removeEventListener("mouseover",f),e.removeEventListener("mouseout",f),e.removeEventListener("mousemove",f),e.removeEventListener("mousedown",f),e.removeEventListener("mouseup",f),e.removeEventListener("touchmove",f),e.removeEventListener("touchstart",f),e.removeEventListener("touchend",f)}}},(t,e,i)=>{i.r(e),i.d(e,{BLANK_URL:()=>c,sanitizeUrl:()=>h});var n=/^([^\w]*)(javascript|data|vbscript)/im,s=/&#(\w+)(^\w|;)?/g,a=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,o=/^.+(:|&colon;)/gim,l=[".","/"],c="about:blank";function h(t){if(!t)return c;var e,i=(e=t,e.replace(r,"").replace(s,(function(t,e){return String.fromCharCode(e)}))).replace(a,"").replace(r,"").trim();if(!i)return c;if(function(t){return l.indexOf(t[0])>-1}(i))return i;var h=i.match(o);if(!h)return i;var u=h[0];return n.test(u)?c:i}}],e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{i.r(n),i.d(n,{Alignment:()=>s,EventType:()=>v,Fit:()=>e,Layout:()=>p,LoopType:()=>b,Rive:()=>L,RiveEventType:()=>f,RiveFile:()=>P,RuntimeLoader:()=>m,StateMachineInput:()=>g,StateMachineInputType:()=>d,Testing:()=>M,decodeAudio:()=>B,decodeFont:()=>N,decodeImage:()=>z});var t,e,s,a=i(1),r=i(2),o=i(3),l=i(5),c=(t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),h=function(t,e,i,n){return new(i||(i=Promise))((function(s,a){function r(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}l((n=n.apply(t,e||[])).next())}))},u=function(t,e){var i,n,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(r=0)),r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!((s=(s=r.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(t){t.Cover="cover",t.Contain="contain",t.Fill="fill",t.FitWidth="fitWidth",t.FitHeight="fitHeight",t.None="none",t.ScaleDown="scaleDown",t.Layout="layout"}(e||(e={})),function(t){t.Center="center",t.TopLeft="topLeft",t.TopCenter="topCenter",t.TopRight="topRight",t.CenterLeft="centerLeft",t.CenterRight="centerRight",t.BottomLeft="bottomLeft",t.BottomCenter="bottomCenter",t.BottomRight="bottomRight"}(s||(s={}));var d,p=function(){function t(t){var i,n,a,r,o,l,c;this.fit=null!==(i=null==t?void 0:t.fit)&&void 0!==i?i:e.Contain,this.alignment=null!==(n=null==t?void 0:t.alignment)&&void 0!==n?n:s.Center,this.layoutScaleFactor=null!==(a=null==t?void 0:t.layoutScaleFactor)&&void 0!==a?a:1,this.minX=null!==(r=null==t?void 0:t.minX)&&void 0!==r?r:0,this.minY=null!==(o=null==t?void 0:t.minY)&&void 0!==o?o:0,this.maxX=null!==(l=null==t?void 0:t.maxX)&&void 0!==l?l:0,this.maxY=null!==(c=null==t?void 0:t.maxY)&&void 0!==c?c:0}return t.new=function(e){var i=e.fit,n=e.alignment,s=e.minX,a=e.minY,r=e.maxX,o=e.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new t({fit:i,alignment:n,minX:s,minY:a,maxX:r,maxY:o})},t.prototype.copyWith=function(e){var i=e.fit,n=e.alignment,s=e.layoutScaleFactor,a=e.minX,r=e.minY,o=e.maxX,l=e.maxY;return new t({fit:null!=i?i:this.fit,alignment:null!=n?n:this.alignment,layoutScaleFactor:null!=s?s:this.layoutScaleFactor,minX:null!=a?a:this.minX,minY:null!=r?r:this.minY,maxX:null!=o?o:this.maxX,maxY:null!=l?l:this.maxY})},t.prototype.runtimeFit=function(t){return this.cachedRuntimeFit?this.cachedRuntimeFit:(i=this.fit===e.Cover?t.Fit.cover:this.fit===e.Contain?t.Fit.contain:this.fit===e.Fill?t.Fit.fill:this.fit===e.FitWidth?t.Fit.fitWidth:this.fit===e.FitHeight?t.Fit.fitHeight:this.fit===e.ScaleDown?t.Fit.scaleDown:this.fit===e.Layout?t.Fit.layout:t.Fit.none,this.cachedRuntimeFit=i,i);var i},t.prototype.runtimeAlignment=function(t){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(e=this.alignment===s.TopLeft?t.Alignment.topLeft:this.alignment===s.TopCenter?t.Alignment.topCenter:this.alignment===s.TopRight?t.Alignment.topRight:this.alignment===s.CenterLeft?t.Alignment.centerLeft:this.alignment===s.CenterRight?t.Alignment.centerRight:this.alignment===s.BottomLeft?t.Alignment.bottomLeft:this.alignment===s.BottomCenter?t.Alignment.bottomCenter:this.alignment===s.BottomRight?t.Alignment.bottomRight:t.Alignment.center,this.cachedRuntimeAlignment=e,e);var e},t}(),m=function(){function t(){}return t.loadRuntime=function(){a.default({locateFile:function(){return t.wasmURL}}).then((function(e){var i;for(t.runtime=e;t.callBackQueue.length>0;)null===(i=t.callBackQueue.shift())||void 0===i||i(t.runtime)})).catch((function(e){var i={message:(null==e?void 0:e.message)||"Unknown error",type:(null==e?void 0:e.name)||"Error",wasmError:e instanceof WebAssembly.CompileError||e instanceof WebAssembly.RuntimeError,originalError:e};console.debug("Rive WASM load error details:",i);var n="https://cdn.jsdelivr.net/npm/".concat(r.name,"@").concat(r.version,"/rive_fallback.wasm");if(t.wasmURL.toLowerCase()!==n)console.warn("Failed to load WASM from ".concat(t.wasmURL," (").concat(i.message,"), trying jsdelivr as a backup")),t.setWasmUrl(n),t.loadRuntime();else{var s=["Could not load Rive WASM file from ".concat(t.wasmURL," or ").concat(n,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible","\nError details:","- Type: ".concat(i.type),"- Message: ".concat(i.message),"- WebAssembly-specific error: ".concat(i.wasmError),"\nTo resolve, you may need to:","1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join("\n");console.error(s)}}))},t.getInstance=function(e){t.isLoading||(t.isLoading=!0,t.loadRuntime()),t.runtime?e(t.runtime):t.callBackQueue.push(e)},t.awaitInstance=function(){return new Promise((function(e){return t.getInstance((function(t){return e(t)}))}))},t.setWasmUrl=function(e){t.wasmURL=e},t.getWasmUrl=function(){return t.wasmURL},t.isLoading=!1,t.callBackQueue=[],t.wasmURL="https://unpkg.com/".concat(r.name,"@").concat(r.version,"/rive.wasm"),t}();!function(t){t[t.Number=56]="Number",t[t.Trigger=58]="Trigger",t[t.Boolean=59]="Boolean"}(d||(d={}));var f,g=function(){function t(t,e){this.type=t,this.runtimeInput=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(t){this.runtimeInput.value=t},enumerable:!1,configurable:!0}),t.prototype.fire=function(){this.type===d.Trigger&&this.runtimeInput.fire()},t.prototype.delete=function(){this.runtimeInput=null},t}();!function(t){t[t.General=128]="General",t[t.OpenUrl=131]="OpenUrl"}(f||(f={}));var v,b,y=function(){function t(t,e,i,n){this.stateMachine=t,this.playing=i,this.artboard=n,this.inputs=[],this.instance=new e.StateMachineInstance(t,n),this.initInputs(e)}return Object.defineProperty(t.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statesChanged",{get:function(){for(var t=[],e=0;e<this.instance.stateChangedCount();e++)t.push(this.instance.stateChangedNameByIndex(e));return t},enumerable:!1,configurable:!0}),t.prototype.advance=function(t){this.instance.advance(t)},t.prototype.advanceAndApply=function(t){this.instance.advanceAndApply(t)},t.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},t.prototype.reportedEventAt=function(t){return this.instance.reportedEventAt(t)},t.prototype.initInputs=function(t){for(var e=0;e<this.instance.inputCount();e++){var i=this.instance.input(e);this.inputs.push(this.mapRuntimeInput(i,t))}},t.prototype.mapRuntimeInput=function(t,e){return t.type===e.SMIInput.bool?new g(d.Boolean,t.asBool()):t.type===e.SMIInput.number?new g(d.Number,t.asNumber()):t.type===e.SMIInput.trigger?new g(d.Trigger,t.asTrigger()):void 0},t.prototype.cleanup=function(){this.inputs.forEach((function(t){t.delete()})),this.inputs.length=0,this.instance.delete()},t}(),w=function(){function t(t,e,i,n,s){void 0===n&&(n=[]),void 0===s&&(s=[]),this.runtime=t,this.artboard=e,this.eventManager=i,this.animations=n,this.stateMachines=s}return t.prototype.add=function(t,e,i){if(void 0===i&&(i=!0),0===(t=D(t)).length)this.animations.forEach((function(t){return t.playing=e})),this.stateMachines.forEach((function(t){return t.playing=e}));else for(var n=this.animations.map((function(t){return t.name})),s=this.stateMachines.map((function(t){return t.name})),a=0;a<t.length;a++){var r=n.indexOf(t[a]),l=s.indexOf(t[a]);if(r>=0||l>=0)r>=0?this.animations[r].playing=e:this.stateMachines[l].playing=e;else{var c=this.artboard.animationByName(t[a]);if(c){var h=new o.Animation(c,this.artboard,this.runtime,e);h.advance(0),h.apply(1),this.animations.push(h)}else{var u=this.artboard.stateMachineByName(t[a]);if(u){var d=new y(u,this.runtime,e,this.artboard);this.stateMachines.push(d)}}}}return i&&(e?this.eventManager.fire({type:v.Play,data:this.playing}):this.eventManager.fire({type:v.Pause,data:this.paused})),e?this.playing:this.paused},t.prototype.initLinearAnimations=function(t,e){for(var i=this.animations.map((function(t){return t.name})),n=0;n<t.length;n++){var s=i.indexOf(t[n]);if(s>=0)this.animations[s].playing=e;else{var a=this.artboard.animationByName(t[n]);if(a){var r=new o.Animation(a,this.artboard,this.runtime,e);r.advance(0),r.apply(1),this.animations.push(r)}}}},t.prototype.initStateMachines=function(t,e){for(var i=this.stateMachines.map((function(t){return t.name})),n=0;n<t.length;n++){var s=i.indexOf(t[n]);if(s>=0)this.stateMachines[s].playing=e;else{var a=this.artboard.stateMachineByName(t[n]);if(a){var r=new y(a,this.runtime,e,this.artboard);this.stateMachines.push(r)}else this.initLinearAnimations([t[n]],e)}}},t.prototype.play=function(t){return this.add(t,!0)},t.prototype.pause=function(t){return this.add(t,!1)},t.prototype.scrub=function(t,e){var i=this.animations.filter((function(e){return t.includes(e.name)}));return i.forEach((function(t){return t.scrubTo=e})),i.map((function(t){return t.name}))},Object.defineProperty(t.prototype,"playing",{get:function(){return this.animations.filter((function(t){return t.playing})).map((function(t){return t.name})).concat(this.stateMachines.filter((function(t){return t.playing})).map((function(t){return t.name})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.animations.filter((function(t){return!t.playing})).map((function(t){return t.name})).concat(this.stateMachines.filter((function(t){return!t.playing})).map((function(t){return t.name})))},enumerable:!1,configurable:!0}),t.prototype.stop=function(t){var e=this,i=[];if(0===(t=D(t)).length)i=this.animations.map((function(t){return t.name})).concat(this.stateMachines.map((function(t){return t.name}))),this.animations.forEach((function(t){return t.cleanup()})),this.stateMachines.forEach((function(t){return t.cleanup()})),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var n=this.animations.filter((function(e){return t.includes(e.name)}));n.forEach((function(t){t.cleanup(),e.animations.splice(e.animations.indexOf(t),1)}));var s=this.stateMachines.filter((function(e){return t.includes(e.name)}));s.forEach((function(t){t.cleanup(),e.stateMachines.splice(e.stateMachines.indexOf(t),1)})),i=n.map((function(t){return t.name})).concat(s.map((function(t){return t.name})))}return this.eventManager.fire({type:v.Stop,data:i}),i},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.animations.reduce((function(t,e){return t||e.playing}),!1)||this.stateMachines.reduce((function(t,e){return t||e.playing}),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),t.prototype.atLeastOne=function(t,e){var i;return void 0===e&&(e=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([i=this.artboard.animationByIndex(0).name],t,e):this.artboard.stateMachineCount()>0&&this.add([i=this.artboard.stateMachineByIndex(0).name],t,e)),i},t.prototype.handleLooping=function(){for(var t=0,e=this.animations.filter((function(t){return t.playing}));t<e.length;t++){var i=e[t];0===i.loopValue&&i.loopCount?(i.loopCount=0,this.stop(i.name)):1===i.loopValue&&i.loopCount?(this.eventManager.fire({type:v.Loop,data:{animation:i.name,type:b.Loop}}),i.loopCount=0):2===i.loopValue&&i.loopCount>1&&(this.eventManager.fire({type:v.Loop,data:{animation:i.name,type:b.PingPong}}),i.loopCount=0)}},t.prototype.handleStateChanges=function(){for(var t=[],e=0,i=this.stateMachines.filter((function(t){return t.playing}));e<i.length;e++){var n=i[e];t.push.apply(t,n.statesChanged)}t.length>0&&this.eventManager.fire({type:v.StateChange,data:t})},t.prototype.handleAdvancing=function(t){this.eventManager.fire({type:v.Advance,data:t})},t}();!function(t){t.Load="load",t.LoadError="loaderror",t.Play="play",t.Pause="pause",t.Stop="stop",t.Loop="loop",t.Draw="draw",t.Advance="advance",t.StateChange="statechange",t.RiveEvent="riveevent",t.AudioStatusChange="audiostatuschange"}(v||(v={})),function(t){t.OneShot="oneshot",t.Loop="loop",t.PingPong="pingpong"}(b||(b={}));var S,E=function(){function t(t){void 0===t&&(t=[]),this.listeners=t}return t.prototype.getListeners=function(t){return this.listeners.filter((function(e){return e.type===t}))},t.prototype.add=function(t){this.listeners.includes(t)||this.listeners.push(t)},t.prototype.remove=function(t){for(var e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i.type===t.type&&i.callback===t.callback){this.listeners.splice(e,1);break}}},t.prototype.removeAll=function(t){var e=this;t?this.listeners.filter((function(e){return e.type===t})).forEach((function(t){return e.remove(t)})):this.listeners.splice(0,this.listeners.length)},t.prototype.fire=function(t){this.getListeners(t.type).forEach((function(e){return e.callback(t)}))},t}(),T=function(){function t(t){this.eventManager=t,this.queue=[]}return t.prototype.add=function(t){this.queue.push(t)},t.prototype.process=function(){for(;this.queue.length>0;){var t=this.queue.shift();(null==t?void 0:t.action)&&t.action(),(null==t?void 0:t.event)&&this.eventManager.fire(t.event)}},t}();!function(t){t[t.AVAILABLE=0]="AVAILABLE",t[t.UNAVAILABLE=1]="UNAVAILABLE"}(S||(S={}));var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._started=!1,e._enabled=!1,e._status=S.UNAVAILABLE,e}return c(e,t),e.prototype.delay=function(t){return h(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},e.prototype.timeout=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){return[2,new Promise((function(t,e){return setTimeout(e,50)}))]}))}))},e.prototype.reportToListeners=function(){this.fire({type:v.AudioStatusChange}),this.removeAll()},e.prototype.enableAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){return this._enabled||(this._enabled=!0,this._status=S.AVAILABLE,this.reportToListeners()),[2]}))}))},e.prototype.testAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:if(this._status!==S.UNAVAILABLE||null===this._audioContext)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return t.sent(),this.enableAudio(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))},e.prototype._establishAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this._started?[3,5]:(this._started=!0,"undefined"!=typeof window?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),t.label=2;case 2:return this._status!==S.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return t.sent(),[4,this.delay(1e3)];case 4:return t.sent(),[3,2];case 5:return[2]}}))}))},e.prototype.listenForUserAction=function(){var t=this;document.addEventListener("pointerdown",(function(){return h(t,void 0,void 0,(function(){return u(this,(function(t){return this.enableAudio(),[2]}))}))}),{once:!0})},e.prototype.establishAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){return this._establishAudio(),[2]}))}))},Object.defineProperty(e.prototype,"systemVolume",{get:function(){return this._status===S.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),e}(E),_=new x,A=function(){function t(){}return t.prototype.observe=function(){},t.prototype.unobserve=function(){},t.prototype.disconnect=function(){},t}(),C=globalThis.ResizeObserver||A,I=new(function(){function t(){var t=this;this._elementsMap=new Map,this._onObservedEntry=function(e){var i=t._elementsMap.get(e.target);null!==i?i.onResize(0==e.target.clientWidth||0==e.target.clientHeight):t._resizeObserver.unobserve(e.target)},this._onObserved=function(e){e.forEach(t._onObservedEntry)},this._resizeObserver=new C(this._onObserved)}return t.prototype.add=function(t,e){var i={onResize:e,element:t};return this._elementsMap.set(t,i),this._resizeObserver.observe(t),i},t.prototype.remove=function(t){this._resizeObserver.unobserve(t.element),this._elementsMap.delete(t.element)},t}()),P=function(){function t(t){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=t.src,this.buffer=t.buffer,t.assetLoader&&(this.assetLoader=t.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof t.enableRiveAssetCDN||t.enableRiveAssetCDN,this.eventManager=new E,t.onLoad&&this.on(v.Load,t.onLoad),t.onLoadError&&this.on(v.LoadError,t.onLoadError)}return t.prototype.initData=function(){return h(this,void 0,void 0,(function(){var e,i,n;return u(this,(function(s){switch(s.label){case 0:return this.src?(e=this,[4,k(this.src)]):[3,2];case 1:e.buffer=s.sent(),s.label=2;case 2:return this.assetLoader&&(i=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),n=this,[4,this.runtime.load(new Uint8Array(this.buffer),i,this.enableRiveAssetCDN)];case 3:if(n.file=s.sent(),null===this.file)throw this.eventManager.fire({type:v.LoadError,data:null}),new Error(t.fileLoadErrorMessage);return this.eventManager.fire({type:v.Load,data:this}),[2]}}))}))},t.prototype.init=function(){return h(this,void 0,void 0,(function(){var e;return u(this,(function(i){switch(i.label){case 0:if(!this.src&&!this.buffer)throw new Error(t.missingErrorMessage);return e=this,[4,m.awaitInstance()];case 1:return e.runtime=i.sent(),[4,this.initData()];case 2:return i.sent(),[2]}}))}))},t.prototype.on=function(t,e){this.eventManager.add({type:t,callback:e})},t.prototype.off=function(t,e){this.eventManager.remove({type:t,callback:e})},t.prototype.cleanup=function(){var t;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(t=this.file)||void 0===t||t.delete())},t.prototype.removeAllRiveEventListeners=function(t){this.eventManager.removeAll(t)},t.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},t.missingErrorMessage="Rive source file or data buffer required",t.fileLoadErrorMessage="The file failed to load",t}(),L=function(){function t(t){var e,i=this;this.loaded=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(t){i._hasZeroSize=t,i._layout.maxX&&i._layout.maxY||i.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=t.canvas,t.canvas.constructor===HTMLCanvasElement&&(this._observed=I.add(this.canvas,this.onCanvasResize)),this.src=t.src,this.buffer=t.buffer,this.riveFile=t.riveFile,this.layout=null!==(e=t.layout)&&void 0!==e?e:new p,this.shouldDisableRiveListeners=!!t.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!t.isTouchScrollEnabled,this.automaticallyHandleEvents=!!t.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===t.enableRiveAssetCDN||t.enableRiveAssetCDN,this.eventManager=new E,t.onLoad&&this.on(v.Load,t.onLoad),t.onLoadError&&this.on(v.LoadError,t.onLoadError),t.onPlay&&this.on(v.Play,t.onPlay),t.onPause&&this.on(v.Pause,t.onPause),t.onStop&&this.on(v.Stop,t.onStop),t.onLoop&&this.on(v.Loop,t.onLoop),t.onStateChange&&this.on(v.StateChange,t.onStateChange),t.onAdvance&&this.on(v.Advance,t.onAdvance),t.onload&&!t.onLoad&&this.on(v.Load,t.onload),t.onloaderror&&!t.onLoadError&&this.on(v.LoadError,t.onloaderror),t.onplay&&!t.onPlay&&this.on(v.Play,t.onplay),t.onpause&&!t.onPause&&this.on(v.Pause,t.onpause),t.onstop&&!t.onStop&&this.on(v.Stop,t.onstop),t.onloop&&!t.onLoop&&this.on(v.Loop,t.onloop),t.onstatechange&&!t.onStateChange&&this.on(v.StateChange,t.onstatechange),t.assetLoader&&(this.assetLoader=t.assetLoader),this.taskQueue=new T(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:t.autoplay,animations:t.animations,stateMachines:t.stateMachines,artboard:t.artboard,useOffscreenRenderer:t.useOffscreenRenderer})}return t.new=function(e){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new t(e)},t.prototype.onSystemAudioChanged=function(){this.volume=this._volume},t.prototype.init=function(e){var i=this,n=e.src,s=e.buffer,a=e.riveFile,r=e.animations,o=e.stateMachines,l=e.artboard,c=e.autoplay,h=void 0!==c&&c,u=e.useOffscreenRenderer,d=void 0!==u&&u;if(this.src=n,this.buffer=s,this.riveFile=a,!this.src&&!this.buffer&&!this.riveFile)throw new Error(t.missingErrorMessage);var p=D(r),f=D(o);this.loaded=!1,this.readyForPlaying=!1,m.awaitInstance().then((function(t){i.runtime=t,i.removeRiveListeners(),i.deleteRiveRenderer(),i.renderer=i.runtime.makeRenderer(i.canvas,d),i.canvas.width||i.canvas.height||i.resizeDrawingSurfaceToCanvas(),i.initData(l,p,f,h).then((function(){return i.setupRiveListeners()})).catch((function(t){console.error(t)}))})).catch((function(t){console.error(t)}))},t.prototype.setupRiveListeners=function(t){var e=this;if(!this.shouldDisableRiveListeners){var i=(this.animator.stateMachines||[]).filter((function(t){return t.playing&&e.runtime.hasListeners(t.instance)})).map((function(t){return t.instance})),n=this.isTouchScrollEnabled;t&&"isTouchScrollEnabled"in t&&(n=t.isTouchScrollEnabled),this.eventCleanup=(0,l.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:i,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:n,layoutScaleFactor:this._layout.layoutScaleFactor})}},t.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},t.prototype.initializeAudio=function(){var t,e=this;_.status==S.UNAVAILABLE&&(null===(t=this.artboard)||void 0===t?void 0:t.hasAudio)&&null===this._audioEventListener&&(this._audioEventListener={type:v.AudioStatusChange,callback:function(){return e.onSystemAudioChanged()}},_.add(this._audioEventListener),_.establishAudio())},t.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},t.prototype.initData=function(t,e,i,n){var s;return h(this,void 0,void 0,(function(){var a;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),null!=this.riveFile?[3,2]:(this.riveFile=new P({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:r.sent(),r.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(t,e,i,n),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:v.Load,data:null!==(s=this.src)&&void 0!==s?s:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return r.sent(),a="Problem loading file; may be corrupt!",console.warn(a),this.eventManager.fire({type:v.LoadError,data:a}),[2,Promise.reject(a)];case 4:return[2]}}))}))},t.prototype.initArtboard=function(t,e,i,n){if(this.file){var s,a=t?this.file.artboardByName(t):this.file.defaultArtboard();if(!a){var r="Invalid artboard name or no default artboard";return console.warn(r),void this.eventManager.fire({type:v.LoadError,data:r})}if(this.artboard=a,a.volume=this._volume*_.systemVolume,this.artboard.animationCount()<1)throw r="Artboard has no animations",this.eventManager.fire({type:v.LoadError,data:r}),r;this.animator=new w(this.runtime,this.artboard,this.eventManager),e.length>0||i.length>0?(s=e.concat(i),this.animator.initLinearAnimations(e,n),this.animator.initStateMachines(i,n)):s=[this.animator.atLeastOne(n,!1)],this.taskQueue.add({event:{type:n?v.Play:v.Pause,data:s}})}},t.prototype.drawFrame=function(){this.startRendering()},t.prototype.draw=function(t,e){this.frameRequestId=null;var i=performance.now();this.lastRenderTime||(this.lastRenderTime=t),this.renderSecondTimer+=t-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==e||e());var n=(t-this.lastRenderTime)/1e3;this.lastRenderTime=t;for(var s=0,a=this.animator.animations.filter((function(t){return t.playing||t.needsScrub})).sort((function(t){return t.needsScrub?-1:1}));s<a.length;s++){var r=a[s];r.advance(n),r.instance.didLoop&&(r.loopCount+=1),r.apply(1)}for(var o=0,c=this.animator.stateMachines.filter((function(t){return t.playing}));o<c.length;o++){var h=c[o],u=h.reportedEventCount();if(u)for(var d=0;d<u;d++){var p=h.reportedEventAt(d);if(p)if(p.type===f.OpenUrl){if(this.eventManager.fire({type:v.RiveEvent,data:p}),this.automaticallyHandleEvents){var m=document.createElement("a"),g=p,b=g.url,y=g.target,w=(0,l.sanitizeUrl)(b);b&&m.setAttribute("href",w),y&&m.setAttribute("target",y),w&&w!==l.BLANK_URL&&m.click()}}else this.eventManager.fire({type:v.RiveEvent,data:p})}h.advanceAndApply(n)}0==this.animator.stateMachines.length&&this.artboard.advance(n);var S=this.renderer;S.clear(),S.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(S),S.restore(),S.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(n),this.frameCount++;var E=performance.now();for(this.frameTimes.push(E),this.durations.push(E-i);this.frameTimes[0]<=E-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},t.prototype.alignRenderer=function(){var t=this,e=t.renderer,i=t.runtime,n=t._layout,s=t.artboard;e.align(n.runtimeFit(i),n.runtimeAlignment(i),{minX:n.minX,minY:n.minY,maxX:n.maxX,maxY:n.maxY},s.bounds,this._devicePixelRatioUsed*n.layoutScaleFactor)},Object.defineProperty(t.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce((function(t,e){return t+e}),0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),t.prototype.cleanup=function(){var t;this.stopRendering(),this.cleanupInstances(),null!==this._observed&&I.remove(this._observed),this.removeRiveListeners(),null===(t=this.riveFile)||void 0===t||t.cleanup(),this.riveFile=null,this.file=null,this.deleteRiveRenderer(),null!==this._audioEventListener&&(_.remove(this._audioEventListener),this._audioEventListener=null)},t.prototype.deleteRiveRenderer=function(){var t;null===(t=this.renderer)||void 0===t||t.delete(),this.renderer=null},t.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},t.prototype.retrieveTextRun=function(t){var e;if(t)if(this.artboard){var i=this.artboard.textRun(t);if(i)return i;console.warn("Could not access a text run with name '".concat(t,"' in the '").concat(null===(e=this.artboard)||void 0===e?void 0:e.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},t.prototype.getTextRunValue=function(t){var e=this.retrieveTextRun(t);return e?e.text:void 0},t.prototype.setTextRunValue=function(t,e){var i=this.retrieveTextRun(t);i&&(i.text=e)},t.prototype.play=function(t,e){var i=this;t=D(t),this.readyForPlaying?(this.animator.play(t),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return i.play(t,e)}})},t.prototype.pause=function(t){var e=this;t=D(t),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(t)):this.taskQueue.add({action:function(){return e.pause(t)}})},t.prototype.scrub=function(t,e){var i=this;t=D(t),this.readyForPlaying?(this.animator.scrub(t,e||0),this.drawFrame()):this.taskQueue.add({action:function(){return i.scrub(t,e)}})},t.prototype.stop=function(t){var e=this;t=D(t),this.readyForPlaying?(this.animator&&this.animator.stop(t),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return e.stop(t)}})},t.prototype.reset=function(t){var e,i=null==t?void 0:t.artboard,n=D(null==t?void 0:t.animations),s=D(null==t?void 0:t.stateMachines),a=null!==(e=null==t?void 0:t.autoplay)&&void 0!==e&&e;this.cleanupInstances(),this.initArtboard(i,n,s,a),this.taskQueue.process()},t.prototype.load=function(t){this.file=null,this.stop(),this.init(t)},Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t,t.maxX&&t.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),t.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},t.prototype.resizeDrawingSurfaceToCanvas=function(t){if(this.canvas instanceof HTMLCanvasElement&&window){var i=this.canvas.getBoundingClientRect(),n=i.width,s=i.height,a=t||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=a,this.canvas.width=a*n,this.canvas.height=a*s,this.startRendering(),this.resizeToCanvas(),this.layout.fit===e.Layout){var r=this._layout.layoutScaleFactor;this.artboard.width=n/r,this.artboard.height=s/r}}},Object.defineProperty(t.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var t=[],e=0;e<this.artboard.animationCount();e++)t.push(this.artboard.animationByIndex(e).name);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var t=[],e=0;e<this.artboard.stateMachineCount();e++)t.push(this.artboard.stateMachineByIndex(e).name);return t},enumerable:!1,configurable:!0}),t.prototype.stateMachineInputs=function(t){if(this.loaded){var e=this.animator.stateMachines.find((function(e){return e.name===t}));return null==e?void 0:e.inputs}},t.prototype.retrieveInputAtPath=function(t,e){if(t)if(this.artboard){var i=this.artboard.inputByPath(t,e);if(i)return i;console.warn("Could not access an input with name: '".concat(t,"', at path:'").concat(e,"'"))}else console.warn("Tried to access input: '".concat(t,"', at path: '").concat(e,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(e,"'"))},t.prototype.setBooleanStateAtPath=function(t,e,i){var n=this.retrieveInputAtPath(t,i);n&&(n.type===d.Boolean?n.asBool().value=e:console.warn("Input with name: '".concat(t,"', at path:'").concat(i,"' is not a boolean")))},t.prototype.setNumberStateAtPath=function(t,e,i){var n=this.retrieveInputAtPath(t,i);n&&(n.type===d.Number?n.asNumber().value=e:console.warn("Input with name: '".concat(t,"', at path:'").concat(i,"' is not a number")))},t.prototype.fireStateAtPath=function(t,e){var i=this.retrieveInputAtPath(t,e);i&&(i.type===d.Trigger?i.asTrigger().fire():console.warn("Input with name: '".concat(t,"', at path:'").concat(e,"' is not a trigger")))},t.prototype.retrieveTextAtPath=function(t,e){if(t)if(e)if(this.artboard){var i=this.artboard.textByPath(t,e);if(i)return i;console.warn("Could not access text with name: '".concat(t,"', at path:'").concat(e,"'"))}else console.warn("Tried to access text: '".concat(t,"', at path: '").concat(e,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(t,"'"));else console.warn("No text name provided for path '".concat(e,"'"))},t.prototype.getTextRunValueAtPath=function(t,e){var i=this.retrieveTextAtPath(t,e);if(i)return i.text;console.warn("Could not get text with name: '".concat(t,"', at path:'").concat(e,"'"))},t.prototype.setTextRunValueAtPath=function(t,e,i){var n=this.retrieveTextAtPath(t,i);n?n.text=e:console.warn("Could not set text with name: '".concat(t,"', at path:'").concat(i,"'"))},Object.defineProperty(t.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(t){return t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(t){return t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(t){return!t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(t){return!t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e){this.eventManager.add({type:t,callback:e})},t.prototype.off=function(t,e){this.eventManager.remove({type:t,callback:e})},t.prototype.unsubscribe=function(t,e){console.warn("This function is deprecated: please use `off()` instead."),this.off(t,e)},t.prototype.removeAllRiveEventListeners=function(t){this.eventManager.removeAll(t)},t.prototype.unsubscribeAll=function(t){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(t)},t.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},t.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},t.prototype.enableFPSCounter=function(t){this.runtime.enableFPSCounter(t)},t.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(t.prototype,"contents",{get:function(){if(this.loaded){for(var t={artboards:[]},e=0;e<this.file.artboardCount();e++){for(var i=this.file.artboardByIndex(e),n={name:i.name,animations:[],stateMachines:[]},s=0;s<i.animationCount();s++){var a=i.animationByIndex(s);n.animations.push(a.name)}for(var r=0;r<i.stateMachineCount();r++){for(var o=i.stateMachineByIndex(r),l=o.name,c=new this.runtime.StateMachineInstance(o,i),h=[],u=0;u<c.inputCount();u++){var d=c.input(u);h.push({name:d.name,type:d.type})}n.stateMachines.push({name:l,inputs:h})}t.artboards.push(n)}return t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(t){this._volume=t,this.artboard&&(this.artboard.volume=t*_.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"artboardWidth",{get:function(){var t;return this.artboard?this.artboard.width:null!==(t=this._artboardWidth)&&void 0!==t?t:0},set:function(t){this._artboardWidth=t,this.artboard&&(this.artboard.width=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"artboardHeight",{get:function(){var t;return this.artboard?this.artboard.height:null!==(t=this._artboardHeight)&&void 0!==t?t:0},set:function(t){this._artboardHeight=t,this.artboard&&(this.artboard.height=t)},enumerable:!1,configurable:!0}),t.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(t.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(t){this._devicePixelRatioUsed=t},enumerable:!1,configurable:!0}),t.missingErrorMessage="Rive source file or data buffer required",t}(),k=function(t){return h(void 0,void 0,void 0,(function(){var e;return u(this,(function(i){switch(i.label){case 0:return e=new Request(t),[4,fetch(e)];case 1:return[4,i.sent().arrayBuffer()];case 2:return[2,i.sent()]}}))}))},D=function(t){return"string"==typeof t?[t]:t instanceof Array?t:[]},M={EventManager:E,TaskQueueManager:T},B=function(t){return new Promise((function(e){return m.getInstance((function(i){i.decodeAudio(t,e)}))}))},z=function(t){return new Promise((function(e){return m.getInstance((function(i){i.decodeImage(t,e)}))}))},N=function(t){return new Promise((function(e){return m.getInstance((function(i){i.decodeFont(t,e)}))}))}})(),n})(),t.exports=e()},424:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,".game-scene #play-button{position:relative;display:block;margin:0 auto;z-index:6}@media(max-width: 576px){#play-button{max-width:115px;max-height:115px}}@media(min-width: 768px){#play-button{max-width:200px;max-height:200px}}",""]);const o=r},632:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,".game-control .level_content-wrapper{position:absolute;z-index:5;max-width:130px;width:100%;top:5px;left:12%}.game-control .level_content-wrapper .bar-level-wrapper{position:absolute;width:100%;max-width:125px;top:1.4rem;left:0;display:flex;align-items:center;justify-content:center}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{position:relative;width:100%;max-width:10px;margin:0px 2.2px}@media(min-width: 320px)and (max-width: 360px){.game-control .level_content-wrapper .bar-level-wrapper{max-width:100px;top:1.1rem;left:6px}.game-control .level_content-wrapper{max-width:115px;width:100%;top:5px;left:12%}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:13px}}@media(min-width: 361px)and (max-width: 500px){.level_content-wrapper{top:.5rem}.game-control .level_content-wrapper{max-width:130px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:13px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:120px;top:1.4rem}}@media(min-width: 501px)and (max-width: 767px){.game-control .level_content-wrapper{max-width:200px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:190px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:22px;margin:0px 2.5px}}@media(min-width: 768px)and (max-width: 991px){.game-control .level_content-wrapper{max-width:215px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:205px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px;margin:0px 2.5px}}@media(min-width: 991px)and (max-width: 1024px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}@media(min-width: 1080px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}",""]);const o=r},636:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,".popup{display:none;position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000;height:100%;width:100%;font-family:Arial}.popup.show{display:block}.popup .popup__overlay{height:100%;width:100%;background-color:rgba(0,0,0,.5)}.popup .popup__content-wrapper{position:absolute;top:20vh;left:10vw;right:10vw;height:80vw;background-repeat:no-repeat;background-size:contain}.popup .popup__content-wrapper [data-click=close]{position:absolute;top:-15px;left:15px;display:block}.popup .popup__content-wrapper .popup__content-container{position:absolute;padding:15px;color:#fff;display:flex;width:100%;height:100%;justify-content:center;align-items:center;align-content:center;flex-wrap:wrap}.popup #cancel-button{position:absolute;top:4px;left:24px}#popup-bg{position:absolute;width:100%;height:100%;top:0px;left:0px}",""]);const o=r},278:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,"#timer-ticking{position:relative;top:120px;width:100%;display:flex}#timer-ticking #timer-empty{position:absolute;bottom:0px;width:100%;height:40px}#timer-ticking #rotating-clock{animation:rotateClock 2s linear infinite;position:absolute;width:55px;bottom:-5px;left:30px}#timer-ticking #timer-full-container{position:absolute;bottom:0;left:14%;width:100%;overflow:hidden;height:40px}#timer-ticking #timer-full-container .timer-mask{position:absolute;width:86%;background:repeating-linear-gradient(-45deg, red, red 20px, #ffb3b3 20px, #ffb3b3 40px);left:0px;height:25px;margin:6px 0px 0px 2px}@keyframes rotateClock{from{transform:translateX(-50%) rotate(0deg)}to{transform:translateX(-50%) rotate(360deg)}}@keyframes reduceWidth{from{width:100%}to{width:0%}}@media(min-width: 320px)and (max-width: 360px){#timer-ticking{top:100px}#timer-ticking #timer-full-container{height:30px}#timer-ticking #timer-empty{height:30px}#timer-ticking #timer-full-container .timer-mask{height:19px;margin:4px 0px 0px 2px}#timer-ticking #rotating-clock{width:40px;bottom:-5px;left:25px}}@media(min-width: 361px)and (max-width: 500px){#timer-ticking{top:120px}}@media(min-width: 501px)and (max-width: 768px){#timer-ticking{top:180px}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:80px;bottom:-8px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:37px;margin:9px 0px 0px 5px}}@media(min-width: 769px)and (max-width: 992px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:90px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:36px;margin:9px 0px 0px 5px}}@media(min-width: 993px)and (max-width: 1024px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:100px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 6px}}@media(min-width: 1080px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:100px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 5px}}",""]);const o=r},717:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,".buttons-container{position:absolute;width:100%;bottom:65px;display:flex;gap:40px;justify-content:center}#levelend-background{background:rgba(36,36,36,.4196078431);height:100%;z-index:12;position:relative;transition:all 2.5s ease;opacity:1}#levelend-background.gray{background:#242424;opacity:1}#levelend-background.fade-out{opacity:0;z-index:0;background:rgba(0,0,0,0)}",""]);const o=r},35:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,"#title-and-play-button{position:absolute;width:100%}#title{width:100%;font-family:Atma-SemiBold,sans-serif;z-index:4;position:relative;margin-top:15%;text-align:center;padding:15px 10px 0;font-size:8vw;color:#f8b618;text-shadow:-2px -2px 0 #fff,2px -2px 0 #fff,-2px 2px 0 #fff,2px 2px 0 #fff,-3px 0 0 #fff,3px 0 0 #fff,0 -3px 0 #fff,0 3px 0 #fff;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;word-wrap:break-word}#title.title-long{font-size:6.5vw;margin-top:18%;padding:10px}@media(min-width: 501px)and (max-width: 768px){#title{margin-top:5%}}@media(min-width: 769px)and (max-width: 992px){#title{margin-top:5%}}",""]);const o=r},664:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var n=i(601),s=i.n(n),a=i(314),r=i.n(a)()(s());r.push([t.id,"button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.w-100{width:100%}.h-100{height:100%}.d-flex{display:flex}.justify-content-center{justify-content:center}.m-1{margin:8px}.ms-1{margin-left:8px}.me-1{margin-right:8px}.mt-1{margin-top:8px}.mb-1{margin-bottom:8px}.m-2{margin:16px}.ms-2{margin-left:16px}.me-2{margin-right:16px}.mt-2{margin-top:16px}.mb-2{margin-bottom:16px}.m-3{margin:24px}.ms-3{margin-left:24px}.me-3{margin-right:24px}.mt-3{margin-top:24px}.mb-3{margin-bottom:24px}.m-4{margin:32px}.ms-4{margin-left:32px}.me-4{margin-right:32px}.mt-4{margin-top:32px}.mb-4{margin-bottom:32px}.m-5{margin:40px}.ms-5{margin-left:40px}.me-5{margin-right:40px}.mt-5{margin-top:40px}.mb-5{margin-bottom:40px}.text-align-center{text-align:center}.font-size-1{font-size:8px}.font-size-2{font-size:16px}.font-size-3{font-size:24px}.font-size-4{font-size:32px}.font-size-5{font-size:40px}",""]);const o=r},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,s,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);n&&r[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},72:t=>{"use strict";var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var a={},r=[],o=0;o<t.length;o++){var l=t[o],c=n.base?l[0]+n.base:l[0],h=a[c]||0,u="".concat(c," ").concat(h);a[c]=h+1;var d=i(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var m=s(p,n);n.byIndex=o,e.splice(o,0,{identifier:u,updater:m,references:1})}r.push(u)}return r}function s(t,e){var i=e.domAPI(e);i.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var a=n(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var o=i(a[r]);e[o].references--}for(var l=n(t,s),c=0;c<a.length;c++){var h=i(a[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}a=l}}},659:t=>{"use strict";var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var a=i.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={id:n,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{"use strict";class t{x;y;origx;origy;text;img;imageSize;textFontSize;canvasWidth;canvasHeight;imageCenterOffsetX;imageCenterOffsetY;context;tutorialInstance;timerTickingInstance;frame=0;isDisposed=!1;animationStartTime=0;animationDuration=1500;constructor(t,e,i,n,s,a,r,o,l){this.x=s,this.y=a,this.origx=s,this.origy=a,this.canvasWidth=e,this.canvasHeight=i,this.tutorialInstance=l,this.text=n,this.img=r,this.context=t,this.calculateImageAndFontSize(),this.imageCenterOffsetX=this.imageSize/2.3,this.imageCenterOffsetY=this.imageSize/1.5,this.timerTickingInstance=o}initialize(){this.frame=0,this.isDisposed=!1,this.animationStartTime=0}calculateImageAndFontSize(){1.4*this.context.measureText(this.text).width>this.canvasHeight/9.5?(this.imageSize=1.1*this.context.measureText(this.text).width,this.textFontSize=this.canvasHeight/25,this.text.length>=3&&this.origx<50&&this.origx<this.canvasWidth/2&&(this.x=this.origx+21)):(this.imageSize=this.canvasHeight/9.5,this.textFontSize=this.canvasHeight/20)}getEase=(t,e,i)=>-i/2*(Math.cos(Math.PI*t)-1)+e;getX=()=>this.frame>=100?this.x:this.getEase(this.frame/100,0,this.x);getY=()=>this.frame>=100?this.y:this.getEase(this.frame/100,0,this.y);adjustSize(t,e){return t?1.25*e:e}draw(t,e=!1){if(this.isDisposed||!this.img||!this.context)return;if(this.frame<100){0===this.animationStartTime&&(this.animationStartTime=performance.now());const t=performance.now()-this.animationStartTime;this.frame=Math.min(100,t/this.animationDuration*100)}const i=this.getX()-(e?1.25*this.imageCenterOffsetX:this.imageCenterOffsetX),n=this.getY()-(e?1.25*this.imageCenterOffsetY:this.imageCenterOffsetY),s=e?1.25*this.imageSize:this.imageSize;e&&(this.context.shadowColor="rgba(255, 255, 255, 1)",this.context.shadowBlur=12,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0),this.context.drawImage(this.img,i,n,s,s),this.context.shadowColor="transparent",this.context.shadowBlur=0,this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${F}, monospace`,this.context.textAlign="center",this.context.fillText(this.text,this.getX(),this.getY()),this.tutorialInstance&&this.frame>=100&&this.tutorialInstance.draw(t,this.img,this.imageSize)}dispose(){this.isDisposed=!0,this.img=null,this.context=null,this.tutorialInstance=null,this.timerTickingInstance=null,this.frame=0}reset(){this.x=this.origx,this.y=this.origy,this.isDisposed=!1}}const e={english:"Consolas",swahili:"Consolas",wolof:"Consolas",tajik:"Consolas",marathi:"Consolas",amharic:"Consolas",punjabi:"Consolas",tamil:"Consolas",sepedi:"Consolas",gujarati:"Consolas",telugu:"Consolas",tsonga:"Consolas",malay:"Consolas",ndebele:"Consolas",venda:"NotoSans-Regular",siswati:"Consolas",tswana:"Consolas",thai:"Consolas",fula:"Consolas",farsi:"Consolas",burmese:"Consolas",bengali:"Consolas",Azerbaijani:"NotoSans-Regular",Sesotho:"Consolas",Georgian:"Consolas",BrazilianPortuguese:"Consolas",Somali:"Consolas",Hausa:"NotoSans-Regular",Igbo:"Consolas",HatianCreole:"Consolas",Oromo:"Consolas",Luganda:"Consolas",Yoruba:"Consolas",Khmer:"Consolas",Javanese:"Consolas",Urdu:"Consolas",Kinyarwanda:"Consolas",Shona:"Consolas",Kurdish:"Consolas",French:"Consolas",isiXhosa:"Consolas",Afrikaans:"Consolas",Nepali:"Consolas",Ukrainian:"Consolas",Hindi:"Consolas",Tagalog:"Consolas",Vietnamese:"NotoSans-Regular",Pashto:"Consolas",Twi:"NotoSans-Regular",Arabic:"Adobe-Arabic-Bold"};class n{static UrlSubstring="/feedthemonster";static getConvertedDevProdURL(t){return j.DevelopmentLink?t.slice(0,t.indexOf(this.UrlSubstring)+this.UrlSubstring.length)+"dev"+t.slice(t.indexOf(this.UrlSubstring)+this.UrlSubstring.length):t}static getLanguageSpecificFont(t){const i=t.toLowerCase();for(const t in e)if(t.toLowerCase()===i)return e[t];return console.log(`Font not found for language: ${t}`),"NotoSans-Regular"}static getRandomNumber(t,e){return Math.floor(Math.random()*(e-t+1))+t}static getExcludedCoordinates(t,e){return{excludeX:t.width*(e/100),excludeY:t.height*(e/100)}}}function s(t,e){const i={};let n=0;const s=Object.keys(t).length;for(let a in t)i[a]=new Image,i[a].onload=function(){++n>=s&&e(i)},i[a].src=t[a]}const a=async t=>{const e=Object.keys(t).map((async e=>{const i=await(async t=>{const e=new Image;return new Promise((i=>{e.onload=()=>i(e),e.src=t}))})(t[e]);return{[e]:i}}));return(await Promise.all(e)).reduce(((t,e)=>({...t,...e})),{})};const r=()=>"visible"===document.visibilityState,o=(t=!1,e)=>{t?e.classList.remove("show"):e.classList.add("show")},l="pwa_installed_status",c="storePreviousPlayedLevel",h="is_cached",u="./assets/audios/Eat.mp3",d=t=>`./assets/audios/Cheering-0${t}.mp3`,p="./assets/audios/intro.mp3",m=["./assets/audios/intro.mp3","./assets/audios/Cheering-02.mp3","./assets/audios/Cheering-03.mp3","./assets/audios/Cheering-01.mp3","./assets/audios/onDrag.mp3","./assets/audios/timeout.mp3","./assets/audios/LevelWinFanfare.mp3","./assets/audios/LevelLoseFanfare.mp3","./assets/audios/ButtonClick.mp3","./assets/audios/Monster Spits wrong stones-01.mp3","./assets/audios/Disapointed-05.mp3","./assets/audios/MonsterSpit.mp3","./assets/audios/Eat.mp3","./assets/audios/PointsAdd.wav","./assets/audios/are-you-sure.mp3"],f="./assets/images/Totem_v02_v01.webp",g="./assets/images/hill.webp",v="./assets/images/fence_v01.webp",b="./assets/images/bg_v01.webp",y="./assets/images/timer_empty.webp",w="./assets/images/timer.webp",S="./assets/images/next_btn.webp",E={DEFAULT_BACKGROUND_1:b,ASSETS_PATH_HILL:g,ASSETS_PATH_TOTEM:f,ASSETS_PATH_FENCE:v},T={AUTUMN_BACKGROUND_1:"./assets/images/Autumn_bg_v01.webp",AUTUMN_HILL_1:"./assets/images/Autumn_hill.webp",AUTUMN_PILLAR_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_SIGN_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_FENCE_1:"./assets/images/Autumn_fence_v01.webp"},x={WINTER_BACKGROUND_1:"./assets/images/Winter_bg_01.webp",WINTER_HILL_1:"./assets/images/Winter_hill.webp",WINTER_SIGN_1:"./assets/images/Winter_sign_v01.webp",WINTER_FENCE_1:"./assets/images/Winter_fence_v01.webp",WINTER_PILLAR_1:"./assets/images/Winter_sign_v01.webp"},A=["./assets/rive/eggMonsterFTM.riv","./assets/rive/blue_egg.riv","./assets/rive/green_egg.riv"],C=["./assets/rive/evolve.riv"];var I;!function(t){t.PHASE="phase",t.EVOLUTION="evolution"}(I||(I={}));const P="StartScene",L="LevelSelection",k="GamePlay",D="LevelEnd",M=[5,13,20,30,42],B=new URLSearchParams(window.location.search);var z=B.get("cr_user_id"),N=null==B.get("source")?null:B.get("source"),R=null==B.get("campaign_id")?null:B.get("campaign_id"),O=null==B.get("cr_lang")?"english":B.get("cr_lang");const F=n.getLanguageSpecificFont(O),j={DevelopmentLink:!!window.location.href.includes("https://feedthemonsterdev.curiouscontent.org"),DebugMode:!1},V="loadpuzzle",U="stonesdropped",W="click",H="visibilitychange",$="./lang/"+O+"/ftm_"+O+".json";async function G(){return await fetch($,{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json().then((t=>t))))}class X{title;otherAudios;levels;FeedbackTexts;FeedbackAudios;rightToLeft;majVersion;minVersion;version;constructor(t,e,i,n,s,a,r,o,l){this.title=t,this.otherAudios=new Y(e),this.levels=this.getLevels(i),this.FeedbackTexts=new q(n),this.FeedbackAudios=new K(a),this.rightToLeft=s,this.majVersion=r,this.minVersion=o,this.version=l}getLevels(t){let e=[];for(let i=0;i<t.length;i++)e.push(new J(t[i]));return e}}class Y{selctYourPlayer;watchMeGrow;areYouSure;constructor(t){this.selctYourPlayer=t["Select your player"],this.watchMeGrow=t["Watch me grow"],this.areYouSure=t["Are you sure"]}}class q{fantastic;great;amazing;constructor(t){t.length>=1&&(this.fantastic=t[0]),t.length>=2&&(this.great=t[1]),t.length>=3&&(this.amazing=t[2])}}class K{fantastic;great;amazing;constructor(t){t.length>=1&&(this.fantastic=t[0]),t.length>=2&&(this.great=t[1]),t.length>=3&&(this.amazing=t[2])}}class J{puzzles;levelMeta;levelNumber;constructor(t){this.puzzles=this.getPuzzleData(t),this.levelMeta=new tt(t.LevelMeta),this.levelNumber=t.LevelNumber}getPuzzleData(t){let e=[];return t.Puzzles.map(((t,i)=>{e.push(new Q(t))})),e}}class Q{segmentNumber;prompt;foilStones;targetStones;constructor(t){this.segmentNumber=t.SegmentNumber,this.prompt=new Z(t.prompt),this.foilStones=this.getFoilStones(t),this.targetStones=this.getTargetStones(t)}getFoilStones(t){let e=[];return t.foilstones.map(((t,i)=>{e.push(t.StoneText)})),e}getTargetStones(t){let e=[];return t.targetstones.map(((t,i)=>{e.push(t.StoneText)})),e}}class Z{promptText;promptAudio;constructor(t){this.promptText=t.PromptText,this.promptAudio=t.PromptAudio}}class tt{promptFadeOut;letterGroup;levelNumber;protoType;levelType;constructor(t){this.promptFadeOut=t.PromptFadeout,this.letterGroup=t.LetterGroup,this.levelNumber=t.LevelNumber,this.protoType=t.PromptType,this.levelType=t.LevelType}}class et{static currentlanguage=O;static setGameLevelScore(t,e){let i=this.calculateStarCount(e),n={levelName:t.levelMeta.levelType,levelNumber:t.levelMeta.levelNumber,score:e,starCount:i};this.setTotalStarCount(i);let s=this.getAllGameLevelInfo(),a=-1;for(let t=0;t<s.length;t++)if(s[t].levelNumber===n.levelNumber){a=t;break}-1!==a&&n.score>s[a].score?s[a]=n:s.push(n),localStorage.setItem(this.currentlanguage+"gamePlayedInfo",JSON.stringify(s))}static getAllGameLevelInfo(){const t=localStorage.getItem(this.currentlanguage+"gamePlayedInfo");return null==t?[]:JSON.parse(t)}static setTotalStarCount(t){let e=this.getTotalStarCount()+t;localStorage.setItem(this.currentlanguage+"totalStarCount",e)}static getTotalStarCount(){const t=localStorage.getItem(this.currentlanguage+"totalStarCount");return null==t?0:parseInt(t)}static calculateStarCount(t){return 200==t?1:300==t||400==t?2:500==t?3:0}static getDatafromStorage(){return j.DebugMode?JSON.parse(localStorage.getItem(O+"ProfileDebug")||"{}"):JSON.parse(localStorage.getItem(O+"Profile")||"{}")}}const it={default:"Atma-SemiBold",english:"Atma-SemiBold",swahili:"Atma-SemiBold",wolof:"Atma-SemiBold",tajik:"Atma-SemiBold",marathi:"Atma-SemiBold",amharic:"Atma-SemiBold",punjabi:"Atma-SemiBold",tamil:"Atma-SemiBold",sepedi:"Atma-SemiBold",gujarati:"Atma-SemiBold",telugu:"Atma-SemiBold",tsonga:"Atma-SemiBold",malay:"Atma-SemiBold",ndebele:"Atma-SemiBold",venda:"Atma-SemiBold",siswati:"Atma-SemiBold",tswana:"Atma-SemiBold",thai:"Atma-SemiBold",fula:"Atma-SemiBold",farsi:"Atma-SemiBold",burmese:"Atma-SemiBold",bengali:"Atma-SemiBold",Azerbaijani:"Atma-SemiBold",Sesotho:"Atma-SemiBold",Georgian:"Atma-SemiBold",BrazilianPortuguese:"Atma-SemiBold",Somali:"Atma-SemiBold",Hausa:"Atma-SemiBold",Igbo:"Atma-SemiBold",HatianCreole:"Atma-SemiBold",Oromo:"Atma-SemiBold",Luganda:"Atma-SemiBold",Yoruba:"Atma-SemiBold",Khmer:"Atma-SemiBold",Javanese:"Atma-SemiBold",Urdu:"Atma-SemiBold",Kinyarwanda:"Atma-SemiBold",Shona:"Atma-SemiBold",Kurdish:"Atma-SemiBold",French:"Atma-SemiBold",isiXhosa:"Atma-SemiBold",Afrikaans:"Atma-SemiBold",Nepali:"Atma-SemiBold",Ukrainian:"Atma-SemiBold",Hindi:"Atma-SemiBold",Tagalog:"Atma-SemiBold",Vietnamese:"Atma-SemiBold",Pashto:"Atma-SemiBold",Twi:"Atma-SemiBold",Arabic:"Atma-SemiBold"};class nt{audioContext;sourceNode;audioQueue;promptAudioBuffer;clickSoundBuffer;static audioBuffers=new Map;audioSourcs=[];isClickSoundLoaded;constructor(){this.audioContext=st.getAudioContext(),this.sourceNode=null,this.audioQueue=[],this.clickSoundBuffer=null,this.isClickSoundLoaded=!1}async playButtonClickSound(){const t="./assets/audios/ButtonClick.mp3";if(!this.isClickSoundLoaded)try{this.clickSoundBuffer=await this.loadAndDecodeAudio(t),nt.audioBuffers.set(t,this.clickSoundBuffer),this.isClickSoundLoaded=!0}catch(t){return void console.error("Error loading or decoding click sound:",t)}if(this.clickSoundBuffer){const t=this.audioContext.createBufferSource();t.buffer=this.clickSoundBuffer,t.connect(this.audioContext.destination),t.start()}else console.error("Click sound buffer is not available.")}async loadAndDecodeAudio(t){return new Promise((async(e,i)=>{try{const i=await fetch(t),n=await i.arrayBuffer();e(await this.audioContext.decodeAudioData(n))}catch(t){console.error("Error loading or decoding audio:",t),i(t)}}))}async preloadPromptAudio(t){const e=await this.loadAndDecodeAudio(t);e&&(this.promptAudioBuffer=e)}async preloadGameAudio(t){if(nt.audioBuffers.has(t))return;const e=await this.loadAndDecodeAudio(t);e&&nt.audioBuffers.set(t,e)}playAudio(t){const e=nt.audioBuffers.get(t);if(e){const t=this.audioContext.createBufferSource();t.buffer=e,t.connect(this.audioContext.destination),this.audioSourcs.push(t),t.start()}}playFeedbackAudios=(t=!1,...e)=>{e.length>0&&(this.audioQueue=e,this.playFetch(0,t))};playPromptAudio=t=>{if(this.promptAudioBuffer){const t=this.audioContext.createBufferSource();t.buffer=this.promptAudioBuffer,t.connect(this.audioContext.destination),this.audioSourcs.push(t),t.start()}};stopFeedbackAudio=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[]};stopAllAudios=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[],this.audioSourcs.forEach((t=>{t.stop()})),this.audioSourcs=[]};playFetch=(t,e)=>{t>=this.audioQueue.length?this.stopFeedbackAudio():this.audioQueue[t]&&fetch(this.audioQueue[t]).then((t=>t.arrayBuffer())).then((i=>{this.audioContext?.decodeAudioData(i,(i=>{this.sourceNode=this.audioContext?.createBufferSource(),this.sourceNode.buffer=i,this.sourceNode.connect(this.audioContext?.destination),this.sourceNode.loop=e,this.sourceNode.onended=()=>this.handleAudioEnded(t,e),this.sourceNode.start()}))}))};handleAudioEnded=(t,e)=>{this.sourceNode&&(this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.disconnect(),this.sourceNode=null),this.playFetch(t+1,e)}}class st{static instance=null;static getAudioContext(){return st.instance||(st.instance=new(window.AudioContext||window.webkitAudioContext)),st.instance}}class at{id;element;audioPlayer;clickListener;constructor(t){this.id=t.id,this.audioPlayer=new nt;const e=document.getElementById(t.id);e?this.element=e:(this.element=this.createButtonElement(t),this.injectButtonIntoTarget(t.targetId||"game-control")),t.onClick&&this.onClick(t.onClick)}onClick(t){this.clickListener=e=>{e.preventDefault(),this.element.hasAttribute("disabled")||(this.audioPlayer&&this.audioPlayer.playButtonClickSound(),this.element.style.transform="scale(0.90)",setTimeout((()=>{this.element.style.transform="scale(1)"}),100),t())},this.element.addEventListener("click",this.clickListener)}createButtonElement({id:t,className:e="",imageSrc:i,imageAlt:n="Button Image"}){const s=document.createElement("div");return s.innerHTML=`\n      <button id="${t}" class="dynamic-button ${e}">\n        ${i?`<img src="${i}" alt="${n}" class="button-image" />`:""}\n      </button>\n    `,s.firstElementChild}injectButtonIntoTarget(t){const e=document.getElementById(t);e&&e.appendChild(this.element)}setDisabled(t){t?(this.element.setAttribute("disabled","true"),this.element.classList.add("disabled")):(this.element.removeAttribute("disabled"),this.element.classList.remove("disabled"))}dispose(){this.clickListener&&(this.element.removeEventListener("click",this.clickListener),this.clickListener=null),this.audioPlayer=null}getElement(){return this.element}destroy(){const t=document.getElementById(this.id);t&&t.remove()}}class rt extends at{constructor(t={}){super({id:t.id||"pause-button",className:t.className||"pause-button-image",imageSrc:"./assets/images/pause_v01.webp",imageAlt:t.imageAlt||"Pause Icon",targetId:t.targetId||"game-control",...t})}}class ot{handler;stoneDropCallbackHandler;loadPuzzleCallbackHandler;constructor(t){this.handler=t,this.stoneDropCallbackHandler=t.stoneDropCallbackHandler,this.loadPuzzleCallbackHandler=t.loadPuzzleCallbackHandler,document.addEventListener(U,this.handleStoneDroppedEvent,!1),document.addEventListener(V,this.handleLoadPuzzleEvent,!1)}handleStoneDroppedEvent=t=>{this.stoneDropCallbackHandler(t)};handleLoadPuzzleEvent=t=>{this.loadPuzzleCallbackHandler(t)};unregisterEventListener=()=>{document.removeEventListener(U,this.handleStoneDroppedEvent,!1),document.removeEventListener(V,this.handleLoadPuzzleEvent,!1)}}class lt{options;isRendered=!1;id;template;shouldSanitize;constructor(t,e,i,n=!1){this.options=t,this.id=e,this.template=i,this.shouldSanitize=n,this._init()}_init(){this.shouldSanitize&&this.sanitizeElement(),this.render()}render(){if(this.isRendered)return;const{root:t}=this.options.selectors,e=document.querySelector(t),i=this.template(this.id);e&&e.insertAdjacentHTML("beforeend",i),this.isRendered=!0}getElements(t){return document.querySelectorAll(t)}sanitizeElement(){const t=document.querySelectorAll(`#${this.id}`);t.length&&t.forEach((t=>{t.remove()}))}destroy(){const t=document.getElementById(this.id);t&&t.remove(),this.isRendered=!1}}var ct=i(72),ht=i.n(ct),ut=i(825),dt=i.n(ut),pt=i(659),mt=i.n(pt),ft=i(56),gt=i.n(ft),vt=i(540),bt=i.n(vt),yt=i(113),wt=i.n(yt),St=i(632),Et={};Et.styleTagTransform=wt(),Et.setAttributes=gt(),Et.insert=mt().bind(null,"head"),Et.domAPI=dt(),Et.insertStyleElement=bt();ht()(St.A,Et);St.A&&St.A.locals&&St.A.locals;const Tt={root:".game-control",bars:".bar-level"},xt=t=>`\n    <div id="${t}" class="level_content-wrapper">\n        <img class="level-background" src="./assets/images/levels_v01.webp"/>\n        <div class="bar-level-wrapper">\n           ${Array(5).fill('<img class="bar-level" src="./assets/images/bar_empty_v01.webp" alt="bar" />').join("")}\n        </div>\n    </div>\n  `;class _t extends lt{constructor(t="level-field",e={selectors:Tt}){super(e,t,xt)}updateLevel(t){const e=t-1;if(e<0)return;const{bars:i}=this.options.selectors,n=this.getElements(i);n.length&&n[e]&&(n[e].src="./assets/images/bar_full_v01.webp")}}class At extends ot{levelBarIndicator;constructor(){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.levelBarIndicator=new _t}setIndicators(t){this.levelBarIndicator.updateLevel(t)}addDropStoneEvent(){document.addEventListener("dropstone",(t=>{this.setIndicators(2)}))}dispose(){this.unregisterEventListener(),this.levelBarIndicator.destroy()}handleStoneDrop(t){}handleLoadPuzzle(t){this.setIndicators(t.detail.counter)}}class Ct extends ot{width;height;levelData;currentPromptText;currentPuzzleData;canavsElement;context;prompt_image;targetStones;rightToLeft;imagesLoaded=!1;audioPlayer;isStoneDropped=!1;droppedStones=0;droppedStoneCount=0;time=0;promptImageWidth=0;isAppForeground=!0;scale=1;isScalingUp=!0;scaleFactor=5e-4;promptImageHeight=0;promptPlayButton;constructor(t,e,i,n,s){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.width=t,this.height=e,this.levelData=n,this.rightToLeft=s,this.currentPromptText=i.prompt.promptText,this.currentPuzzleData=i,this.targetStones=this.currentPuzzleData.targetStones,this.canavsElement=document.getElementById("canvas"),this.context=this.canavsElement.getContext("2d"),this.audioPlayer=new nt,this.audioPlayer.preloadPromptAudio(this.getPromptAudioUrl()),this.prompt_image=new Image,this.promptPlayButton=new Image,this.loadImages(),this.time=0,this.promptImageWidth=.65*this.width,this.promptImageHeight=.3*this.height,document.addEventListener(H,this.handleVisibilityChange,!1)}handleMouseDown=t=>{const e=document.getElementById("canvas");t.preventDefault();var i=e.getBoundingClientRect();const n=t.clientX-i.left,s=t.clientY-i.top;this.onClick(n,s)&&this.playSound()};getPromptAudioUrl=()=>n.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio);playSound=()=>{this.isAppForeground&&this.audioPlayer.playPromptAudio(n.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio))};onClick(t,e){return Math.sqrt(t-this.width/3)<12&&Math.sqrt(e-this.height/5.5)<10}setCurrrentPuzzleData(t){this.currentPuzzleData=t,this.currentPromptText=t.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones}drawRTLLang(){var t=this.width/2;const e=.26*this.height;this.context.textAlign="center";var i=this.calculateFont();const n=this.promptImageWidth,s=this.promptImageHeight;if(this.context.font=`${i}px ${F}, monospace`,"LetterInWord"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){var a=this.currentPromptText.replace(new RegExp(this.currentPuzzleData.targetStones[0],"g"),"");this.context.fillStyle="red",this.context.fillText(this.targetStones[0],t+this.context.measureText(a).width/2,e),this.context.fillStyle="black",this.context.fillText(a,t-this.context.measureText(this.targetStones[0]).width/2,e)}else this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.15,n/4,s/4);else if("Word"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){t-=.5*this.context.measureText(this.currentPromptText).width;for(let i=this.targetStones.length-1;i>=0;i--)this.droppedStones>i||null==this.droppedStones?(this.context.fillStyle="black",this.context.fillText(this.targetStones[i],t,e)):(this.context.fillStyle="red",this.context.fillText(this.targetStones[i],t,e)),t=t+this.context.measureText(this.targetStones[i]).width+5}else this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.15,n/4,s/4);else if("audioPlayerWord"==this.levelData.levelMeta.levelType){const t=1.25*(this.width-n),e=.33*(this.height-s);this.context.drawImage(this.promptPlayButton,t,e,n/4,s/4)}else"Visible"==this.levelData.levelMeta.protoType?(this.context.fillStyle="black",this.context.fillText(this.currentPromptText,t,e)):this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.15,n/4,s/4)}drawOthers(){const t=this.currentPromptText.split(""),e=(this.width,.28*this.height),i=this.promptImageWidth,n=this.promptImageHeight;var s=this.calculateFont();this.context.font=`${s}px ${F}, monospace`;let a=this.width/2-this.context.measureText(this.currentPromptText).width/2,r=0;var o=this.currentPuzzleData.targetStones[0],l=this.currentPromptText.substring(0,this.currentPromptText.indexOf(o)),c=this.currentPromptText.substring(this.currentPromptText.indexOf(o)+o.length);"LetterInWord"===this.levelData.levelMeta.levelType&&"Visible"==this.levelData.levelMeta.protoType&&(l.length>0&&(this.context.fillStyle="black",this.context.fillText(l,a,e),r=(this.context.measureText(l).width+this.context.measureText(o).width)/2,a+=r),o.length>0&&(this.context.fillStyle="red",this.context.fillText(o,a,e),r=(this.context.measureText(o).width+this.context.measureText(c).width)/2,a+=r),c.length>0&&(this.context.fillStyle="black",this.context.fillText(c,a,e)));for(let s=0;s<t.length;s++){switch(this.levelData.levelMeta.levelType){case"LetterInWord":break;case"Word":if("Visible"==this.levelData.levelMeta.protoType){if(this.targetStones.length!=this.currentPromptText.length){this.targetStones.length>s&&(this.context.fillStyle=this.droppedStoneCount>s||null==this.droppedStoneCount?"black":"red",this.context.fillText(this.targetStones[s],a+a/10,e));break}this.context.fillStyle=this.droppedStones>s||null==this.droppedStones?"black":"red",this.context.fillText(t[s],a,e);break}this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.25,i/4,n/4);case"SoundWord":this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.25,i/4,n/4);break;default:if("Visible"==this.levelData.levelMeta.protoType){this.context.fillStyle="black",this.context.fillText(this.currentPromptText,this.width/2.1,e);break}this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.25,i/4,n/4)}r=(this.context.measureText(t[s]).width+this.context.measureText(t[s+1]).width)/2,a+=r}}draw(t){if(this.updateScaling(),this.time=t<17?this.time+Math.floor(t):this.time+16,Math.floor(this.time)>=1910&&Math.floor(this.time)<=1926&&this.playSound(),!this.isStoneDropped){const t=this.promptImageWidth*this.scale,e=this.promptImageHeight*this.scale,i=(this.width-t)/2,n=(this.height-e)/5;this.context.drawImage(this.prompt_image,i,n,t,e),this.context.fillStyle="black",this.rightToLeft?this.drawRTLLang():this.drawOthers()}}handleStoneDrop(t){this.isStoneDropped=!0}handleLoadPuzzle(t){this.droppedStones=0,this.droppedStoneCount=0,this.currentPuzzleData=this.levelData.puzzles[t.detail.counter],this.currentPromptText=this.currentPuzzleData.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones,this.audioPlayer.preloadPromptAudio(this.getPromptAudioUrl()),this.isStoneDropped=!1,this.time=0}dispose(){document.removeEventListener(H,this.handleVisibilityChange,!1),this.unregisterEventListener()}droppedStoneIndex(t){this.droppedStones=t,this.droppedStoneCount++}calculateFont(){return this.promptImageWidth/this.currentPromptText.length>35?35:.65*this.width/this.currentPromptText.length}updateScaling(){this.isScalingUp?(this.scale+=this.scaleFactor,this.scale>=1.05&&(this.isScalingUp=!1)):(this.scale-=this.scaleFactor,this.scale<=1&&(this.scale=1,this.isScalingUp=!0))}handleVisibilityChange=()=>{"hidden"==document.visibilityState&&(this.audioPlayer.stopAllAudios(),this.isAppForeground=!1),"visible"==document.visibilityState&&(this.isAppForeground=!0)};async loadImages(){const t=this.loadImage(this.prompt_image,"./assets/images/promptTextBg.webp"),e=this.loadImage(this.promptPlayButton,"./assets/images/promptPlayButton.webp");await Promise.all([t,e]),this.imagesLoaded=!0}loadImage(t,e){return new Promise(((i,n)=>{t.onload=()=>{i()},t.src=e,t.onerror=t=>{n(t)}}))}}class It{subscribers;listenerIdCounter;constructor(){this.subscribers={},this.listenerIdCounter=0}checkSubscribers(){console.log("checkSubscribers ",this.subscribers)}subscribe(t,e){const i=this.listenerIdCounter++;return this.subscribers[t]||(this.subscribers[t]={}),this.subscribers[t][i]=e,()=>{this.unsubscribe(t,i)}}unsubscribe(t,e){this.subscribers[t]&&this.subscribers[t][e]&&delete this.subscribers[t][e]}publish(t,e){this.subscribers[t]&&Object.keys(this.subscribers[t]).forEach((i=>{this.subscribers[t][i]&&this.subscribers[t][i](e)}))}}const Pt=new class extends It{EVENTS;data;isGamePaused;gamePlayData;feedbackTexts;rightToLeft;majVersion;minVersion;monsterPhaseNumber;feedbackAudios;levelEndData;isLastLevel;currentMonsterPhase;constructor(){super(),this.EVENTS={SWITCH_SCENE_EVENT:"SWITCH_SCENE_EVENT",GAMEPLAY_DATA_EVENT:"GAMEPLAY_DATA_EVENT",GAME_PAUSE_STATUS_EVENT:"GAME_PAUSE_STATUS_EVENT",LEVEL_END_DATA_EVENT:"LEVEL_END_DATA_EVENT"},this.data=null,this.isGamePaused=!1,this.gamePlayData=null,this.feedbackAudios=null,this.feedbackTexts=null,this.rightToLeft=!1,this.majVersion=0,this.minVersion=0,this.initListeners(),this.levelEndData=null,this.isLastLevel=!1}initListeners(){this.subscribe(this.EVENTS.GAMEPLAY_DATA_EVENT,(t=>{this.gameStateGamePlayDataListener(t)})),this.subscribe(this.EVENTS.GAME_PAUSE_STATUS_EVENT,(t=>{this.updateGamePauseActivity(t)})),this.subscribe(this.EVENTS.LEVEL_END_DATA_EVENT,(t=>{this.levelEndSceneData(t)}))}gameStateGamePlayDataListener(t){this.gamePlayData=t,this.isGamePaused=!1}updateGamePauseActivity(t){this.isGamePaused=t}getFTMData(){return this.data}setDefaultGameStateValues(t){this.data=t,this.feedbackTexts=t.FeedbackTexts,this.feedbackAudios=t.FeedbackAudios,this.rightToLeft=t.rightToLeft,this.majVersion=t.majVersion,this.minVersion=t.minVersion,this.monsterPhaseNumber=this.checkMonsterPhaseUpdation()}getGamePlaySceneDetails(){const t=this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"";return{levelData:{...this.gamePlayData.currentLevelData},levelNumber:this.gamePlayData.selectedLevelNumber,feedBackTexts:{...this.feedbackTexts},rightToLeft:this?.rightToLeft,jsonVersionNumber:t,feedbackAudios:{...this.feedbackAudios},isGamePaused:this.isGamePaused,data:this.data,isLastLevel:this.isLastLevel,monsterPhaseNumber:this.monsterPhaseNumber}}levelEndSceneData({levelEndData:t,data:e}){this.levelEndData={...t},this.data=e,this.isLastLevel=t.currentLevel===e.levels[e.levels.length-1].levelMeta.levelNumber}getLevelEndSceneData(){return{starCount:this.levelEndData.starCount,currentLevel:this.levelEndData.currentLevel,isTimerEnded:this.levelEndData.isTimerEnded,data:this.data,monsterPhaseNumber:this.monsterPhaseNumber}}getTotalStars(){return et.getTotalStarCount()}checkMonsterPhaseUpdation(){const t=this.getTotalStars();switch(!0){case t>=38:return 2;case t>=8:return 1;default:return 0}}updateMonsterPhaseState(t){this.monsterPhaseNumber=t}};class Lt extends ot{offsetCoordinateValue;context;canvas;currentPuzzleData;targetStones;stonePos;pickedStone;foilStones=new Array;answer="";puzzleNumber;levelData;correctAnswer;puzzleStartTime;showTutorial=null==et.getDatafromStorage().length;correctStoneAudio;tutorial;correctTargetStone;stonebg;audioPlayer;feedbackAudios;timerTickingInstance;isGamePaused=!1;unsubscribeEvent;constructor(t,e,i,n,s,a){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.cleanup(),this.offsetCoordinateValue=32,this.context=t,this.canvas=e,this.puzzleNumber=i,this.levelData=n,this.setTargetStone(this.puzzleNumber),this.stonePos=this.getRandomizedStonePositions(e.width,e.height),this.correctStoneAudio=new Audio("assets/audios/CorrectStoneFinal.mp3"),this.correctStoneAudio.loop=!1,this.feedbackAudios=this.convertFeedBackAudiosToList(s),this.puzzleStartTime=new Date,this.tutorial=new kt(t,e.width,e.height,i),this.stonebg=new Image,this.stonebg.src="./assets/images/stone_pink.webp",this.audioPlayer=new nt,this.stonebg.onload=t=>{this.createStones(this.stonebg)},this.audioPlayer=new nt,this.timerTickingInstance=a,document.addEventListener(H,this.handleVisibilityChange,!1),this.unsubscribeEvent=Pt.subscribe(Pt.EVENTS.GAME_PAUSE_STATUS_EVENT,(t=>{this.isGamePaused=t}))}shuffleArray(t){const e=[...t];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}createStones(e){this.disposeStones();const i=new Map,n=this.getFoilStones(),s=this.shuffleArray(this.stonePos);for(let a=0;a<n.length;a++){const r=new t(this.context,this.canvas.width,this.canvas.height,n[a],s[a][0],s[a][1],e,this.timerTickingInstance,null);r.initialize(),i.set(n[a],r),this.foilStones.push(r)}}draw(t){if(0===this.foilStones.length)return;let e=!0;const i=this.foilStones.filter((t=>t&&!t.isDisposed));for(const n of i)n.frame<100&&(e=!1),n.draw(t);e&&!this.isGamePaused&&this.timerTickingInstance.update(t)}drawWordPuzzleLetters(t,e,i){for(let n=0;n<this.foilStones.length;n++)e(n)&&this.foilStones[n].draw(t,Object.keys(i).length>1&&void 0!==i[n]);this.foilStones.length>0&&this.foilStones[this.foilStones.length-1].frame>=100&&!this.isGamePaused&&this.timerTickingInstance.update(t)}setTargetStone(t){this.currentPuzzleData=this.levelData.puzzles[t],this.targetStones=[...this.currentPuzzleData.targetStones],this.correctTargetStone=this.targetStones.join("")}handleStoneDrop(t){this.disposeStones()}handleLoadPuzzle(t){this.disposeStones(),this.tutorial.setPuzzleNumber(t.detail.counter),this.puzzleNumber=t.detail.counter,this.setTargetStone(this.puzzleNumber),this.createStones(this.stonebg)}dispose(){this.unsubscribeEvent(),document.removeEventListener(H,this.handleVisibilityChange,!1),this.unregisterEventListener()}isStoneLetterDropCorrect(t,e,i=!1){const n=i?t==this.correctTargetStone.substring(0,t.length):t==this.correctTargetStone;return this.processLetterDropFeedbackAudio(e,n,i,t),n}processLetterDropFeedbackAudio(t,e,i,n){if(e){(i?n===this.getCorrectTargetStone():e)?this.playCorrectAnswerFeedbackSound(t):this.audioPlayer.playFeedbackAudios(!1,u,d(2))}else this.audioPlayer.playFeedbackAudios(!1,u,"./assets/audios/MonsterSpit.mp3",Math.round(Math.random())>0?"./assets/audios/Disapointed-05.mp3":null)}getCorrectTargetStone(){return this.correctTargetStone}getFoilStones(){this.currentPuzzleData.targetStones.forEach((t=>{const e=this.currentPuzzleData.foilStones.indexOf(t);-1!==e&&this.currentPuzzleData.foilStones.splice(e,1)}));const t=this.currentPuzzleData.targetStones.length+this.currentPuzzleData.foilStones.length;if(t>8){const e=t-8;this.currentPuzzleData.foilStones.splice(0,e)}return this.currentPuzzleData.targetStones.forEach((t=>{this.currentPuzzleData.foilStones.push(t)})),this.currentPuzzleData.foilStones.sort((()=>Math.random()-.5))}disposeStones(){for(const t of this.foilStones)t&&!t.isDisposed&&t.dispose();this.foilStones=[]}handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),this.correctStoneAudio.pause()};convertFeedBackAudiosToList(t){return[t.fantastic,t.great,t.amazing]}async playCorrectAnswerFeedbackSound(t){try{this.disposeStones();const e=n.getRandomNumber(1,3).toString();await Promise.allSettled([this.correctStoneAudio.play(),this.audioPlayer.playFeedbackAudios(!1,u,d(e),"assets/audios/PointsAdd.wav",n.getConvertedDevProdURL(this.feedbackAudios[t]))])}catch(t){console.warn("Audio playback failed:",t)}}cleanup(){this.correctStoneAudio&&(this.correctStoneAudio.pause(),this.correctStoneAudio.src=""),this.disposeStones(),document.removeEventListener(H,this.handleVisibilityChange),this.unsubscribeEvent&&this.unsubscribeEvent()}resetStonePosition(t,e,i){const n=e,s=i;if(n&&s&&n.text&&"number"==typeof s.origx&&"number"==typeof s.origy){const e=50,i=t/2;n.x=n.text.length<=3&&s.origx<e&&s.origx<i?s.origx+25:s.origx,n.y=s.origy}return n}computeCursorDistance(t,e,i){return Math.sqrt((t-i.x)**2+(e-i.y)**2)}handlePickStoneUp(t,e){let i=null,n=0;for(let s of this.foilStones){if(this.computeCursorDistance(t,e,s)<=40){i=s,i.foilStoneIndex=n;break}n++}return i}handleHoveringToAnotherStone(t,e,i){let n=null,s=0;for(let a of this.foilStones){if(this.computeCursorDistance(t,e,a)<=40&&i(a.text,s)){n=a,n.foilStoneIndex=s;break}s++}return n}handleMovingStoneLetter(t,e,i){const n=t,s=this.canvas.getBoundingClientRect();return n.x=e-s.left,n.y=i-s.top,n}playDragAudioIfNecessary(t){t.frame>99&&this.audioPlayer.playAudio("./assets/audios/onDrag.mp3")}getRandomizedStonePositions(t,e){const i=(e,i)=>540>t?i:e;i(4.3,4.5),i(2,1.3),i(2.8,2.5),i(3,2.4);return[[5,1.9],[7,1.5],[i(4.3,4.5),2.28],[6.4,1.1],[i(1.2,1.5),1],[[2.3,1.9],1.5],[[i(2.8,2.2),2.1],2.4],[[i(4.5,3.2),1.5],1.8]].map(((i,n)=>{const s=i[0],a=i[1];let r=Array.isArray(s)?t/s[0]+t/s[1]:t/s,o=e/a;const l=n<4?25:0;return[r-this.offsetCoordinateValue+l,o-this.offsetCoordinateValue]})).sort((()=>Math.random()-.5))}}class kt{width;height;context;tutorialImg;imagesLoaded=!1;targetStonePositions;startx;starty;endx;endy;endTutorial=!1;puzzleNumber;playMnstrClkTtrlAnim=!0;totalTime=0;monsterStoneDifference=0;x;y;dx;dy;absdx;absdy;startRipple=!1;drawRipple;constructor(t,e,i,n){this.width=e,this.height=i,this.context=t,this.startx=0,this.starty=0,this.endx=this.width/2,this.endy=this.height/2,this.puzzleNumber=n>=0?n:null,this.tutorialImg=new Image,this.tutorialImg.src="./assets/images/tutorial_hand.webp",this.drawRipple=function(t){const e=t;if(!e)throw new Error("Canvas context is null");let i=0,n=0,s=10,a=10;return function(t,r,o){o&&(s=0,a=0),i=t,n=r,e.beginPath(),e.arc(i,n,s,0,2*Math.PI),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.closePath(),e.beginPath(),e.arc(i,n,a,0,2*Math.PI),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.closePath(),s+=.5,a+=.5,(s>=60||a>=60)&&(s=10,a=10)}}(this.context),this.tutorialImg.onload=()=>{this.imagesLoaded=!0}}updateTargetStonePositions(t){this.startx=t[0]-22,this.starty=t[1]-50,this.monsterStoneDifference=Math.sqrt((this.startx-this.endx)*(this.startx-this.endx)+(this.starty-this.endy)*(this.starty-this.endy)),this.animateImage()}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}setTutorialEnd(t){this.endTutorial=t}animateImage(){this.x=this.startx,this.y=this.starty,this.dx=(this.endx-this.startx)/5e3,this.dy=(this.endy-this.starty)/5e3,this.absdx=this.isMobile()?3*Math.abs(this.dx):Math.abs(this.dx),this.absdy=this.isMobile()?3*Math.abs(this.dy):Math.abs(this.dy),this.setTutorialEnd(!1)}draw(t,e,i){if(this.imagesLoaded&&!this.endTutorial&&this.shouldPlayTutorial()){this.x=this.dx>=0?this.x+this.absdx*t:this.x-this.absdx*t,this.y=this.dy>=0?this.y+this.absdy*t:this.y-this.absdy*t;const n=this.x-this.endx+this.absdx,s=this.y-this.endy+this.absdy;let a=100*Math.sqrt(n*n+s*s)/this.monsterStoneDifference;if(a<15)a>1?this.createHandScaleAnimation(t,this.endx,this.endy+30,!0):(this.x=this.startx,this.y=this.starty);else if(a>80)this.createHandScaleAnimation(t,this.startx+15,this.starty+10,!1);else{let t=this.context.globalAlpha;this.context.globalAlpha=.4,this.context.drawImage(e,this.x,this.y+20,i,i),this.context.globalAlpha=t,this.context.drawImage(this.tutorialImg,this.x+15,this.y+10)}}}createHandScaleAnimation(t,e,i,n){this.totalTime+=Math.floor(t);const s=this.sinusoidalInterpolation(this.totalTime,1,1.5,500),a=this.tutorialImg.width*s,r=this.tutorialImg.height*s;this.context.drawImage(this.tutorialImg,e,i,a,r),!n&&this.drawRipple(e+.02*this.width,i+this.tutorialImg.height/2,!1)}sinusoidalInterpolation(t,e,i,n){const s=(i-e)/2,a=Math.PI/n;return e+s*Math.sin(a*t)}clickOnMonsterTutorial(t){if(this.shouldPlayMonsterClickTutorialAnimation()){const e=2e3,i=this.height/1.9+this.tutorialImg.height/.8,n=this.height/1.9+this.tutorialImg.height/.8-this.tutorialImg.height;let s;const a=this.endx;this.totalTime<e/2?(s=n+this.totalTime/(e/2)*(i-n),this.drawRipple(a,this.height/1.9+this.tutorialImg.height/1.5,!0)):(s=i-(this.totalTime-e/2)/(e/2)*(i-n),this.drawRipple(a,this.height/1.9+this.tutorialImg.height/1.2+this.tutorialImg.height)),this.context.drawImage(this.tutorialImg,a,s,this.tutorialImg.width,this.tutorialImg.height),s<=n&&(this.totalTime=0),this.totalTime+=t}}shouldPlayTutorial(){return et.getAllGameLevelInfo().length<=0&&0==this.puzzleNumber}shouldPlayMonsterClickTutorialAnimation(){return et.getAllGameLevelInfo().length<=0&&this.playMnstrClkTtrlAnim}setPuzzleNumber(t){this.puzzleNumber=t}setPlayMonsterClickAnimation(t){this.playMnstrClkTtrlAnim=t}}class Dt{element;constructor(t){this.element=document.getElementById(t)}setClassName(t){this.element&&(this.element.className="",this.element.classList.add(t))}createElementWithImage(t,e,i,n){const s=document.createElement("div");s.className=t;const a=document.createElement("img");return a.src=e,a.alt=i,a.id=n,s.appendChild(a),s}}class Mt extends Dt{constructor(){super("background")}generateBackground(t){const e=document.getElementById("background-elements");if(!e)return;const i=this.getAssetsForSeason(t);this.clearBackgroundContent();const n=this.createBackgroundSection(t,i);e.appendChild(n)}static createBackgroundComponent(t){const e=["summer","autumn","winter"],i=Math.floor(t/10)%e.length,n=t>=30?e[i%3]:e[i];return this.updateBackgroundClass(n),n}createBackgroundGameplay(t){const e=document.getElementById("background-elements");if(!e)return;const i=this.getAssetsForSeason(t),n=document.createElement("div");n.className=`${t}-section`;const s=this.createElementWithImage("ftm-mountain",i.hill,"Hill","hill-img"),a=this.createElementWithImage("ftm-fence",i.fence,"Fence","fence-img"),r=this.createElementWithImage("ftm-totem",i.totem,"Totem","totem-img");n.append(s,a,r),e.appendChild(n)}getAssetsForSeason(t){switch(t){case"summer":return{hill:E.ASSETS_PATH_HILL,fence:E.ASSETS_PATH_FENCE,totem:E.ASSETS_PATH_TOTEM};case"autumn":return{hill:T.AUTUMN_HILL_1,fence:T.AUTUMN_FENCE_1,totem:T.AUTUMN_SIGN_1};case"winter":return{hill:x.WINTER_HILL_1,fence:x.WINTER_FENCE_1,totem:x.WINTER_SIGN_1};default:throw new Error("Unknown season: "+t)}}clearBackgroundContent(){const t=document.getElementById("background-elements");t&&(t.innerHTML="")}createBackgroundSection(t,e){const i=document.createElement("div");i.className=t;const n=this.createElementWithImage("ftm-mountain",e.hill,"Hill","hill-img"),s=this.createElementWithImage("ftm-fence",e.fence,"Fence","fence-img"),a=this.createElementWithImage("ftm-totem",e.totem,"Totem","totem-img");return i.append(n,s,a),i}static updateBackgroundClass(t){const e=document.getElementById("background"),i=`${t}-bg`;e&&e.className!==i&&(e.className=i)}}class Bt{feedbackTextElement;hideTimeoutId;constructor(){this.feedbackTextElement=document.getElementById("feedback-text"),this.hideTimeoutId=null,this.initialize()}initialize(){this.isFeedbackElementAvailable()}isFeedbackElementAvailable(){return!!this.feedbackTextElement}wrapText(t){this.isFeedbackElementAvailable()&&(this.feedbackTextElement.textContent=t,o(!1,this.feedbackTextElement))}hideText(){this.isFeedbackElementAvailable()&&o(!0,this.feedbackTextElement)}}const zt=new class extends It{EVENTS;clickTrailToggle;devicePixelRatio;constructor(){super(),this.EVENTS={GAME_TRAIL_EFFECT_TOGGLE_EVENT:"GAME_TRAIL_EFFECT_TOGGLE_EVENT"},this.clickTrailToggle=!1,this.devicePixelRatio=window.devicePixelRatio||1,this.initListeners()}initListeners(){this.subscribe(this.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,(t=>{this.updateGameTrailToggle(t)}))}updateGameTrailToggle(t){this.clickTrailToggle=t}getCanvasSizeValues(){const t=document.getElementById("canvas"),e=document.getElementById("loading");return e.width=t.width,e.height=t.height,{canvasElem:t,canvasWidth:t.width,canvasHeight:t.height,context:t.getContext("2d"),gameCanvasContext:t.getContext("2d",{willReadFrequently:!0}),loadingCanvas:e,loadingContext:e.getContext("2d"),gameControlElem:document.getElementById("game-control")}}getRiveCanvasValue(){const t=document.getElementById("rivecanvas");return t.width=t.clientWidth*this.devicePixelRatio,t.height=t.clientHeight*this.devicePixelRatio,t}getDevicePixelRatioValue(){return this.devicePixelRatio}};class Nt{ctx;particles;mouse;isDiamond;clickTrailToggle;unsubscribeEvent;constructor(t){this.ctx=t.getContext("2d"),this.particles=[],this.mouse={x:void 0,y:void 0},this.isDiamond=!1,this.clickTrailToggle=!1,this.init()}init(){this.draw(),this.unsubscribeEvent=zt.subscribe(zt.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,(t=>{this.clickTrailToggle=t}))}draw(){this.drawTrail();let t=[];for(let e=0;e<this.particles.length;e++)this.particles[e].time<=this.particles[e].ttl&&t.push(this.particles[e]);this.particles=t}drawTrail(){for(let t=0;t<this.particles.length;t++)this.particles[t].update(),this.isDiamond=!this.isDiamond,this.particles[t].draw(this.isDiamond)}addTrailParticlesOnMove(t,e){this.clickTrailToggle&&(this.mouse.x=t,this.mouse.y=e,this.particles.push(new Rt(this.ctx,this.mouse)))}resetParticles(){this.mouse.x=void 0,this.mouse.y=void 0}clearTrailSubscription(){this.unsubscribeEvent()}}class Rt{ctx;start;end;size;style;time;ttl;x;y;rgb;hyp;starX;starY;starAngle;constructor(t,e){const i=this.determineValueByScreenWidth(30,15),n=this.determineValueByScreenWidth(30,15),s=this.determineValueByScreenWidth(3,.5),a=this.determineValueByScreenWidth(2,.5);this.ctx=t,this.rgb=["rgb(255,255,255)","rgb(249,217,170)","rgb(244,182,81)","rgb(244,159,34)"],this.start={x:e.x+this.getRandomInt(-i,i),y:e.y+this.getRandomInt(-n,n),size:this.determineValueByScreenWidth(3,2)},this.end={x:this.start.x+this.getRandomInt(-s,s),y:this.start.y+this.getRandomInt(-a,a)},this.x=this.start.x,this.y=this.start.y,this.size=this.start.size,this.style=this.rgb[this.getRandomInt(0,this.rgb.length-1)],this.time=0,this.ttl=75,this.hyp=0,this.starX=0,this.starY=0,this.starAngle=0}determineValueByScreenWidth(t,e){return window.screen.width>768?t:e}update(){if(this.time<=this.ttl){const t=1-(this.ttl-this.time)/this.ttl;this.size=this.start.size*(1-this.easeOutQuart(t)),this.x=this.x+.01*(this.end.x-this.x),this.y=this.y+.01*(this.end.y-this.y)}this.time++}draw(t){t?this.starParticle():this.circleParticle()}circleParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill()}starParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y-this.size),this.ctx.lineTo(this.x+this.size,this.y),this.ctx.lineTo(this.x,this.y+this.size),this.ctx.lineTo(this.x-this.size,this.y),this.ctx.closePath(),this.ctx.fill()}getRandomInt(t,e){return Math.round(Math.random()*(e-t))+t}easeOutQuart(t){return 1-Math.pow(1-t,4)}}var Ot=i(278),Ft={};Ft.styleTagTransform=wt(),Ft.setAttributes=gt(),Ft.insert=mt().bind(null,"head"),Ft.domAPI=dt(),Ft.insertStyleElement=bt();ht()(Ot.A,Ft);Ot.A&&Ot.A.locals&&Ot.A.locals;const jt={root:"#background"},Vt=t=>`\n  <div id="${t}" class="timer-ticking-wrapper">\n    <img id="timer-empty" class="timer-empty" src="${y}" alt="Timer Empty" />\n    <img id="rotating-clock" class="rotating-clock" src="${w}" alt="Rotating Clock" />\n    <div id="timer-full-container" class="timer-full-container">\n      <div class="timer-mask"></div>\n    </div>\n  </div>\n`;class Ut extends lt{constructor(t="timer-html-component",e={selectors:jt}){super(e,t,Vt),this.render()}}class Wt extends ot{width;height;timerWidth;timerHeight;widthToClear;timer;isTimerStarted;isTimerEnded;isTimerRunningOut;timer_full;pauseButtonClicked;images;loadedImages;callback;imagesLoaded=!1;startMyTimer=!0;isMyTimerOver=!1;isStoneDropped=!1;audioPlayer;playLevelEndAudioOnce=!0;timerFullContainer=null;timerHtmlComponent;constructor(t,e,i){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.width=t,this.height=e,this.widthToClear=this.width/3.4,this.callback=i,this.timer=0,this.isTimerStarted=!1,this.isTimerEnded=!1,this.isTimerRunningOut=!1,this.audioPlayer=new nt,this.playLevelEndAudioOnce=!0,this.images={timer_empty:y,rotating_clock:w,timer_full:"./assets/images/timer_full.png"},this.timerHtmlComponent=new Ut("timer-ticking"),setTimeout((()=>{this.timerFullContainer=document.getElementById("timer-full-container"),this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}),0),s(this.images,(t=>{this.loadedImages=Object.assign({},t),this.imagesLoaded=!0})),this.timerFullContainer=this.getTimerFullContainer()}startTimer(){this.readyTimer(),this.startMyTimer=!0,this.isMyTimerOver=!1}readyTimer(){this.timer=0,this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}update(t){if(this.startMyTimer&&!this.isStoneDropped){this.timer+=.008*t;const e=Math.max(0,100-this.timer);this.timerFullContainer.style.width=`${e}%`,e<10&&!this.isMyTimerOver&&(this.playLevelEndAudioOnce&&this.audioPlayer.playAudio("./assets/audios/timeout.mp3"),this.playLevelEndAudioOnce=!1),e<=0&&!this.isMyTimerOver&&(this.isMyTimerOver=!0,this.callback(!0))}}getTimerFullContainer(){return document.getElementById("timer-full-container")}stopTimer(){this.isTimerRunningOut=!1}handleStoneDrop(t){this.isStoneDropped=!0}handleLoadPuzzle(t){this.playLevelEndAudioOnce=!0,this.isStoneDropped=!1,this.startTimer()}destroy(){this.stopTimer(),this.timerHtmlComponent?.destroy()}}const Ht=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=63&s|128):55296==(64512&s)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++n)),e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=63&s|128):(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=63&s|128)}return e},$t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let e=0;e<t.length;e+=3){const s=t[e],a=e+1<t.length,r=a?t[e+1]:0,o=e+2<t.length,l=o?t[e+2]:0,c=s>>2,h=(3&s)<<4|r>>4;let u=(15&r)<<2|l>>6,d=63&l;o||(d=64,a||(u=64)),n.push(i[c],i[h],i[u],i[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ht(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let i=0,n=0;for(;i<t.length;){const s=t[i++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[i++];e[n++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(1023&a))}else{const a=t[i++],r=t[i++];e[n++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&r)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){const s=i[t.charAt(e++)],a=e<t.length?i[t.charAt(e)]:0;++e;const r=e<t.length?i[t.charAt(e)]:64;++e;const o=e<t.length?i[t.charAt(e)]:64;if(++e,null==s||null==a||null==r||null==o)throw new Gt;const l=s<<2|a>>4;if(n.push(l),64!==r){const t=a<<4&240|r>>2;if(n.push(t),64!==o){const t=r<<6&192|o;n.push(t)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Gt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xt=function(t){return function(t){const e=Ht(t);return $t.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Yt=function(t){try{return $t.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const qt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Kt=()=>{try{return qt()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&Yt(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Jt=()=>{var t;return null===(t=Kt())||void 0===t?void 0:t.config};class Qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,i))}}}function Zt(){try{return"object"==typeof indexedDB}catch(t){return!1}}function te(){return new Promise(((t,e)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{i=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class ee extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ie.prototype.create)}}class ie{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},n=`${this.service}/${t}`,s=this.errors[t],a=s?function(t,e){return t.replace(ne,((t,i)=>{const n=e[i];return null!=n?String(n):`<${i}?>`}))}(s,i):"Error",r=`${this.serviceName}: ${a} (${n}).`;return new ee(n,r,i)}}const ne=/\{\$([^}]+)}/g;function se(t,e){if(t===e)return!0;const i=Object.keys(t),n=Object.keys(e);for(const s of i){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(ae(i)&&ae(a)){if(!se(i,a))return!1}else if(i!==a)return!1}for(const t of n)if(!i.includes(t))return!1;return!0}function ae(t){return null!==t&&"object"==typeof t}const re=1e3,oe=2,le=144e5,ce=.5;function he(t,e=re,i=oe){const n=e*Math.pow(i,t),s=Math.round(ce*n*(Math.random()-.5)*2);return Math.min(le,n+s)}function ue(t){return t&&t._delegate?t._delegate:t}class de{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const pe="[DEFAULT]";class me{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new Qt;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&t.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),n=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(n)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});e.resolve(t)}catch(t){}}}}clearInstance(t=pe){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=pe){return this.instances.has(t)}getOptions(t=pe){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[t,e]of this.instancesDeferred.entries()){i===this.normalizeInstanceIdentifier(t)&&e.resolve(n)}return n}onInit(t,e){var i;const n=this.normalizeInstanceIdentifier(e),s=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;s.add(t),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&t(a,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const n of i)try{n(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=t,n===pe?void 0:n),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(t){}var n;return i||null}normalizeInstanceIdentifier(t=pe){return this.component?this.component.multipleInstances?t:pe:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new me(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const ge=[];var ve;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ve||(ve={}));const be={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},ye=ve.INFO,we={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},Se=(t,e,...i)=>{if(e<t.logLevel)return;const n=(new Date).toISOString(),s=we[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${n}]  ${t.name}:`,...i)};class Ee{constructor(t){this.name=t,this._logLevel=ye,this._logHandler=Se,this._userLogHandler=null,ge.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ve))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?be[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...t),this._logHandler(this,ve.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...t),this._logHandler(this,ve.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...t),this._logHandler(this,ve.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...t),this._logHandler(this,ve.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...t),this._logHandler(this,ve.ERROR,...t)}}const Te=(t,e)=>e.some((e=>t instanceof e));let xe,_e;const Ae=new WeakMap,Ce=new WeakMap,Ie=new WeakMap,Pe=new WeakMap,Le=new WeakMap;let ke={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return Ce.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Ie.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Be(t[e])},set:(t,e,i)=>(t[e]=i,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function De(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(ze(this),e),Be(Ae.get(this))}:function(...e){return Be(t.apply(ze(this),e))}:function(e,...i){const n=t.call(ze(this),e,...i);return Ie.set(n,e.sort?e.sort():[e]),Be(n)}}function Me(t){return"function"==typeof t?De(t):(t instanceof IDBTransaction&&function(t){if(Ce.has(t))return;const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{e(),n()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)}));Ce.set(t,e)}(t),Te(t,xe||(xe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,ke):t)}function Be(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{e(Be(t.result)),n()},a=()=>{i(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",a)}));return e.then((e=>{e instanceof IDBCursor&&Ae.set(e,t)})).catch((()=>{})),Le.set(e,t),e}(t);if(Pe.has(t))return Pe.get(t);const e=Me(t);return e!==t&&(Pe.set(t,e),Le.set(e,t)),e}const ze=t=>Le.get(t);const Ne=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],Oe=new Map;function Fe(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Oe.get(e))return Oe.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,s=Re.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!Ne.includes(i))return;const a=async function(t,...e){const a=this.transaction(t,s?"readwrite":"readonly");let r=a.store;return n&&(r=r.index(e.shift())),(await Promise.all([r[i](...e),s&&a.done]))[0]};return Oe.set(e,a),a}ke=(t=>({...t,get:(e,i,n)=>Fe(e,i)||t.get(e,i,n),has:(e,i)=>!!Fe(e,i)||t.has(e,i)}))(ke);class je{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Ve="@firebase/app",Ue="0.9.15",We=new Ee("@firebase/app"),He="@firebase/app-compat",$e="@firebase/analytics-compat",Ge="@firebase/analytics",Xe="@firebase/app-check-compat",Ye="@firebase/app-check",qe="@firebase/auth",Ke="@firebase/auth-compat",Je="@firebase/database",Qe="@firebase/database-compat",Ze="@firebase/functions",ti="@firebase/functions-compat",ei="@firebase/installations",ii="@firebase/installations-compat",ni="@firebase/messaging",si="@firebase/messaging-compat",ai="@firebase/performance",ri="@firebase/performance-compat",oi="@firebase/remote-config",li="@firebase/remote-config-compat",ci="@firebase/storage",hi="@firebase/storage-compat",ui="@firebase/firestore",di="@firebase/firestore-compat",pi="firebase",mi="[DEFAULT]",fi={[Ve]:"fire-core",[He]:"fire-core-compat",[Ge]:"fire-analytics",[$e]:"fire-analytics-compat",[Ye]:"fire-app-check",[Xe]:"fire-app-check-compat",[qe]:"fire-auth",[Ke]:"fire-auth-compat",[Je]:"fire-rtdb",[Qe]:"fire-rtdb-compat",[Ze]:"fire-fn",[ti]:"fire-fn-compat",[ei]:"fire-iid",[ii]:"fire-iid-compat",[ni]:"fire-fcm",[si]:"fire-fcm-compat",[ai]:"fire-perf",[ri]:"fire-perf-compat",[oi]:"fire-rc",[li]:"fire-rc-compat",[ci]:"fire-gcs",[hi]:"fire-gcs-compat",[ui]:"fire-fst",[di]:"fire-fst-compat","fire-js":"fire-js",[pi]:"fire-js-all"},gi=new Map,vi=new Map;function bi(t,e){try{t.container.addComponent(e)}catch(i){We.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function yi(t){const e=t.name;if(vi.has(e))return We.debug(`There were multiple attempts to register component ${e}.`),!1;vi.set(e,t);for(const e of gi.values())bi(e,t);return!0}function wi(t,e){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}const Si=new ie("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ei{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new de("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}function Ti(t,e={}){let i=t;if("object"!=typeof e){e={name:e}}const n=Object.assign({name:mi,automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw Si.create("bad-app-name",{appName:String(s)});if(i||(i=Jt()),!i)throw Si.create("no-options");const a=gi.get(s);if(a){if(se(i,a.options)&&se(n,a.config))return a;throw Si.create("duplicate-app",{appName:s})}const r=new fe(s);for(const t of vi.values())r.addComponent(t);const o=new Ei(i,n,r);return gi.set(s,o),o}function xi(t,e,i){var n;let s=null!==(n=fi[t])&&void 0!==n?n:t;i&&(s+=`-${i}`);const a=s.match(/\s|\//),r=e.match(/\s|\//);if(a||r){const t=[`Unable to register library "${s}" with version "${e}":`];return a&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&r&&t.push("and"),r&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void We.warn(t.join(" "))}yi(new de(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}const _i="firebase-heartbeat-database",Ai=1,Ci="firebase-heartbeat-store";let Ii=null;function Pi(){return Ii||(Ii=function(t,e,{blocked:i,upgrade:n,blocking:s,terminated:a}={}){const r=indexedDB.open(t,e),o=Be(r);return n&&r.addEventListener("upgradeneeded",(t=>{n(Be(r.result),t.oldVersion,t.newVersion,Be(r.transaction),t)})),i&&r.addEventListener("blocked",(t=>i(t.oldVersion,t.newVersion,t))),o.then((t=>{a&&t.addEventListener("close",(()=>a())),s&&t.addEventListener("versionchange",(t=>s(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}(_i,Ai,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Ci)}}).catch((t=>{throw Si.create("idb-open",{originalErrorMessage:t.message})}))),Ii}async function Li(t,e){try{const i=(await Pi()).transaction(Ci,"readwrite"),n=i.objectStore(Ci);await n.put(e,ki(t)),await i.done}catch(t){if(t instanceof ee)We.warn(t.message);else{const e=Si.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});We.warn(e.message)}}}function ki(t){return`${t.name}!${t.options.appId}`}class Di{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Bi(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=Mi();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Mi(),{heartbeatsToSend:e,unsentEntries:i}=function(t,e=1024){const i=[];let n=t.slice();for(const s of t){const t=i.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),zi(i)>e){t.dates.pop();break}}else if(i.push({agent:s.agent,dates:[s.date]}),zi(i)>e){i.pop();break}n=n.slice(1)}return{heartbeatsToSend:i,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=Xt(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function Mi(){return(new Date).toISOString().substring(0,10)}class Bi{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Zt()&&te().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await Pi();return await e.transaction(Ci).objectStore(Ci).get(ki(t))}catch(t){if(t instanceof ee)We.warn(t.message);else{const e=Si.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});We.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return Li(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return Li(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}}}function zi(t){return Xt(JSON.stringify({version:2,heartbeats:t})).length}var Ni;Ni="",yi(new de("platform-logger",(t=>new je(t)),"PRIVATE")),yi(new de("heartbeat",(t=>new Di(t)),"PRIVATE")),xi(Ve,Ue,Ni),xi(Ve,Ue,"esm2017"),xi("fire-js","");xi("firebase","10.1.0","app");const Ri=(t,e)=>e.some((e=>t instanceof e));let Oi,Fi;const ji=new WeakMap,Vi=new WeakMap,Ui=new WeakMap,Wi=new WeakMap,Hi=new WeakMap;let $i={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return Vi.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Ui.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Yi(t[e])},set:(t,e,i)=>(t[e]=i,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Gi(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fi||(Fi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(qi(this),e),Yi(ji.get(this))}:function(...e){return Yi(t.apply(qi(this),e))}:function(e,...i){const n=t.call(qi(this),e,...i);return Ui.set(n,e.sort?e.sort():[e]),Yi(n)}}function Xi(t){return"function"==typeof t?Gi(t):(t instanceof IDBTransaction&&function(t){if(Vi.has(t))return;const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{e(),n()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)}));Vi.set(t,e)}(t),Ri(t,Oi||(Oi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,$i):t)}function Yi(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{e(Yi(t.result)),n()},a=()=>{i(t.error),n()};t.addEventListener("success",s),t.addEventListener("error",a)}));return e.then((e=>{e instanceof IDBCursor&&ji.set(e,t)})).catch((()=>{})),Hi.set(e,t),e}(t);if(Wi.has(t))return Wi.get(t);const e=Xi(t);return e!==t&&(Wi.set(t,e),Hi.set(e,t)),e}const qi=t=>Hi.get(t);const Ki=["get","getKey","getAll","getAllKeys","count"],Ji=["put","add","delete","clear"],Qi=new Map;function Zi(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Qi.get(e))return Qi.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,s=Ji.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!Ki.includes(i))return;const a=async function(t,...e){const a=this.transaction(t,s?"readwrite":"readonly");let r=a.store;return n&&(r=r.index(e.shift())),(await Promise.all([r[i](...e),s&&a.done]))[0]};return Qi.set(e,a),a}!function(t){$i=t($i)}((t=>({...t,get:(e,i,n)=>Zi(e,i)||t.get(e,i,n),has:(e,i)=>!!Zi(e,i)||t.has(e,i)})));const tn="@firebase/installations",en="0.6.4",nn=1e4,sn=`w:${en}`,an="FIS_v2",rn="https://firebaseinstallations.googleapis.com/v1",on=36e5,ln=new ie("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function cn(t){return t instanceof ee&&t.code.includes("request-failed")}function hn({projectId:t}){return`${rn}/projects/${t}/installations`}function un(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function dn(t,e){const i=(await e.json()).error;return ln.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function pn({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mn(t,{refreshToken:e}){const i=pn(t);return i.append("Authorization",function(t){return`${an} ${t}`}(e)),i}async function fn(t){const e=await t();return e.status>=500&&e.status<600?t():e}function gn(t){return new Promise((e=>{setTimeout(e,t)}))}const vn=/^[cdef][\w-]{21}$/,bn="";function yn(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(i=t,btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_"));var i;return e.substr(0,22)}(t);return vn.test(e)?e:bn}catch(t){return bn}}function wn(t){return`${t.appName}!${t.appId}`}const Sn=new Map;function En(t,e){const i=wn(t);Tn(i,e),function(t,e){const i=_n();i&&i.postMessage({key:t,fid:e});An()}(i,e)}function Tn(t,e){const i=Sn.get(t);if(i)for(const t of i)t(e)}let xn=null;function _n(){return!xn&&"BroadcastChannel"in self&&(xn=new BroadcastChannel("[Firebase] FID Change"),xn.onmessage=t=>{Tn(t.data.key,t.data.fid)}),xn}function An(){0===Sn.size&&xn&&(xn.close(),xn=null)}const Cn="firebase-installations-database",In=1,Pn="firebase-installations-store";let Ln=null;function kn(){return Ln||(Ln=function(t,e,{blocked:i,upgrade:n,blocking:s,terminated:a}={}){const r=indexedDB.open(t,e),o=Yi(r);return n&&r.addEventListener("upgradeneeded",(t=>{n(Yi(r.result),t.oldVersion,t.newVersion,Yi(r.transaction))})),i&&r.addEventListener("blocked",(()=>i())),o.then((t=>{a&&t.addEventListener("close",(()=>a())),s&&t.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),o}(Cn,In,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Pn)}})),Ln}async function Dn(t,e){const i=wn(t),n=(await kn()).transaction(Pn,"readwrite"),s=n.objectStore(Pn),a=await s.get(i);return await s.put(e,i),await n.done,a&&a.fid===e.fid||En(t,e.fid),e}async function Mn(t){const e=wn(t),i=(await kn()).transaction(Pn,"readwrite");await i.objectStore(Pn).delete(e),await i.done}async function Bn(t,e){const i=wn(t),n=(await kn()).transaction(Pn,"readwrite"),s=n.objectStore(Pn),a=await s.get(i),r=e(a);return void 0===r?await s.delete(i):await s.put(r,i),await n.done,!r||a&&a.fid===r.fid||En(t,r.fid),r}async function zn(t){let e;const i=await Bn(t.appConfig,(i=>{const n=function(t){const e=t||{fid:yn(),registrationStatus:0};return On(e)}(i),s=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(ln.create("app-offline"))}}const i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(t,e){try{const i=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:i}){const n=hn(t),s=pn(t),a=e.getImmediate({optional:!0});if(a){const t=await a.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const r={fid:i,authVersion:an,appId:t.appId,sdkVersion:sn},o={method:"POST",headers:s,body:JSON.stringify(r)},l=await fn((()=>fetch(n,o)));if(l.ok){const t=await l.json();return{fid:t.fid||i,registrationStatus:2,refreshToken:t.refreshToken,authToken:un(t.authToken)}}throw await dn("Create Installation",l)}(t,e);return Dn(t.appConfig,i)}catch(i){throw cn(i)&&409===i.customData.serverCode?await Mn(t.appConfig):await Dn(t.appConfig,{fid:e.fid,registrationStatus:0}),i}}(t,i);return{installationEntry:i,registrationPromise:n}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Nn(t)}:{installationEntry:e}}(t,n);return e=s.registrationPromise,s.installationEntry}));return i.fid===bn?{installationEntry:await e}:{installationEntry:i,registrationPromise:e}}async function Nn(t){let e=await Rn(t.appConfig);for(;1===e.registrationStatus;)await gn(100),e=await Rn(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:i}=await zn(t);return i||e}return e}function Rn(t){return Bn(t,(t=>{if(!t)throw ln.create("installation-not-found");return On(t)}))}function On(t){return 1===(e=t).registrationStatus&&e.registrationTime+nn<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Fn({appConfig:t,heartbeatServiceProvider:e},i){const n=function(t,{fid:e}){return`${hn(t)}/${e}/authTokens:generate`}(t,i),s=mn(t,i),a=e.getImmediate({optional:!0});if(a){const t=await a.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const r={installation:{sdkVersion:sn,appId:t.appId}},o={method:"POST",headers:s,body:JSON.stringify(r)},l=await fn((()=>fetch(n,o)));if(l.ok){return un(await l.json())}throw await dn("Generate Auth Token",l)}async function jn(t,e=!1){let i;const n=await Bn(t.appConfig,(n=>{if(!Un(n))throw ln.create("not-registered");const s=n.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+on}(t)}(s))return n;if(1===s.requestStatus)return i=async function(t,e){let i=await Vn(t.appConfig);for(;1===i.authToken.requestStatus;)await gn(100),i=await Vn(t.appConfig);const n=i.authToken;return 0===n.requestStatus?jn(t,e):n}(t,e),n;{if(!navigator.onLine)throw ln.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(n);return i=async function(t,e){try{const i=await Fn(t,e),n=Object.assign(Object.assign({},e),{authToken:i});return await Dn(t.appConfig,n),i}catch(i){if(!cn(i)||401!==i.customData.serverCode&&404!==i.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dn(t.appConfig,i)}else await Mn(t.appConfig);throw i}}(t,e),e}}));return i?await i:n.authToken}function Vn(t){return Bn(t,(t=>{if(!Un(t))throw ln.create("not-registered");const e=t.authToken;return 1===(i=e).requestStatus&&i.requestTime+nn<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var i}))}function Un(t){return void 0!==t&&2===t.registrationStatus}async function Wn(t,e=!1){const i=t;await async function(t){const{registrationPromise:e}=await zn(t);e&&await e}(i);return(await jn(i,e)).token}function Hn(t){return ln.create("missing-app-config-values",{valueName:t})}const $n="installations",Gn=t=>{const e=t.getProvider("app").getImmediate(),i=function(t){if(!t||!t.options)throw Hn("App Configuration");if(!t.name)throw Hn("App Name");const e=["projectId","apiKey","appId"];for(const i of e)if(!t.options[i])throw Hn(i);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:i,heartbeatServiceProvider:wi(e,"heartbeat"),_delete:()=>Promise.resolve()}},Xn=t=>{const e=wi(t.getProvider("app").getImmediate(),$n).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:i,registrationPromise:n}=await zn(e);return n?n.catch(console.error):jn(e).catch(console.error),i.fid}(e),getToken:t=>Wn(e,t)}};yi(new de($n,Gn,"PUBLIC")),yi(new de("installations-internal",Xn,"PRIVATE")),xi(tn,en),xi(tn,en,"esm2017");const Yn="analytics",qn="firebase_id",Kn="origin",Jn=6e4,Qn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zn="https://www.googletagmanager.com/gtag/js",ts=new Ee("@firebase/analytics"),es=new ie("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function is(t){if(!t.startsWith(Zn)){const e=es.create("invalid-gtag-resource",{gtagURL:t});return ts.warn(e.message),""}return t}function ns(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function ss(t,e){const i=function(t,e){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(t,e)),i}("firebase-js-sdk-policy",{createScriptURL:is}),n=document.createElement("script"),s=`${Zn}?l=${t}&id=${e}`;n.src=i?null==i?void 0:i.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function as(t,e,i,n){return async function(s,...a){try{if("event"===s){const[n,s]=a;await async function(t,e,i,n,s){try{let a=[];if(s&&s.send_to){let t=s.send_to;Array.isArray(t)||(t=[t]);const n=await ns(i);for(const i of t){const t=n.find((t=>t.measurementId===i)),s=t&&e[t.appId];if(!s){a=[];break}a.push(s)}}0===a.length&&(a=Object.values(e)),await Promise.all(a),t("event",n,s||{})}catch(t){ts.error(t)}}(t,e,i,n,s)}else if("config"===s){const[s,r]=a;await async function(t,e,i,n,s,a){const r=n[s];try{if(r)await e[r];else{const t=(await ns(i)).find((t=>t.measurementId===s));t&&await e[t.appId]}}catch(t){ts.error(t)}t("config",s,a)}(t,e,i,n,s,r)}else if("consent"===s){const[e]=a;t("consent","update",e)}else if("get"===s){const[e,i,n]=a;t("get",e,i,n)}else if("set"===s){const[e]=a;t("set",e)}else t(s,...a)}catch(t){ts.error(t)}}}const rs=30;const os=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function ls(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function cs(t,e=os,i){const{appId:n,apiKey:s,measurementId:a}=t.options;if(!n)throw es.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:n};throw es.create("no-api-key")}const r=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new us;return setTimeout((async()=>{o.abort()}),void 0!==i?i:Jn),hs({appId:n,apiKey:s,measurementId:a},r,o,e)}async function hs(t,{throttleEndTimeMillis:e,backoffCount:i},n,s=os){var a;const{appId:r,measurementId:o}=t;try{await function(t,e){return new Promise(((i,n)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(i,s);t.addEventListener((()=>{clearTimeout(a),n(es.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(n,e)}catch(t){if(o)return ts.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:r,measurementId:o};throw t}try{const e=await async function(t){var e;const{appId:i,apiKey:n}=t,s={method:"GET",headers:ls(n)},a=Qn.replace("{app-id}",i),r=await fetch(a,s);if(200!==r.status&&304!==r.status){let t="";try{const i=await r.json();(null===(e=i.error)||void 0===e?void 0:e.message)&&(t=i.error.message)}catch(t){}throw es.create("config-fetch-failed",{httpStatus:r.status,responseMessage:t})}return r.json()}(t);return s.deleteThrottleMetadata(r),e}catch(e){const l=e;if(!function(t){if(!(t instanceof ee&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(s.deleteThrottleMetadata(r),o)return ts.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:r,measurementId:o};throw e}const c=503===Number(null===(a=null==l?void 0:l.customData)||void 0===a?void 0:a.httpStatus)?he(i,s.intervalMillis,rs):he(i,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(r,h),ts.debug(`Calling attemptFetch again in ${c} millis`),hs(t,h,n,s)}}class us{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let ds,ps;function ms(t){ps=t}function fs(t){ds=t}async function gs(t,e,i,n,s,a,r){var o;const l=cs(t);l.then((e=>{i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ts.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>ts.error(t))),e.push(l);const c=async function(){if(!Zt())return ts.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await te()}catch(t){return ts.warn(es.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?n.getId():void 0)),[h,u]=await Promise.all([l,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const i of Object.values(e))if(i.src&&i.src.includes(Zn)&&i.src.includes(t))return i;return null})(a)||ss(a,h.measurementId),ps&&(s("consent","default",ps),ms(void 0)),s("js",new Date);const d=null!==(o=null==r?void 0:r.config)&&void 0!==o?o:{};return d[Kn]="firebase",d.update=!0,null!=u&&(d[qn]=u),s("config",h.measurementId,d),ds&&(s("set",ds),fs(void 0)),h.measurementId}class vs{constructor(t){this.app=t}_delete(){return delete bs[this.app.options.appId],Promise.resolve()}}let bs={},ys=[];const ws={};let Ss,Es,Ts="dataLayer",xs="gtag",_s=!1;function As(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),i=es.create("invalid-analytics-context",{errorInfo:e});ts.warn(i.message)}}function Cs(t,e,i){As();const n=t.options.appId;if(!n)throw es.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw es.create("no-api-key");ts.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bs[n])throw es.create("already-exists",{id:n});if(!_s){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Ts);const{wrappedGtag:t,gtagCore:e}=function(t,e,i,n,s){let a=function(...t){window[n].push(arguments)};return window[s]&&"function"==typeof window[s]&&(a=window[s]),window[s]=as(a,t,e,i),{gtagCore:a,wrappedGtag:window[s]}}(bs,ys,ws,Ts,xs);Es=t,Ss=e,_s=!0}bs[n]=gs(t,ys,ws,e,Ss,Ts,i);return new vs(t)}function Is(t=function(t=mi){const e=gi.get(t);if(!e&&t===mi&&Jt())return Ti();if(!e)throw Si.create("no-app",{appName:t});return e}()){const e=wi(t=ue(t),Yn);return e.isInitialized()?e.getImmediate():function(t,e={}){const i=wi(t,Yn);if(i.isInitialized()){const t=i.getImmediate();if(se(e,i.getOptions()))return t;throw es.create("already-initialized")}const n=i.initialize({options:e});return n}(t)}function Ps(t,e,i){t=ue(t),async function(t,e,i,n){if(n&&n.global){const e={};for(const t of Object.keys(i))e[`user_properties.${t}`]=i[t];return t("set",e),Promise.resolve()}t("config",await e,{update:!0,user_properties:i})}(Es,bs[t.app.options.appId],e,i).catch((t=>ts.error(t)))}function Ls(t,e,i,n){t=ue(t),async function(t,e,i,n,s){if(s&&s.global)t("event",i,n);else{const s=await e;t("event",i,Object.assign(Object.assign({},n),{send_to:s}))}}(Es,bs[t.app.options.appId],e,i,n).catch((t=>ts.error(t)))}const ks="@firebase/analytics",Ds="0.10.0";yi(new de(Yn,((t,{options:e})=>Cs(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),yi(new de("analytics-internal",(function(t){try{const e=t.getProvider(Yn).getImmediate();return{logEvent:(t,i,n)=>Ls(e,t,i,n)}}catch(t){throw es.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),xi(ks,Ds),xi(ks,Ds,"esm2017");const Ms={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:a63f4eaddc949f539de10c",measurementId:"G-FVLSN7D7NM"};class Bs{firebaseApp;analytics;constructor(){this.initializeFirebase(),console.log(" source : ",N," and  campaign_id: ",R),null==N&&null==R||this.setUserProperty(N,R)}customEvents(t,e){try{Ls(this.analytics,t,e)}catch(t){console.error("Error while logging custom event:",t)}}sessionEnd(){try{navigator.onLine&&void 0!==this.analytics&&Ls(this.analytics,"session_end")}catch(t){console.error("Error while logging session_end event:",t)}}setUserProperty(t,e){try{Ps(this.analytics,{source:t,campaign_id:e},{global:!0}),console.log("User properties set: ",{source:t,campaignId:e})}catch(t){console.error("Error while setting user properties:",t)}}initializeFirebase(){try{this.firebaseApp=Ti(Ms),this.analytics=Is(this.firebaseApp)}catch(t){console.error("Error while initializing Firebase:",t)}}}class zs extends Bs{static instance;constructor(){super()}static getInstance(){return zs.instance||(zs.instance=new zs),zs.instance}sendSessionStartEvent(t){this.customEvents("session_start",t)}sendSessionEndEvent(t){this.customEvents("session_end",t)}sendSelectedLevelEvent(t){this.customEvents("selected_level",t)}sendTappedStartEvent(t){this.customEvents("tapped_start",t)}sendPuzzleCompletedEvent(t){this.customEvents("puzzle_completed",t)}sendLevelCompletedEvent(t){this.customEvents("level_completed",t)}sendUserClickedOnPlayEvent(){this.customEvents("user_clicked",{click:"Click"})}sendDownloadCompletedEvent(t){this.customEvents("download_completed",t)}}class Ns{levelData;puzzleNumber;groupedLetters;droppedLetters;groupedObj;droppedHistory;hideListObj;constructor(t,e){this.levelData=t,this.puzzleNumber=e,this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={}}getTargetWord(){return this.levelData.puzzles[this.puzzleNumber]?.prompt?.promptText}getValues(){return{groupedLetters:this.groupedLetters,droppedLetters:this.droppedLetters,groupedObj:{...this.groupedObj},droppedHistory:{...this.droppedHistory},hideListObj:{...this.hideListObj}}}checkIsWordPuzzle(){return"Word"===this.levelData?.levelMeta?.levelType}updatePuzzleLevel(t){this.clearAllValues(),this.puzzleNumber=t}clearPickedUp(){this.groupedLetters="",this.groupedObj={},this.hideListObj={...this.droppedHistory}}clearAllValues(){this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={},this.puzzleNumber=0}validateShouldHideLetter(t){return!this.hideListObj[t]}handleCheckHoveredStone(t,e){const i=this.groupedLetters,n=this.getTargetWord();if(!this.droppedLetters.length&&n[0]!==i[0])return!1;const s=!i.includes(t),a=!this.groupedObj[e];return n.includes(`${this.droppedLetters}${i}${t}`)&&(s||a)}validateFedLetters(){const t=this.getTargetWord();return this.droppedLetters===t.substring(0,this.droppedLetters.length)}validateWordPuzzle(){const t=this.getTargetWord();return this.droppedLetters===t}setGroupToDropped(){this.droppedLetters=`${this.droppedLetters}${this.groupedLetters}`,this.droppedHistory={...this.droppedHistory,...this.groupedObj}}setPickUpLetter(t,e){this.hideListObj={...this.hideListObj,...this.groupedObj},this.groupedLetters=`${this.groupedLetters}${t}`,this.groupedObj[e]=t}}class Rs extends at{constructor(t={}){super({id:t.id||"close-button",className:t.className||"close-button-image",imageSrc:"./assets/images/map_btn.webp",imageAlt:t.imageAlt||"Close Icon",targetId:t.targetId||"game-control",...t})}}class Os extends at{constructor(t={}){super({id:t.id||"cancel-button",className:t.className||"cancel-button-image",imageSrc:"./assets/images/close_btn.webp",imageAlt:t.imageAlt||"Cancel Icon",targetId:t.targetId||"game-control",...t})}}class Fs extends at{constructor(t={}){super({id:t.id||"next-button",className:t.className||"next-button-image",imageSrc:S,imageAlt:t.imageAlt||"Next Icon",targetId:t.targetId||"game-control",...t})}}class js extends at{constructor(t={}){super({id:t.id||"retry-button",className:t.className||"retry-button-image",imageSrc:"./assets/images/retry_btn.webp",imageAlt:t.imageAlt||"Retry Icon",targetId:t.targetId||"game-control",...t})}}class Vs extends at{constructor(t={}){super({id:t.id||"yes-button",className:t.className||"yes-button-image",imageSrc:"./assets/images/confirm_btn.webp",imageAlt:t.imageAlt||"Yes Icon",targetId:t.targetId||"game-control",...t})}}class Us{context;levelData;posX;posY;originalPosX;originalPosY;size;radiusOffSet;bloonSize;btnSize;lockSize;textFontSize;constructor(t,e,i){this.context=e,this.levelData=i,this.posX=this.levelData.x,this.posY=this.levelData.y,this.originalPosX=this.posX,this.originalPosY=this.posY,this.size=t.height/5,this.radiusOffSet=t.height/20,this.bloonSize=this.isLevelSpecial(this.size),this.btnSize=this.bloonSize,this.lockSize=t.height/13,this.textFontSize=this.size/6}isSpecialLevel(t){return M.includes(t)}isLevelSpecial(t){return this.levelData?.isSpecial?.9*t:t}draw(t,e,i,n){this.context.drawImage(this.levelData?.balloonImg,this.posX,this.posY,this.btnSize,this.btnSize),this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${F}, monospace`,this.context.textAlign="center",this.context.fillText(`${this.levelData.index+t}`,this.levelData.x+this.size/3.5,this.levelData.y+this.size/3),this.context.font=this.textFontSize-this.size/30+`px ${F}, monospace`,this.btnSize<this.bloonSize?this.btnSize=this.btnSize+.5:(this.btnSize=this.bloonSize,this.posX=this.levelData.x,this.posY=this.levelData.y),this.drawIcons(t,e,i,n)}applyPulseEffect(){const t=.7,e=Date.now()%1500/1500,i=e<=t,n=i?e/t:(e-t)/(i?t:.30000000000000004),s=i?15*n:15+45*n,a=i?.5*(1-n):0;if(a<=0)return;const{x:r,y:o,radius:l}=this.levelData?.isSpecial?{x:3,y:2.5,radius:2.2}:{x:3.4,y:3.8,radius:3.2},c=this.posX+this.btnSize/r,h=this.posY+this.btnSize/o,u=this.btnSize/l+s;this.context.save(),this.context.beginPath(),this.context.arc(c,h,u,0,2*Math.PI),this.context.fillStyle=`rgba(255, 255, 255, ${a})`,this.context.fill(),this.context.restore()}drawIcons(t,e,i,n){const s=this.levelData.index;if(j.DebugMode||s+t-1>e+1&&this.drawLock(),i.length&&s+t<=n)for(let e=0;e<i.length;e++)if(s-1+t===parseInt(i[e].levelNumber)){this.checkStars(i[e].starCount);break}}drawLock(){this.context.drawImage(this.levelData?.lockImg,this.levelData.x,this.levelData.y,this.lockSize,this.lockSize)}checkStars(t){const e=this.levelData.x,i=this.levelData.y,n=this.size;t>=1&&this.drawStar(e,i-.01*n),t>1&&this.drawStar(e+n/2.5,i-.01*n),3===t&&this.drawStar(e+n/5,i-.1*n)}drawStar(t,e){this.context.drawImage(this.levelData?.starImg,t,e,this.size/5,this.size/5)}onClick(t,e,i,n,s){Math.sqrt((t-this.levelData.x-this.radiusOffSet)*(t-this.levelData.x-this.radiusOffSet)+(e-this.levelData.y-this.radiusOffSet)*(e-this.levelData.y-this.radiusOffSet))<45&&(j.DebugMode||this.levelData.index+i<=n)&&(this.btnSize=this.bloonSize-4,this.posX=this.originalPosX+.5,this.posY=this.originalPosY+1,s(this.levelData.index))}}var Ws=i(424),Hs={};Hs.styleTagTransform=wt(),Hs.setAttributes=gt(),Hs.insert=mt().bind(null,"head"),Hs.domAPI=dt(),Hs.insertStyleElement=bt();ht()(Ws.A,Hs);Ws.A&&Ws.A.locals&&Ws.A.locals;class $s extends at{constructor(t={}){super({id:t.id||"play-button",className:t.className||"play-button-image",imageSrc:t?.imageSrc||"./assets/images/Play_button.webp",imageAlt:t.imageAlt||"Play Icon",targetId:t.targetId||"game-scene",...t})}}var Gs=i(636),Xs={};Xs.styleTagTransform=wt(),Xs.setAttributes=gt(),Xs.insert=mt().bind(null,"head"),Xs.domAPI=dt(),Xs.insertStyleElement=bt();ht()(Gs.A,Xs);Gs.A&&Gs.A.locals&&Gs.A.locals;const Ys={root:".game-scene",closeButton:'[data-click="close"]'},qs="[data-click]",Ks="show";class Js{popupEl;closeButton;static EVENTS={ON_CLOSE:"onClose",ON_BTN_CLICK:"onClick"};id="base-popup";template="";isRendered=!1;options;pubSub=new It;constructor(t){this.options={selectors:Ys,...t},this._init()}onInit(){}open(){this.isRendered||this.render(),this.setVisibility(!0)}close(t){this.setVisibility(!1),this.pubSub.publish(Js.EVENTS.ON_CLOSE,t)}destroy(){this.popupEl?.remove(),this._removeEventListeners()}handleClick(t,e=300){setTimeout((()=>{this.close({data:t})}),e)}onButtonClick(t){return this.pubSub.subscribe(Js.EVENTS.ON_BTN_CLICK,t)}onClose(t){return this.pubSub.subscribe(Js.EVENTS.ON_CLOSE,t)}render(){if(this.isRendered)return;const t=(e=this.id,i=this.template,`\n  <div id="${e}" class="popup">\n    <div class="popup__overlay"></div>\n    <div id="${e}-content-wrapper" class="popup__content-wrapper" >\n      <img id="popup-bg" src="./assets/images/popup_bg_v01.webp" />\n      <div id="${e}-content-container" class="popup__content-container">${i}</div>\n    </div>\n  </div>\n`);var e,i;const{root:n}=this.options.selectors,s=document.querySelector(n);s.insertAdjacentHTML("beforeend",t),this.popupEl=s.querySelector(`#${this.id}`),this.options.hideClose||(this.closeButton=new Os({targetId:this.contentWrapperId}),this.closeButton.onClick((()=>{setTimeout((()=>{this.close({data:!1})}),300)}))),this.isRendered=!0}get contentContainerId(){return`${this.id}-content-container`}get contentWrapperId(){return`${this.id}-content-wrapper`}_init(){setTimeout((()=>{this.render(),this.onInit(),this._addEventListeners()}))}_click=t=>{const e=t.target.closest(qs).dataset.click,i="close"===e,n={data:e,event:t};setTimeout((()=>{i?this.close(n):this.pubSub.publish(Js.EVENTS.ON_BTN_CLICK,n)}),300)};_addEventListeners(){const t=this.popupEl?.querySelectorAll(qs);t?.length&&t.forEach((t=>{t.addEventListener("click",this._click)}))}_removeEventListeners(){const t=this.popupEl?.querySelectorAll(qs);t?.length&&t.forEach((t=>{t.removeEventListener("click",this._click)}))}setVisibility(t){t?this.popupEl.classList.add(Ks):this.popupEl.classList.remove(Ks)}}class Qs extends Js{confirmButton;cancelButton;enableTimeoutId;id="confirm-popup";template='\n    <div class="confirm-message text-align-center w-100 mb-3 font-size-3">Are you sure?</div>\n    <div id="confirm-button-container" class="button-container d-flex justify-content-center w-100"></div>\n  ';onInit(){const t="confirm-button-container";this.cancelButton=new Os({id:this.createButtonId("cancel-button"),targetId:t,className:"me-4"}),this.cancelButton.onClick((()=>this.handleClick(!1))),this.confirmButton=new Vs({id:this.createButtonId("confirm-button"),targetId:t}),this.confirmButton.onClick((()=>this.handleClick(!0)))}createButtonId(t){return`${this.id}-${t}`}handleClick(t){this.disableButtons(),super.handleClick(t),this.scheduleEnableButtons(800)}disableButtons(){this.confirmButton?.setDisabled(!0),this.cancelButton?.setDisabled(!0)}enableButtons(){this.confirmButton?.setDisabled(!1),this.cancelButton?.setDisabled(!1)}scheduleEnableButtons(t){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),t)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),super.destroy()}}const Zs=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const ta="object"==typeof global&&global&&global.Object===Object&&global;var ea="object"==typeof self&&self&&self.Object===Object&&self;const ia=ta||ea||Function("return this")();const na=function(){return ia.Date.now()};var sa=/\s/;const aa=function(t){for(var e=t.length;e--&&sa.test(t.charAt(e)););return e};var ra=/^\s+/;const oa=function(t){return t?t.slice(0,aa(t)+1).replace(ra,""):t};const la=ia.Symbol;var ca=Object.prototype,ha=ca.hasOwnProperty,ua=ca.toString,da=la?la.toStringTag:void 0;const pa=function(t){var e=ha.call(t,da),i=t[da];try{t[da]=void 0;var n=!0}catch(t){}var s=ua.call(t);return n&&(e?t[da]=i:delete t[da]),s};var ma=Object.prototype.toString;const fa=function(t){return ma.call(t)};var ga=la?la.toStringTag:void 0;const va=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ga&&ga in Object(t)?pa(t):fa(t)};const ba=function(t){return null!=t&&"object"==typeof t};const ya=function(t){return"symbol"==typeof t||ba(t)&&"[object Symbol]"==va(t)};var wa=/^[-+]0x[0-9a-f]+$/i,Sa=/^0b[01]+$/i,Ea=/^0o[0-7]+$/i,Ta=parseInt;const xa=function(t){if("number"==typeof t)return t;if(ya(t))return NaN;if(Zs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Zs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=oa(t);var i=Sa.test(t);return i||Ea.test(t)?Ta(t.slice(2),i?2:8):wa.test(t)?NaN:+t};var _a=Math.max,Aa=Math.min;const Ca=function(t,e,i){var n,s,a,r,o,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var i=n,a=s;return n=s=void 0,c=e,r=t.apply(a,i)}function m(t){var i=t-l;return void 0===l||i>=e||i<0||u&&t-c>=a}function f(){var t=na();if(m(t))return g(t);o=setTimeout(f,function(t){var i=e-(t-l);return u?Aa(i,a-(t-c)):i}(t))}function g(t){return o=void 0,d&&n?p(t):(n=s=void 0,r)}function v(){var t=na(),i=m(t);if(n=arguments,s=this,l=t,i){if(void 0===o)return function(t){return c=t,o=setTimeout(f,e),h?p(t):r}(l);if(u)return clearTimeout(o),o=setTimeout(f,e),p(l)}return void 0===o&&(o=setTimeout(f,e)),r}return e=xa(e)||0,Zs(i)&&(h=!!i.leading,a=(u="maxWait"in i)?_a(xa(i.maxWait)||0,e):a,d="trailing"in i?!!i.trailing:d),v.cancel=function(){void 0!==o&&clearTimeout(o),c=0,n=l=s=o=void 0},v.flush=function(){return void 0===o?r:g(na())},v},Ia="select-level",Pa="restart-level";class La extends Js{selectLevelButton;restartLevelButton;confirmPopup;openConfirm=()=>{};audioPlayer=new nt;enableTimeoutId;id="pause-popup";onInit(){const t=this.contentContainerId;this.selectLevelButton=new Rs({id:"map-button",className:"me-4",targetId:t}),this.selectLevelButton&&this.selectLevelButton.onClick((()=>this.handleClick("select-level"))),this.restartLevelButton=new js({targetId:t}),this.restartLevelButton&&this.restartLevelButton.onClick((()=>this.handleClick("restart-level"))),this.confirmPopup=new Qs({hideClose:!0}),this.openConfirm=Ca((()=>{this.confirmPopup.open(),this.audioPlayer.playAudio("./assets/audios/are-you-sure.mp3")}),300)}handleClick(t){if(this.disableButtons(),"english"===O){const e=this.confirmPopup.onClose((i=>{e(),this.handleConfirmClose(i,t),this.scheduleEnableButtons(800)}));this.openConfirm()}else super.handleClick(t),this.scheduleEnableButtons(800)}handleConfirmClose(t,e){t.data&&super.handleClick(e),super.handleClick(!1,0)}disableButtons(){this.selectLevelButton?.setDisabled(!0),this.restartLevelButton?.setDisabled(!0)}enableButtons(){this.selectLevelButton?.setDisabled(!1),this.restartLevelButton?.setDisabled(!1)}scheduleEnableButtons(t){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),t)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.confirmPopup?.destroy(),super.destroy()}}var ka=i(52);class Da{props;riveInstance;phaseIndex=0;stateMachineName="State Machine 1";game;x;y;hitboxRangeX;hitboxRangeY;constructor(t){this.props=t,this.moveCanvasUpOrDown(50),this.initializeHitbox(),this.initializeRive()}static Animations={IDLE:"Idle",SAD:"Sad",STOMP:"Stomp",STOMPHAPPY:"StompHappy",SPIT:"Spit",CHEW:"Chew",MOUTHOPEN:"MouthOpen",MOUTHCLOSED:"MouthClosed",HAPPY:"Happy"};initializeHitbox(){const t=zt.getDevicePixelRatioValue(),e=this.props.canvas.width/t/2,i=this.props.canvas.height/t/2;this.hitboxRangeX={from:e-55,to:e+55},this.hitboxRangeY={from:i+50,to:i+200}}initializeRive(){this.props.isEvolving&&this.riveInstance&&this.riveInstance.cleanupInstances();const t={src:this.props.src||A[this.phaseIndex],canvas:this.props.canvas,autoplay:this.props.autoplay,layout:new ka.Layout({fit:ka.Fit.Contain,alignment:ka.Alignment.Center}),useOffscreenRenderer:!0};this.props.isEvolving||(t.stateMachines=[this.stateMachineName],t.onLoad=this.handleLoad.bind(this),t.layout=new ka.Layout({fit:ka.Fit.Contain,alignment:ka.Alignment.Center})),this.riveInstance=new ka.Rive(t)}getInputs(){return this.props.isEvolving?[]:this.riveInstance.stateMachineInputs(this.stateMachineName)}moveCanvasUpOrDown(t){const e=this.props.canvas,i=parseFloat(window.getComputedStyle(e).top)||0;if(0===i){const n=i+t;e.style.top=`${n}px`,e.style.position="absolute",e.style.zIndex="5"}}handleLoad(){const t=this.getInputs(),e=["backToIdle","isStomped","isMouthOpen","isMouthClosed","isChewing","isHappy","isSpit","isSad"].filter((e=>!t.some((t=>t.name===e))));e.length&&console.error(`Missing state machine inputs: ${e.join(", ")}`),this.props.onLoad&&this.props.onLoad()}triggerInput(t){const e=this.getInputs().find((e=>e.name===t));e?e.fire():console.warn(`Input ${t} not found.`)}play(t){this.riveInstance?.play(t)}stop(){this.riveInstance?.stop()}checkHitboxDistance(t){const e=this.props.canvas.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top;return this.validateRange(i,n)}validateRange(t,e){const i=t>=this.hitboxRangeX.from&&t<=this.hitboxRangeX.to,n=e>=this.hitboxRangeY.from&&e<=this.hitboxRangeY.to;return i&&n}onClick(t,e){return this.validateRange(t,e)}stopRiveMonster(){this.riveInstance?.stop()}changePhase(t){t>=0&&t<A.length?(this.phaseIndex=t,this.riveInstance&&(this.riveInstance.cleanup(),this.riveInstance=null),this.riveInstance=new ka.Rive({src:A[this.phaseIndex],canvas:this.props.canvas,autoplay:this.props.autoplay,stateMachines:[this.stateMachineName],layout:new ka.Layout({fit:ka.Fit.Contain,alignment:ka.Alignment.Center}),onLoad:this.handleLoad.bind(this),useOffscreenRenderer:!0})):console.warn(`Invalid phase index: ${t}`)}dispose(){this.riveInstance&&(this.riveInstance.cleanup(),this.riveInstance=null)}}class Ma{width;height;monster;jsonVersionNumber;canvas;levelData;timerTicking;promptText;pauseButton;tutorial;id;context;levelIndicators;stonesCount=1;pickedStone;puzzleStartTime;pausePopupComponent;showTutorial;feedBackTexts;isPuzzleCompleted;rightToLeft;levelNumber;stoneHandler;counter=0;handler;pickedStoneObject;isPauseButtonClicked;background;feedBackTextCanavsElement;feedbackTextEffects;isGameStarted=!1;time=0;score=0;data;triggerInputs;audioPlayer;firebaseIntegration;startTime;puzzleTime;isDisposing;trailParticles;wordPuzzleLogic;riveMonsterElement;gameControl;unsubscribeEvent;timeTicker;isFeedBackTriggered;monsterPhaseNumber;constructor(){const t=Pt.getGamePlaySceneDetails();this.pausePopupComponent=new La,this.initializeProperties(t),this.setupUIElements(),this.isDisposing=!1,this.initializeGameComponents(t);var e=this.levelData.levelMeta.levelNumber;j.DebugMode?localStorage.setItem(c+O+"Debug",e):localStorage.setItem(c+O,e),this.addEventListeners(),this.startGameTime(),this.startPuzzleTime(),this.firebaseIntegration=new zs,this.feedbackTextEffects=new Bt,this.audioPlayer=new nt,this.wordPuzzleLogic=new Ns(this.levelData,this.counter),this.unsubscribeEvent=Pt.subscribe(Pt.EVENTS.GAME_PAUSE_STATUS_EVENT,(t=>{this.isPauseButtonClicked=t,t&&this.pausePopupComponent.open()})),this.pausePopupComponent.onClose((t=>{const{data:e}=t;switch(e){case Pa:Pt.publish(Pt.EVENTS.GAMEPLAY_DATA_EVENT,{currentLevelData:this.levelData,selectedLevelNumber:this.levelNumber}),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,k);break;case Ia:Pt.publish(Pt.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,L);default:Pt.publish(Pt.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),this.resumeGame()}})),this.setupBg()}initializeRiveMonster(t=Da.Animations.IDLE){return new Da({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"bottomCenter",onLoad:()=>{this.monster.play(t)},gameCanvas:this.canvas,src:A[this.monsterPhaseNumber]})}initializeGameComponents(t){this.trailParticles=new Nt(this.canvas),this.pauseButton=new rt,this.pauseButton.onClick((()=>{Pt.publish(Pt.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()})),this.timerTicking=new Wt(this.width,this.height,this.loadPuzzle),this.stoneHandler=new Lt(this.context,this.canvas,this.counter,this.levelData,t.feedbackAudios,this.timerTicking),this.tutorial=new kt(this.context,this.width,this.height),this.promptText=new Ct(this.width,this.height,this.levelData.puzzles[this.counter],this.levelData,this.rightToLeft),this.levelIndicators=new At,this.levelIndicators.setIndicators(this.counter),this.monster=this.initializeRiveMonster()}setupUIElements(){const{canvasElem:t,canvasWidth:e,canvasHeight:i,gameCanvasContext:n,gameControlElem:s}=zt.getCanvasSizeValues(),a=zt.getRiveCanvasValue();this.handler=t,this.riveMonsterElement=a,this.riveMonsterElement.style.zIndex="4",this.gameControl=s,this.gameControl.style.zIndex="5",this.canvas=t,this.width=e,this.height=i,this.context=n}initializeProperties(t){this.isPauseButtonClicked=t?.isGamePaused,this.rightToLeft=t.rightToLeft,this.levelData=t.levelData,this.levelNumber=t.levelNumber,this.jsonVersionNumber=t.jsonVersionNumber,this.feedBackTexts=t.feedBackTexts,this.data=t.data,this.monsterPhaseNumber=t.monsterPhaseNumber}setupBg=()=>{const t=Mt.createBackgroundComponent(this.levelData.levelMeta.levelNumber);(new Mt).generateBackground(t)};resumeGame=()=>{this.addEventListeners()};getRandomFeedBackText(t){const e=Object.keys(this.feedBackTexts)[t];return this.feedBackTexts[e]}getRandomInt(t,e){const i=Object.values(this.feedBackTexts).filter((t=>null!=t)).length-1;return Math.floor(Math.random()*(i-t+1))+t}triggerMonsterAnimation(t,e=0){e>0?setTimeout((()=>{this.monster.triggerInput(t)}),e):this.monster.triggerInput(t)}handleMouseUp=t=>{if(this.monster.checkHitboxDistance(t)&&this.pickedStone){const{text:t}=this.pickedStone;switch(this.levelData.levelMeta.levelType){case"LetterOnly":case"LetterInWord":this.letterPuzzle(t);break;case"Word":case"SoundWord":this.wordPuzzle(this.pickedStone)}}else this.pickedStone&&this.pickedStoneObject&&this.pickedStone.text&&"number"==typeof this.pickedStoneObject.origx&&"number"==typeof this.pickedStoneObject.origy&&(this.pickedStone.x=this.pickedStoneObject.origx,this.pickedStone.y=this.pickedStoneObject.origy,this.triggerMonsterAnimation("isMouthClosed"),this.triggerMonsterAnimation("backToIdle",350));this.pickedStone=null,this.wordPuzzleLogic.clearPickedUp(),zt.publish(zt.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,!1)};handleMouseDown=t=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let e=this.canvas.getBoundingClientRect();const i=t.clientX-e.left,n=t.clientY-e.top;if(this.wordPuzzleLogic.checkIsWordPuzzle())this.setPickedUp(i,n);else for(let t of this.stoneHandler.foilStones){if(Math.sqrt((i-t.x)**2+(n-t.y)**2)<=40){this.pickedStoneObject=t,this.pickedStone=t,this.stoneHandler.playDragAudioIfNecessary(t);break}}zt.publish(zt.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,!0)};setPickedUp(t,e){if(this.pickedStone&&this.pickedStone.frame<=99)return;const i=this.stoneHandler.handlePickStoneUp(t,e);i&&(this.pickedStoneObject=i,this.pickedStone=i,this.stoneHandler.playDragAudioIfNecessary(i),"Word"===this.levelData?.levelMeta?.levelType&&this.wordPuzzleLogic.setPickUpLetter(i?.text,i?.foilStoneIndex))}handleMouseMove=t=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let e=t.clientX,i=t.clientY;if(this.pickedStone){if(this.wordPuzzleLogic.checkIsWordPuzzle()){const n=this.stoneHandler.handleMovingStoneLetter(this.pickedStone,t.clientX,t.clientY);if(this.pickedStone=n,e=n.x,i=n.y,this.wordPuzzleLogic.checkIsWordPuzzle()){const t=this.stoneHandler.handleHoveringToAnotherStone(e,i,((t,e)=>this.wordPuzzleLogic.handleCheckHoveredStone(t,e)));t&&(this.wordPuzzleLogic.setPickUpLetter(t?.text,t?.foilStoneIndex),this.pickedStone=this.stoneHandler.resetStonePosition(this.width,this.pickedStone,this.pickedStoneObject),this.pickedStoneObject=t,this.pickedStone=t)}}else{let n=this.canvas.getBoundingClientRect();const s=t.clientX-n.left,a=t.clientY-n.top;this.pickedStone.x=s,this.pickedStone.y=a,e=s,i=a}this.triggerMonsterAnimation("isMouthOpen")}this.trailParticles?.addTrailParticlesOnMove(e,i)};handleMouseClick=t=>{let e=this.canvas.getBoundingClientRect();const i=t.clientX-e.left,n=t.clientY-e.top;this.monster.onClick(i,n)&&(this.isGameStarted=!0,this.time=0,this.tutorial.setPlayMonsterClickAnimation(!1)),this.promptText.onClick(i,n)&&this.promptText.playSound()};handleTouchStart=t=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;const e=t.touches[0];this.handleMouseDown({clientX:e.clientX,clientY:e.clientY}),this.trailParticles?.resetParticles()};handleTouchMove=t=>{const e=t.touches[0];this.handleMouseMove({clientX:e.clientX,clientY:e.clientY}),this.trailParticles?.addTrailParticlesOnMove(e.clientX,e.clientY)};handleTouchEnd=t=>{const e=t.changedTouches[0];this.handleMouseUp({clientX:e.clientX,clientY:e.clientY}),this.trailParticles?.resetParticles()};draw(t){this.isGameStarted||this.isPauseButtonClicked||(this.time=this.time+t,this.time>=5e3&&(this.isGameStarted=!0,this.time=0,this.tutorial.setPlayMonsterClickAnimation(!1))),this.promptText.draw(t),this.trailParticles?.draw(),this.isPauseButtonClicked&&this.isGameStarted&&this.handleStoneLetterDrawing(t),this.isPauseButtonClicked||this.isGameStarted||0==this.counter&&this.tutorial.clickOnMonsterTutorial(t),!this.isPauseButtonClicked&&this.isGameStarted&&this.handleStoneLetterDrawing(t)}handleStoneLetterDrawing(t){if(this.wordPuzzleLogic.checkIsWordPuzzle()){const{groupedObj:e}=this.wordPuzzleLogic.getValues();this.stoneHandler.drawWordPuzzleLetters(t,(t=>this.wordPuzzleLogic.validateShouldHideLetter(t)),e)}else this.stoneHandler.draw(t)}addEventListeners(){this.handler.addEventListener("mouseup",this.handleMouseUp,!1),this.handler.addEventListener("mousemove",this.handleMouseMove,!1),this.handler.addEventListener("mousedown",this.handleMouseDown,!1),this.handler.addEventListener("touchstart",this.handleTouchStart,!1),this.handler.addEventListener("touchmove",this.handleTouchMove,!1),this.handler.addEventListener("touchend",this.handleTouchEnd,!1),this.handler.addEventListener(W,this.handleMouseClick,!1),document.addEventListener(H,this.handleVisibilityChange,!1)}removeEventListeners(){this.handler.removeEventListener(W,this.handleMouseClick,!1),this.handler.removeEventListener("mouseup",this.handleMouseUp,!1),this.handler.removeEventListener("mousemove",this.handleMouseMove,!1),this.handler.removeEventListener("mousedown",this.handleMouseDown,!1),this.handler.removeEventListener("touchstart",this.handleTouchStart,!1),this.handler.removeEventListener("touchmove",this.handleTouchMove,!1),this.handler.removeEventListener("touchend",this.handleTouchEnd,!1)}loadPuzzle=t=>{this.removeEventListeners(),this.stonesCount=1;const e=Boolean(t);if(e&&this.logPuzzleEndFirebaseEvent(!1),this.counter+=1,this.isGameStarted=!1,this.counter===this.levelData.puzzles.length){const t=()=>{this.levelIndicators.setIndicators(this.counter),this.logLevelEndFirebaseEvent(),et.setGameLevelScore(this.levelData,this.score);const t={starCount:et.calculateStarCount(this.score),currentLevel:this.levelNumber,isTimerEnded:e};Pt.publish(Pt.EVENTS.LEVEL_END_DATA_EVENT,{levelEndData:t,data:this.data}),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,D),this.monster.dispose()};if(e)return void t();const i=setTimeout(t,4500);if(this.isFeedBackTriggered){const e=this.audioPlayer?.audioSourcs||[],n=e[e.length-1];n&&(n.onended=()=>{clearTimeout(i),t()})}}else{const t=new CustomEvent(V,{detail:{counter:this.counter}});setTimeout((()=>{this.isDisposing||(this.initNewPuzzle(t),this.timerTicking.startTimer())}),e?0:4500)}};initNewPuzzle(t){this.monster&&this.monster.dispose(),this.monster=this.initializeRiveMonster(),this.removeEventListeners(),this.isGameStarted=!1,this.time=0,this.wordPuzzleLogic.updatePuzzleLevel(t?.detail?.counter),this.pickedStone=null,document.dispatchEvent(t),this.addEventListeners(),this.audioPlayer.stopAllAudios(),this.startPuzzleTime()}dispose=()=>{this.isDisposing=!0,this.audioPlayer&&(this.audioPlayer.stopAllAudios(),this.audioPlayer=null),this.monster&&(this.monster.dispose(),this.monster=null),this.stoneHandler&&(this.stoneHandler.dispose(),this.stoneHandler=null),this.timerTicking&&(this.timerTicking.destroy(),this.timerTicking=null),this.trailParticles&&(this.trailParticles.clearTrailSubscription(),this.trailParticles=null),this.unsubscribeEvent&&(this.unsubscribeEvent(),this.unsubscribeEvent=null),document.removeEventListener(H,this.handleVisibilityChange,!1),this.removeEventListeners(),this.levelIndicators&&(this.levelIndicators.dispose(),this.levelIndicators=null),this.promptText&&(this.promptText.dispose(),this.promptText=null),this.pauseButton&&(this.pauseButton.dispose(),this.pauseButton=null),this.pausePopupComponent&&(this.pausePopupComponent.destroy(),this.pausePopupComponent=null),this.pickedStone=null,this.pickedStoneObject=null};checkStoneDropped(t,e,i=!1){return this.stoneHandler.isStoneLetterDropCorrect(t,e,i)}letterPuzzle(t){if(this.pickedStone&&this.pickedStone.frame<=99)return;const e=this.getRandomInt(0,1),i=this.checkStoneDropped(t,e);i&&this.handleCorrectStoneDrop(e),this.isFeedBackTriggered=!0,this.handleStoneDropEnd(i)}wordPuzzle(t){if(t.frame<=99)return;this.audioPlayer.stopFeedbackAudio(),t.x=-999,t.y=-999;const e=this.getRandomInt(0,1);this.wordPuzzleLogic.setGroupToDropped();const{droppedLetters:i}=this.wordPuzzleLogic.getValues(),n=this.wordPuzzleLogic.validateFedLetters();if(this.stoneHandler.processLetterDropFeedbackAudio(e,n,!0,i),n){if(this.wordPuzzleLogic.validateWordPuzzle())return this.handleCorrectStoneDrop(e),this.handleStoneDropEnd(n,"Word"),void(this.stonesCount=1);this.triggerMonsterAnimation("isMouthClosed"),this.triggerMonsterAnimation("backToIdle",350),this.timerTicking.startTimer(),this.promptText.droppedStoneIndex("arabic"==O?this.stonesCount:i.length),this.stonesCount++}else this.handleStoneDropEnd(n,"Word"),this.stonesCount=1}handleStoneDropEnd(t,e=null){const i=this.monster.getInputs(),n=i.find((t=>"isHappy"===t.name)),s=i.find((t=>"isSpit"===t.name)),a=i.find((t=>"isSad"===t.name));return i.find((t=>"isChewing"===t.name))&&n&&s&&a?(t?(this.triggerMonsterAnimation("isChewing"),this.triggerMonsterAnimation("isHappy",1700)):(this.triggerMonsterAnimation("isSpit"),this.triggerMonsterAnimation("isSad",1030)),this.logPuzzleEndFirebaseEvent(t,e),this.dispatchStoneDropEvent(t),void this.loadPuzzle()):(console.error("Missing triggers for animations."),!1)}handleCorrectStoneDrop=t=>{this.score+=100;const e=this.getRandomFeedBackText(t);this.feedbackTextEffects.wrapText(e);setTimeout((()=>{this.feedbackTextEffects.hideText()}),4500)};dispatchStoneDropEvent(t){const e=new CustomEvent(U,{detail:{isCorrect:t}});document.dispatchEvent(e)}logPuzzleEndFirebaseEvent(t,e){let i=Date.now();const{droppedLetters:n}=this.wordPuzzleLogic.getValues(),s={cr_user_id:z,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:t?"success":"failure",level_number:this.levelData.levelMeta.levelNumber,puzzle_number:this.counter,item_selected:"Word"==e?null==n||null==n?"TIMEOUT":n:null==this.pickedStone||null==this.pickedStone?"TIMEOUT":this.pickedStone?.text,target:this.stoneHandler.getCorrectTargetStone(),foils:this.stoneHandler.getFoilStones(),response_time:(i-this.puzzleTime)/1e3};this.firebaseIntegration.sendPuzzleCompletedEvent(s)}logLevelEndFirebaseEvent(){let t=Date.now();const e={cr_user_id:z,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:et.calculateStarCount(this.score)>=3?"success":"failure",number_of_successful_puzzles:this.score/100,level_number:this.levelData.levelMeta.levelNumber,duration:(t-this.startTime)/1e3};this.firebaseIntegration.sendLevelCompletedEvent(e)}startGameTime(){this.startTime=Date.now()}startPuzzleTime(){this.puzzleTime=Date.now()}pauseGamePlay=()=>{this.removeEventListeners(),this.audioPlayer.stopAllAudios()};handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),Pt.publish(Pt.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()}}function Ba(t,e,i,n){return{draw:()=>{t.drawImage(n?.LEVEL_SELECTION_BACKGROUND,0,0,e,i)}}}async function za(t,e,i,n){const s=(t=>M.includes(t))(i);return{...{x:t,y:e,index:i,isSpecial:s,...n,balloonImg:s?n?.specialBloonImg:n?.balloonImg}}}class Na{canvas;data;width;height;context;levels;gameLevelData;audioPlayer;images;loadedImages;imagesLoaded=!1;xDown;yDown;previousPlayedLevelNumber;levelSelectionPageIndex=0;levelNumber;levelsSectionCount;unlockLevelIndex;majVersion;minVersion;firebaseIntegration;background;rightBtnSize;rightBtnX;rightBtnY;leftBtnSize;leftBtnX;leftBtnY;levelButtons;riveMonsterElement;constructor(){const{canvasElem:t,canvasWidth:e,canvasHeight:i,context:n}=zt.getCanvasSizeValues();this.canvas=t,this.width=e,this.height=i,this.context=n,this.data=Pt.getFTMData();let a=this;this.levelsSectionCount=a.data.levels.length/10>Math.floor(a.data.levels.length/10)?Math.floor(a.data.levels.length/10)+1:Math.floor(a.data.levels.length/10),this.levels=[],this.firebaseIntegration=new zs,this.init(),this.createLevelButtons(),this.gameLevelData=et.getAllGameLevelInfo(),this.audioPlayer=new nt,this.unlockLevelIndex=-1,this.previousPlayedLevelNumber=0|parseInt(j.DebugMode?localStorage.getItem(c+O+"Debug"):localStorage.getItem(c+O)),null!=this.previousPlayedLevelNumber&&(this.levelSelectionPageIndex=10*Math.floor(this.previousPlayedLevelNumber/10)),this.setupBg(),this.images={nextbtn:S,backbtn:"./assets/images/back_btn.webp"},s(this.images,(t=>{this.loadedImages=Object.assign({},t),this.imagesLoaded=!0,"visible"===document.visibilityState&&this.audioPlayer.playAudio(p)})),this.addListeners(),this.rightBtnSize=10,this.rightBtnX=.73,this.rightBtnY=1.3,this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3}async init(){const t=await G();this.majVersion=t.majversion,this.minVersion=t.minversion}setupBg=async()=>{this.background=await async function(t,e,i,n,s){return{...{...s(t,e,i,{...await a(n)})}}}(this.context,this.width,this.height,{LEVEL_SELECTION_BACKGROUND:"./assets/images/map.webp"},Ba)};async createLevelButtons(){const t=await a({balloonImg:"./assets/images/mapIcon.webp",specialBloonImg:"./assets/images/map_icon_monster_level_v01.webp",lockImg:"./assets/images/mapLock.webp",starImg:"./assets/images/star.webp"}),e=[[[(i=this.canvas).width/10,i.height/10],[i.width/2.5,i.height/10],[i.width/3+i.width/2.8,i.height/10],[i.width/10,i.height/3],[i.width/2.5,i.height/3],[i.width/3+i.width/2.8,i.height/3],[i.width/10,i.height/1.8],[i.width/2.5,i.height/1.8],[i.width/3+i.width/2.8,i.height/1.8],[i.width/2.5,i.height/1.3]]];var i;const n=this.data.levels.length,s=Math.max(0,n-this.levelSelectionPageIndex),r=Math.min(10,s),o=e[0].slice(0,r).map(((e,i)=>za(e[0],e[1],i+1,t)));this.levels=await Promise.all(o),this.levelButtons=this.levels.map((t=>new Us(this.canvas,this.context,{...t})))}async updatePage(t){this.levelSelectionPageIndex=t,await this.createLevelButtons(),this.downButton(this.levelSelectionPageIndex)}addListeners(){document.getElementById("canvas").addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").addEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").addEventListener("touchmove",this.handleTouchMove,!1)}pausePlayAudios=()=>{"visible"===document.visibilityState?this.audioPlayer.playAudio(p):this.audioPlayer.stopAllAudios()};getTouches(t){return t.touches||t.originalEvent.touches}handleTouchStart=t=>{const e=this.getTouches(t)[0];this.xDown=e.clientX,this.yDown=e.clientY};handleTouchMove=t=>{if(!this.xDown||!this.yDown)return;let e=t.touches[0].clientX,i=t.touches[0].clientY,n=this.xDown-e,s=this.yDown-i;Math.abs(n)>Math.abs(s)&&(n>0?this.levelSelectionPageIndex!=10*this.levelsSectionCount-10&&this.updatePage(this.levelSelectionPageIndex+10):0!=this.levelSelectionPageIndex&&this.updatePage(this.levelSelectionPageIndex-10)),this.xDown=null,this.yDown=null};handleMouseDown=t=>{t.preventDefault();let e=document.getElementById("canvas").getBoundingClientRect();const i=t.clientX-e.left,n=t.clientY-e.top,s=(t,e=1.3)=>i>=t&&i<t+this.canvas.height/10&&n>this.canvas.height/e&&n<this.canvas.height/e+this.canvas.height/10,a=s(.7*this.canvas.width),r=s(this.canvas.width/10);if(r||a){const t=this.levelSelectionPageIndex;a&&t!=10*this.levelsSectionCount-10?(this.audioPlayer.playButtonClickSound(),this.updatePage(t+10),this.rightBtnSize=10.5,this.rightBtnY=1.299):r&&0!=t&&(this.audioPlayer.playButtonClickSound(),this.updatePage(t-10),this.leftBtnSize=10.3,this.leftBtnY=1.299)}for(let t of this.levelButtons)t.onClick(i,n,this.levelSelectionPageIndex-1,this.unlockLevelIndex+1,(t=>{this.audioPlayer.playButtonClickSound(),this.levelNumber=t+this.levelSelectionPageIndex-1,this.startGame(this.levelNumber)}))};isLevelCompleted(t,e){const i=e.find((e=>e.levelNumber===t));return(i?.starCount||0)>=2}drawLevel(t,e){const i=t.levelData.index+this.levelSelectionPageIndex,n=i-1;this.unlockLevelIndex+1!==n||this.isLevelCompleted(n,e)||t.applyPulseEffect(),i<=this.data.levels.length&&(this.checkUnlockedLevel(e),t.draw(this.levelSelectionPageIndex,this.unlockLevelIndex,e,this.data.levels.length),j.DebugMode&&this.context.fillText(this.data.levels[i-1].levelMeta.levelType,t.levelData.x+t.btnSize/3.5,t.levelData.y+t.btnSize/1.3))}drawLevelSelection(){for(let t of this.levelButtons)this.drawLevel(t,this.gameLevelData)}downButton(t){t!=10*this.levelsSectionCount-10?(this.context.drawImage(this.loadedImages.nextbtn,this.canvas.width*this.rightBtnX,this.canvas.height/this.rightBtnY,this.canvas.height/this.rightBtnSize,this.canvas.height/this.rightBtnSize),this.rightBtnSize>10&&(this.rightBtnSize=this.rightBtnSize-.025),this.rightBtnY=this.rightBtnSize>10?1.299:1.3):(this.rightBtnSize=10,this.rightBtnX=.7,this.rightBtnY=1.3),0!=t?(this.context.drawImage(this.loadedImages.backbtn,this.canvas.width/this.leftBtnX,this.canvas.height/this.leftBtnY,this.canvas.height/this.leftBtnSize,this.canvas.height/this.leftBtnSize),this.leftBtnSize>10&&(this.leftBtnSize=this.leftBtnSize-.025),this.leftBtnY=this.leftBtnSize>10?1.299:1.3):(this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3)}checkUnlockedLevel(t){if(null!=t.length)for(let e of t)this.unlockLevelIndex<parseInt(e.levelNumber)&&e.starCount>=2&&(this.unlockLevelIndex=parseInt(e.levelNumber))}startGame(t){this.dispose(),this.audioPlayer.stopAllAudios();const e={currentLevelData:{...this.data.levels[t],levelNumber:t},selectedLevelNumber:t};Pt.publish(Pt.EVENTS.GAMEPLAY_DATA_EVENT,e),this.logSelectedLevelEvent(),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,k)}logSelectedLevelEvent(){const t={cr_user_id:z,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",level_selected:this.levelNumber};this.firebaseIntegration.sendSelectedLevelEvent(t)}draw(){this.imagesLoaded&&(this.background?.draw(),this.drawLevelSelection(),this.downButton(this.levelSelectionPageIndex))}dispose(){this.audioPlayer.stopAllAudios(),document.getElementById("canvas").removeEventListener("mousedown",this.handleMouseDown,!1),document.removeEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").removeEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").removeEventListener("touchmove",this.handleTouchMove,!1)}}var Ra=i(717),Oa={};Oa.styleTagTransform=wt(),Oa.setAttributes=gt(),Oa.insert=mt().bind(null,"head"),Oa.domAPI=dt(),Oa.insertStyleElement=bt();ht()(Ra.A,Oa);Ra.A&&Ra.A.locals&&Ra.A.locals;class Fa extends Da{static shouldInitialize(){const{monsterPhaseNumber:t}=Pt.getLevelEndSceneData();return Pt.checkMonsterPhaseUpdation()>t}backgroundElement;evolutionProps;monsterPhaseNumber;evolveMonster;EVOLUTION_ANIMATION_COMPLETE_DELAY=6500;EVOLUTION_ANIMATION_FADE_EFFECT_DELAY=500;constructor(t){const e=Fa.getEvolutionSource(t.monsterPhaseNumber);super({...t,src:e}),this.evolutionProps=t,this.monsterPhaseNumber=Pt.checkMonsterPhaseUpdation(),this.initialize(),this.startAnimation()}initialize(){this.initializeBackground(),this.setCanvasPosition("evolution")}initializeBackground(){this.backgroundElement=new lt({selectors:{root:"#background"}},"levelend-background",(t=>`<div id="${t}"></div>`),!0)}static getEvolutionSource(t){return{1:C[0]}[t]||C[0]}setCanvasPosition(t){const e={evolution:{zIndex:"13"},normal:{zIndex:"4"}}[t];this.evolutionProps.canvas&&(this.evolutionProps.canvas.style.zIndex=e.zIndex)}handleEvolutionComplete(){const t=document.getElementById("levelend-background");t&&t.classList.add("fade-out"),this.setCanvasPosition("normal")}startAnimation(){setTimeout((()=>{const t=document.getElementById("levelend-background");t&&t.classList.add("gray")}),this.EVOLUTION_ANIMATION_FADE_EFFECT_DELAY),setTimeout((()=>{this.handleEvolutionComplete(),Pt.updateMonsterPhaseState(this.monsterPhaseNumber),this.evolutionProps.onComplete&&this.evolutionProps.onComplete()}),this.EVOLUTION_ANIMATION_COMPLETE_DELAY)}dispose(){this.backgroundElement&&this.backgroundElement.destroy(),super.dispose()}}class ja{static renderButtonsHTML(){throw new Error("Method not implemented.")}starCount;currentLevel;monsterPhaseNumber;newPhaseNumber;data;audioPlayer;isLastLevel;levelEndElement=document.getElementById("levelEnd");buttonsContainer=document.getElementById("levelEndButtons");nextButtonInstance;retryButtonInstance;mapButtonInstance;riveMonster;canvasElement;starAnimationTimeouts=[];evolutionTimeout=null;evolveMonster;evolutionAnimation;EVOLUTION_ANIMATION_DELAY=5500;constructor(){const{starCount:t,currentLevel:e,data:i,monsterPhaseNumber:n}=Pt.getLevelEndSceneData(),{isLastLevel:s}=Pt.getGamePlaySceneDetails();this.evolveMonster=Fa.shouldInitialize(),this.canvasElement=zt.getRiveCanvasValue(),this.data=i,this.audioPlayer=new nt,this.starCount=t,this.currentLevel=e,this.isLastLevel=s,this.initializeRiveMonster(n),this.toggleLevelEndBackground(!0),this.showLevelEndScreen(),this.addEventListener(),this.renderStarsHTML(),this.switchToReactionAnimation()}initializeRiveMonster(t){this.riveMonster=new Da({canvas:this.canvasElement,autoplay:!0,fit:"contain",alignment:"topCenter",src:A[t],onLoad:()=>{this.riveMonster&&this.riveMonster.play(Da.Animations.IDLE)}})}toggleLevelEndBackground=t=>{this.levelEndElement&&(this.levelEndElement.style.display=t?"block":"none",this.levelEndElement.style.zIndex="11")};showLevelEndScreen(){this.toggleLevelEndBackground(!0),this.renderStarsHTML(),this.evolveMonster?(this.buttonsContainer&&(this.buttonsContainer.style.display="none"),setTimeout((()=>{this.renderButtonsHTML(),this.buttonsContainer.style.display="flex"}),this.EVOLUTION_ANIMATION_DELAY)):this.renderButtonsHTML()}switchToReactionAnimation=()=>{this.starCount<=1?(r()&&this.audioPlayer.playAudio("./assets/audios/LevelLoseFanfare.mp3"),this.riveMonster&&this.riveMonster.play(Da.Animations.SAD)):(r()&&(this.audioPlayer.playAudio("./assets/audios/LevelWinFanfare.mp3"),this.audioPlayer.playAudio(p)),this.riveMonster&&this.riveMonster.play(Da.Animations.HAPPY))};async callEvolutionAnimation(){console.log("All stars have been rendered and phase "+this.monsterPhaseNumber+" monster loaded"),this.evolveMonster&&(this.riveMonster.dispose(),this.evolutionAnimation=new Fa({canvas:this.canvasElement,monsterPhaseNumber:this.monsterPhaseNumber,autoplay:!0,isEvolving:!0}))}renderStarsHTML(){const t=document.querySelector(".stars-container");if(!t)return;this.clearStarAnimationTimeouts(),t.innerHTML="";const e=["./assets/images/pinStar1.webp","./assets/images/pinStar2.webp","./assets/images/pinStar3.webp"];for(let i=0;i<this.starCount;i++){const n=document.createElement("img");n.src=e[i],n.alt=`Star ${i+1}`,n.classList.add("stars",`star${i+1}`),t.appendChild(n);const s=window.setTimeout((()=>{n.classList.add("show"),i===this.starCount-1&&(this.evolutionTimeout=window.setTimeout((()=>{this.starCount>=2&&this.callEvolutionAnimation()}),1e3))}),500*i);this.starAnimationTimeouts=[...this.starAnimationTimeouts,s]}}clearStarAnimationTimeouts(){this.starAnimationTimeouts.forEach((t=>window.clearTimeout(t))),this.starAnimationTimeouts=[],this.evolutionTimeout&&(window.clearTimeout(this.evolutionTimeout),this.evolutionTimeout=null)}createButton(t,e,i){const n=new t({targetId:"levelEndButtons",id:e});t===Fs?this.nextButtonInstance=n:t===js?this.retryButtonInstance=n:t===Rs&&(this.mapButtonInstance=n);const s=document.getElementById("game-control");n.onClick((()=>{this.levelEndElement.style.zIndex="7",s.style.zIndex="-1",i()}))}buttonCallbackFn(t){const e=t=>{const e={currentLevelData:{...this.data.levels[t],levelNumber:t},selectedLevelNumber:t};this.handlePublishEvent(!0,e),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,k)};switch(t){case"map":this.handlePublishEvent(!0),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,L);break;case"retry":e(this.currentLevel);break;case"next":this.currentLevel<this.data.levels.length&&e(this.currentLevel+1);break;default:console.warn(`Unhandled action: ${t}`)}}renderButtonsHTML(){const t=document.getElementById("levelend-next-btn"),e=[{ButtonClass:Rs,id:"levelend-map-btn",onClick:()=>{this.buttonCallbackFn("map")}},{ButtonClass:js,id:"levelend-retry-btn",onClick:()=>{this.buttonCallbackFn("retry")}}];!this.isLastLevel&&this.starCount>=2?e.push({ButtonClass:Fs,id:"levelend-next-btn",onClick:()=>{this.buttonCallbackFn("next")}}):t&&t.remove(),e.forEach((({ButtonClass:t,id:e,onClick:i})=>{this.createButton(t,e,i)}))}addEventListener(){document.addEventListener("visibilitychange",this.pauseAudios,!1)}handlePublishEvent(t,e=null){e&&Pt.publish(Pt.EVENTS.GAMEPLAY_DATA_EVENT,e),setTimeout((()=>{this.toggleLevelEndBackground(!t)}),800)}handleMouseClick=t=>{var e=document.getElementById("canvas").getBoundingClientRect();t.clientX,e.left,t.clientY,e.top};pauseAudios=()=>{r()?this.starCount>=2&&this.audioPlayer.playAudio(p):this.audioPlayer.stopAllAudios()};dispose=()=>{this.clearStarAnimationTimeouts(),this.audioPlayer.stopAllAudios(),document.removeEventListener("visibilitychange",this.pauseAudios,!1),this.nextButtonInstance&&(this.nextButtonInstance.dispose(),this.nextButtonInstance=null),this.retryButtonInstance&&(this.retryButtonInstance.dispose(),this.retryButtonInstance=null),this.mapButtonInstance&&(this.mapButtonInstance.dispose(),this.mapButtonInstance=null),this.evolutionAnimation&&this.evolutionAnimation.dispose(),this.riveMonster&&this.riveMonster.dispose()}}class Va{canvas;height;width;context;shouldShowLoading;images;loadedImages;imagesLoaded;cloudXPosition=-500;stopCloudMoving=!1;cloudMovingTimeOut=0;constructor(){const{loadingCanvas:t,loadingContext:e}=zt.getCanvasSizeValues();this.canvas=t,this.height=t.height,this.width=t.width,this.context=e,this.shouldShowLoading=!1,this.images={cloud6:"./assets/images/cloud_01.png",cloud7:"./assets/images/cloud_02.png",cloud8:"./assets/images/cloud_03.png"},s(this.images,(t=>{this.loadedImages=Object.assign({},t),this.imagesLoaded=!0}))}toggleLoadingScreen(t){t&&this.initCloud(),this.shouldShowLoading=t,document.getElementById("loading").style.zIndex=t?"10":"-1"}draw(t){this.shouldShowLoading&&(this.context.clearRect(0,0,this.width,this.height),this.cloudXPosition+=.75*t,this.cloudMovingTimeOut+=t,this.cloudMovingTimeOut>2983&&this.toggleLoadingScreen(!1),this.cloudXPosition>=.5*this.width&&!this.stopCloudMoving&&(this.cloudMovingTimeOut+=t,this.cloudMovingTimeOut>2e3&&(this.stopCloudMoving=!0,this.cloudXPosition=0)),this.imagesLoaded&&(this.stopCloudMoving?(this.context.drawImage(this.loadedImages.cloud6,0+this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.4*this.width+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,0+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*-this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.05*this.width+this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.6*-this.width+this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,.5*this.width+this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,.4*-this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.2*-this.width+this.cloudXPosition,.2*this.height,this.width,.5*this.height)):(this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=0?0:this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=0?0:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.05*this.width?.05*this.width:this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.6*-this.width?.6*-this.width:this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.5*this.width?.5*this.width:this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.2*-this.width?.2*-this.width:this.cloudXPosition,.2*this.height,this.width,.5*this.height))))}initCloud=()=>{this.cloudXPosition=-500,this.stopCloudMoving=!1,this.cloudMovingTimeOut=0}}var Ua=i(35),Wa={};Wa.styleTagTransform=wt(),Wa.setAttributes=gt(),Wa.insert=mt().bind(null,"head"),Wa.domAPI=dt(),Wa.insertStyleElement=bt();ht()(Ua.A,Wa);Ua.A&&Ua.A.locals&&Ua.A.locals;class Ha{data;pwa_status;firebase_analytics;id;canavsElement;riveMonsterElement;buttonContext;playButton;images;loadedImages;imagesLoaded=!1;handler;static SceneName;audioPlayer;toggleBtn;pwa_install_status;titleTextElement;riveMonster;firebaseIntegration;loadingElement;onClickArea;hasBGLoaded=!1;hasRiveLoaded=!1;titleElement;constructor(){this.data=Pt.getFTMData(),this.riveMonsterElement=zt.getRiveCanvasValue(),this.toggleBtn=document.getElementById("toggle-btn"),this.loadingElement=document.getElementById("loading-screen"),this.riveMonster=new Da({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"bottomCenter",width:this.riveMonsterElement.width,height:this.riveMonsterElement.height,onLoad:()=>{this.hasRiveLoaded=!0,this.hideInitialLoading(),setTimeout((()=>{}),2e3)}}),this.titleElement=new lt({selectors:{root:"#title-and-play-button"}},"title",(t=>`<div id="${t}">${this.data.title}</div>`),!0),this.onClickArea=new lt({selectors:{root:"#background"}},"start-scene-click-area",(t=>`<div id="${t}"></div>`),!0),this.audioPlayer=new nt,this.pwa_status=localStorage.getItem(l),this.handler=document.getElementById("start-scene-click-area"),this.devToggle(),this.createPlayButton(),window.addEventListener("beforeinstallprompt",this.handlerInstallPrompt),this.setupBg(),this.titleTextElement=document.getElementById("title"),this.generateGameTitle(),this.riveMonsterElement.style.zIndex="4",this.firebaseIntegration=new zs,this.setOnClicknAreaStyle()}setupBg=async()=>{const t=Mt.createBackgroundComponent(1);(new Mt).generateBackground(t),this.hasBGLoaded=!0,this.hideInitialLoading()};setOnClicknAreaStyle=()=>{this.handler.style.width="inherit",this.handler.style.height="inherit",this.handler.style.position="absolute",this.handler.style.zIndex="5"};hideInitialLoading=()=>{this.hasBGLoaded&&this.hasRiveLoaded&&setTimeout((()=>{this.loadingElement.style.zIndex="-1",this.loadingElement.style.display="none"}),750)};devToggle=()=>{this.toggleBtn.addEventListener("click",(()=>(t=>{t.classList.toggle("on");const e=t.classList.contains("on");j.DebugMode=e,t.innerText="Dev"})(this.toggleBtn)))};generateGameTitle=()=>{this.titleTextElement&&(this.titleTextElement.textContent=this.data.title,this.data.title&&this.data.title.length>20?this.titleTextElement.classList.add("title-long"):this.titleTextElement.classList.remove("title-long"))};createPlayButton(){this.playButton=new $s({targetId:"title-and-play-button"}),this.playButton.onClick((()=>{this.toggleBtn.style.display="none",this.logTappedStartFirebaseEvent(),this.audioPlayer.playButtonClickSound(),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,L)})),document.addEventListener("selectstart",(function(t){t.preventDefault()})),this.handler.addEventListener("click",this.handleMouseClick,!1)}handleMouseClick=t=>{t.preventDefault(),zs.getInstance().sendUserClickedOnPlayEvent(),fbq("trackCustom","user_clicked",{event:"click"}),this.toggleBtn.style.display="none",this.audioPlayer.playButtonClickSound(),Pt.publish(Pt.EVENTS.SWITCH_SCENE_EVENT,L)};dispose(){this.audioPlayer.stopAllAudios(),this.handler.removeEventListener("click",this.handleMouseClick,!1),this.playButton.dispose(),this.playButton.destroy(),this.onClickArea.destroy(),this.titleElement.destroy(),window.removeEventListener("beforeinstallprompt",this.handlerInstallPrompt,!1),this.riveMonsterElement.style.zIndex="-1",this.riveMonster.dispose()}handlerInstallPrompt=t=>{t.preventDefault(),this.pwa_install_status=t,localStorage.setItem(l,"false")};logTappedStartFirebaseEvent(){const t={cr_user_id:z,ftm_language:O,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.data.majVersion&&this.data.minVersion?this.data.majVersion.toString()+"."+this.data.minVersion.toString():""};this.firebaseIntegration.sendTappedStartEvent(t)}}class $a{activeScene;data;width;height;context;gameControl;lastTime=0;toggleBtn;unsubscribeEvent;constructor(t){Pt.setDefaultGameStateValues(t),this.activeScene={},this.setupUIElements(),window.addEventListener("beforeinstallprompt",this.handleInstallPrompt),this.initDefaultScenes(),this.startAnimationLoop(),this.unsubscribeEvent=Pt.subscribe(Pt.EVENTS.SWITCH_SCENE_EVENT,(t=>{this.handleSwitchScene(t)}))}setupUIElements(){const{canvasWidth:t,canvasHeight:e,context:i,gameControlElem:n}=zt.getCanvasSizeValues();this.width=t,this.height=e,this.context=i,this.gameControl=n,this.toggleBtn=document.getElementById("toggle-btn")}initDefaultScenes(){this.activeScene.loading=new Va,this.gotoScene(P)}handleSwitchScene(t){t!==D&&this.activeScene.loading.toggleLoadingScreen(!0),this.timerWrapper((()=>{t!==k&&(this.gameControl.style.zIndex="-1"),this.gotoScene(t)}))}gotoScene(t){this.activeScene.scene&&this.activeScene.scene?.dispose(),this.activeScene.scene=this.getScene(t)}getScene(t){switch(t){case P:return new Ha;case L:return new Na;case k:return new Ma;case D:return new ja}}timerWrapper=(t,e=800)=>{setTimeout((()=>{t()}),e)};startAnimationLoop(){const t=e=>{this.animation(e),requestAnimationFrame(t)};requestAnimationFrame(t)}devToggle(){this.toggleBtn.addEventListener("click",(()=>{this.toggleBtn.classList.toggle("on"),this.toggleBtn.classList.contains("on")?(j.DebugMode=!0,this.toggleBtn.innerText="Dev"):(j.DebugMode=!1,this.toggleBtn.innerText="Dev")}))}animation=t=>{const e=t-this.lastTime;this.lastTime=t,this.context.clearRect(0,0,this.width,this.height),this.activeScene.loading.draw(e),this.activeScene.scene&&!(this.activeScene.scene instanceof ja||this.activeScene.scene instanceof Ha)&&this.activeScene.scene?.draw(e)};handleInstallPrompt=t=>{t.preventDefault(),localStorage.setItem(l,"false")}}try{self["workbox:window:4.3.1"]&&_()}catch(Ga){}var Ga=function(t,e){return new Promise((function(i){var n=new MessageChannel;n.port1.onmessage=function(t){return i(t.data)},t.postMessage(e,[n.port2])}))};function Xa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ya(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}try{self["workbox:core:4.3.1"]&&_()}catch(Ga){}var qa=function(){var t=this;this.promise=new Promise((function(e,i){t.resolve=e,t.reject=i}))},Ka=function(t,e){return new URL(t,location).href===new URL(e,location).href},Ja=function(t,e){Object.assign(this,e,{type:t})};function Qa(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function Za(t,e,i){return i?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function tr(){}var er=function(t){var e,i;function n(e,i){var n;return void 0===i&&(i={}),(n=t.call(this)||this).t=e,n.i=i,n.o=0,n.u=new qa,n.s=new qa,n.h=new qa,n.v=n.v.bind(Ya(Ya(n))),n.l=n.l.bind(Ya(Ya(n))),n.g=n.g.bind(Ya(Ya(n))),n.m=n.m.bind(Ya(Ya(n))),n}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var s,a,r=n.prototype;return r.register=Qa((function(t){var e,i,n=this,s=(void 0===t?{}:t).immediate,a=void 0!==s&&s;return e=function(){return n.p=Boolean(navigator.serviceWorker.controller),n.P=n.R(),Za(n.k(),(function(t){n.B=t,n.P&&(n.O=n.P,n.s.resolve(n.P),n.h.resolve(n.P),n.j(n.P),n.P.addEventListener("statechange",n.l,{once:!0}));var e=n.B.waiting;return e&&Ka(e.scriptURL,n.t)&&(n.O=e,Promise.resolve().then((function(){n.dispatchEvent(new Ja("waiting",{sw:e,wasWaitingBeforeRegister:!0}))}))),n.O&&n.u.resolve(n.O),n.B.addEventListener("updatefound",n.g),navigator.serviceWorker.addEventListener("controllerchange",n.m,{once:!0}),"BroadcastChannel"in self&&(n.C=new BroadcastChannel("workbox"),n.C.addEventListener("message",n.v)),navigator.serviceWorker.addEventListener("message",n.v),n.B}))},(i=function(){if(!a&&"complete"!==document.readyState)return function(t,e){return t&&t.then?t.then(tr):Promise.resolve()}(new Promise((function(t){return addEventListener("load",t)})))}())&&i.then?i.then(e):e()})),r.getSW=Qa((function(){return this.O||this.u.promise})),r.messageSW=Qa((function(t){return Za(this.getSW(),(function(e){return Ga(e,t)}))})),r.R=function(){var t=navigator.serviceWorker.controller;if(t&&Ka(t.scriptURL,this.t))return t},r.k=Qa((function(){var t=this;return function(t,e){try{var i=t()}catch(t){return e(t)}return i&&i.then?i.then(void 0,e):i}((function(){return Za(navigator.serviceWorker.register(t.t,t.i),(function(e){return t.L=performance.now(),e}))}),(function(t){throw t}))})),r.j=function(t){Ga(t,{type:"WINDOW_READY",meta:"workbox-window"})},r.g=function(){var t=this.B.installing;this.o>0||!Ka(t.scriptURL,this.t)||performance.now()>this.L+6e4?(this.W=t,this.B.removeEventListener("updatefound",this.g)):(this.O=t,this.u.resolve(t)),++this.o,t.addEventListener("statechange",this.l)},r.l=function(t){var e=this,i=t.target,n=i.state,s=i===this.W,a=s?"external":"",r={sw:i,originalEvent:t};!s&&this.p&&(r.isUpdate=!0),this.dispatchEvent(new Ja(a+n,r)),"installed"===n?this._=setTimeout((function(){"installed"===n&&e.B.waiting===i&&e.dispatchEvent(new Ja(a+"waiting",r))}),200):"activating"===n&&(clearTimeout(this._),s||this.s.resolve(i))},r.m=function(t){var e=this.O;e===navigator.serviceWorker.controller&&(this.dispatchEvent(new Ja("controlling",{sw:e,originalEvent:t})),this.h.resolve(e))},r.v=function(t){var e=t.data;this.dispatchEvent(new Ja("message",{data:e,originalEvent:t}))},s=n,(a=[{key:"active",get:function(){return this.s.promise}},{key:"controlling",get:function(){return this.h.promise}}])&&Xa(s.prototype,a),n}(function(){function t(){this.D={}}var e=t.prototype;return e.addEventListener=function(t,e){this.T(t).add(e)},e.removeEventListener=function(t,e){this.T(t).delete(e)},e.dispatchEvent=function(t){t.target=this,this.T(t.type).forEach((function(e){return e(t)}))},e.T=function(t){return this.D[t]=this.D[t]||new Set},t}()),ir=i(664),nr={};nr.styleTagTransform=wt(),nr.setAttributes=gt(),nr.insert=mt().bind(null,"head"),nr.domAPI=dt(),nr.insertStyleElement=bt();ht()(ir.A,nr);ir.A&&ir.A.locals&&ir.A.locals;new class{canvas;riveCanvas;versionInfoElement;lang;is_cached;progressBar;progressBarContainer;channel;sceneHandler;loadingElement;majVersion;minVersion;dataModal;startSessionTime;titleTextElement;feedBackTextElement;currentProgress;background;firebaseIntegration;constructor(t){this.lang=t,this.currentProgress=10,this.canvas=document.getElementById("canvas"),this.riveCanvas=document.getElementById("rivecanvas"),this.background=document.getElementById("background"),this.channel=new BroadcastChannel("my-channel"),this.progressBar=document.getElementById("progress-bar"),this.titleTextElement=document.getElementById("title"),this.feedBackTextElement=document.getElementById("feedback-text"),this.progressBarContainer=document.getElementById("progress-bar-container"),this.versionInfoElement=document.getElementById("version-info-id"),this.loadingElement=document.getElementById("loading-screen"),this.is_cached=this.initializeCachedData(),this.firebaseIntegration=new zs,this.startSessionTime=0,this.init(),this.channel.addEventListener("message",this.handleServiceWorkerMessage),window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener(H,this.handleVisibilityChange),window.addEventListener("resize",this.handleResize.bind(this))}async init(){const t=await n.getLanguageSpecificFont(this.lang);await this.loadAndCacheFont(t,`./assets/fonts/${t}.ttf`),await this.loadTitleFeedbackCustomFont(),await this.preloadGameAudios(),this.handleLoadingScreen(),this.setupCanvas();const e=await G();this.majVersion=e.majversion,this.minVersion=e.minversion,this.dataModal=this.createDataModal(e),this.globalInitialization(e),this.logSessionStartFirebaseEvent(),window.addEventListener("resize",(async()=>{this.handleResize(this.dataModal)}));const i=localStorage.getItem(this.lang+"gamePlayedInfo"),s=i?JSON.parse(i).length-1:0,a=j.DebugMode?c+this.lang+"Debug":c+this.lang;localStorage.setItem(a,s.toString()),this.is_cached.has(this.lang)&&this.handleCachedScenario(this.dataModal),this.registerWorkbox()}async loadTitleFeedbackCustomFont(){const t=it[this.lang]||it.default,e=`'${t}', sans-serif`;await this.loadAndCacheFont(t,`./assets/fonts/${t}.ttf`),[this.titleTextElement,this.feedBackTextElement].forEach((t=>{t&&(t.style.fontFamily=e)}))}logSessionStartFirebaseEvent(){let t=localStorage.getItem("lastSessionEndTime"),e=0;if(this.startSessionTime=(new Date).getTime(),t){let i=parseInt(t);isNaN(i)||(e=Math.abs((new Date).getTime()-i))}const i=parseFloat((e?e/864e5:0).toFixed(3)),n={cr_user_id:z,ftm_language:O,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",days_since_last:i};this.firebaseIntegration.sendSessionStartEvent(n)}logSessionEndFirebaseEvent(){const t={cr_user_id:z,ftm_language:O,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",duration:((new Date).getTime()-this.startSessionTime)/1e3};localStorage.setItem("lastSessionEndTime",(new Date).getTime().toString()),this.firebaseIntegration.sendSessionEndEvent(t)}initializeCachedData(){const t=localStorage.getItem(h);return t?new Map(JSON.parse(t)):new Map}async loadAndCacheFont(t,e){try{const i=await caches.open("fontCache");if(!await i.match(e)){const t=await fetch(e),n=await t.blob();await i.put(e,new Response(n))}const n=new FontFace(t,`url(${e}) format('truetype')`);await n.load(),document.fonts.add(n)}catch(t){console.error(`Failed to load and cache font: ${t}`)}}handleLoadingScreen=()=>{this.is_cached.get(O)?(this.progressBarContainer.style.display="none",this.progressBar.style.display="none"):(this.progressBarContainer.style.display="flex",this.progressBar.style.display="flex",this.progressBar.style.width="10%")};async registerWorkbox(){if("serviceWorker"in navigator)try{const t=new er("./sw.js",{});await t.register(),await navigator.serviceWorker.ready,this.is_cached.has(this.lang)?fetch($+"?cache-bust="+(new Date).getTime(),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store"}).then((async t=>{if(!t.ok)return void console.error("Failed to fetch the content file from the server!");const e=await t.json(),i=e.majversion+"."+e.minversion,n=localStorage.getItem("version"+O.toLowerCase());if(i&&n!=i){console.log("Content version mismatch! Reloading...");var s=JSON.parse(localStorage.getItem("is_cached"));console.log("current lang  "+O);var a=s.filter((t=>!t.toString().includes(O)));localStorage.setItem(h,JSON.stringify(a)),localStorage.removeItem("version"+O.toLowerCase()),caches.delete(O),this.handleUpdateFoundMessage()}})).catch((t=>{console.error("Error fetching the content file: "+t)})):this.channel.postMessage({command:"Cache",data:this.lang}),navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage)}catch(t){console.error(`Failed to register service worker: ${t}`)}}setupCanvas(){const t=window.screen.width>1024?768:window.innerWidth;this.canvas.height=window.innerHeight,this.canvas.width=t,this.riveCanvas.height=window.innerHeight,this.riveCanvas.width=t,this.background.style.width=`${t}px`}createDataModal(t){return new X(t.title,t.OtherAudios,t.Levels,t.FeedbackTexts,t.RightToLeft,t.FeedbackAudios,t.majversion,t.minversion,t.version)}globalInitialization(t){globalThis.aboutCompany=t.aboutCompany,globalThis.descriptionText=t.descriptionText}handleResize(t){this.is_cached.has(this.lang)&&(this.updateVersionInfoElement(t),this.setupCanvas(),this.reinitializeSceneHandler(t))}updateVersionInfoElement(t){this.is_cached.has(this.lang)&&j.DevelopmentLink&&(t.majVersion&&t.minVersion?this.versionInfoElement.innerHTML+=`/j.v${t.majVersion}.${t.minVersion}`:t.version&&(this.versionInfoElement.innerHTML+=`/j.v${t.version}`),document.getElementById("toggle-btn").style.display="block")}reinitializeSceneHandler(t){delete this.sceneHandler,this.sceneHandler=new $a(t),this.passingDataToContainer()}handleCachedScenario(t){this.updateVersionInfoElement(t),this.sceneHandler=new $a(t),this.passingDataToContainer()}passingDataToContainer=()=>{window.Android&&window.Android.cachedStatus(1==this.is_cached.get(this.lang))};setContainerAppOrientation(){window.Android&&window.Android.setContainerAppOrientation("portrait")}handleUpdateFoundMessage(){confirm("Update Found\nPress ok to update")&&window.location.reload()}handleLoadingMessage=t=>{if(this.progressBarContainer&&this.progressBar){this.showProgressBar();const e=Math.min(100,Math.max(0,t.data));e>this.currentProgress&&(this.currentProgress=e,this.progressBar.style.width=`${this.currentProgress}%`),this.isDownloadCompleted(this.currentProgress)&&(this.cacheLanguage(),this.sendCompletionEvent(),this.hideLoadingScreen())}};showProgressBar(){this.progressBarContainer.classList.add("visible"),this.progressBar.classList.add("visible")}isDownloadCompleted(t){return 100===t&&!this.is_cached.get(this.lang)}cacheLanguage(){try{this.is_cached.set(this.lang,!0),localStorage.setItem(h,JSON.stringify(Array.from(this.is_cached.entries())))}catch(t){console.error("Error caching language:",t)}}sendCompletionEvent(){const t={cr_user_id:z,ftm_language:O,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.getJsonVersionNumber()};this.firebaseIntegration.sendDownloadCompletedEvent(t)}getJsonVersionNumber(){return this.majVersion&&this.minVersion?this.majVersion+"."+this.minVersion:""}hideLoadingScreen(){try{localStorage.setItem("version"+this.lang,this.getJsonVersionNumber()),this.handleResize(this.dataModal)}catch(t){console.error("Error hiding loading screen:",t)}}handleServiceWorkerMessage=t=>{"Loading"===t.data.msg?this.handleLoadingMessage(t.data):"Update Found"===t.data.msg&&this.handleUpdateFoundMessage()};handleVisibilityChange=()=>{r()?this.logSessionStartFirebaseEvent():this.logSessionEndFirebaseEvent()};handleBeforeUnload=async t=>{this.logSessionEndFirebaseEvent(),this.dispose()};preloadGameAudios=async()=>{let t=m;return new Promise(((e,i)=>{const n=t.map((t=>(new nt).preloadGameAudio(t)));Promise.all(n).then((()=>e())).catch((t=>{console.error("Error preloading audio:",t),i(t)}))}))};dispose(){this.channel.removeEventListener("message",this.handleServiceWorkerMessage),window.removeEventListener("beforeunload",this.handleBeforeUnload),document.removeEventListener(H,this.handleVisibilityChange),window.removeEventListener("resize",this.handleResize),navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",this.handleServiceWorkerMessage)}}(O)})()})();