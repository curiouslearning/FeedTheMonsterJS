/*! For license information please see feedTheMonster.js.LICENSE.txt */
(()=>{var t={52:function(t){var e;e=()=>(()=>{"use strict";var t=[,(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var i,s=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t={}){var e,n,s=t;function a(){function t(t){const a=i;n=e=0,i=new Map,a.forEach((e=>{try{e(t)}catch(t){console.error(t)}})),this.ob(),s&&s.Tb()}let e=0,n=0,i=new Map,s=null,a=null;this.requestAnimationFrame=function(s){e||(e=requestAnimationFrame(t.bind(this)));const a=++n;return i.set(a,s),a},this.cancelAnimationFrame=function(t){i.delete(t),e&&0==i.size&&(cancelAnimationFrame(e),e=0)},this.Rb=function(t){a&&(document.body.remove(a),a=null),t||(a=document.createElement("div"),a.style.backgroundColor="black",a.style.position="fixed",a.style.right=0,a.style.top=0,a.style.color="white",a.style.padding="4px",a.innerHTML="RIVE FPS",t=function(t){a.innerHTML="RIVE FPS "+t.toFixed(1)},document.body.appendChild(a)),s=new function(){let e=0,n=0;this.Tb=function(){var i=performance.now();n?(++e,1e3<(i-=n)&&(t(1e3*e/i),e=n=0)):(n=i,e=0)}}},this.Ob=function(){a&&(document.body.remove(a),a=null),s=null},this.ob=function(){}}function r(t){console.assert(!0);const e=new Map;let n=-1/0;this.push=function(i){return i=i+((1<<t)-1)>>t,e.has(i)&&clearTimeout(e.get(i)),e.set(i,setTimeout((function(){e.delete(i),0==e.length?n=-1/0:i==n&&(n=Math.max(...e.keys()),console.assert(n<i))}),1e3)),n=Math.max(i,n),n<<t}}s.ready=new Promise(((t,i)=>{e=t,n=i}));const o=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){o&&o();let t=s.decodeAudio;s.decodeAudio=function(e,n){n(e=t(e))};let e=s.decodeFont;s.decodeFont=function(t,n){n(t=e(t))};const n=s.FileAssetLoader;s.ptrToAsset=t=>{let e=s.ptrToFileAsset(t);return e.isImage?s.ptrToImageAsset(t):e.isFont?s.ptrToFontAsset(t):e.isAudio?s.ptrToAudioAsset(t):e},s.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:t}){this.__parent.__construct.call(this),this.Gb=t},loadContents:function(t,e){return t=s.ptrToAsset(t),this.Gb(t,e)}}),s.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(t){let e=s.ptrToAsset(t);return""!==(t=e.cdnUuid)&&(n=e.cdnBaseUrl+"/"+t,(i=new XMLHttpRequest).responseType="arraybuffer",i.onreadystatechange=function(){4==i.readyState&&200==i.status&&(t=>{e.decode(new Uint8Array(t.response))})(i)},i.open("GET",n,!0),i.send(null),!0);var n,i}}),s.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(t){this.kb.push(t)},loadContents:function(t,e){for(let n of this.kb)if(n.loadContents(t,e))return!0;return!1}})};const l="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),c=new function(){function t(){if(!e){var t=document.createElement("canvas"),r={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let o;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(o=t.getContext("webgl",r),n=1,!o)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(o=t.getContext("webgl2",r))n=2;else{if(!(o=t.getContext("webgl",r)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;n=1}function l(t,e,n){if(e=o.createShader(e),o.shaderSource(e,n),o.compileShader(e),0<((n=o.getShaderInfoLog(e))||"").length)throw n;o.attachShader(t,e)}if(o=new Proxy(o,{get:(t,e)=>t.isContextLost()?(c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",e),c=!0),"function"==typeof t[e]?function(){}:void 0):"function"==typeof t[e]?function(...n){return t[e].apply(t,n)}:t[e],set(t,e,n){if(!t.isContextLost())return t[e]=n,!0;c||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+e),c=!0)}}),i=Math.min(o.getParameter(o.MAX_RENDERBUFFER_SIZE),o.getParameter(o.MAX_TEXTURE_SIZE)),l(t=o.createProgram(),o.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),l(t,o.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),o.bindAttribLocation(t,0,"vertex"),o.bindAttribLocation(t,1,"uv"),o.linkProgram(t),0<((r=o.getProgramInfoLog(t))||"").trim().length)throw r;s=o.getUniformLocation(t,"mat"),a=o.getUniformLocation(t,"translate"),o.useProgram(t),o.bindBuffer(o.ARRAY_BUFFER,o.createBuffer()),o.enableVertexAttribArray(0),o.enableVertexAttribArray(1),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,o.createBuffer()),o.uniform1i(o.getUniformLocation(t,"image"),0),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e=o}return!0}let e=null,n=0,i=0,s=null,a=null,o=0,l=0,c=!1;t(),this.hc=function(){return t(),i},this.Mb=function(t){e.deleteTexture&&e.deleteTexture(t)},this.Lb=function(i){if(!t())return null;const s=e.createTexture();return s?(e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),2==n?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),s):null};const h=new r(8),u=new r(8),d=new r(10),p=new r(10);this.Qb=function(n,i,r,c,m){if(t()){var f=h.push(n),g=u.push(i);if(e.canvas){for(var v of(e.canvas.width==f&&e.canvas.height==g||(e.canvas.width=f,e.canvas.height=g),e.viewport(0,g-i,n,i),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST),r.sort(((t,e)=>e.wb-t.wb)),f=d.push(c),o!=f&&(e.bufferData(e.ARRAY_BUFFER,8*f,e.DYNAMIC_DRAW),o=f),f=0,r))e.bufferSubData(e.ARRAY_BUFFER,f,v.Ta),f+=4*v.Ta.length;for(var b of(console.assert(f==4*c),r))e.bufferSubData(e.ARRAY_BUFFER,f,b.Db),f+=4*b.Db.length;for(var y of(console.assert(f==8*c),f=p.push(m),l!=f&&(e.bufferData(e.ELEMENT_ARRAY_BUFFER,2*f,e.DYNAMIC_DRAW),l=f),v=0,r))e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,v,y.indices),v+=2*y.indices.length;console.assert(v==2*m),y=0,b=!0,f=v=0;for(const t of r){t.image.Ka!=y&&(e.bindTexture(e.TEXTURE_2D,t.image.Ja||null),y=t.image.Ka),t.mc?(e.scissor(t.Ya,g-t.Za-t.jb,t.Ac,t.jb),b=!0):b&&(e.scissor(0,g-i,n,i),b=!1),r=2/n;const o=-2/i;e.uniform4f(s,t.ha[0]*r*t.Ba,t.ha[1]*o*t.Ca,t.ha[2]*r*t.Ba,t.ha[3]*o*t.Ca),e.uniform2f(a,t.ha[4]*r*t.Ba+r*(t.Ya-t.ic*t.Ba)-1,t.ha[5]*o*t.Ca+o*(t.Za-t.jc*t.Ca)+1),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,f),e.vertexAttribPointer(1,2,e.FLOAT,!1,0,f+4*c),e.drawElements(e.TRIANGLES,t.indices.length,e.UNSIGNED_SHORT,v),f+=4*t.Ta.length,v+=2*t.indices.length}console.assert(f==4*c),console.assert(v==2*m)}}},this.canvas=function(){return t()&&e.canvas}},h=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){function t(t){switch(t){case m.srcOver:return"source-over";case m.screen:return"screen";case m.overlay:return"overlay";case m.darken:return"darken";case m.lighten:return"lighten";case m.colorDodge:return"color-dodge";case m.colorBurn:return"color-burn";case m.hardLight:return"hard-light";case m.softLight:return"soft-light";case m.difference:return"difference";case m.exclusion:return"exclusion";case m.multiply:return"multiply";case m.hue:return"hue";case m.saturation:return"saturation";case m.color:return"color";case m.luminosity:return"luminosity"}}function e(t){return"rgba("+((16711680&t)>>>16)+","+((65280&t)>>>8)+","+((255&t)>>>0)+","+((4278190080&t)>>>24)/255+")"}function n(){0<x.length&&(c.Qb(T.drawWidth(),T.drawHeight(),x,_,A),x=[],A=_=0,T.reset(512,512));for(const t of E){for(const e of t.H)e();t.H=[]}E.clear()}h&&h();var i=s.RenderPaintStyle;const r=s.RenderPath,o=s.RenderPaint,u=s.Renderer,d=s.StrokeCap,p=s.StrokeJoin,m=s.BlendMode,f=i.fill,g=i.stroke,v=s.FillRule.evenOdd;let b=1;var y=s.RenderImage.extend("CanvasRenderImage",{__construct:function({la:t,xa:e}={}){this.__parent.__construct.call(this),this.Ka=b,b=b+1&2147483647||1,this.la=t,this.xa=e},__destruct:function(){this.Ja&&(c.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(t){var e=this;e.xa&&e.xa(e);var n=new Image;e.Wa=URL.createObjectURL(new Blob([t],{type:"image/png"})),n.onload=function(){e.Fb=n,e.Ja=c.Lb(n),e.size(n.width,n.height),e.la&&e.la(e)},n.src=e.Wa}}),w=r.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(t,e,n,i,s,a,r){var o=this.T,l=o.addPath;t=t.T;const c=new DOMMatrix;c.a=e,c.b=n,c.c=i,c.d=s,c.e=a,c.f=r,l.call(o,t,c)},fillRule:function(t){this.Va=t},moveTo:function(t,e){this.T.moveTo(t,e)},lineTo:function(t,e){this.T.lineTo(t,e)},cubicTo:function(t,e,n,i,s,a){this.T.bezierCurveTo(t,e,n,i,s,a)},close:function(){this.T.closePath()}}),S=o.extend("CanvasRenderPaint",{color:function(t){this.Xa=e(t)},thickness:function(t){this.Ib=t},join:function(t){switch(t){case p.miter:this.Ia="miter";break;case p.round:this.Ia="round";break;case p.bevel:this.Ia="bevel"}},cap:function(t){switch(t){case d.butt:this.Ha="butt";break;case d.round:this.Ha="round";break;case d.square:this.Ha="square"}},style:function(t){this.Hb=t},blendMode:function(e){this.Eb=t(e)},clearGradient:function(){this.ja=null},linearGradient:function(t,e,n,i){this.ja={yb:t,zb:e,bb:n,cb:i,Ra:[]}},radialGradient:function(t,e,n,i){this.ja={yb:t,zb:e,bb:n,cb:i,Ra:[],ec:!0}},addStop:function(t,e){this.ja.Ra.push({color:t,stop:e})},completeGradient:function(){},draw:function(t,n,i){let s=this.Hb;var a=this.Xa,r=this.ja;if(t.globalCompositeOperation=this.Eb,null!=r){a=r.yb;var o=r.zb;const n=r.bb;var l=r.cb;const i=r.Ra;r.ec?(r=n-a,l-=o,a=t.createRadialGradient(a,o,0,a,o,Math.sqrt(r*r+l*l))):a=t.createLinearGradient(a,o,n,l);for(let t=0,n=i.length;t<n;t++)o=i[t],a.addColorStop(o.stop,e(o.color));this.Xa=a,this.ja=null}switch(s){case g:t.strokeStyle=a,t.lineWidth=this.Ib,t.lineCap=this.Ha,t.lineJoin=this.Ia,t.stroke(n);break;case f:t.fillStyle=a,t.fill(n,i)}}});const E=new Set;let T=null,x=[],_=0,A=0;var C=s.CanvasRenderer=u.extend("Renderer",{__construct:function(t){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=t.getContext("2d"),this.Ua=t,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const t=this.S.length-6;if(6>t)throw"restore() called without matching save().";this.S.splice(t),this.H.push(this.C.restore.bind(this.C))},transform:function(t,e,n,i,s,a){const r=this.S,o=r.length-6;r.splice(o,6,r[o]*t+r[o+2]*e,r[o+1]*t+r[o+3]*e,r[o]*n+r[o+2]*i,r[o+1]*n+r[o+3]*i,r[o]*s+r[o+2]*a+r[o+4],r[o+1]*s+r[o+3]*a+r[o+5]),this.H.push(this.C.transform.bind(this.C,t,e,n,i,s,a))},rotate:function(t){const e=Math.sin(t);t=Math.cos(t),this.transform(t,e,-e,t,0,0)},_drawPath:function(t,e){this.H.push(e.draw.bind(e,this.C,t.T,t.Va===v?"evenodd":"nonzero"))},_drawRiveImage:function(e,n,i){var s=e.Fb;if(s){var a=this.C,r=t(n);this.H.push((function(){a.globalCompositeOperation=r,a.globalAlpha=i,a.drawImage(s,0,0),a.globalAlpha=1}))}},_getMatrix:function(t){const e=this.S,n=e.length-6;for(let i=0;6>i;++i)t[i]=e[n+i]},_drawImageMesh:function(e,i,a,r,o,l,h,u,d,p){var m=this.C.canvas.width,f=this.C.canvas.height;const g=d-h,v=p-u;h=Math.max(h,0),u=Math.max(u,0),d=Math.min(d,m),p=Math.min(p,f);const b=d-h,y=p-u;if(console.assert(b<=Math.min(g,m)),console.assert(y<=Math.min(v,f)),!(0>=b||0>=y)){d=b<g||y<v,m=p=1;var w=Math.ceil(b*p),S=Math.ceil(y*m);f=c.hc(),w>f&&(p*=f/w,w=f),S>f&&(m*=f/S,S=f),T||(T=new s.DynamicRectanizer(f),T.reset(512,512)),0>(f=T.addRect(w,S))&&(n(),E.add(this),f=T.addRect(w,S),console.assert(0<=f));var C=65535&f,I=f>>16;x.push({ha:this.S.slice(this.S.length-6),image:e,Ya:C,Za:I,ic:h,jc:u,Ac:w,jb:S,Ba:p,Ca:m,Ta:new Float32Array(r),Db:new Float32Array(o),indices:new Uint16Array(l),mc:d,wb:e.Ka<<1|(d?1:0)}),_+=r.length,A+=l.length;var L=this.C,P=t(i);this.H.push((function(){L.save(),L.resetTransform(),L.globalCompositeOperation=P,L.globalAlpha=a;const t=c.canvas();t&&L.drawImage(t,C,I,w,S,h,u,b,y),L.restore()}))}},_clipPath:function(t){this.H.push(this.C.clip.bind(this.C,t.T,t.Va===v?"evenodd":"nonzero"))},clear:function(){E.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(t,e){this.transform(1,0,0,1,t,e)}});s.makeRenderer=function(t){const e=new C(t),n=e.C;return new Proxy(e,{get(t,i){if("function"==typeof t[i])return function(...e){return t[i].apply(t,e)};if("function"==typeof n[i]){if(-1<l.indexOf(i))throw Error("RiveException: Method call to '"+i+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...t){e.H.push(n[i].bind(n,...t))}}return t[i]},set(t,i,s){if(i in n)return e.H.push((()=>{n[i]=s})),!0}})},s.decodeImage=function(t,e){new y({la:e}).decode(t)},s.renderFactory={makeRenderPaint:function(){return new S},makeRenderPath:function(){return new w},makeRenderImage:function(){let t=L;return new y({xa:()=>{t.total++},la:()=>{if(t.loaded++,t.loaded===t.total){const e=t.ready;e&&(e(),t.ready=null)}}})}};let I=s.load,L=null;s.load=function(t,e,n=!0){const i=new s.FallbackFileAssetLoader;return void 0!==e&&i.addLoader(e),n&&(e=new s.CDNFileAssetLoader,i.addLoader(e)),new Promise((function(e){let n=null;L={total:0,loaded:0,ready:function(){e(n)}},n=I(t,i),0==L.total&&e(n)}))},i=new a,s.requestAnimationFrame=i.requestAnimationFrame.bind(i),s.cancelAnimationFrame=i.cancelAnimationFrame.bind(i),s.enableFPSCounter=i.Rb.bind(i),s.disableFPSCounter=i.Ob,i.ob=n,s.resolveAnimationFrame=n,s.cleanup=function(){T&&T.delete()}};var u,d,p=Object.assign({},s),m="./this.program",f="object"==typeof window,g="function"==typeof importScripts,v="";(f||g)&&(g?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),i&&(v=i),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",g&&(d=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),u=(t,e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)});var b,y=s.print||console.log.bind(console),w=s.printErr||console.error.bind(console);Object.assign(s,p),p=null,s.thisProgram&&(m=s.thisProgram),s.wasmBinary&&(b=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&U("no native wasm support detected");var S,E,T,x,_,A,C,I,L,P,k=!1;function D(){var t=S.buffer;s.HEAP8=T=new Int8Array(t),s.HEAP16=_=new Int16Array(t),s.HEAP32=C=new Int32Array(t),s.HEAPU8=x=new Uint8Array(t),s.HEAPU16=A=new Uint16Array(t),s.HEAPU32=I=new Uint32Array(t),s.HEAPF32=L=new Float32Array(t),s.HEAPF64=P=new Float64Array(t)}var B,M=[],z=[],N=[];function O(){var t=s.preRun.shift();M.unshift(t)}var R,F=0,j=null,V=null;function U(t){throw s.onAbort&&s.onAbort(t),w(t="Aborted("+t+")"),k=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),n(t),t}function $(t){return t.startsWith("data:application/octet-stream;base64,")}if(!$(R="canvas_advanced.wasm")){var W=R;R=s.locateFile?s.locateFile(W,v):v+W}function H(t){if(t==R&&b)return new Uint8Array(b);if(d)return d(t);throw"both async and sync fetching of the wasm failed"}function G(t,e,n){return function(t){if(!b&&(f||g)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>H(t)));if(u)return new Promise(((e,n)=>{u(t,(t=>e(new Uint8Array(t))),n)}))}return Promise.resolve().then((()=>H(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{w("failed to asynchronously prepare wasm: "+t),U(t)}))}var X,Y,q={437756:(t,e,n,i,s)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=t,window.h.I.capture=e,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=i,window.h.ga.xb=s;let a=window.h;a.D=[],a.yc=function(t){for(var e=0;e<a.D.length;++e)if(null==a.D[e])return a.D[e]=t,e;return a.D.push(t),a.D.length-1},a.Cb=function(t){for(a.D[t]=null;0<a.D.length&&null==a.D[a.D.length-1];)a.D.pop()},a.Sc=function(t){for(var e=0;e<a.D.length;++e)if(a.D[e]==t)return a.Cb(e)},a.ra=function(t){return a.D[t]},a.Bb=["touchend","click"],a.unlock=function(){for(var t=0;t<a.D.length;++t){var e=a.D[t];null!=e&&null!=e.J&&e.state===a.ga.xb&&e.J.resume().then((()=>{Pn(e.pb)}),(t=>{console.error("Failed to resume audiocontext",t)}))}a.Bb.map((function(t){document.removeEventListener(t,a.unlock,!0)}))},a.Bb.map((function(t){document.addEventListener(t,a.unlock,!0)}))}return window.h.Aa+=1,1},439934:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},440098:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,440202:()=>{try{var t=new(window.AudioContext||window.webkitAudioContext),e=t.sampleRate;return t.close(),e}catch(t){return 0}},440373:(t,e,n,i,s,a)=>{if(void 0===window.h)return-1;var r={},o={};return t==window.h.I.ya&&0!=n&&(o.sampleRate=n),r.J=new(window.AudioContext||window.webkitAudioContext)(o),r.J.suspend(),r.state=window.h.ga.stopped,n=0,t!=window.h.I.ya&&(n=e),r.Z=r.J.createScriptProcessor(i,n,e),r.Z.onaudioprocess=function(n){if(null!=r.sa&&0!=r.sa.length||(r.sa=new Float32Array(L.buffer,s,i*e)),t==window.h.I.capture||t==window.h.I.La){for(var o=0;o<e;o+=1)for(var l=n.inputBuffer.getChannelData(o),c=r.sa,h=0;h<i;h+=1)c[h*e+o]=l[h];Dn(a,i,s)}if(t==window.h.I.ya||t==window.h.I.La)for(Bn(a,i,s),o=0;o<n.outputBuffer.numberOfChannels;++o)for(l=n.outputBuffer.getChannelData(o),c=r.sa,h=0;h<i;h+=1)l[h]=c[h*e+o];else for(o=0;o<n.outputBuffer.numberOfChannels;++o)n.outputBuffer.getChannelData(o).fill(0)},t!=window.h.I.capture&&t!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){r.Da=r.J.createMediaStreamSource(t),r.Da.connect(r.Z),r.Z.connect(r.J.destination)})).catch((function(t){console.log("Failed to get user media: "+t)})),t==window.h.I.ya&&r.Z.connect(r.J.destination),r.pb=a,window.h.yc(r)},443250:t=>window.h.ra(t).J.sampleRate,443323:t=>{void 0!==(t=window.h.ra(t)).Z&&(t.Z.onaudioprocess=function(){},t.Z.disconnect(),t.Z=void 0),void 0!==t.Da&&(t.Da.disconnect(),t.Da=void 0),t.J.close(),t.J=void 0,t.pb=void 0},443723:t=>{window.h.Cb(t)},443773:t=>{(t=window.h.ra(t)).J.resume(),t.state=window.h.ga.xb},443912:t=>{(t=window.h.ra(t)).J.suspend(),t.state=window.h.ga.stopped}},K=t=>{for(;0<t.length;)t.shift()(s)},J=(t,e)=>{for(var n=0,i=t.length-1;0<=i;i--){var s=t[i];"."===s?t.splice(i,1):".."===s?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},Q=t=>{var e="/"===t.charAt(0),n="/"===t.substr(-1);return(t=J(t.split("/").filter((t=>!!t)),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},Z=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},tt=t=>{if("/"===t)return"/";var e=(t=(t=Q(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},et=t=>(et=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>crypto.getRandomValues(t);U("initRandomDevice")})())(t);function nt(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if("string"!=typeof(e=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=J(t.split("/").filter((t=>!!t)),!e).join("/"))||"."}var it="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,st=(t,e,n)=>{var i=e+n;for(n=e;t[n]&&!(n>=i);)++n;if(16<n-e&&t.buffer&&it)return it.decode(t.subarray(e,n));for(i="";e<n;){var s=t[e++];if(128&s){var a=63&t[e++];if(192==(224&s))i+=String.fromCharCode((31&s)<<6|a);else{var r=63&t[e++];65536>(s=224==(240&s)?(15&s)<<12|a<<6|r:(7&s)<<18|a<<12|r<<6|63&t[e++])?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else i+=String.fromCharCode(s)}return i},at=[],rt=t=>{for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);127>=i?e++:2047>=i?e+=2:55296<=i&&57343>=i?(e+=4,++n):e+=3}return e},ot=(t,e,n,i)=>{if(!(0<i))return 0;var s=n;i=n+i-1;for(var a=0;a<t.length;++a){var r=t.charCodeAt(a);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++a)),127>=r){if(n>=i)break;e[n++]=r}else{if(2047>=r){if(n+1>=i)break;e[n++]=192|r>>6}else{if(65535>=r){if(n+2>=i)break;e[n++]=224|r>>12}else{if(n+3>=i)break;e[n++]=240|r>>18,e[n++]=128|r>>12&63}e[n++]=128|r>>6&63}e[n++]=128|63&r}}return e[n]=0,n-s};function lt(t,e){var n=Array(rt(t)+1);return t=ot(t,n,0,n.length),e&&(n.length=t),n}var ct=[];function ht(t,e){ct[t]={input:[],F:[],V:e},Ft(t,ut)}var ut={open:function(t){var e=ct[t.node.za];if(!e)throw new At(43);t.s=e,t.seekable=!1},close:function(t){t.s.V.qa(t.s)},qa:function(t){t.s.V.qa(t.s)},read:function(t,e,n,i){if(!t.s||!t.s.V.ib)throw new At(60);for(var s=0,a=0;a<i;a++){try{var r=t.s.V.ib(t.s)}catch(t){throw new At(29)}if(void 0===r&&0===s)throw new At(6);if(null==r)break;s++,e[n+a]=r}return s&&(t.node.timestamp=Date.now()),s},write:function(t,e,n,i){if(!t.s||!t.s.V.Oa)throw new At(60);try{for(var s=0;s<i;s++)t.s.V.Oa(t.s,e[n+s])}catch(t){throw new At(29)}return i&&(t.node.timestamp=Date.now()),s}},dt={ib:function(){t:{if(!at.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t){t=null;break t}at=lt(t,!0)}t=at.shift()}return t},Oa:function(t,e){null===e||10===e?(y(st(t.F,0)),t.F=[]):0!=e&&t.F.push(e)},qa:function(t){t.F&&0<t.F.length&&(y(st(t.F,0)),t.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},pt={Oa:function(t,e){null===e||10===e?(w(st(t.F,0)),t.F=[]):0!=e&&t.F.push(e)},qa:function(t){t.F&&0<t.F.length&&(w(st(t.F,0)),t.F=[])}};function mt(t,e){var n=t.j?t.j.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)>>>0),0!=n&&(e=Math.max(e,256)),n=t.j,t.j=new Uint8Array(e),0<t.v&&t.j.set(n.subarray(0,t.v),0))}var ft,gt,vt,bt,yt={O:null,U:()=>yt.createNode(null,"/",16895,0),createNode(t,e,n,i){if(24576==(61440&n)||4096==(61440&n))throw new At(63);return yt.O||(yt.O={dir:{node:{Y:yt.l.Y,P:yt.l.P,ka:yt.l.ka,va:yt.l.va,ub:yt.l.ub,Ab:yt.l.Ab,vb:yt.l.vb,sb:yt.l.sb,Ea:yt.l.Ea},stream:{ba:yt.m.ba}},file:{node:{Y:yt.l.Y,P:yt.l.P},stream:{ba:yt.m.ba,read:yt.m.read,write:yt.m.write,pa:yt.m.pa,lb:yt.m.lb,nb:yt.m.nb}},link:{node:{Y:yt.l.Y,P:yt.l.P,ma:yt.l.ma},stream:{}},$a:{node:{Y:yt.l.Y,P:yt.l.P},stream:Rt}}),16384==(61440&(n=Dt(t,e,n,i)).mode)?(n.l=yt.O.dir.node,n.m=yt.O.dir.stream,n.j={}):32768==(61440&n.mode)?(n.l=yt.O.file.node,n.m=yt.O.file.stream,n.v=0,n.j=null):40960==(61440&n.mode)?(n.l=yt.O.link.node,n.m=yt.O.link.stream):8192==(61440&n.mode)&&(n.l=yt.O.$a.node,n.m=yt.O.$a.stream),n.timestamp=Date.now(),t&&(t.j[e]=n,t.timestamp=n.timestamp),n},Kc:t=>t.j?t.j.subarray?t.j.subarray(0,t.v):new Uint8Array(t.j):new Uint8Array(0),l:{Y(t){var e={};return e.Jc=8192==(61440&t.mode)?t.id:1,e.Mc=t.id,e.mode=t.mode,e.Oc=1,e.uid=0,e.Lc=0,e.za=t.za,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.v:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.Bc=new Date(t.timestamp),e.Nc=new Date(t.timestamp),e.Ic=new Date(t.timestamp),e.Jb=4096,e.Cc=Math.ceil(e.size/e.Jb),e},P(t,e){if(void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&(e=e.size,t.v!=e))if(0==e)t.j=null,t.v=0;else{var n=t.j;t.j=new Uint8Array(e),n&&t.j.set(n.subarray(0,Math.min(e,t.v))),t.v=e}},ka(){throw Ct[44]},va:(t,e,n,i)=>yt.createNode(t,e,n,i),ub(t,e,n){if(16384==(61440&t.mode)){try{var i=kt(e,n)}catch(t){}if(i)for(var s in i.j)throw new At(55)}delete t.parent.j[t.name],t.parent.timestamp=Date.now(),t.name=n,e.j[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},Ab(t,e){delete t.j[e],t.timestamp=Date.now()},vb(t,e){var n,i=kt(t,e);for(n in i.j)throw new At(55);delete t.j[e],t.timestamp=Date.now()},sb(t){var e,n=[".",".."];for(e in t.j)t.j.hasOwnProperty(e)&&n.push(e);return n},Ea:(t,e,n)=>((t=yt.createNode(t,e,41471,0)).link=n,t),ma(t){if(40960!=(61440&t.mode))throw new At(28);return t.link}},m:{read(t,e,n,i,s){var a=t.node.j;if(s>=t.node.v)return 0;if(8<(t=Math.min(t.node.v-s,i))&&a.subarray)e.set(a.subarray(s,s+t),n);else for(i=0;i<t;i++)e[n+i]=a[s+i];return t},write(t,e,n,i,s,a){if(e.buffer===T.buffer&&(a=!1),!i)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.j||t.j.subarray)){if(a)return t.j=e.subarray(n,n+i),t.v=i;if(0===t.v&&0===s)return t.j=e.slice(n,n+i),t.v=i;if(s+i<=t.v)return t.j.set(e.subarray(n,n+i),s),i}if(mt(t,s+i),t.j.subarray&&e.subarray)t.j.set(e.subarray(n,n+i),s);else for(a=0;a<i;a++)t.j[s+a]=e[n+a];return t.v=Math.max(t.v,s+i),i},ba(t,e,n){if(1===n?e+=t.position:2===n&&32768==(61440&t.node.mode)&&(e+=t.node.v),0>e)throw new At(28);return e},pa(t,e,n){mt(t.node,e+n),t.node.v=Math.max(t.node.v,e+n)},lb(t,e,n,i,s){if(32768!=(61440&t.node.mode))throw new At(43);if(t=t.node.j,2&s||t.buffer!==T.buffer){if((0<n||n+e<t.length)&&(t=t.subarray?t.subarray(n,n+e):Array.prototype.slice.call(t,n,n+e)),n=!0,U(),!(e=void 0))throw new At(48);T.set(t,e)}else n=!1,e=t.byteOffset;return{o:e,M:n}},nb:(t,e,n,i)=>(yt.m.write(t,e,0,i,n,!1),0)}},wt=null,St={},Et=[],Tt=1,xt=null,_t=!0,At=null,Ct={},It=(t,e={})=>{if(!(t=nt(t)))return{path:"",node:null};if(8<(e=Object.assign({gb:!0,Qa:0},e)).Qa)throw new At(32);t=t.split("/").filter((t=>!!t));for(var n=wt,i="/",s=0;s<t.length;s++){var a=s===t.length-1;if(a&&e.parent)break;if(n=kt(n,t[s]),i=Q(i+"/"+t[s]),n.wa&&(!a||a&&e.gb)&&(n=n.wa.root),!a||e.fb)for(a=0;40960==(61440&n.mode);)if(n=Wt(i),i=nt(Z(i),n),n=It(i,{Qa:e.Qa+1}).node,40<a++)throw new At(32)}return{path:i,node:n}},Lt=t=>{for(var e;;){if(t===t.parent)return t=t.U.mb,e?"/"!==t[t.length-1]?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}},Pt=(t,e)=>{for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%xt.length},kt=(t,e)=>{var n;if(n=(n=Mt(t,"x"))?n:t.l.ka?0:2)throw new At(n,t);for(n=xt[Pt(t.id,e)];n;n=n.lc){var i=n.name;if(n.parent.id===t.id&&i===e)return n}return t.l.ka(t,e)},Dt=(t,e,n,i)=>(t=new xn(t,e,n,i),e=Pt(t.parent.id,t.name),t.lc=xt[e],xt[e]=t),Bt=t=>{var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e},Mt=(t,e)=>_t?0:!e.includes("r")||292&t.mode?e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0:2,zt=(t,e)=>{try{return kt(t,e),20}catch(t){}return Mt(t,"wx")},Nt=t=>{if(!(t=Et[t]))throw new At(8);return t},Ot=(t,e=-1)=>(vt||((vt=function(){this.h={}}).prototype={},Object.defineProperties(vt.prototype,{object:{get(){return this.node},set(t){this.node=t}},flags:{get(){return this.h.flags},set(t){this.h.flags=t}},position:{get(){return this.h.position},set(t){this.h.position=t}}})),t=Object.assign(new vt,t),-1==e&&(e=(()=>{for(var t=0;4096>=t;t++)if(!Et[t])return t;throw new At(33)})()),t.X=e,Et[e]=t),Rt={open:t=>{t.m=St[t.node.za].m,t.m.open&&t.m.open(t)},ba:()=>{throw new At(70)}},Ft=(t,e)=>{St[t]={m:e}},jt=(t,e)=>{var n="/"===e,i=!e;if(n&&wt)throw new At(10);if(!n&&!i){var s=It(e,{gb:!1});if(e=s.path,(s=s.node).wa)throw new At(10);if(16384!=(61440&s.mode))throw new At(54)}e={type:t,Qc:{},mb:e,kc:[]},(t=t.U(e)).U=e,e.root=t,n?wt=t:s&&(s.wa=e,s.U&&s.U.kc.push(e))},Vt=(t,e,n)=>{var i=It(t,{parent:!0}).node;if(!(t=tt(t))||"."===t||".."===t)throw new At(28);var s=zt(i,t);if(s)throw new At(s);if(!i.l.va)throw new At(63);return i.l.va(i,t,e,n)},Ut=(t,e,n)=>{void 0===n&&(n=e,e=438),Vt(t,8192|e,n)},$t=(t,e)=>{if(!nt(t))throw new At(44);var n=It(e,{parent:!0}).node;if(!n)throw new At(44);e=tt(e);var i=zt(n,e);if(i)throw new At(i);if(!n.l.Ea)throw new At(63);n.l.Ea(n,e,t)},Wt=t=>{if(!(t=It(t).node))throw new At(44);if(!t.l.ma)throw new At(28);return nt(Lt(t.parent),t.l.ma(t))},Ht=(t,e,n)=>{if(""===t)throw new At(44);if("string"==typeof e){var i={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===i)throw Error(`Unknown file open mode: ${e}`);e=i}if(n=64&e?4095&(void 0===n?438:n)|32768:0,"object"==typeof t)var a=t;else{t=Q(t);try{a=It(t,{fb:!(131072&e)}).node}catch(t){}}if(i=!1,64&e)if(a){if(128&e)throw new At(20)}else a=Vt(t,n,0),i=!0;if(!a)throw new At(44);if(8192==(61440&a.mode)&&(e&=-513),65536&e&&16384!=(61440&a.mode))throw new At(54);if(!i&&(n=a?40960==(61440&a.mode)?32:16384==(61440&a.mode)&&("r"!==Bt(e)||512&e)?31:Mt(a,Bt(e)):44))throw new At(n);if(512&e&&!i){if(!(n="string"==typeof(n=a)?It(n,{fb:!0}).node:n).l.P)throw new At(63);if(16384==(61440&n.mode))throw new At(31);if(32768!=(61440&n.mode))throw new At(28);if(i=Mt(n,"w"))throw new At(i);n.l.P(n,{size:0,timestamp:Date.now()})}return e&=-131713,(a=Ot({node:a,path:Lt(a),flags:e,seekable:!0,position:0,m:a.m,zc:[],error:!1})).m.open&&a.m.open(a),!s.logReadFiles||1&e||(bt||(bt={}),t in bt||(bt[t]=1)),a},Gt=(t,e,n)=>{if(null===t.X)throw new At(8);if(!t.seekable||!t.m.ba)throw new At(70);if(0!=n&&1!=n&&2!=n)throw new At(28);t.position=t.m.ba(t,e,n),t.zc=[]},Xt=()=>{At||((At=function(t,e){this.name="ErrnoError",this.node=e,this.pc=function(t){this.aa=t},this.pc(t),this.message="FS error"}).prototype=Error(),At.prototype.constructor=At,[44].forEach((t=>{Ct[t]=new At(t),Ct[t].stack="<generic error, no stack>"})))},Yt=(t,e,n)=>{t=Q("/dev/"+t);var i=function(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n}(!!e,!!n);gt||(gt=64);var s=gt++<<8;Ft(s,{open:t=>{t.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(t,n,i,s)=>{for(var a=0,r=0;r<s;r++){try{var o=e()}catch(t){throw new At(29)}if(void 0===o&&0===a)throw new At(6);if(null==o)break;a++,n[i+r]=o}return a&&(t.node.timestamp=Date.now()),a},write:(t,e,i,s)=>{for(var a=0;a<s;a++)try{n(e[i+a])}catch(t){throw new At(29)}return s&&(t.node.timestamp=Date.now()),a}}),Ut(t,i,s)},qt={},Kt=void 0;function Jt(){return C[(Kt+=4)-4>>2]}function Qt(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=e&&57>=e?`_${t}`:t}function Zt(t,e){return t=Qt(t),{[t]:function(){return e.apply(this,arguments)}}[t]}function te(){this.M=[void 0],this.hb=[]}var ee=new te,ne=void 0;function ie(t){throw new ne(t)}var se=t=>(t||ie("Cannot use deleted val. handle = "+t),ee.get(t).value),ae=t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ee.pa({tb:1,value:t})}};function re(t){var e=Error,n=Zt(t,(function(e){this.name=t,this.message=e,void 0!==(e=Error(e).stack)&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},n}var oe=void 0,le=void 0;function ce(t){for(var e="";x[t];)e+=le[x[t++]];return e}var he=[];function ue(){for(;he.length;){var t=he.pop();t.g.fa=!1,t.delete()}}var de=void 0,pe={};function me(t,e){for(void 0===e&&ie("ptr should not be undefined");t.A;)e=t.na(e),t=t.A;return e}var fe={};function ge(t){var e=ce(t=zn(t));return In(t),e}function ve(t,e){var n=fe[t];return void 0===n&&ie(e+" has unknown type "+ge(t)),n}function be(){}var ye=!1;function we(t){--t.count.value,0===t.count.value&&(t.G?t.L.W(t.G):t.u.i.W(t.o))}function Se(t,e,n){return e===n?t:void 0===n.A||null===(t=Se(t,e,n.A))?null:n.Pb(t)}var Ee={},Te=void 0;function xe(t){throw new Te(t)}function _e(t,e){return e.u&&e.o||xe("makeClassHandle requires ptr and ptrType"),!!e.L!=!!e.G&&xe("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Ae(Object.create(t,{g:{value:e}}))}function Ae(t){return"undefined"==typeof FinalizationRegistry?(Ae=t=>t,t):(ye=new FinalizationRegistry((t=>{we(t.g)})),be=t=>{ye.unregister(t)},(Ae=t=>{var e=t.g;return e.G&&ye.register(t,{g:e},t),t})(t))}var Ce={};function Ie(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function Le(t){return this.fromWireType(C[t>>2])}var Pe={},ke={};function De(t,e,n){function i(e){(e=n(e)).length!==t.length&&xe("Mismatched type converter count");for(var i=0;i<t.length;++i)Me(t[i],e[i])}t.forEach((function(t){ke[t]=e}));var s=Array(e.length),a=[],r=0;e.forEach(((t,e)=>{fe.hasOwnProperty(t)?s[e]=fe[t]:(a.push(t),Pe.hasOwnProperty(t)||(Pe[t]=[]),Pe[t].push((()=>{s[e]=fe[t],++r===a.length&&i(s)})))})),0===a.length&&i(s)}function Be(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${t}`)}}function Me(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(t,e,n={}){var i=e.name;if(t||ie(`type "${i}" must have a positive integer typeid pointer`),fe.hasOwnProperty(t)){if(n.$b)return;ie(`Cannot register type '${i}' twice`)}fe[t]=e,delete ke[t],Pe.hasOwnProperty(t)&&(e=Pe[t],delete Pe[t],e.forEach((t=>t())))}(t,e,n)}function ze(t){ie(t.g.u.i.name+" instance already deleted")}function Ne(){}function Oe(t,e,n){if(void 0===t[e].B){var i=t[e];t[e]=function(){return t[e].B.hasOwnProperty(arguments.length)||ie(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${t[e].B})!`),t[e].B[arguments.length].apply(this,arguments)},t[e].B=[],t[e].B[i.ea]=i}}function Re(t,e,n){s.hasOwnProperty(t)?((void 0===n||void 0!==s[t].B&&void 0!==s[t].B[n])&&ie(`Cannot register public name '${t}' twice`),Oe(s,t,t),s.hasOwnProperty(n)&&ie(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),s[t].B[n]=e):(s[t]=e,void 0!==n&&(s[t].Pc=n))}function Fe(t,e,n,i,s,a,r,o){this.name=t,this.constructor=e,this.N=n,this.W=i,this.A=s,this.Ub=a,this.na=r,this.Pb=o,this.qb=[]}function je(t,e,n){for(;e!==n;)e.na||ie(`Expected null or instance of ${n.name}, got an instance of ${e.name}`),t=e.na(t),e=e.A;return t}function Ve(t,e){return null===e?(this.Na&&ie(`null is not a valid ${this.name}`),0):(e.g||ie(`Cannot pass "${nn(e)}" as a ${this.name}`),e.g.o||ie(`Cannot pass deleted object as a pointer of type ${this.name}`),je(e.g.o,e.g.u.i,this.i))}function Ue(t,e){if(null===e){if(this.Na&&ie(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return null!==t&&t.push(this.W,n),n}return 0}if(e.g||ie(`Cannot pass "${nn(e)}" as a ${this.name}`),e.g.o||ie(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&e.g.u.ta&&ie(`Cannot convert argument of type ${e.g.L?e.g.L.name:e.g.u.name} to parameter type ${this.name}`),n=je(e.g.o,e.g.u.i,this.i),this.ua)switch(void 0===e.g.G&&ie("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:e.g.L===this?n=e.g.G:ie(`Cannot convert argument of type ${e.g.L?e.g.L.name:e.g.u.name} to parameter type ${this.name}`);break;case 1:n=e.g.G;break;case 2:if(e.g.L===this)n=e.g.G;else{var i=e.clone();n=this.oc(n,ae((function(){i.delete()}))),null!==t&&t.push(this.W,n)}break;default:ie("Unsupporting sharing policy")}return n}function $e(t,e){return null===e?(this.Na&&ie(`null is not a valid ${this.name}`),0):(e.g||ie(`Cannot pass "${nn(e)}" as a ${this.name}`),e.g.o||ie(`Cannot pass deleted object as a pointer of type ${this.name}`),e.g.u.ta&&ie(`Cannot convert argument of type ${e.g.u.name} to parameter type ${this.name}`),je(e.g.o,e.g.u.i,this.i))}function We(t,e,n,i){this.name=t,this.i=e,this.Na=n,this.ta=i,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==e.A?this.toWireType=Ue:(this.toWireType=i?Ve:$e,this.K=null)}function He(t,e,n){s.hasOwnProperty(t)||xe("Replacing nonexistant public symbol"),void 0!==s[t].B&&void 0!==n?s[t].B[n]=e:(s[t]=e,s[t].ea=n)}var Ge=[],Xe=t=>{var e=Ge[t];return e||(t>=Ge.length&&(Ge.length=t+1),Ge[t]=e=B.get(t)),e};function Ye(t,e){var n=(t=ce(t)).includes("j")?((t,e)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),t.includes("j")){var i=s["dynCall_"+t];i=n&&n.length?i.apply(null,[e].concat(n)):i.call(null,e)}else i=Xe(e).apply(null,n);return i}})(t,e):Xe(e);return"function"!=typeof n&&ie(`unknown function pointer with signature ${t}: ${e}`),n}var qe=void 0;function Ke(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||fe[e]||(ke[e]?ke[e].forEach(t):(n.push(e),i[e]=!0))})),new qe(`${t}: `+n.map(ge).join([", "]))}function Je(t,e,n,i,s){var a=e.length;2>a&&ie("argTypes array size mismatch! Must at least get return value and 'this' types!");var r=null!==e[1]&&null!==n,o=!1;for(n=1;n<e.length;++n)if(null!==e[n]&&void 0===e[n].K){o=!0;break}var l="void"!==e[0].name,c=a-2,h=Array(c),u=[],d=[];return function(){if(arguments.length!==c&&ie(`function ${t} called with ${arguments.length} arguments, expected ${c} args!`),d.length=0,u.length=r?2:1,u[0]=s,r){var n=e[1].toWireType(d,this);u[1]=n}for(var a=0;a<c;++a)h[a]=e[a+2].toWireType(d,arguments[a]),u.push(h[a]);if(a=i.apply(null,u),o)Ie(d);else for(var p=r?1:2;p<e.length;p++){var m=1===p?n:h[p-2];null!==e[p].K&&e[p].K(m)}return n=l?e[0].fromWireType(a):void 0}}function Qe(t,e){for(var n=[],i=0;i<t;i++)n.push(I[e+4*i>>2]);return n}function Ze(t,e,n){return t instanceof Object||ie(`${n} with invalid "this": ${t}`),t instanceof e.i.constructor||ie(`${n} incompatible with "this" of type ${t.constructor.name}`),t.g.o||ie(`cannot call emscripten binding method ${n} on deleted object`),je(t.g.o,t.g.u.i,e.i)}function tn(t){t>=ee.h&&0==--ee.get(t).tb&&ee.Zb(t)}function en(t,e,n){switch(e){case 0:return function(t){return this.fromWireType((n?T:x)[t])};case 1:return function(t){return this.fromWireType((n?_:A)[t>>1])};case 2:return function(t){return this.fromWireType((n?C:I)[t>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function nn(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function sn(t,e){switch(e){case 2:return function(t){return this.fromWireType(L[t>>2])};case 3:return function(t){return this.fromWireType(P[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function an(t,e,n){switch(e){case 0:return n?function(t){return T[t]}:function(t){return x[t]};case 1:return n?function(t){return _[t>>1]}:function(t){return A[t>>1]};case 2:return n?function(t){return C[t>>2]}:function(t){return I[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var rn="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,on=(t,e)=>{for(var n=t>>1,i=n+e/2;!(n>=i)&&A[n];)++n;if(32<(n<<=1)-t&&rn)return rn.decode(x.subarray(t,n));for(n="",i=0;!(i>=e/2);++i){var s=_[t+2*i>>1];if(0==s)break;n+=String.fromCharCode(s)}return n},ln=(t,e,n)=>{if(void 0===n&&(n=2147483647),2>n)return 0;var i=e;n=(n-=2)<2*t.length?n/2:t.length;for(var s=0;s<n;++s)_[e>>1]=t.charCodeAt(s),e+=2;return _[e>>1]=0,e-i},cn=t=>2*t.length,hn=(t,e)=>{for(var n=0,i="";!(n>=e/4);){var s=C[t+4*n>>2];if(0==s)break;++n,65536<=s?(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s)):i+=String.fromCharCode(s)}return i},un=(t,e,n)=>{if(void 0===n&&(n=2147483647),4>n)return 0;var i=e;n=i+n-4;for(var s=0;s<t.length;++s){var a=t.charCodeAt(s);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++s)),C[e>>2]=a,(e+=4)+4>n)break}return C[e>>2]=0,e-i},dn=t=>{for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);55296<=i&&57343>=i&&++n,e+=4}return e},pn={};function mn(t){var e=pn[t];return void 0===e?ce(t):e}var fn,gn=[],vn=[],bn=[],yn={},wn=()=>{if(!fn){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in yn)void 0===yn[t]?delete e[t]:e[t]=yn[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);fn=n}return fn},Sn=t=>0==t%4&&(0!=t%100||0==t%400),En=[31,29,31,30,31,30,31,31,30,31,30,31],Tn=[31,28,31,30,31,30,31,31,30,31,30,31];function xn(t,e,n,i){t||(t=this),this.parent=t,this.U=t.U,this.wa=null,this.id=Tt++,this.name=e,this.mode=n,this.l={},this.m={},this.za=i}Object.defineProperties(xn.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),Xt(),xt=Array(4096),jt(yt,"/"),Vt("/tmp",16895,0),Vt("/home",16895,0),Vt("/home/web_user",16895,0),(()=>{Vt("/dev",16895,0),Ft(259,{read:()=>0,write:(t,e,n,i)=>i}),Ut("/dev/null",259),ht(1280,dt),ht(1536,pt),Ut("/dev/tty",1280),Ut("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,n=()=>(0===e&&(e=et(t).byteLength),t[--e]);Yt("random",n),Yt("urandom",n),Vt("/dev/shm",16895,0),Vt("/dev/shm/tmp",16895,0)})(),(()=>{Vt("/proc",16895,0);var t=Vt("/proc/self",16895,0);Vt("/proc/self/fd",16895,0),jt({U:()=>{var e=Dt(t,"fd",16895,73);return e.l={ka:(t,e)=>{var n=Nt(+e);return(t={parent:null,U:{mb:"fake"},l:{ma:()=>n.path}}).parent=t}},e}},"/proc/self/fd")})(),Object.assign(te.prototype,{get(t){return this.M[t]},has(t){return void 0!==this.M[t]},pa(t){var e=this.hb.pop()||this.M.length;return this.M[e]=t,e},Zb(t){this.M[t]=void 0,this.hb.push(t)}}),ne=s.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},ee.M.push({value:void 0},{value:null},{value:!0},{value:!1}),ee.h=ee.M.length,s.count_emval_handles=function(){for(var t=0,e=ee.h;e<ee.M.length;++e)void 0!==ee.M[e]&&++t;return t},oe=s.PureVirtualError=re("PureVirtualError");for(var _n=Array(256),An=0;256>An;++An)_n[An]=String.fromCharCode(An);le=_n,s.getInheritedInstanceCount=function(){return Object.keys(pe).length},s.getLiveInheritedInstances=function(){var t,e=[];for(t in pe)pe.hasOwnProperty(t)&&e.push(pe[t]);return e},s.flushPendingDeletes=ue,s.setDelayFunction=function(t){de=t,he.length&&de&&de(ue)},Te=s.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Ne.prototype.isAliasOf=function(t){if(!(this instanceof Ne&&t instanceof Ne))return!1;var e=this.g.u.i,n=this.g.o,i=t.g.u.i;for(t=t.g.o;e.A;)n=e.na(n),e=e.A;for(;i.A;)t=i.na(t),i=i.A;return e===i&&n===t},Ne.prototype.clone=function(){if(this.g.o||ze(this),this.g.ia)return this.g.count.value+=1,this;var t=Ae,e=Object,n=e.create,i=Object.getPrototypeOf(this),s=this.g;return(t=t(n.call(e,i,{g:{value:{count:s.count,fa:s.fa,ia:s.ia,o:s.o,u:s.u,G:s.G,L:s.L}}}))).g.count.value+=1,t.g.fa=!1,t},Ne.prototype.delete=function(){this.g.o||ze(this),this.g.fa&&!this.g.ia&&ie("Object already scheduled for deletion"),be(this),we(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Ne.prototype.isDeleted=function(){return!this.g.o},Ne.prototype.deleteLater=function(){return this.g.o||ze(this),this.g.fa&&!this.g.ia&&ie("Object already scheduled for deletion"),he.push(this),1===he.length&&de&&de(ue),this.g.fa=!0,this},We.prototype.Vb=function(t){return this.rb&&(t=this.rb(t)),t},We.prototype.ab=function(t){this.W&&this.W(t)},We.prototype.argPackAdvance=8,We.prototype.readValueFromPointer=Le,We.prototype.deleteObject=function(t){null!==t&&t.delete()},We.prototype.fromWireType=function(t){function e(){return this.ua?_e(this.i.N,{u:this.nc,o:n,L:this,G:t}):_e(this.i.N,{u:this,o:t})}var n=this.Vb(t);if(!n)return this.ab(t),null;var i=function(t,e){return e=me(t,e),pe[e]}(this.i,n);if(void 0!==i)return 0===i.g.count.value?(i.g.o=n,i.g.G=t,i.clone()):(i=i.clone(),this.ab(t),i);if(i=this.i.Ub(n),!(i=Ee[i]))return e.call(this);i=this.ta?i.Kb:i.pointerType;var s=Se(n,this.i,i.i);return null===s?e.call(this):this.ua?_e(i.i.N,{u:i,o:s,L:this,G:t}):_e(i.i.N,{u:i,o:s})},qe=s.UnboundTypeError=re("UnboundTypeError");var Cn={__syscall_fcntl64:function(t,e,n){Kt=n;try{var i=Nt(t);switch(e){case 0:var s=Jt();return 0>s?-28:Ot(i,s).X;case 1:case 2:case 6:case 7:return 0;case 3:return i.flags;case 4:return s=Jt(),i.flags|=s,0;case 5:return s=Jt(),_[s+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return C[Mn()>>2]=28,-1}}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return-t.aa}},__syscall_ioctl:function(t,e,n){Kt=n;try{var i=Nt(t);switch(e){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return i.s?0:-59;case 21505:if(!i.s)return-59;if(i.s.V.bc){e=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var s=Jt();C[s>>2]=25856,C[s+4>>2]=5,C[s+8>>2]=191,C[s+12>>2]=35387;for(var a=0;32>a;a++)T[s+a+17|0]=e[a]||0}return 0;case 21506:case 21507:case 21508:if(!i.s)return-59;if(i.s.V.cc)for(s=Jt(),e=[],a=0;32>a;a++)e.push(T[s+a+17|0]);return 0;case 21519:return i.s?(s=Jt(),C[s>>2]=0):-59;case 21520:return i.s?-28:-59;case 21531:if(s=Jt(),!i.m.ac)throw new At(59);return i.m.ac(i,e,s);case 21523:return i.s?(i.s.V.dc&&(a=[24,80],s=Jt(),_[s>>1]=a[0],_[s+2>>1]=a[1]),0):-59;default:return-28}}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return-t.aa}},__syscall_openat:function(t,e,n,i){Kt=i;try{var s=e=e?st(x,e):"";if("/"===s.charAt(0))e=s;else{var a=-100===t?"/":Nt(t).path;if(0==s.length)throw new At(44);e=Q(a+"/"+s)}var r=i?Jt():0;return Ht(e,n,r).X}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return-t.aa}},_embind_create_inheriting_constructor:function(t,e,n){t=ce(t),e=ve(e,"wrapper"),n=se(n);var i=[].slice,s=e.i,a=s.N,r=s.A.N,o=s.A.constructor;for(var l in t=Zt(t,(function(){s.A.qb.forEach(function(t){if(this[t]===r[t])throw new oe(`Pure virtual function ${t} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:a}),this.__construct.apply(this,i.call(arguments))})),a.__construct=function(){this===a&&ie("Pass correct 'this' to __construct");var t=o.implement.apply(void 0,[this].concat(i.call(arguments)));be(t);var e=t.g;t.notifyOnDestruction(),e.ia=!0,Object.defineProperties(this,{g:{value:e}}),Ae(this),t=e.o,t=me(s,t),pe.hasOwnProperty(t)?ie(`Tried to register registered instance: ${t}`):pe[t]=this},a.__destruct=function(){this===a&&ie("Pass correct 'this' to __destruct"),be(this);var t=this.g.o;t=me(s,t),pe.hasOwnProperty(t)?delete pe[t]:ie(`Tried to unregister unregistered instance: ${t}`)},t.prototype=Object.create(a),n)t.prototype[l]=n[l];return ae(t)},_embind_finalize_value_object:function(t){var e=Ce[t];delete Ce[t];var n=e.Pa,i=e.W,s=e.eb;De([t],s.map((t=>t.Yb)).concat(s.map((t=>t.rc))),(t=>{var a={};return s.forEach(((e,n)=>{var i=t[n],r=e.Wb,o=e.Xb,l=t[n+s.length],c=e.qc,h=e.sc;a[e.Sb]={read:t=>i.fromWireType(r(o,t)),write:(t,e)=>{var n=[];c(h,t,l.toWireType(n,e)),Ie(n)}}})),[{name:e.name,fromWireType:function(t){var e,n={};for(e in a)n[e]=a[e].read(t);return i(t),n},toWireType:function(t,e){for(var s in a)if(!(s in e))throw new TypeError(`Missing field: "${s}"`);var r=n();for(s in a)a[s].write(r,e[s]);return null!==t&&t.push(i,r),r},argPackAdvance:8,readValueFromPointer:Le,K:i}]}))},_embind_register_bigint:function(){},_embind_register_bool:function(t,e,n,i,s){var a=Be(n);Me(t,{name:e=ce(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:s},argPackAdvance:8,readValueFromPointer:function(t){if(1===n)var i=T;else if(2===n)i=_;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);i=C}return this.fromWireType(i[t>>a])},K:null})},_embind_register_class:function(t,e,n,i,s,a,r,o,l,c,h,u,d){h=ce(h),a=Ye(s,a),o&&(o=Ye(r,o)),c&&(c=Ye(l,c)),d=Ye(u,d);var p=Qt(h);Re(p,(function(){Ke(`Cannot construct ${h} due to unbound types`,[i])})),De([t,e,n],i?[i]:[],(function(e){if(e=e[0],i)var n=e.i,s=n.N;else s=Ne.prototype;e=Zt(p,(function(){if(Object.getPrototypeOf(this)!==r)throw new ne("Use 'new' to construct "+h);if(void 0===l.$)throw new ne(h+" has no accessible constructor");var t=l.$[arguments.length];if(void 0===t)throw new ne(`Tried to invoke ctor of ${h} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(l.$).toString()}) parameters instead!`);return t.apply(this,arguments)}));var r=Object.create(s,{constructor:{value:e}});e.prototype=r;var l=new Fe(h,e,r,d,n,a,o,c);l.A&&(void 0===l.A.oa&&(l.A.oa=[]),l.A.oa.push(l)),n=new We(h,l,!0,!1),s=new We(h+"*",l,!1,!1);var u=new We(h+" const*",l,!1,!0);return Ee[t]={pointerType:s,Kb:u},He(p,e),[n,s,u]}))},_embind_register_class_class_function:function(t,e,n,i,s,a,r){var o=Qe(n,i);e=ce(e),a=Ye(s,a),De([],[t],(function(t){function i(){Ke(`Cannot call ${s} due to unbound types`,o)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]);var l=t.i.constructor;return void 0===l[e]?(i.ea=n-1,l[e]=i):(Oe(l,e,s),l[e].B[n-1]=i),De([],o,(function(i){if(i=Je(s,[i[0],null].concat(i.slice(1)),null,a,r),void 0===l[e].B?(i.ea=n-1,l[e]=i):l[e].B[n-1]=i,t.i.oa)for(const n of t.i.oa)n.constructor.hasOwnProperty(e)||(n.constructor[e]=i);return[]})),[]}))},_embind_register_class_class_property:function(t,e,n,i,s,a,r,o){e=ce(e),a=Ye(s,a),De([],[t],(function(t){var s=`${(t=t[0]).name}.${e}`,l={get(){Ke(`Cannot access ${s} due to unbound types`,[n])},enumerable:!0,configurable:!0};return l.set=o?()=>{Ke(`Cannot access ${s} due to unbound types`,[n])}:()=>{ie(`${s} is a read-only property`)},Object.defineProperty(t.i.constructor,e,l),De([],[n],(function(n){n=n[0];var s={get:()=>n.fromWireType(a(i)),enumerable:!0};return o&&(o=Ye(r,o),s.set=t=>{var e=[];o(i,n.toWireType(e,t)),Ie(e)}),Object.defineProperty(t.i.constructor,e,s),[]})),[]}))},_embind_register_class_constructor:function(t,e,n,i,s,a){var r=Qe(e,n);s=Ye(i,s),De([],[t],(function(t){var n=`constructor ${(t=t[0]).name}`;if(void 0===t.i.$&&(t.i.$=[]),void 0!==t.i.$[e-1])throw new ne(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${t.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return t.i.$[e-1]=()=>{Ke(`Cannot construct ${t.name} due to unbound types`,r)},De([],r,(function(i){return i.splice(1,0,null),t.i.$[e-1]=Je(n,i,null,s,a),[]})),[]}))},_embind_register_class_function:function(t,e,n,i,s,a,r,o){var l=Qe(n,i);e=ce(e),a=Ye(s,a),De([],[t],(function(t){function i(){Ke(`Cannot call ${s} due to unbound types`,l)}var s=`${(t=t[0]).name}.${e}`;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),o&&t.i.qb.push(e);var c=t.i.N,h=c[e];return void 0===h||void 0===h.B&&h.className!==t.name&&h.ea===n-2?(i.ea=n-2,i.className=t.name,c[e]=i):(Oe(c,e,s),c[e].B[n-2]=i),De([],l,(function(i){return i=Je(s,i,t,a,r),void 0===c[e].B?(i.ea=n-2,c[e]=i):c[e].B[n-2]=i,[]})),[]}))},_embind_register_class_property:function(t,e,n,i,s,a,r,o,l,c){e=ce(e),s=Ye(i,s),De([],[t],(function(t){var i=`${(t=t[0]).name}.${e}`,h={get(){Ke(`Cannot access ${i} due to unbound types`,[n,r])},enumerable:!0,configurable:!0};return h.set=l?()=>{Ke(`Cannot access ${i} due to unbound types`,[n,r])}:()=>{ie(i+" is a read-only property")},Object.defineProperty(t.i.N,e,h),De([],l?[n,r]:[n],(function(n){var r=n[0],h={get(){var e=Ze(this,t,i+" getter");return r.fromWireType(s(a,e))},enumerable:!0};if(l){l=Ye(o,l);var u=n[1];h.set=function(e){var n=Ze(this,t,i+" setter"),s=[];l(c,n,u.toWireType(s,e)),Ie(s)}}return Object.defineProperty(t.i.N,e,h),[]})),[]}))},_embind_register_emval:function(t,e){Me(t,{name:e=ce(e),fromWireType:function(t){var e=se(t);return tn(t),e},toWireType:function(t,e){return ae(e)},argPackAdvance:8,readValueFromPointer:Le,K:null})},_embind_register_enum:function(t,e,n,i){function s(){}n=Be(n),e=ce(e),s.values={},Me(t,{name:e,constructor:s,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:en(e,n,i),K:null}),Re(e,s)},_embind_register_enum_value:function(t,e,n){var i=ve(t,"enum");e=ce(e),t=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:n},constructor:{value:Zt(`${i.name}_${e}`,(function(){}))}}),t.values[n]=i,t[e]=i},_embind_register_float:function(t,e,n){n=Be(n),Me(t,{name:e=ce(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:sn(e,n),K:null})},_embind_register_function:function(t,e,n,i,s,a){var r=Qe(e,n);t=ce(t),s=Ye(i,s),Re(t,(function(){Ke(`Cannot call ${t} due to unbound types`,r)}),e-1),De([],r,(function(n){return He(t,Je(t,[n[0],null].concat(n.slice(1)),null,s,a),e-1),[]}))},_embind_register_integer:function(t,e,n,i,s){e=ce(e),-1===s&&(s=4294967295),s=Be(n);var a=t=>t;if(0===i){var r=32-8*n;a=t=>t<<r>>>r}n=e.includes("unsigned")?function(t,e){return e>>>0}:function(t,e){return e},Me(t,{name:e,fromWireType:a,toWireType:n,argPackAdvance:8,readValueFromPointer:an(e,s,0!==i),K:null})},_embind_register_memory_view:function(t,e,n){function i(t){t>>=2;var e=I;return new s(e.buffer,e[t+1],e[t])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];Me(t,{name:n=ce(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{$b:!0})},_embind_register_std_string:function(t,e){var n="std::string"===(e=ce(e));Me(t,{name:e,fromWireType:function(t){var e=I[t>>2],i=t+4;if(n)for(var s=i,a=0;a<=e;++a){var r=i+a;if(a==e||0==x[r]){if(s=s?st(x,s,r-s):"",void 0===o)var o=s;else o+=String.fromCharCode(0),o+=s;s=r+1}}else{for(o=Array(e),a=0;a<e;++a)o[a]=String.fromCharCode(x[i+a]);o=o.join("")}return In(t),o},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"==typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||ie("Cannot pass non-string to std::string");var s=n&&i?rt(e):e.length,a=Ln(4+s+1),r=a+4;if(I[a>>2]=s,n&&i)ot(e,x,r,s+1);else if(i)for(i=0;i<s;++i){var o=e.charCodeAt(i);255<o&&(In(r),ie("String has UTF-16 code units that do not fit in 8 bits")),x[r+i]=o}else for(i=0;i<s;++i)x[r+i]=e[i];return null!==t&&t.push(In,a),a},argPackAdvance:8,readValueFromPointer:Le,K:function(t){In(t)}})},_embind_register_std_wstring:function(t,e,n){if(n=ce(n),2===e)var i=on,s=ln,a=cn,r=()=>A,o=1;else 4===e&&(i=hn,s=un,a=dn,r=()=>I,o=2);Me(t,{name:n,fromWireType:function(t){for(var n,s=I[t>>2],a=r(),l=t+4,c=0;c<=s;++c){var h=t+4+c*e;c!=s&&0!=a[h>>o]||(l=i(l,h-l),void 0===n?n=l:(n+=String.fromCharCode(0),n+=l),l=h+e)}return In(t),n},toWireType:function(t,i){"string"!=typeof i&&ie(`Cannot pass non-string to C++ string type ${n}`);var r=a(i),l=Ln(4+r+e);return I[l>>2]=r>>o,s(i,l+4,r+e),null!==t&&t.push(In,l),l},argPackAdvance:8,readValueFromPointer:Le,K:function(t){In(t)}})},_embind_register_value_object:function(t,e,n,i,s,a){Ce[t]={name:ce(e),Pa:Ye(n,i),W:Ye(s,a),eb:[]}},_embind_register_value_object_field:function(t,e,n,i,s,a,r,o,l,c){Ce[t].eb.push({Sb:ce(e),Yb:n,Wb:Ye(i,s),Xb:a,rc:r,qc:Ye(o,l),sc:c})},_embind_register_void:function(t,e){Me(t,{fc:!0,name:e=ce(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(t,e,n){t=se(t),e=ve(e,"emval::as");var i=[],s=ae(i);return I[n>>2]=s,e.toWireType(i,t)},_emval_call_method:function(t,e,n,i,s){t=gn[t],e=se(e),n=mn(n);var a=[];return I[i>>2]=ae(a),t(e,n,a,s)},_emval_call_void_method:function(t,e,n,i){(t=gn[t])(e=se(e),n=mn(n),null,i)},_emval_decref:tn,_emval_get_method_caller:function(t,e){var n=function(t,e){for(var n=Array(t),i=0;i<t;++i)n[i]=ve(I[e+4*i>>2],"parameter "+i);return n}(t,e),i=n[0];e=i.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$";var s=vn[e];if(void 0!==s)return s;var a=Array(t-1);return s=function(t){var e=gn.length;return gn.push(t),e}(((e,s,r,o)=>{for(var l=0,c=0;c<t-1;++c)a[c]=n[c+1].readValueFromPointer(o+l),l+=n[c+1].argPackAdvance;for(e=e[s].apply(e,a),c=0;c<t-1;++c)n[c+1].Nb&&n[c+1].Nb(a[c]);if(!i.fc)return i.toWireType(r,e)})),vn[e]=s},_emval_get_module_property:function(t){return t=mn(t),ae(s[t])},_emval_get_property:function(t,e){return t=se(t),e=se(e),ae(t[e])},_emval_incref:function(t){4<t&&(ee.get(t).tb+=1)},_emval_new_cstring:function(t){return ae(mn(t))},_emval_new_object:function(){return ae({})},_emval_run_destructors:function(t){Ie(se(t)),tn(t)},_emval_set_property:function(t,e,n){t=se(t),e=se(e),n=se(n),t[e]=n},_emval_take_value:function(t,e){return t=(t=ve(t,"_emval_take_value")).readValueFromPointer(e),ae(t)},abort:()=>{U("")},emscripten_asm_const_int:(t,e,n)=>{var i;for(bn.length=0,n>>=2;i=x[e++];)n+=105!=i&n,bn.push(105==i?C[n]:P[n++>>1]),++n;return q[t].apply(null,bn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(t,e,n)=>x.copyWithin(t,e,e+n),emscripten_resize_heap:t=>{var e=x.length;if(2147483648<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296);var s=Math;i=Math.max(t,i);t:{s=s.min.call(s,2147483648,i+(65536-i%65536)%65536)-S.buffer.byteLength+65535>>>16;try{S.grow(s),D();var a=1;break t}catch(t){}a=void 0}if(a)return!0}return!1},environ_get:(t,e)=>{var n=0;return wn().forEach((function(i,s){var a=e+n;for(s=I[t+4*s>>2]=a,a=0;a<i.length;++a)T[0|s++]=i.charCodeAt(a);T[0|s]=0,n+=i.length+1})),0},environ_sizes_get:(t,e)=>{var n=wn();I[t>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),I[e>>2]=i,0},fd_close:function(t){try{var e=Nt(t);if(null===e.X)throw new At(8);e.Ma&&(e.Ma=null);try{e.m.close&&e.m.close(e)}catch(t){throw t}finally{Et[e.X]=null}return e.X=null,0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},fd_read:function(t,e,n,i){try{t:{var s=Nt(t);t=e;for(var a,r=e=0;r<n;r++){var o=I[t>>2],l=I[t+4>>2];t+=8;var c=s,h=o,u=l,d=a,p=T;if(0>u||0>d)throw new At(28);if(null===c.X)throw new At(8);if(1==(2097155&c.flags))throw new At(8);if(16384==(61440&c.node.mode))throw new At(31);if(!c.m.read)throw new At(28);var m=void 0!==d;if(m){if(!c.seekable)throw new At(70)}else d=c.position;var f=c.m.read(c,p,h,u,d);m||(c.position+=f);var g=f;if(0>g){var v=-1;break t}if(e+=g,g<l)break;void 0!==a&&(a+=g)}v=e}return I[i>>2]=v,0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},fd_seek:function(t,e,n,i,s){e=n+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*n:NaN;try{if(isNaN(e))return 61;var a=Nt(t);return Gt(a,e,i),Y=[a.position>>>0,(X=a.position,1<=+Math.abs(X)?0<X?+Math.floor(X/4294967296)>>>0:~~+Math.ceil((X-+(~~X>>>0))/4294967296)>>>0:0)],C[s>>2]=Y[0],C[s+4>>2]=Y[1],a.Ma&&0===e&&0===i&&(a.Ma=null),0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},fd_write:function(t,e,n,i){try{t:{var s=Nt(t);t=e;for(var a,r=e=0;r<n;r++){var o=I[t>>2],l=I[t+4>>2];t+=8;var c=s,h=o,u=l,d=a,p=T;if(0>u||0>d)throw new At(28);if(null===c.X)throw new At(8);if(!(2097155&c.flags))throw new At(8);if(16384==(61440&c.node.mode))throw new At(31);if(!c.m.write)throw new At(28);c.seekable&&1024&c.flags&&Gt(c,0,2);var m=void 0!==d;if(m){if(!c.seekable)throw new At(70)}else d=c.position;var f=c.m.write(c,p,h,u,d,void 0);m||(c.position+=f);var g=f;if(0>g){var v=-1;break t}e+=g,void 0!==a&&(a+=g)}v=e}return I[i>>2]=v,0}catch(t){if(void 0===qt||"ErrnoError"!==t.name)throw t;return t.aa}},strftime_l:(t,e,n,i)=>((t,e,n,i)=>{function s(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function a(t,e){return s(t,e,"0")}function r(t,e){function n(t){return 0>t?-1:0<t?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function o(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.ca;for(t=new Date(new Date(t.da+1900,0,1).getTime());0<e;){var n=t.getMonth(),i=(Sn(t.getFullYear())?En:Tn)[n];if(!(e>i-t.getDate())){t.setDate(t.getDate()+e);break}e-=i-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=o(new Date(t.getFullYear(),0,4)),n=o(n),0>=r(e,t)?0>=r(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=C[i+40>>2];for(var h in i={wc:C[i>>2],vc:C[i+4>>2],Fa:C[i+8>>2],Sa:C[i+12>>2],Ga:C[i+16>>2],da:C[i+20>>2],R:C[i+24>>2],ca:C[i+28>>2],Rc:C[i+32>>2],uc:C[i+36>>2],xc:c&&c?st(x,c):""},n=n?st(x,n):"",c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(h,"g"),c[h]);var u="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(h in c={"%a":t=>u[t.R].substring(0,3),"%A":t=>u[t.R],"%b":t=>d[t.Ga].substring(0,3),"%B":t=>d[t.Ga],"%C":t=>a((t.da+1900)/100|0,2),"%d":t=>a(t.Sa,2),"%e":t=>s(t.Sa,2," "),"%g":t=>l(t).toString().substring(2),"%G":t=>l(t),"%H":t=>a(t.Fa,2),"%I":t=>(0==(t=t.Fa)?t=12:12<t&&(t-=12),a(t,2)),"%j":t=>{for(var e=0,n=0;n<=t.Ga-1;e+=(Sn(t.da+1900)?En:Tn)[n++]);return a(t.Sa+e,3)},"%m":t=>a(t.Ga+1,2),"%M":t=>a(t.vc,2),"%n":()=>"\n","%p":t=>0<=t.Fa&&12>t.Fa?"AM":"PM","%S":t=>a(t.wc,2),"%t":()=>"\t","%u":t=>t.R||7,"%U":t=>a(Math.floor((t.ca+7-t.R)/7),2),"%V":t=>{var e=Math.floor((t.ca+7-(t.R+6)%7)/7);if(2>=(t.R+371-t.ca-2)%7&&e++,e)53==e&&(4==(n=(t.R+371-t.ca)%7)||3==n&&Sn(t.da)||(e=1));else{e=52;var n=(t.R+7-t.ca-1)%7;(4==n||5==n&&Sn(t.da%400-1))&&e++}return a(e,2)},"%w":t=>t.R,"%W":t=>a(Math.floor((t.ca+7-(t.R+6)%7)/7),2),"%y":t=>(t.da+1900).toString().substring(2),"%Y":t=>t.da+1900,"%z":t=>{var e=0<=(t=t.uc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":t=>t.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),c)n.includes(h)&&(n=n.replace(new RegExp(h,"g"),c[h](i)));return(h=lt(n=n.replace(/\0\0/g,"%"),!1)).length>e?0:(T.set(h,t),h.length-1)})(t,e,n,i)};!function(){function t(t){if(E=t=t.exports,S=E.memory,D(),B=E.__indirect_function_table,z.unshift(E.__wasm_call_ctors),F--,s.monitorRunDependencies&&s.monitorRunDependencies(F),0==F&&(null!==j&&(clearInterval(j),j=null),V)){var e=V;V=null,e()}return t}var e={env:Cn,wasi_snapshot_preview1:Cn};if(F++,s.monitorRunDependencies&&s.monitorRunDependencies(F),s.instantiateWasm)try{return s.instantiateWasm(e,t)}catch(t){w("Module.instantiateWasm callback failed with error: "+t),n(t)}(function(t,e){var n=R;return b||"function"!=typeof WebAssembly.instantiateStreaming||$(n)||n.startsWith("file://")||"function"!=typeof fetch?G(n,t,e):fetch(n,{credentials:"same-origin"}).then((i=>WebAssembly.instantiateStreaming(i,t).then(e,(function(i){return w("wasm streaming compile failed: "+i),w("falling back to ArrayBuffer instantiation"),G(n,t,e)}))))})(e,(function(e){t(e.instance)})).catch(n)}();var In=t=>(In=E.free)(t),Ln=t=>(Ln=E.malloc)(t),Pn=s._ma_device__on_notification_unlocked=t=>(Pn=s._ma_device__on_notification_unlocked=E.ma_device__on_notification_unlocked)(t);s._ma_malloc_emscripten=(t,e)=>(s._ma_malloc_emscripten=E.ma_malloc_emscripten)(t,e),s._ma_free_emscripten=(t,e)=>(s._ma_free_emscripten=E.ma_free_emscripten)(t,e);var kn,Dn=s._ma_device_process_pcm_frames_capture__webaudio=(t,e,n)=>(Dn=s._ma_device_process_pcm_frames_capture__webaudio=E.ma_device_process_pcm_frames_capture__webaudio)(t,e,n),Bn=s._ma_device_process_pcm_frames_playback__webaudio=(t,e,n)=>(Bn=s._ma_device_process_pcm_frames_playback__webaudio=E.ma_device_process_pcm_frames_playback__webaudio)(t,e,n),Mn=()=>(Mn=E.__errno_location)(),zn=t=>(zn=E.__getTypeName)(t);function Nn(){function t(){if(!kn&&(kn=!0,s.calledRun=!0,!k)){if(s.noFSInit||ft||(ft=!0,Xt(),s.stdin=s.stdin,s.stdout=s.stdout,s.stderr=s.stderr,s.stdin?Yt("stdin",s.stdin):$t("/dev/tty","/dev/stdin"),s.stdout?Yt("stdout",null,s.stdout):$t("/dev/tty","/dev/stdout"),s.stderr?Yt("stderr",null,s.stderr):$t("/dev/tty1","/dev/stderr"),Ht("/dev/stdin",0),Ht("/dev/stdout",1),Ht("/dev/stderr",1)),_t=!1,K(z),e(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var t=s.postRun.shift();N.unshift(t)}K(N)}}if(!(0<F)){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)O();K(M),0<F||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),t()}),1)):t())}}if(s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=E._embind_initialize_bindings)(),s.dynCall_iiji=(t,e,n,i,a)=>(s.dynCall_iiji=E.dynCall_iiji)(t,e,n,i,a),s.dynCall_jiji=(t,e,n,i,a)=>(s.dynCall_jiji=E.dynCall_jiji)(t,e,n,i,a),s.dynCall_iiiji=(t,e,n,i,a,r)=>(s.dynCall_iiiji=E.dynCall_iiiji)(t,e,n,i,a,r),s.dynCall_iij=(t,e,n,i)=>(s.dynCall_iij=E.dynCall_iij)(t,e,n,i),s.dynCall_jii=(t,e,n)=>(s.dynCall_jii=E.dynCall_jii)(t,e,n),s.dynCall_viijii=(t,e,n,i,a,r,o)=>(s.dynCall_viijii=E.dynCall_viijii)(t,e,n,i,a,r,o),s.dynCall_iiiiij=(t,e,n,i,a,r,o)=>(s.dynCall_iiiiij=E.dynCall_iiiiij)(t,e,n,i,a,r,o),s.dynCall_iiiiijj=(t,e,n,i,a,r,o,l,c)=>(s.dynCall_iiiiijj=E.dynCall_iiiiijj)(t,e,n,i,a,r,o,l,c),s.dynCall_iiiiiijj=(t,e,n,i,a,r,o,l,c,h)=>(s.dynCall_iiiiiijj=E.dynCall_iiiiiijj)(t,e,n,i,a,r,o,l,c,h),V=function t(){kn||Nn(),kn||(V=t)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Nn(),t.ready});const a=s},t=>{t.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.21.5","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(t,e,n)=>{n.r(e),n.d(e,{Animation:()=>i.Animation});var i=n(4)},(t,e,n)=>{n.r(e),n.d(e,{Animation:()=>i});var i=function(){function t(t,e,n,i){this.animation=t,this.artboard=e,this.playing=i,this.loopCount=0,this.scrubTo=null,this.instance=new n.LinearAnimationInstance(t,e)}return Object.defineProperty(t.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.instance.time},set:function(t){this.instance.time=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),t.prototype.advance=function(t){null===this.scrubTo?this.instance.advance(t):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},t.prototype.apply=function(t){this.instance.apply(t)},t.prototype.cleanup=function(){this.instance.delete()},t}()},(t,e,n)=>{n.r(e),n.d(e,{BLANK_URL:()=>s.BLANK_URL,registerTouchInteractions:()=>i.registerTouchInteractions,sanitizeUrl:()=>s.sanitizeUrl});var i=n(6),s=n(7)},(t,e,n)=>{n.r(e),n.d(e,{registerTouchInteractions:()=>i});var i=function(t){var e=t.canvas,n=t.artboard,i=t.stateMachines,s=void 0===i?[]:i,a=t.renderer,r=t.rive,o=t.fit,l=t.alignment,c=t.isTouchScrollEnabled,h=void 0!==c&&c;if(!(e&&s.length&&a&&r&&n&&"undefined"!=typeof window))return null;var u=null,d=!1,p=function(t){if(d&&t instanceof MouseEvent)"mouseup"==t.type&&(d=!1);else{d=h&&"touchend"===t.type&&"touchstart"===u,u=t.type;var e=t.currentTarget.getBoundingClientRect(),i=function(t,e){var n,i;return["touchstart","touchmove"].indexOf(t.type)>-1&&(null===(n=t.touches)||void 0===n?void 0:n.length)?(e||t.preventDefault(),{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}):"touchend"===t.type&&(null===(i=t.changedTouches)||void 0===i?void 0:i.length)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}(t,h),a=i.clientX,c=i.clientY;if(a||c){var p=a-e.left,m=c-e.top,f=r.computeAlignment(o,l,{minX:0,minY:0,maxX:e.width,maxY:e.height},n.bounds),g=new r.Mat2D;f.invert(g);var v=new r.Vec2D(p,m),b=r.mapXY(g,v),y=b.x(),w=b.y();switch(b.delete(),g.delete(),v.delete(),f.delete(),t.type){case"mouseout":for(var S=0,E=s;S<E.length;S++)E[S].pointerMove(y<0?y-1e4:y+1e4,w<0?w-1e4:w+1e4);break;case"touchmove":case"mouseover":case"mousemove":for(var T=0,x=s;T<x.length;T++)x[T].pointerMove(y,w);break;case"touchstart":case"mousedown":for(var _=0,A=s;_<A.length;_++)A[_].pointerDown(y,w);break;case"touchend":case"mouseup":for(var C=0,I=s;C<I.length;C++)I[C].pointerUp(y,w)}}}}.bind(void 0);return e.addEventListener("mouseover",p),e.addEventListener("mouseout",p),e.addEventListener("mousemove",p),e.addEventListener("mousedown",p),e.addEventListener("mouseup",p),e.addEventListener("touchmove",p,{passive:h}),e.addEventListener("touchstart",p,{passive:h}),e.addEventListener("touchend",p),function(){e.removeEventListener("mouseover",p),e.removeEventListener("mouseout",p),e.removeEventListener("mousemove",p),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",p),e.removeEventListener("touchmove",p),e.removeEventListener("touchstart",p),e.removeEventListener("touchend",p)}}},(t,e,n)=>{n.r(e),n.d(e,{BLANK_URL:()=>c,sanitizeUrl:()=>h});var i=/^([^\w]*)(javascript|data|vbscript)/im,s=/&#(\w+)(^\w|;)?/g,a=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,o=/^.+(:|&colon;)/gim,l=[".","/"],c="about:blank";function h(t){if(!t)return c;var e,n=(e=t,e.replace(r,"").replace(s,(function(t,e){return String.fromCharCode(e)}))).replace(a,"").replace(r,"").trim();if(!n)return c;if(function(t){return l.indexOf(t[0])>-1}(n))return n;var h=n.match(o);if(!h)return n;var u=h[0];return i.test(u)?c:n}}],e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{Alignment:()=>s,EventType:()=>v,Fit:()=>e,Layout:()=>p,LoopType:()=>b,Rive:()=>P,RiveEventType:()=>f,RiveFile:()=>L,RuntimeLoader:()=>m,StateMachineInput:()=>g,StateMachineInputType:()=>d,Testing:()=>B,decodeAudio:()=>M,decodeFont:()=>N,decodeImage:()=>z});var t,e,s,a=n(1),r=n(2),o=n(3),l=n(5),c=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),h=function(t,e,n,i){return new(n||(n=Promise))((function(s,a){function r(t){try{l(i.next(t))}catch(t){a(t)}}function o(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,o)}l((i=i.apply(t,e||[])).next())}))},u=function(t,e){var n,i,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(r=0)),r;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!((s=(s=r.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(t){t.Cover="cover",t.Contain="contain",t.Fill="fill",t.FitWidth="fitWidth",t.FitHeight="fitHeight",t.None="none",t.ScaleDown="scaleDown"}(e||(e={})),function(t){t.Center="center",t.TopLeft="topLeft",t.TopCenter="topCenter",t.TopRight="topRight",t.CenterLeft="centerLeft",t.CenterRight="centerRight",t.BottomLeft="bottomLeft",t.BottomCenter="bottomCenter",t.BottomRight="bottomRight"}(s||(s={}));var d,p=function(){function t(t){var n,i,a,r,o,l;this.fit=null!==(n=null==t?void 0:t.fit)&&void 0!==n?n:e.Contain,this.alignment=null!==(i=null==t?void 0:t.alignment)&&void 0!==i?i:s.Center,this.minX=null!==(a=null==t?void 0:t.minX)&&void 0!==a?a:0,this.minY=null!==(r=null==t?void 0:t.minY)&&void 0!==r?r:0,this.maxX=null!==(o=null==t?void 0:t.maxX)&&void 0!==o?o:0,this.maxY=null!==(l=null==t?void 0:t.maxY)&&void 0!==l?l:0}return t.new=function(e){var n=e.fit,i=e.alignment,s=e.minX,a=e.minY,r=e.maxX,o=e.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new t({fit:n,alignment:i,minX:s,minY:a,maxX:r,maxY:o})},t.prototype.copyWith=function(e){var n=e.fit,i=e.alignment,s=e.minX,a=e.minY,r=e.maxX,o=e.maxY;return new t({fit:null!=n?n:this.fit,alignment:null!=i?i:this.alignment,minX:null!=s?s:this.minX,minY:null!=a?a:this.minY,maxX:null!=r?r:this.maxX,maxY:null!=o?o:this.maxY})},t.prototype.runtimeFit=function(t){return this.cachedRuntimeFit?this.cachedRuntimeFit:(n=this.fit===e.Cover?t.Fit.cover:this.fit===e.Contain?t.Fit.contain:this.fit===e.Fill?t.Fit.fill:this.fit===e.FitWidth?t.Fit.fitWidth:this.fit===e.FitHeight?t.Fit.fitHeight:this.fit===e.ScaleDown?t.Fit.scaleDown:t.Fit.none,this.cachedRuntimeFit=n,n);var n},t.prototype.runtimeAlignment=function(t){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(e=this.alignment===s.TopLeft?t.Alignment.topLeft:this.alignment===s.TopCenter?t.Alignment.topCenter:this.alignment===s.TopRight?t.Alignment.topRight:this.alignment===s.CenterLeft?t.Alignment.centerLeft:this.alignment===s.CenterRight?t.Alignment.centerRight:this.alignment===s.BottomLeft?t.Alignment.bottomLeft:this.alignment===s.BottomCenter?t.Alignment.bottomCenter:this.alignment===s.BottomRight?t.Alignment.bottomRight:t.Alignment.center,this.cachedRuntimeAlignment=e,e);var e},t}(),m=function(){function t(){}return t.loadRuntime=function(){a.default({locateFile:function(){return t.wasmURL}}).then((function(e){var n;for(t.runtime=e;t.callBackQueue.length>0;)null===(n=t.callBackQueue.shift())||void 0===n||n(t.runtime)})).catch((function(){var e="https://cdn.jsdelivr.net/npm/".concat(r.name,"@").concat(r.version,"/rive_fallback.wasm");t.wasmURL.toLowerCase()!==e?(console.warn("Failed to load WASM from ".concat(t.wasmURL,", trying jsdelivr as a backup")),t.setWasmUrl(e),t.loadRuntime()):console.error("Could not load Rive WASM file from unpkg or jsdelivr, network connection may be down, or         you may need to call set a new WASM source via RuntimeLoader.setWasmUrl() and call         RuntimeLoader.loadRuntime() again")}))},t.getInstance=function(e){t.isLoading||(t.isLoading=!0,t.loadRuntime()),t.runtime?e(t.runtime):t.callBackQueue.push(e)},t.awaitInstance=function(){return new Promise((function(e){return t.getInstance((function(t){return e(t)}))}))},t.setWasmUrl=function(e){t.wasmURL=e},t.isLoading=!1,t.callBackQueue=[],t.wasmURL="https://unpkg.com/".concat(r.name,"@").concat(r.version,"/rive.wasm"),t}();!function(t){t[t.Number=56]="Number",t[t.Trigger=58]="Trigger",t[t.Boolean=59]="Boolean"}(d||(d={}));var f,g=function(){function t(t,e){this.type=t,this.runtimeInput=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(t){this.runtimeInput.value=t},enumerable:!1,configurable:!0}),t.prototype.fire=function(){this.type===d.Trigger&&this.runtimeInput.fire()},t}();!function(t){t[t.General=128]="General",t[t.OpenUrl=131]="OpenUrl"}(f||(f={}));var v,b,y=function(){function t(t,e,n,i){this.stateMachine=t,this.playing=n,this.artboard=i,this.inputs=[],this.instance=new e.StateMachineInstance(t,i),this.initInputs(e)}return Object.defineProperty(t.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statesChanged",{get:function(){for(var t=[],e=0;e<this.instance.stateChangedCount();e++)t.push(this.instance.stateChangedNameByIndex(e));return t},enumerable:!1,configurable:!0}),t.prototype.advance=function(t){this.instance.advance(t)},t.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},t.prototype.reportedEventAt=function(t){return this.instance.reportedEventAt(t)},t.prototype.initInputs=function(t){for(var e=0;e<this.instance.inputCount();e++){var n=this.instance.input(e);this.inputs.push(this.mapRuntimeInput(n,t))}},t.prototype.mapRuntimeInput=function(t,e){return t.type===e.SMIInput.bool?new g(d.Boolean,t.asBool()):t.type===e.SMIInput.number?new g(d.Number,t.asNumber()):t.type===e.SMIInput.trigger?new g(d.Trigger,t.asTrigger()):void 0},t.prototype.cleanup=function(){this.instance.delete()},t}(),w=function(){function t(t,e,n,i,s){void 0===i&&(i=[]),void 0===s&&(s=[]),this.runtime=t,this.artboard=e,this.eventManager=n,this.animations=i,this.stateMachines=s}return t.prototype.add=function(t,e,n){if(void 0===n&&(n=!0),0===(t=D(t)).length)this.animations.forEach((function(t){return t.playing=e})),this.stateMachines.forEach((function(t){return t.playing=e}));else for(var i=this.animations.map((function(t){return t.name})),s=this.stateMachines.map((function(t){return t.name})),a=0;a<t.length;a++){var r=i.indexOf(t[a]),l=s.indexOf(t[a]);if(r>=0||l>=0)r>=0?this.animations[r].playing=e:this.stateMachines[l].playing=e;else{var c=this.artboard.animationByName(t[a]);if(c){var h=new o.Animation(c,this.artboard,this.runtime,e);h.advance(0),h.apply(1),this.animations.push(h)}else{var u=this.artboard.stateMachineByName(t[a]);if(u){var d=new y(u,this.runtime,e,this.artboard);this.stateMachines.push(d)}}}}return n&&(e?this.eventManager.fire({type:v.Play,data:this.playing}):this.eventManager.fire({type:v.Pause,data:this.paused})),e?this.playing:this.paused},t.prototype.initLinearAnimations=function(t,e){for(var n=this.animations.map((function(t){return t.name})),i=0;i<t.length;i++){var s=n.indexOf(t[i]);if(s>=0)this.animations[s].playing=e;else{var a=this.artboard.animationByName(t[i]);if(a){var r=new o.Animation(a,this.artboard,this.runtime,e);r.advance(0),r.apply(1),this.animations.push(r)}}}},t.prototype.initStateMachines=function(t,e){for(var n=this.stateMachines.map((function(t){return t.name})),i=0;i<t.length;i++){var s=n.indexOf(t[i]);if(s>=0)this.stateMachines[s].playing=e;else{var a=this.artboard.stateMachineByName(t[i]);if(a){var r=new y(a,this.runtime,e,this.artboard);this.stateMachines.push(r)}else this.initLinearAnimations([t[i]],e)}}},t.prototype.play=function(t){return this.add(t,!0)},t.prototype.pause=function(t){return this.add(t,!1)},t.prototype.scrub=function(t,e){var n=this.animations.filter((function(e){return t.includes(e.name)}));return n.forEach((function(t){return t.scrubTo=e})),n.map((function(t){return t.name}))},Object.defineProperty(t.prototype,"playing",{get:function(){return this.animations.filter((function(t){return t.playing})).map((function(t){return t.name})).concat(this.stateMachines.filter((function(t){return t.playing})).map((function(t){return t.name})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.animations.filter((function(t){return!t.playing})).map((function(t){return t.name})).concat(this.stateMachines.filter((function(t){return!t.playing})).map((function(t){return t.name})))},enumerable:!1,configurable:!0}),t.prototype.stop=function(t){var e=this,n=[];if(0===(t=D(t)).length)n=this.animations.map((function(t){return t.name})).concat(this.stateMachines.map((function(t){return t.name}))),this.animations.forEach((function(t){return t.cleanup()})),this.stateMachines.forEach((function(t){return t.cleanup()})),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var i=this.animations.filter((function(e){return t.includes(e.name)}));i.forEach((function(t){t.cleanup(),e.animations.splice(e.animations.indexOf(t),1)}));var s=this.stateMachines.filter((function(e){return t.includes(e.name)}));s.forEach((function(t){t.cleanup(),e.stateMachines.splice(e.stateMachines.indexOf(t),1)})),n=i.map((function(t){return t.name})).concat(s.map((function(t){return t.name})))}return this.eventManager.fire({type:v.Stop,data:n}),n},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.animations.reduce((function(t,e){return t||e.playing}),!1)||this.stateMachines.reduce((function(t,e){return t||e.playing}),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),t.prototype.atLeastOne=function(t,e){var n;return void 0===e&&(e=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([n=this.artboard.animationByIndex(0).name],t,e):this.artboard.stateMachineCount()>0&&this.add([n=this.artboard.stateMachineByIndex(0).name],t,e)),n},t.prototype.handleLooping=function(){for(var t=0,e=this.animations.filter((function(t){return t.playing}));t<e.length;t++){var n=e[t];0===n.loopValue&&n.loopCount?(n.loopCount=0,this.stop(n.name)):1===n.loopValue&&n.loopCount?(this.eventManager.fire({type:v.Loop,data:{animation:n.name,type:b.Loop}}),n.loopCount=0):2===n.loopValue&&n.loopCount>1&&(this.eventManager.fire({type:v.Loop,data:{animation:n.name,type:b.PingPong}}),n.loopCount=0)}},t.prototype.handleStateChanges=function(){for(var t=[],e=0,n=this.stateMachines.filter((function(t){return t.playing}));e<n.length;e++){var i=n[e];t.push.apply(t,i.statesChanged)}t.length>0&&this.eventManager.fire({type:v.StateChange,data:t})},t.prototype.handleAdvancing=function(t){this.eventManager.fire({type:v.Advance,data:t})},t}();!function(t){t.Load="load",t.LoadError="loaderror",t.Play="play",t.Pause="pause",t.Stop="stop",t.Loop="loop",t.Draw="draw",t.Advance="advance",t.StateChange="statechange",t.RiveEvent="riveevent",t.AudioStatusChange="audiostatuschange"}(v||(v={})),function(t){t.OneShot="oneshot",t.Loop="loop",t.PingPong="pingpong"}(b||(b={}));var S,E=function(){function t(t){void 0===t&&(t=[]),this.listeners=t}return t.prototype.getListeners=function(t){return this.listeners.filter((function(e){return e.type===t}))},t.prototype.add=function(t){this.listeners.includes(t)||this.listeners.push(t)},t.prototype.remove=function(t){for(var e=0;e<this.listeners.length;e++){var n=this.listeners[e];if(n.type===t.type&&n.callback===t.callback){this.listeners.splice(e,1);break}}},t.prototype.removeAll=function(t){var e=this;t?this.listeners.filter((function(e){return e.type===t})).forEach((function(t){return e.remove(t)})):this.listeners.splice(0,this.listeners.length)},t.prototype.fire=function(t){this.getListeners(t.type).forEach((function(e){return e.callback(t)}))},t}(),T=function(){function t(t){this.eventManager=t,this.queue=[]}return t.prototype.add=function(t){this.queue.push(t)},t.prototype.process=function(){for(;this.queue.length>0;){var t=this.queue.shift();(null==t?void 0:t.action)&&t.action(),(null==t?void 0:t.event)&&this.eventManager.fire(t.event)}},t}();!function(t){t[t.AVAILABLE=0]="AVAILABLE",t[t.UNAVAILABLE=1]="UNAVAILABLE"}(S||(S={}));var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._started=!1,e._enabled=!1,e._status=S.UNAVAILABLE,e}return c(e,t),e.prototype.delay=function(t){return h(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},e.prototype.timeout=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){return[2,new Promise((function(t,e){return setTimeout(e,50)}))]}))}))},e.prototype.reportToListeners=function(){this.fire({type:v.AudioStatusChange}),this.removeAll()},e.prototype.enableAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){return this._enabled||(this._enabled=!0,this._status=S.AVAILABLE,this.reportToListeners()),[2]}))}))},e.prototype.testAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:if(this._status!==S.UNAVAILABLE||null===this._audioContext)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return t.sent(),this.enableAudio(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))},e.prototype._establishAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this._started?[3,5]:(this._started=!0,"undefined"!=typeof window?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),t.label=2;case 2:return this._status!==S.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return t.sent(),[4,this.delay(1e3)];case 4:return t.sent(),[3,2];case 5:return[2]}}))}))},e.prototype.listenForUserAction=function(){var t=this;document.addEventListener("pointerdown",(function(){return h(t,void 0,void 0,(function(){return u(this,(function(t){return this.enableAudio(),[2]}))}))}),{once:!0})},e.prototype.establishAudio=function(){return h(this,void 0,void 0,(function(){return u(this,(function(t){return this._establishAudio(),[2]}))}))},Object.defineProperty(e.prototype,"systemVolume",{get:function(){return this._status===S.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),e}(E),_=new x,A=function(){function t(){}return t.prototype.observe=function(){},t.prototype.unobserve=function(){},t.prototype.disconnect=function(){},t}(),C=globalThis.ResizeObserver||A,I=new(function(){function t(){var t=this;this._elementsMap=new Map,this._onObservedEntry=function(e){var n=t._elementsMap.get(e.target);null!==n?n.onResize(0==e.target.clientWidth||0==e.target.clientHeight):t._resizeObserver.unobserve(e.target)},this._onObserved=function(e){e.forEach(t._onObservedEntry)},this._resizeObserver=new C(this._onObserved)}return t.prototype.add=function(t,e){var n={onResize:e,element:t};return this._elementsMap.set(t,n),this._resizeObserver.observe(t),n},t.prototype.remove=function(t){this._resizeObserver.unobserve(t.element),this._elementsMap.delete(t.element)},t}()),L=function(){function t(t){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=t.src,this.buffer=t.buffer,t.assetLoader&&(this.assetLoader=t.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof t.enableRiveAssetCDN||t.enableRiveAssetCDN,this.eventManager=new E,t.onLoad&&this.on(v.Load,t.onLoad),t.onLoadError&&this.on(v.LoadError,t.onLoadError)}return t.prototype.initData=function(){return h(this,void 0,void 0,(function(){var e,n,i;return u(this,(function(s){switch(s.label){case 0:return this.src?(e=this,[4,k(this.src)]):[3,2];case 1:e.buffer=s.sent(),s.label=2;case 2:return this.assetLoader&&(n=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),i=this,[4,this.runtime.load(new Uint8Array(this.buffer),n,this.enableRiveAssetCDN)];case 3:if(i.file=s.sent(),null===this.file)throw this.eventManager.fire({type:v.LoadError,data:null}),new Error(t.fileLoadErrorMessage);return this.eventManager.fire({type:v.Load,data:this}),[2]}}))}))},t.prototype.init=function(){return h(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:if(!this.src&&!this.buffer)throw new Error(t.missingErrorMessage);return e=this,[4,m.awaitInstance()];case 1:return e.runtime=n.sent(),[4,this.initData()];case 2:return n.sent(),[2]}}))}))},t.prototype.on=function(t,e){this.eventManager.add({type:t,callback:e})},t.prototype.off=function(t,e){this.eventManager.remove({type:t,callback:e})},t.prototype.cleanup=function(){var t;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(t=this.file)||void 0===t||t.delete())},t.prototype.removeAllRiveEventListeners=function(t){this.eventManager.removeAll(t)},t.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},t.missingErrorMessage="Rive source file or data buffer required",t.fileLoadErrorMessage="The file failed to load",t}(),P=function(){function t(t){var e,n=this;this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._hasZeroSize=!1,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(t){n._hasZeroSize=t,n._layout.maxX&&n._layout.maxY||n.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=t.canvas,t.canvas.constructor===HTMLCanvasElement&&(this._observed=I.add(this.canvas,this.onCanvasResize)),this.src=t.src,this.buffer=t.buffer,this.riveFile=t.riveFile,this.layout=null!==(e=t.layout)&&void 0!==e?e:new p,this.shouldDisableRiveListeners=!!t.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!t.isTouchScrollEnabled,this.automaticallyHandleEvents=!!t.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===t.enableRiveAssetCDN||t.enableRiveAssetCDN,this.eventManager=new E,t.onLoad&&this.on(v.Load,t.onLoad),t.onLoadError&&this.on(v.LoadError,t.onLoadError),t.onPlay&&this.on(v.Play,t.onPlay),t.onPause&&this.on(v.Pause,t.onPause),t.onStop&&this.on(v.Stop,t.onStop),t.onLoop&&this.on(v.Loop,t.onLoop),t.onStateChange&&this.on(v.StateChange,t.onStateChange),t.onAdvance&&this.on(v.Advance,t.onAdvance),t.onload&&!t.onLoad&&this.on(v.Load,t.onload),t.onloaderror&&!t.onLoadError&&this.on(v.LoadError,t.onloaderror),t.onplay&&!t.onPlay&&this.on(v.Play,t.onplay),t.onpause&&!t.onPause&&this.on(v.Pause,t.onpause),t.onstop&&!t.onStop&&this.on(v.Stop,t.onstop),t.onloop&&!t.onLoop&&this.on(v.Loop,t.onloop),t.onstatechange&&!t.onStateChange&&this.on(v.StateChange,t.onstatechange),t.assetLoader&&(this.assetLoader=t.assetLoader),this.taskQueue=new T(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:t.autoplay,animations:t.animations,stateMachines:t.stateMachines,artboard:t.artboard,useOffscreenRenderer:t.useOffscreenRenderer})}return t.new=function(e){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new t(e)},t.prototype.onSystemAudioChanged=function(){this.volume=this._volume},t.prototype.init=function(e){var n=this,i=e.src,s=e.buffer,a=e.riveFile,r=e.animations,o=e.stateMachines,l=e.artboard,c=e.autoplay,h=void 0!==c&&c,u=e.useOffscreenRenderer,d=void 0!==u&&u;if(this.src=i,this.buffer=s,this.riveFile=a,!this.src&&!this.buffer&&!this.riveFile)throw new Error(t.missingErrorMessage);var p=D(r),f=D(o);this.loaded=!1,this.readyForPlaying=!1,m.awaitInstance().then((function(t){n.runtime=t,n.renderer=n.runtime.makeRenderer(n.canvas,d),n.canvas.width||n.canvas.height||n.resizeDrawingSurfaceToCanvas(),n.initData(l,p,f,h).then((function(){return n.setupRiveListeners()})).catch((function(t){console.error(t)}))})).catch((function(t){console.error(t)}))},t.prototype.setupRiveListeners=function(t){var e=this;if(!this.shouldDisableRiveListeners){var n=(this.animator.stateMachines||[]).filter((function(t){return t.playing&&e.runtime.hasListeners(t.instance)})).map((function(t){return t.instance})),i=this.isTouchScrollEnabled;t&&"isTouchScrollEnabled"in t&&(i=t.isTouchScrollEnabled),this.eventCleanup=(0,l.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:n,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:i})}},t.prototype.removeRiveListeners=function(){this.eventCleanup&&this.eventCleanup()},t.prototype.initializeAudio=function(){var t,e=this;_.status==S.UNAVAILABLE&&(null===(t=this.artboard)||void 0===t?void 0:t.hasAudio)&&(_.add({type:v.AudioStatusChange,callback:function(){return e.onSystemAudioChanged()}}),_.establishAudio())},t.prototype.initData=function(t,e,n,i){var s;return h(this,void 0,void 0,(function(){var a;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),null!=this.riveFile?[3,2]:(this.riveFile=new L({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:r.sent(),r.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(t,e,n,i),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:v.Load,data:null!==(s=this.src)&&void 0!==s?s:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return r.sent(),a="Problem loading file; may be corrupt!",console.warn(a),this.eventManager.fire({type:v.LoadError,data:a}),[2,Promise.reject(a)];case 4:return[2]}}))}))},t.prototype.initArtboard=function(t,e,n,i){if(this.file){var s,a=t?this.file.artboardByName(t):this.file.defaultArtboard();if(!a){var r="Invalid artboard name or no default artboard";return console.warn(r),void this.eventManager.fire({type:v.LoadError,data:r})}if(this.artboard=a,a.volume=this._volume*_.systemVolume,this.artboard.animationCount()<1)throw r="Artboard has no animations",this.eventManager.fire({type:v.LoadError,data:r}),r;this.animator=new w(this.runtime,this.artboard,this.eventManager),e.length>0||n.length>0?(s=e.concat(n),this.animator.initLinearAnimations(e,i),this.animator.initStateMachines(n,i)):s=[this.animator.atLeastOne(i,!1)],this.taskQueue.add({event:{type:i?v.Play:v.Pause,data:s}})}},t.prototype.drawFrame=function(){this.startRendering()},t.prototype.draw=function(t,e){this.frameRequestId=null;var n=performance.now();this.lastRenderTime||(this.lastRenderTime=t),this.renderSecondTimer+=t-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==e||e());var i=(t-this.lastRenderTime)/1e3;this.lastRenderTime=t;for(var s=0,a=this.animator.animations.filter((function(t){return t.playing||t.needsScrub})).sort((function(t){return t.needsScrub?-1:1}));s<a.length;s++){var r=a[s];r.advance(i),r.instance.didLoop&&(r.loopCount+=1),r.apply(1)}for(var o=0,c=this.animator.stateMachines.filter((function(t){return t.playing}));o<c.length;o++){var h=c[o],u=h.reportedEventCount();if(u)for(var d=0;d<u;d++){var p=h.reportedEventAt(d);if(p)if(p.type===f.OpenUrl){if(this.eventManager.fire({type:v.RiveEvent,data:p}),this.automaticallyHandleEvents){var m=document.createElement("a"),g=p,b=g.url,y=g.target,w=(0,l.sanitizeUrl)(b);b&&m.setAttribute("href",w),y&&m.setAttribute("target",y),w&&w!==l.BLANK_URL&&m.click()}}else this.eventManager.fire({type:v.RiveEvent,data:p})}h.advance(i)}this.artboard.advance(i);var S=this.renderer;S.clear(),S.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(S),S.restore(),S.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(i),this.frameCount++;var E=performance.now();for(this.frameTimes.push(E),this.durations.push(E-n);this.frameTimes[0]<=E-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},t.prototype.alignRenderer=function(){var t=this,e=t.renderer,n=t.runtime,i=t._layout,s=t.artboard;e.align(i.runtimeFit(n),i.runtimeAlignment(n),{minX:i.minX,minY:i.minY,maxX:i.maxX,maxY:i.maxY},s.bounds)},Object.defineProperty(t.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce((function(t,e){return t+e}),0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),t.prototype.cleanup=function(){var t;this.stopRendering(),this.cleanupInstances(),null!==this._observed&&I.remove(this._observed),null===(t=this.riveFile)||void 0===t||t.cleanup(),this.riveFile=null,this.file=null},t.prototype.deleteRiveRenderer=function(){var t;null===(t=this.renderer)||void 0===t||t.delete(),this.renderer=null},t.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},t.prototype.retrieveTextRun=function(t){var e;if(t)if(this.artboard){var n=this.artboard.textRun(t);if(n)return n;console.warn("Could not access a text run with name '".concat(t,"' in the '").concat(null===(e=this.artboard)||void 0===e?void 0:e.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},t.prototype.getTextRunValue=function(t){var e=this.retrieveTextRun(t);return e?e.text:void 0},t.prototype.setTextRunValue=function(t,e){var n=this.retrieveTextRun(t);n&&(n.text=e)},t.prototype.play=function(t,e){var n=this;t=D(t),this.readyForPlaying?(this.animator.play(t),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return n.play(t,e)}})},t.prototype.pause=function(t){var e=this;t=D(t),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(t)):this.taskQueue.add({action:function(){return e.pause(t)}})},t.prototype.scrub=function(t,e){var n=this;t=D(t),this.readyForPlaying?(this.animator.scrub(t,e||0),this.drawFrame()):this.taskQueue.add({action:function(){return n.scrub(t,e)}})},t.prototype.stop=function(t){var e=this;t=D(t),this.readyForPlaying?(this.animator.stop(t),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return e.stop(t)}})},t.prototype.reset=function(t){var e,n=null==t?void 0:t.artboard,i=D(null==t?void 0:t.animations),s=D(null==t?void 0:t.stateMachines),a=null!==(e=null==t?void 0:t.autoplay)&&void 0!==e&&e;this.cleanupInstances(),this.initArtboard(n,i,s,a),this.taskQueue.process()},t.prototype.load=function(t){this.file=null,this.stop(),this.init(t)},Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t,t.maxX&&t.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),t.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},t.prototype.resizeDrawingSurfaceToCanvas=function(t){if(this.canvas instanceof HTMLCanvasElement&&window){var e=this.canvas.getBoundingClientRect(),n=e.width,i=e.height,s=t||window.devicePixelRatio||1;this.canvas.width=s*n,this.canvas.height=s*i,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(t.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var t=[],e=0;e<this.artboard.animationCount();e++)t.push(this.artboard.animationByIndex(e).name);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var t=[],e=0;e<this.artboard.stateMachineCount();e++)t.push(this.artboard.stateMachineByIndex(e).name);return t},enumerable:!1,configurable:!0}),t.prototype.stateMachineInputs=function(t){if(this.loaded){var e=this.animator.stateMachines.find((function(e){return e.name===t}));return null==e?void 0:e.inputs}},t.prototype.retrieveInputAtPath=function(t,e){if(t)if(this.artboard){var n=this.artboard.inputByPath(t,e);if(n)return n;console.warn("Could not access an input with name: '".concat(t,"', at path:'").concat(e,"'"))}else console.warn("Tried to access input: '".concat(t,"', at path: '").concat(e,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(e,"'"))},t.prototype.setBooleanStateAtPath=function(t,e,n){var i=this.retrieveInputAtPath(t,n);i&&(i.type===d.Boolean?i.asBool().value=e:console.warn("Input with name: '".concat(t,"', at path:'").concat(n,"' is not a boolean")))},t.prototype.setNumberStateAtPath=function(t,e,n){var i=this.retrieveInputAtPath(t,n);i&&(i.type===d.Number?i.asNumber().value=e:console.warn("Input with name: '".concat(t,"', at path:'").concat(n,"' is not a number")))},t.prototype.fireStateAtPath=function(t,e){var n=this.retrieveInputAtPath(t,e);n&&(n.type===d.Trigger?n.asTrigger().fire():console.warn("Input with name: '".concat(t,"', at path:'").concat(e,"' is not a trigger")))},t.prototype.retrieveTextAtPath=function(t,e){if(t)if(e)if(this.artboard){var n=this.artboard.textByPath(t,e);if(n)return n;console.warn("Could not access text with name: '".concat(t,"', at path:'").concat(e,"'"))}else console.warn("Tried to access text: '".concat(t,"', at path: '").concat(e,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(t,"'"));else console.warn("No text name provided for path '".concat(e,"'"))},t.prototype.getTextRunValueAtPath=function(t,e){var n=this.retrieveTextAtPath(t,e);if(n)return n.text;console.warn("Could not get text with name: '".concat(t,"', at path:'").concat(e,"'"))},t.prototype.setTextRunValueAtPath=function(t,e,n){var i=this.retrieveTextAtPath(t,n);i?i.text=e:console.warn("Could not set text with name: '".concat(t,"', at path:'").concat(n,"'"))},Object.defineProperty(t.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(t){return t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(t){return t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(t){return!t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(t){return!t.playing})).map((function(t){return t.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e){this.eventManager.add({type:t,callback:e})},t.prototype.off=function(t,e){this.eventManager.remove({type:t,callback:e})},t.prototype.unsubscribe=function(t,e){console.warn("This function is deprecated: please use `off()` instead."),this.off(t,e)},t.prototype.removeAllRiveEventListeners=function(t){this.eventManager.removeAll(t)},t.prototype.unsubscribeAll=function(t){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(t)},t.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},t.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},t.prototype.enableFPSCounter=function(t){this.runtime.enableFPSCounter(t)},t.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(t.prototype,"contents",{get:function(){if(this.loaded){for(var t={artboards:[]},e=0;e<this.file.artboardCount();e++){for(var n=this.file.artboardByIndex(e),i={name:n.name,animations:[],stateMachines:[]},s=0;s<n.animationCount();s++){var a=n.animationByIndex(s);i.animations.push(a.name)}for(var r=0;r<n.stateMachineCount();r++){for(var o=n.stateMachineByIndex(r),l=o.name,c=new this.runtime.StateMachineInstance(o,n),h=[],u=0;u<c.inputCount();u++){var d=c.input(u);h.push({name:d.name,type:d.type})}i.stateMachines.push({name:l,inputs:h})}t.artboards.push(i)}return t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(t){this._volume=t,this.artboard&&(this.artboard.volume=t*_.systemVolume)},enumerable:!1,configurable:!0}),t.missingErrorMessage="Rive source file or data buffer required",t}(),k=function(t){return h(void 0,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=new Request(t),[4,fetch(e)];case 1:return[4,n.sent().arrayBuffer()];case 2:return[2,n.sent()]}}))}))},D=function(t){return"string"==typeof t?[t]:t instanceof Array?t:[]},B={EventManager:E,TaskQueueManager:T},M=function(t){return new Promise((function(e){return m.getInstance((function(n){n.decodeAudio(t,e)}))}))},z=function(t){return new Promise((function(e){return m.getInstance((function(n){n.decodeImage(t,e)}))}))},N=function(t){return new Promise((function(e){return m.getInstance((function(n){n.decodeFont(t,e)}))}))}})(),i})(),t.exports=e()},424:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(601),s=n.n(i),a=n(314),r=n.n(a)()(s());r.push([t.id,".game-scene #play-button{position:relative;top:14vh;display:block;margin:0 auto;z-index:5}@media(max-width: 576px){#play-button{max-width:115px;max-height:115px}}@media(min-width: 768px){#play-button{max-width:200px;max-height:200px}}",""]);const o=r},632:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(601),s=n.n(i),a=n(314),r=n.n(a)()(s());r.push([t.id,".game-control .level_content-wrapper{position:absolute;z-index:5;max-width:130px;width:100%;top:5px;left:12%}.game-control .level_content-wrapper .bar-level-wrapper{position:absolute;width:100%;max-width:125px;top:1.4rem;left:0;display:flex;align-items:center;justify-content:center}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{position:relative;width:100%;max-width:10px;margin:0px 2.2px}@media(min-width: 320px)and (max-width: 360px){.game-control .level_content-wrapper .bar-level-wrapper{max-width:100px;top:1rem}.game-control .level_content-wrapper{max-width:100px;width:100%;top:5px;left:12%}}@media(min-width: 361px)and (max-width: 500px){.level_content-wrapper{top:.5rem}.game-control .level_content-wrapper{max-width:130px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:13px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:120px;top:1.4rem}}@media(min-width: 501px)and (max-width: 767px){.game-control .level_content-wrapper{max-width:200px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:190px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:22px;margin:0px 2.5px}}@media(min-width: 768px)and (max-width: 991px){.game-control .level_content-wrapper{max-width:215px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:205px;top:2rem}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px;margin:0px 2.5px}}@media(min-width: 991px)and (max-width: 1024px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}@media(min-width: 1080px){.game-control .level_content-wrapper{max-width:230px}.game-control .level_content-wrapper .bar-level-wrapper{max-width:215px;top:2.3rem;left:5px}.game-control .level_content-wrapper .bar-level-wrapper .bar-level{max-width:25px}}",""]);const o=r},636:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(601),s=n.n(i),a=n(314),r=n.n(a)()(s());r.push([t.id,".popup{display:none;position:absolute;top:0;left:0;right:0;bottom:0;z-index:1000;height:100%;width:100%;font-family:Arial}.popup.show{display:block}.popup .popup__overlay{height:100%;width:100%;background-color:rgba(0,0,0,.5)}.popup .popup__content-wrapper{position:absolute;top:20vh;left:10vw;right:10vw;padding:35px 50px;height:80vw;background-repeat:no-repeat;background-size:contain}.popup .popup__content-wrapper [data-click=close]{position:absolute;top:-15px;left:15px;display:block}.popup .popup__content-wrapper .popup__content-container{padding:15px;color:#fff;display:flex;width:100%;height:100%;justify-content:center;align-items:center;align-content:center;flex-wrap:wrap}.popup #cancel-button{position:absolute;top:4px;left:24px}",""]);const o=r},278:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(601),s=n.n(i),a=n(314),r=n.n(a)()(s());r.push([t.id,"#timer-ticking{position:relative;top:120px;width:100%;display:flex}#timer-ticking #timer-empty{position:absolute;bottom:0px;width:100%;height:40px}#timer-ticking #rotating-clock{animation:rotateClock 2s linear infinite;position:absolute;width:55px;bottom:-5px;left:30px}#timer-ticking #timer-full-container{position:absolute;bottom:0;left:14%;width:100%;overflow:hidden;height:40px}#timer-ticking #timer-full-container .timer-mask{position:absolute;width:86%;background:repeating-linear-gradient(-45deg, red, red 20px, #ffb3b3 20px, #ffb3b3 40px);left:0px;height:25px;margin:6px 0px 0px 2px}@keyframes rotateClock{from{transform:translateX(-50%) rotate(0deg)}to{transform:translateX(-50%) rotate(360deg)}}@keyframes reduceWidth{from{width:100%}to{width:0%}}@media(min-width: 320px)and (max-width: 360px){#timer-ticking{top:100px}#timer-ticking #timer-full-container{height:30px}#timer-ticking #timer-empty{height:30px}#timer-ticking #timer-full-container .timer-mask{height:19px;margin:4px 0px 0px 2px}#timer-ticking #rotating-clock{width:40px;bottom:-5px;left:25px}}@media(min-width: 361px)and (max-width: 500px){#timer-ticking{top:120px}}@media(min-width: 501px)and (max-width: 768px){#timer-ticking{top:180px}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:80px;bottom:-8px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:37px;margin:9px 0px 0px 5px}}@media(min-width: 769px)and (max-width: 992px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:60px}#timer-ticking #rotating-clock{width:90px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:60px}#timer-ticking #timer-full-container .timer-mask{height:36px;margin:9px 0px 0px 5px}}@media(min-width: 993px)and (max-width: 1024px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:100px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 6px}}@media(min-width: 1080px){#timer-ticking{top:15%}#timer-ticking #timer-empty{height:70px}#timer-ticking #rotating-clock{width:100px;bottom:-15px;left:7%}#timer-ticking #timer-full-container{height:70px}#timer-ticking #timer-full-container .timer-mask{height:45px;margin:10px 0px 0px 5px}}",""]);const o=r},717:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(601),s=n.n(i),a=n(314),r=n.n(a)()(s());r.push([t.id,".buttons-container{position:absolute;width:100%;bottom:65px;display:flex;gap:40px;justify-content:center}",""]);const o=r},664:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(601),s=n.n(i),a=n(314),r=n.n(a)()(s());r.push([t.id,"button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.w-100{width:100%}.h-100{height:100%}.d-flex{display:flex}.justify-content-center{justify-content:center}.m-1{margin:8px}.ms-1{margin-left:8px}.me-1{margin-right:8px}.mt-1{margin-top:8px}.mb-1{margin-bottom:8px}.m-2{margin:16px}.ms-2{margin-left:16px}.me-2{margin-right:16px}.mt-2{margin-top:16px}.mb-2{margin-bottom:16px}.m-3{margin:24px}.ms-3{margin-left:24px}.me-3{margin-right:24px}.mt-3{margin-top:24px}.mb-3{margin-bottom:24px}.m-4{margin:32px}.ms-4{margin-left:32px}.me-4{margin-right:32px}.mt-4{margin-top:32px}.mb-4{margin-bottom:32px}.m-5{margin:40px}.ms-5{margin-left:40px}.me-5{margin-right:40px}.mt-5{margin-top:40px}.mb-5{margin-bottom:40px}.text-align-center{text-align:center}.font-size-1{font-size:8px}.font-size-2{font-size:16px}.font-size-3{font-size:24px}.font-size-4{font-size:32px}.font-size-5{font-size:40px}",""]);const o=r},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(r[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&r[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},72:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var a={},r=[],o=0;o<t.length;o++){var l=t[o],c=i.base?l[0]+i.base:l[0],h=a[c]||0,u="".concat(c," ").concat(h);a[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var m=s(p,i);i.byIndex=o,e.splice(o,0,{identifier:u,updater:m,references:1})}r.push(u)}return r}function s(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var a=i(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var o=n(a[r]);e[o].references--}for(var l=i(t,s),c=0;c<a.length;c++){var h=n(a[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}a=l}}},659:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={id:i,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";class t{x;y;origx;origy;text;img;imageSize;textFontSize;canvasWidth;canvasHeight;imageCenterOffsetX;imageCenterOffsetY;context;tutorialInstance;timerTickingInstance;frame=0;constructor(t,e,n,i,s,a,r,o,l){this.x=s,this.y=a,this.origx=s,this.origy=a,this.canvasWidth=e,this.canvasHeight=n,this.tutorialInstance=l,this.text=i,this.img=r,this.context=t,this.calculateImageAndFontSize(),this.imageCenterOffsetX=this.imageSize/2.3,this.imageCenterOffsetY=this.imageSize/1.5,this.timerTickingInstance=o}calculateImageAndFontSize(){1.4*this.context.measureText(this.text).width>this.canvasHeight/9.5?(this.imageSize=1.1*this.context.measureText(this.text).width,this.textFontSize=this.canvasHeight/25,this.text.length>=3&&this.origx<50&&this.origx<this.canvasWidth/2&&(this.x=this.origx+21)):(this.imageSize=this.canvasHeight/9.5,this.textFontSize=this.canvasHeight/20)}getEase=(t,e,n,i)=>-n/2*(Math.cos(Math.PI*t/i)-1)+e;getX=()=>this.frame>=100?this.x:this.getEase(this.frame,0,this.x,100);getY=()=>this.frame>=100?this.y:this.getEase(this.frame,0,this.y,100);adjustSize(t,e){return t?1.25*e:e}draw(t,e=!1){const n=this.adjustSize(e,this.imageSize),i=this.adjustSize(e,this.imageCenterOffsetX),s=this.adjustSize(e,this.imageCenterOffsetY),a=this.getX()-i,r=this.getY()-s;e?(this.context.shadowColor="rgba(255, 255, 255, 1)",this.context.shadowBlur=12,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0):(this.context.shadowColor="transparent",this.context.shadowBlur=0,this.context.shadowOffsetX=0,this.context.shadowOffsetY=0),this.context.drawImage(this.img,a,r,n,n),this.context.shadowColor="transparent",this.context.shadowBlur=0,this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${O}, monospace`,this.context.textAlign="center",this.context.fillText(this.text,this.getX(),this.getY()),this.frame<100?this.frame=this.frame+1:null==this.tutorialInstance&&null==this.tutorialInstance||this.tutorialInstance.draw(t,this.img,this.imageSize)}}const e={english:"Consolas",swahili:"Consolas",wolof:"Consolas",tajik:"Consolas",marathi:"Consolas",amharic:"Consolas",punjabi:"Consolas",tamil:"Consolas",sepedi:"Consolas",gujarati:"Consolas",telugu:"Consolas",tsonga:"Consolas",malay:"Consolas",ndebele:"Consolas",venda:"NotoSans-Regular",siswati:"Consolas",tswana:"Consolas",thai:"Consolas",fula:"Consolas",farsi:"Consolas",burmese:"Consolas",bengali:"Consolas",Azerbaijani:"NotoSans-Regular",Sesotho:"Consolas",Georgian:"Consolas",BrazilianPortuguese:"Consolas",Somali:"Consolas",Hausa:"NotoSans-Regular",Igbo:"Consolas",HatianCreole:"Consolas",Oromo:"Consolas",Luganda:"Consolas",Yoruba:"Consolas",Khmer:"Consolas",Javanese:"Consolas",Urdu:"Consolas",Kinyarwanda:"Consolas",Shona:"Consolas",Kurdish:"Consolas",French:"Consolas",isiXhosa:"Consolas",Afrikaans:"Consolas",Nepali:"Consolas",Ukrainian:"Consolas",Hindi:"Consolas",Tagalog:"Consolas",Vietnamese:"NotoSans-Regular",Pashto:"Consolas",Twi:"NotoSans-Regular",Arabic:"Adobe-Arabic-Bold"};class i{static UrlSubstring="/feedthemonster";static getConvertedDevProdURL(t){return R.DevelopmentLink?t.slice(0,t.indexOf(this.UrlSubstring)+this.UrlSubstring.length)+"dev"+t.slice(t.indexOf(this.UrlSubstring)+this.UrlSubstring.length):t}static getLanguageSpecificFont(t){const n=t.toLowerCase();for(const t in e)if(t.toLowerCase()===n)return e[t];return console.log(`Font not found for language: ${t}`),"NotoSans-Regular"}static getRandomNumber(t,e){return Math.floor(Math.random()*(e-t+1))+t}static getExcludedCoordinates(t,e){return{excludeX:t.width*(e/100),excludeY:t.height*(e/100)}}}function s(t,e){const n={};let i=0;const s=Object.keys(t).length;for(let a in t)n[a]=new Image,n[a].onload=function(){++i>=s&&e(n)},n[a].src=t[a]}const a=async t=>{const e=Object.keys(t).map((async e=>{const n=await(async t=>{const e=new Image;return new Promise((n=>{e.onload=()=>n(e),e.src=t}))})(t[e]);return{[e]:n}}));return(await Promise.all(e)).reduce(((t,e)=>({...t,...e})),{})};const r=()=>"visible"===document.visibilityState,o=(t=!1,e)=>{t?e.classList.remove("show"):e.classList.add("show")},l="pwa_installed_status",c="storePreviousPlayedLevel",h="is_cached",u="./assets/audios/Eat.mp3",d=t=>`./assets/audios/Cheering-0${t}.mp3`,p="./assets/audios/intro.mp3",m=["./assets/audios/intro.mp3","./assets/audios/Cheering-02.mp3","./assets/audios/Cheering-03.mp3","./assets/audios/Cheering-01.mp3","./assets/audios/onDrag.mp3","./assets/audios/timeout.mp3","./assets/audios/LevelWinFanfare.mp3","./assets/audios/LevelLoseFanfare.mp3","./assets/audios/ButtonClick.mp3","./assets/audios/Monster Spits wrong stones-01.mp3","./assets/audios/Disapointed-05.mp3","./assets/audios/MonsterSpit.mp3","./assets/audios/Eat.mp3","./assets/audios/PointsAdd.wav","./assets/audios/are-you-sure.mp3"],f="./assets/images/Totem_v02_v01.webp",g="./assets/images/hill.webp",v="./assets/images/fence_v01.webp",b="./assets/images/bg_v01.webp",y="./assets/images/timer_empty.webp",w="./assets/images/timer.webp",S="./assets/images/next_btn.webp",E={DEFAULT_BACKGROUND_1:b,ASSETS_PATH_HILL:g,ASSETS_PATH_TOTEM:f,ASSETS_PATH_FENCE:v},T={AUTUMN_BACKGROUND_1:"./assets/images/Autumn_bg_v01.webp",AUTUMN_HILL_1:"./assets/images/Autumn_hill.webp",AUTUMN_PILLAR_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_SIGN_1:"./assets/images/Autumn_sign_v01.webp",AUTUMN_FENCE_1:"./assets/images/Autumn_fence_v01.webp"},x={WINTER_BACKGROUND_1:"./assets/images/Winter_bg_01.webp",WINTER_HILL_1:"./assets/images/Winter_hill.webp",WINTER_SIGN_1:"./assets/images/Winter_sign_v01.webp",WINTER_FENCE_1:"./assets/images/Winter_fence_v01.webp",WINTER_PILLAR_1:"./assets/images/Winter_sign_v01.webp"},A="LoadingTransition",C="StartScene",I="LevelSelection",L="GamePlay",P="LevelEnd",k=[5,13,20,30,42],D=new URLSearchParams(window.location.search);var B=D.get("cr_user_id"),M=null==D.get("source")?null:D.get("source"),z=null==D.get("campaign_id")?null:D.get("campaign_id"),N=null==D.get("cr_lang")?"english":D.get("cr_lang");const O=i.getLanguageSpecificFont(N),R={DevelopmentLink:!!window.location.href.includes("https://feedthemonsterdev.curiouscontent.org"),DebugMode:!1},F="loadpuzzle",j="stonesdropped",V="click",U="visibilitychange",$="./lang/"+N+"/ftm_"+N+".json";async function W(){return await fetch($,{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json().then((t=>t))))}class H{title;otherAudios;levels;FeedbackTexts;FeedbackAudios;rightToLeft;majVersion;minVersion;version;constructor(t,e,n,i,s,a,r,o,l){this.title=t,this.otherAudios=new G(e),this.levels=this.getLevels(n),this.FeedbackTexts=new X(i),this.FeedbackAudios=new Y(a),this.rightToLeft=s,this.majVersion=r,this.minVersion=o,this.version=l}getLevels(t){let e=[];for(let n=0;n<t.length;n++)e.push(new q(t[n]));return e}}class G{selctYourPlayer;watchMeGrow;areYouSure;constructor(t){this.selctYourPlayer=t["Select your player"],this.watchMeGrow=t["Watch me grow"],this.areYouSure=t["Are you sure"]}}class X{fantastic;great;amazing;constructor(t){t.length>=1&&(this.fantastic=t[0]),t.length>=2&&(this.great=t[1]),t.length>=3&&(this.amazing=t[2])}}class Y{fantastic;great;amazing;constructor(t){t.length>=1&&(this.fantastic=t[0]),t.length>=2&&(this.great=t[1]),t.length>=3&&(this.amazing=t[2])}}class q{puzzles;levelMeta;levelNumber;constructor(t){this.puzzles=this.getPuzzleData(t),this.levelMeta=new Q(t.LevelMeta),this.levelNumber=t.LevelNumber}getPuzzleData(t){let e=[];return t.Puzzles.map(((t,n)=>{e.push(new K(t))})),e}}class K{segmentNumber;prompt;foilStones;targetStones;constructor(t){this.segmentNumber=t.SegmentNumber,this.prompt=new J(t.prompt),this.foilStones=this.getFoilStones(t),this.targetStones=this.getTargetStones(t)}getFoilStones(t){let e=[];return t.foilstones.map(((t,n)=>{e.push(t.StoneText)})),e}getTargetStones(t){let e=[];return t.targetstones.map(((t,n)=>{e.push(t.StoneText)})),e}}class J{promptText;promptAudio;constructor(t){this.promptText=t.PromptText,this.promptAudio=t.PromptAudio}}class Q{promptFadeOut;letterGroup;levelNumber;protoType;levelType;constructor(t){this.promptFadeOut=t.PromptFadeout,this.letterGroup=t.LetterGroup,this.levelNumber=t.LevelNumber,this.protoType=t.PromptType,this.levelType=t.LevelType}}class Z{static currentlanguage=N;static setGameLevelScore(t,e){let n=this.calculateStarCount(e),i={levelName:t.levelMeta.levelType,levelNumber:t.levelMeta.levelNumber,score:e,starCount:n};this.setTotalStarCount(n);let s=this.getAllGameLevelInfo(),a=-1;for(let t=0;t<s.length;t++)if(s[t].levelNumber===i.levelNumber){a=t;break}-1!==a&&i.score>s[a].score?s[a]=i:s.push(i),localStorage.setItem(this.currentlanguage+"gamePlayedInfo",JSON.stringify(s))}static getAllGameLevelInfo(){const t=localStorage.getItem(this.currentlanguage+"gamePlayedInfo");return null==t?[]:JSON.parse(t)}static setTotalStarCount(t){let e=this.getTotalStarCount()+t;localStorage.setItem(this.currentlanguage+"totalStarCount",e)}static getTotalStarCount(){const t=localStorage.getItem(this.currentlanguage+"totalStarCount");return null==t?0:parseInt(t)}static calculateStarCount(t){return 200==t?1:300==t||400==t?2:500==t?3:0}static getDatafromStorage(){return R.DebugMode?JSON.parse(localStorage.getItem(N+"ProfileDebug")||"{}"):JSON.parse(localStorage.getItem(N+"Profile")||"{}")}}const tt={default:"Atma-SemiBold",english:"Atma-SemiBold",swahili:"Atma-SemiBold",wolof:"Atma-SemiBold",tajik:"Atma-SemiBold",marathi:"Atma-SemiBold",amharic:"Atma-SemiBold",punjabi:"Atma-SemiBold",tamil:"Atma-SemiBold",sepedi:"Atma-SemiBold",gujarati:"Atma-SemiBold",telugu:"Atma-SemiBold",tsonga:"Atma-SemiBold",malay:"Atma-SemiBold",ndebele:"Atma-SemiBold",venda:"Atma-SemiBold",siswati:"Atma-SemiBold",tswana:"Atma-SemiBold",thai:"Atma-SemiBold",fula:"Atma-SemiBold",farsi:"Atma-SemiBold",burmese:"Atma-SemiBold",bengali:"Atma-SemiBold",Azerbaijani:"Atma-SemiBold",Sesotho:"Atma-SemiBold",Georgian:"Atma-SemiBold",BrazilianPortuguese:"Atma-SemiBold",Somali:"Atma-SemiBold",Hausa:"Atma-SemiBold",Igbo:"Atma-SemiBold",HatianCreole:"Atma-SemiBold",Oromo:"Atma-SemiBold",Luganda:"Atma-SemiBold",Yoruba:"Atma-SemiBold",Khmer:"Atma-SemiBold",Javanese:"Atma-SemiBold",Urdu:"Atma-SemiBold",Kinyarwanda:"Atma-SemiBold",Shona:"Atma-SemiBold",Kurdish:"Atma-SemiBold",French:"Atma-SemiBold",isiXhosa:"Atma-SemiBold",Afrikaans:"Atma-SemiBold",Nepali:"Atma-SemiBold",Ukrainian:"Atma-SemiBold",Hindi:"Atma-SemiBold",Tagalog:"Atma-SemiBold",Vietnamese:"Atma-SemiBold",Pashto:"Atma-SemiBold",Twi:"Atma-SemiBold",Arabic:"Atma-SemiBold"};class et{audioContext;sourceNode;audioQueue;promptAudioBuffer;clickSoundBuffer;static audioBuffers=new Map;audioSourcs=[];isClickSoundLoaded;constructor(){this.audioContext=nt.getAudioContext(),this.sourceNode=null,this.audioQueue=[],this.clickSoundBuffer=null,this.isClickSoundLoaded=!1}async playButtonClickSound(){const t="./assets/audios/ButtonClick.mp3";if(!this.isClickSoundLoaded)try{this.clickSoundBuffer=await this.loadAndDecodeAudio(t),et.audioBuffers.set(t,this.clickSoundBuffer),this.isClickSoundLoaded=!0}catch(t){return void console.error("Error loading or decoding click sound:",t)}if(this.clickSoundBuffer){const t=this.audioContext.createBufferSource();t.buffer=this.clickSoundBuffer,t.connect(this.audioContext.destination),t.start()}else console.error("Click sound buffer is not available.")}async loadAndDecodeAudio(t){return new Promise((async(e,n)=>{try{const n=await fetch(t),i=await n.arrayBuffer();e(await this.audioContext.decodeAudioData(i))}catch(t){console.error("Error loading or decoding audio:",t),n(t)}}))}async preloadPromptAudio(t){const e=await this.loadAndDecodeAudio(t);e&&(this.promptAudioBuffer=e)}async preloadGameAudio(t){if(et.audioBuffers.has(t))return;const e=await this.loadAndDecodeAudio(t);e&&et.audioBuffers.set(t,e)}playAudio(t){const e=et.audioBuffers.get(t);if(e){const t=this.audioContext.createBufferSource();t.buffer=e,t.connect(this.audioContext.destination),this.audioSourcs.push(t),t.start()}}playFeedbackAudios=(t=!1,...e)=>{e.length>0&&(this.audioQueue=e,this.playFetch(0,t))};playPromptAudio=t=>{if(this.promptAudioBuffer){const t=this.audioContext.createBufferSource();t.buffer=this.promptAudioBuffer,t.connect(this.audioContext.destination),this.audioSourcs.push(t),t.start()}};stopFeedbackAudio=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[]};stopAllAudios=()=>{this.sourceNode&&(this.sourceNode.stop(),this.sourceNode=null),this.audioQueue=[],this.audioSourcs.forEach((t=>{t.stop()})),this.audioSourcs=[]};playFetch=(t,e)=>{t>=this.audioQueue.length?this.stopFeedbackAudio():this.audioQueue[t]&&fetch(this.audioQueue[t]).then((t=>t.arrayBuffer())).then((n=>{this.audioContext?.decodeAudioData(n,(n=>{this.sourceNode=this.audioContext?.createBufferSource(),this.sourceNode.buffer=n,this.sourceNode.connect(this.audioContext?.destination),this.sourceNode.loop=e,this.sourceNode.onended=()=>this.handleAudioEnded(t,e),this.sourceNode.start()}))}))};handleAudioEnded=(t,e)=>{this.sourceNode&&(this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.disconnect(),this.sourceNode=null),this.playFetch(t+1,e)}}class nt{static instance=null;static getAudioContext(){return nt.instance||(nt.instance=new(window.AudioContext||window.webkitAudioContext)),nt.instance}}class it{id;element;audioPlayer;clickListener;constructor(t){this.id=t.id,this.audioPlayer=new et;const e=document.getElementById(t.id);e?this.element=e:(this.element=this.createButtonElement(t),this.injectButtonIntoTarget(t.targetId||"game-control")),t.onClick&&this.onClick(t.onClick)}onClick(t){this.clickListener=e=>{e.preventDefault(),this.element.hasAttribute("disabled")||(this.audioPlayer&&this.audioPlayer.playButtonClickSound(),this.element.style.transform="scale(0.90)",setTimeout((()=>{this.element.style.transform="scale(1)"}),100),t())},this.element.addEventListener("click",this.clickListener)}createButtonElement({id:t,className:e="",imageSrc:n,imageAlt:i="Button Image"}){const s=document.createElement("div");return s.innerHTML=`\n      <button id="${t}" class="dynamic-button ${e}">\n        ${n?`<img src="${n}" alt="${i}" class="button-image" />`:""}\n      </button>\n    `,s.firstElementChild}injectButtonIntoTarget(t){const e=document.getElementById(t);e&&e.appendChild(this.element)}setDisabled(t){t?(this.element.setAttribute("disabled","true"),this.element.classList.add("disabled")):(this.element.removeAttribute("disabled"),this.element.classList.remove("disabled"))}dispose(){this.clickListener&&(this.element.removeEventListener("click",this.clickListener),this.clickListener=null),this.audioPlayer=null}getElement(){return this.element}destroy(){const t=document.getElementById(this.id);t&&t.remove()}}class st extends it{constructor(t={}){super({id:t.id||"pause-button",className:t.className||"pause-button-image",imageSrc:"./assets/images/pause_v01.webp",imageAlt:t.imageAlt||"Pause Icon",targetId:t.targetId||"game-control",...t})}}class at{handler;stoneDropCallbackHandler;loadPuzzleCallbackHandler;constructor(t){this.handler=t,this.stoneDropCallbackHandler=t.stoneDropCallbackHandler,this.loadPuzzleCallbackHandler=t.loadPuzzleCallbackHandler,document.addEventListener(j,this.handleStoneDroppedEvent,!1),document.addEventListener(F,this.handleLoadPuzzleEvent,!1)}handleStoneDroppedEvent=t=>{this.stoneDropCallbackHandler(t)};handleLoadPuzzleEvent=t=>{this.loadPuzzleCallbackHandler(t)};unregisterEventListener=()=>{document.removeEventListener(j,this.handleStoneDroppedEvent,!1),document.removeEventListener(F,this.handleLoadPuzzleEvent,!1)}}class rt{options;isRendered=!1;id;template;shouldSanitize;constructor(t,e,n,i=!1){this.options=t,this.id=e,this.template=n,this.shouldSanitize=i,this._init()}_init(){this.shouldSanitize&&this.sanitizeElement(),this.render()}render(){if(this.isRendered)return;const{root:t}=this.options.selectors,e=document.querySelector(t),n=this.template(this.id);e&&e.insertAdjacentHTML("beforeend",n),this.isRendered=!0}getElements(t){return document.querySelectorAll(t)}sanitizeElement(){const t=document.querySelectorAll(`#${this.id}`);t.length&&t.forEach((t=>{t.remove()}))}destroy(){const t=document.getElementById(this.id);t&&t.remove(),this.isRendered=!1}}var ot=n(72),lt=n.n(ot),ct=n(825),ht=n.n(ct),ut=n(659),dt=n.n(ut),pt=n(56),mt=n.n(pt),ft=n(540),gt=n.n(ft),vt=n(113),bt=n.n(vt),yt=n(632),wt={};wt.styleTagTransform=bt(),wt.setAttributes=mt(),wt.insert=dt().bind(null,"head"),wt.domAPI=ht(),wt.insertStyleElement=gt();lt()(yt.A,wt);yt.A&&yt.A.locals&&yt.A.locals;const St={root:".game-control",bars:".bar-level"},Et=t=>`\n    <div id="${t}" class="level_content-wrapper">\n        <img class="level-background" src="./assets/images/levels_v01.webp"/>\n        <div class="bar-level-wrapper">\n           ${Array(5).fill('<img class="bar-level" src="./assets/images/bar_empty_v01.webp" alt="bar" />').join("")}\n        </div>\n    </div>\n  `;class Tt extends rt{constructor(t="level-field",e={selectors:St}){super(e,t,Et)}updateLevel(t){const e=t-1;if(e<0)return;const{bars:n}=this.options.selectors,i=this.getElements(n);i.length&&i[e]&&(i[e].src="./assets/images/bar_full_v01.webp")}}class xt extends at{levelBarIndicator;constructor(){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.levelBarIndicator=new Tt}setIndicators(t){this.levelBarIndicator.updateLevel(t)}addDropStoneEvent(){document.addEventListener("dropstone",(t=>{this.setIndicators(2)}))}dispose(){this.unregisterEventListener(),this.levelBarIndicator.destroy()}handleStoneDrop(t){}handleLoadPuzzle(t){this.setIndicators(t.detail.counter)}}class _t extends at{width;height;levelData;currentPromptText;currentPuzzleData;canavsElement;context;prompt_image;targetStones;rightToLeft;imagesLoaded=!1;audioPlayer;isStoneDropped=!1;droppedStones=0;droppedStoneCount=0;time=0;promptImageWidth=0;isAppForeground=!0;scale=1;isScalingUp=!0;scaleFactor=5e-4;promptImageHeight=0;promptPlayButton;constructor(t,e,n,i,s){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.width=t,this.height=e,this.levelData=i,this.rightToLeft=s,this.currentPromptText=n.prompt.promptText,this.currentPuzzleData=n,this.targetStones=this.currentPuzzleData.targetStones,this.canavsElement=document.getElementById("canvas"),this.context=this.canavsElement.getContext("2d"),this.audioPlayer=new et,this.audioPlayer.preloadPromptAudio(this.getPromptAudioUrl()),this.prompt_image=new Image,this.promptPlayButton=new Image,this.loadImages(),this.time=0,this.promptImageWidth=.65*this.width,this.promptImageHeight=.3*this.height,document.addEventListener(U,this.handleVisibilityChange,!1)}handleMouseDown=t=>{const e=document.getElementById("canvas");t.preventDefault();var n=e.getBoundingClientRect();const i=t.clientX-n.left,s=t.clientY-n.top;this.onClick(i,s)&&this.playSound()};getPromptAudioUrl=()=>i.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio);playSound=()=>{this.isAppForeground&&this.audioPlayer.playPromptAudio(i.getConvertedDevProdURL(this.currentPuzzleData.prompt.promptAudio))};onClick(t,e){return Math.sqrt(t-this.width/3)<12&&Math.sqrt(e-this.height/5.5)<10}setCurrrentPuzzleData(t){this.currentPuzzleData=t,this.currentPromptText=t.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones}drawRTLLang(){var t=this.width/2;const e=.26*this.height;this.context.textAlign="center";var n=this.calculateFont();const i=this.promptImageWidth,s=this.promptImageHeight;if(this.context.font=`${n}px ${O}, monospace`,"LetterInWord"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){var a=this.currentPromptText.replace(new RegExp(this.currentPuzzleData.targetStones[0],"g"),"");this.context.fillStyle="red",this.context.fillText(this.targetStones[0],t+this.context.measureText(a).width/2,e),this.context.fillStyle="black",this.context.fillText(a,t-this.context.measureText(this.targetStones[0]).width/2,e)}else this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.15,i/4,s/4);else if("Word"==this.levelData.levelMeta.levelType)if("Visible"==this.levelData.levelMeta.protoType){t-=.5*this.context.measureText(this.currentPromptText).width;for(let n=this.targetStones.length-1;n>=0;n--)this.droppedStones>n||null==this.droppedStones?(this.context.fillStyle="black",this.context.fillText(this.targetStones[n],t,e)):(this.context.fillStyle="red",this.context.fillText(this.targetStones[n],t,e)),t=t+this.context.measureText(this.targetStones[n]).width+5}else this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.15,i/4,s/4);else if("audioPlayerWord"==this.levelData.levelMeta.levelType){const t=1.25*(this.width-i),e=.33*(this.height-s);this.context.drawImage(this.promptPlayButton,t,e,i/4,s/4)}else"Visible"==this.levelData.levelMeta.protoType?(this.context.fillStyle="black",this.context.fillText(this.currentPromptText,t,e)):this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.15,i/4,s/4)}drawOthers(){const t=this.currentPromptText.split(""),e=(this.width,.28*this.height),n=this.promptImageWidth,i=this.promptImageHeight;var s=this.calculateFont();this.context.font=`${s}px ${O}, monospace`;let a=this.width/2-this.context.measureText(this.currentPromptText).width/2,r=0;var o=this.currentPuzzleData.targetStones[0],l=this.currentPromptText.substring(0,this.currentPromptText.indexOf(o)),c=this.currentPromptText.substring(this.currentPromptText.indexOf(o)+o.length);"LetterInWord"===this.levelData.levelMeta.levelType&&"Visible"==this.levelData.levelMeta.protoType&&(l.length>0&&(this.context.fillStyle="black",this.context.fillText(l,a,e)),o.length>0&&(a+=this.context.measureText(l).width,this.context.fillStyle="red",this.context.fillText(o,a,e)),c.length>0&&(a+=this.context.measureText(o).width,this.context.fillStyle="black",this.context.fillText(c,a,e)));for(let s=0;s<t.length;s++){switch(this.levelData.levelMeta.levelType){case"LetterInWord":break;case"Word":if("Visible"==this.levelData.levelMeta.protoType){if(this.targetStones.length!=this.currentPromptText.length){this.targetStones.length>s&&(this.context.fillStyle=this.droppedStoneCount>s||null==this.droppedStoneCount?"black":"red",this.context.fillText(this.targetStones[s],a+a/10,e));break}this.context.fillStyle=this.droppedStones>s||null==this.droppedStones?"black":"red",this.context.fillText(t[s],a,e);break}this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.25,n/4,i/4);case"SoundWord":this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.25,n/4,i/4);break;default:if("Visible"==this.levelData.levelMeta.protoType){this.context.fillStyle="black",this.context.fillText(this.currentPromptText,this.width/2.1,e);break}this.context.drawImage(this.promptPlayButton,this.width/2.4,e/1.25,n/4,i/4)}r=(this.context.measureText(t[s]).width+this.context.measureText(t[s+1]).width)/2,a+=r}}draw(t){if(this.updateScaling(),this.time=t<17?this.time+Math.floor(t):this.time+16,Math.floor(this.time)>=1910&&Math.floor(this.time)<=1926&&this.playSound(),!this.isStoneDropped){const t=this.promptImageWidth*this.scale,e=this.promptImageHeight*this.scale,n=(this.width-t)/2,i=(this.height-e)/5;this.context.drawImage(this.prompt_image,n,i,t,e),this.context.fillStyle="black",this.rightToLeft?this.drawRTLLang():this.drawOthers()}}handleStoneDrop(t){this.isStoneDropped=!0}handleLoadPuzzle(t){this.droppedStones=0,this.droppedStoneCount=0,this.currentPuzzleData=this.levelData.puzzles[t.detail.counter],this.currentPromptText=this.currentPuzzleData.prompt.promptText,this.targetStones=this.currentPuzzleData.targetStones,this.audioPlayer.preloadPromptAudio(this.getPromptAudioUrl()),this.isStoneDropped=!1,this.time=0}dispose(){document.removeEventListener(U,this.handleVisibilityChange,!1),this.unregisterEventListener()}droppedStoneIndex(t){this.droppedStones=t,this.droppedStoneCount++}calculateFont(){return this.promptImageWidth/this.currentPromptText.length>35?35:.65*this.width/this.currentPromptText.length}updateScaling(){this.isScalingUp?(this.scale+=this.scaleFactor,this.scale>=1.05&&(this.isScalingUp=!1)):(this.scale-=this.scaleFactor,this.scale<=1&&(this.scale=1,this.isScalingUp=!0))}handleVisibilityChange=()=>{"hidden"==document.visibilityState&&(this.audioPlayer.stopAllAudios(),this.isAppForeground=!1),"visible"==document.visibilityState&&(this.isAppForeground=!0)};async loadImages(){const t=this.loadImage(this.prompt_image,"./assets/images/promptTextBg.webp"),e=this.loadImage(this.promptPlayButton,"./assets/images/promptPlayButton.webp");await Promise.all([t,e]),this.imagesLoaded=!0}loadImage(t,e){return new Promise(((n,i)=>{t.onload=()=>{n()},t.src=e,t.onerror=t=>{i(t)}}))}}class At{subscribers;listenerIdCounter;constructor(){this.subscribers={},this.listenerIdCounter=0}checkSubscribers(){console.log("checkSubscribers ",this.subscribers)}subscribe(t,e){const n=this.listenerIdCounter++;return this.subscribers[t]||(this.subscribers[t]={}),this.subscribers[t][n]=e,()=>{this.unsubscribe(t,n)}}unsubscribe(t,e){this.subscribers[t]&&this.subscribers[t][e]&&delete this.subscribers[t][e]}publish(t,e){this.subscribers[t]&&Object.keys(this.subscribers[t]).forEach((n=>{this.subscribers[t][n]&&this.subscribers[t][n](e)}))}}const Ct=new class extends At{EVENTS;data;canvas;width;height;canavsElement;context;gameCanvasContext;riveCanvas;riveCanvasWidth;riveCanvasHeight;loadingCanvas;loadingContext;isGamePaused;gamePlayData;feedbackTexts;rightToLeft;majVersion;minVersion;feedbackAudios;clickTrailToggle;offsetCoordinateValue;levelEndData;isLastLevel;constructor(){super(),this.EVENTS={SCENE_LOADING_EVENT:"SCENE_LOADING_EVENT",GAMEPLAY_DATA_EVENT:"GAMEPLAY_DATA_EVENT",GAME_PAUSE_STATUS_EVENT:"GAME_PAUSE_STATUS_EVENT",GAME_TRAIL_EFFECT_TOGGLE_EVENT:"GAME_TRAIL_EFFECT_TOGGLE_EVENT",LEVEL_END_DATA_EVENT:"LEVEL_END_DATA_EVENT"},this.data=null,this.canvas=null,this.width=0,this.height=0,this.canavsElement=null,this.context=null,this.gameCanvasContext=null,this.riveCanvas=null,this.riveCanvasWidth=0,this.riveCanvasHeight=0,this.isGamePaused=!1,this.gamePlayData=null,this.feedbackAudios=null,this.feedbackTexts=null,this.rightToLeft=!1,this.majVersion=0,this.minVersion=0,this.clickTrailToggle=!1,this.offsetCoordinateValue=32,this.initListeners(),this.levelEndData=null,this.isLastLevel=!1}initListeners(){this.subscribe(this.EVENTS.GAMEPLAY_DATA_EVENT,(t=>{this.gameStateGamePlayDataListener(t)})),this.subscribe(this.EVENTS.GAME_PAUSE_STATUS_EVENT,(t=>{this.updateGamePauseActivity(t)})),this.subscribe(this.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,(t=>{this.updateGameTrailToggle(t)})),this.subscribe(this.EVENTS.LEVEL_END_DATA_EVENT,(t=>{this.levelEndSceneData(t)}))}gameStateGamePlayDataListener(t){this.gamePlayData=t,this.isGamePaused=!1}updateGamePauseActivity(t){this.isGamePaused=t}updateGameTrailToggle(t){this.clickTrailToggle=t}setDefaultGameStateValues(t,e,n){this.data=t,this.canvas=e,this.width=e.width,this.height=e.height,this.canavsElement=n,this.context=n.getContext("2d"),this.gameCanvasContext=e.getContext("2d",{willReadFrequently:!0}),this.loadingCanvas=document.getElementById("loading"),this.loadingContext=this.loadingCanvas.getContext("2d"),this.feedbackTexts=t.FeedbackTexts,this.feedbackAudios=t.FeedbackAudios,this.rightToLeft=t.rightToLeft,this.majVersion=t.majVersion,this.minVersion=t.minVersion}getLoadingSceneDetails(){return(t=>{const e=t.loadingCanvas;return e.height=t.height,e.width=t.width,{canvas:e,height:t.height,width:t.width,context:t.loadingContext}})(this)}getGamePlaySceneDetails(){return(t=>{const e=t.majVersion&&t.minVersion?t.majVersion.toString()+"."+t.minVersion.toString():"";return{canvas:t.canvas,width:t.width,height:t.height,canavsElement:t.canavsElement,gameCanvasContext:t.gameCanvasContext,levelData:{...t.gamePlayData.currentLevelData},levelNumber:t.gamePlayData.selectedLevelNumber,feedBackTexts:{...t.feedbackTexts},rightToLeft:t?.rightToLeft,jsonVersionNumber:e,feedbackAudios:{...t.feedbackAudios},isGamePaused:t.isGamePaused,data:t.data,isLastLevel:t.isLastLevel}})(this)}getStonePositions(){return(({offsetCoordinateValue:t,width:e,height:n,riveCanvasWidth:i,riveCanvasHeight:s})=>{const a=i||e,r=s||n,o=(t,e)=>540>a?e:t;return[[5,1.9],[7,1.5],[o(4.3,4.5),1.28],[6.4,1.1],[o(2,1.3),1.07],[[2.3,2.1],1.9],[[o(2.8,2.5),2],1.2],[[o(3,2.4),2.1],1.42]].map(((e,n)=>{const i=e[0],s=e[1];return[(Array.isArray(i)?a/i[0]+a/i[1]:a/i)-t+(n<4?25:0),r/s-t]})).sort((()=>Math.random()-.5))})(this)}levelEndSceneData({levelEndData:t,data:e}){this.levelEndData={...t},this.data=e,this.isLastLevel=t.currentLevel===e.levels[e.levels.length-1].levelMeta.levelNumber}getLevelEndSceneData(){return{starCount:(t=this).levelEndData.starCount,currentLevel:t.levelEndData.currentLevel,isTimerEnded:t.levelEndData.isTimerEnded,data:t.data};var t}};class It extends at{context;canvas;currentPuzzleData;targetStones;stonePos;pickedStone;foilStones=new Array;answer="";puzzleNumber;levelData;correctAnswer;puzzleStartTime;showTutorial=null==Z.getDatafromStorage().length;correctStoneAudio;tutorial;correctTargetStone;stonebg;audioPlayer;feedbackAudios;timerTickingInstance;isGamePaused=!1;unsubscribeEvent;constructor(t,e,n,i,s,a){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.cleanup(),this.context=t,this.canvas=e,this.puzzleNumber=n,this.levelData=i,this.setTargetStone(this.puzzleNumber),this.stonePos=Ct.getStonePositions(),this.correctStoneAudio=new Audio("assets/audios/CorrectStoneFinal.mp3"),this.correctStoneAudio.loop=!1,this.feedbackAudios=this.convertFeedBackAudiosToList(s),this.puzzleStartTime=new Date,this.tutorial=new Lt(t,e.width,e.height,n),this.stonebg=new Image,this.stonebg.src="./assets/images/stone_pink.webp",this.audioPlayer=new et,this.stonebg.onload=t=>{this.createStones(this.stonebg)},this.audioPlayer=new et,this.timerTickingInstance=a,document.addEventListener(U,this.handleVisibilityChange,!1),this.unsubscribeEvent=Ct.subscribe(Ct.EVENTS.GAME_PAUSE_STATUS_EVENT,(t=>{this.isGamePaused=t}))}createStones(e){const n=this.getFoilStones();for(let i=0;i<n.length;i++)this.foilStones.push(new t(this.context,this.canvas.width,this.canvas.height,n[i],this.stonePos[i][0],this.stonePos[i][1],e,this.timerTickingInstance,null))}draw(t){this.foilStones.length>0&&(this.foilStones.forEach((e=>{e&&void 0!==e.frame&&e.draw(t)})),this.foilStones[this.foilStones.length-1].frame>=100&&!this.isGamePaused&&this.timerTickingInstance.update(t))}drawWordPuzzleLetters(t,e,n){for(let i=0;i<this.foilStones.length;i++)e(i)&&this.foilStones[i].draw(t,Object.keys(n).length>1&&void 0!==n[i]);this.foilStones.length>0&&this.foilStones[this.foilStones.length-1].frame>=100&&!this.isGamePaused&&this.timerTickingInstance.update(t)}setTargetStone(t){this.currentPuzzleData=this.levelData.puzzles[t],this.targetStones=[...this.currentPuzzleData.targetStones],this.correctTargetStone=this.targetStones.join("")}handleStoneDrop(t){this.foilStones=[]}handleLoadPuzzle(t){this.foilStones=[],this.tutorial.setPuzzleNumber(t.detail.counter),this.puzzleNumber=t.detail.counter,this.setTargetStone(this.puzzleNumber),this.createStones(this.stonebg)}dispose(){this.unsubscribeEvent(),document.removeEventListener(U,this.handleVisibilityChange,!1),this.unregisterEventListener()}isStoneLetterDropCorrect(t,e,n=!1){const i=n?t==this.correctTargetStone.substring(0,t.length):t==this.correctTargetStone;return this.processLetterDropFeedbackAudio(e,i,n,t),i}processLetterDropFeedbackAudio(t,e,n,i){if(e){(n?i===this.getCorrectTargetStone():e)?this.playCorrectAnswerFeedbackSound(t):this.audioPlayer.playFeedbackAudios(!1,u,d(2))}else this.audioPlayer.playFeedbackAudios(!1,u,"./assets/audios/MonsterSpit.mp3",Math.round(Math.random())>0?"./assets/audios/Disapointed-05.mp3":null)}getCorrectTargetStone(){return this.correctTargetStone}getFoilStones(){this.currentPuzzleData.targetStones.forEach((t=>{const e=this.currentPuzzleData.foilStones.indexOf(t);-1!==e&&this.currentPuzzleData.foilStones.splice(e,1)}));const t=this.currentPuzzleData.targetStones.length+this.currentPuzzleData.foilStones.length;if(t>8){const e=t-8;this.currentPuzzleData.foilStones.splice(0,e)}return this.currentPuzzleData.targetStones.forEach((t=>{this.currentPuzzleData.foilStones.push(t)})),this.currentPuzzleData.foilStones.sort((()=>Math.random()-.5))}handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),this.correctStoneAudio.pause()};convertFeedBackAudiosToList(t){return[t.fantastic,t.great,t.amazing]}playCorrectAnswerFeedbackSound(t){const e=i.getRandomNumber(1,3).toString();this.audioPlayer.playFeedbackAudios(!1,u,d(e),"assets/audios/PointsAdd.wav",i.getConvertedDevProdURL(this.feedbackAudios[t])),this.correctStoneAudio.play()}cleanup(){this.foilStones=[],this.correctStoneAudio&&(this.correctStoneAudio.pause(),this.correctStoneAudio.src=""),document.removeEventListener(U,this.handleVisibilityChange),this.unsubscribeEvent&&this.unsubscribeEvent()}resetStonePosition(t,e,n){const i=e,s=n;if(i&&s&&i.text&&"number"==typeof s.origx&&"number"==typeof s.origy){const e=50,n=t/2;i.x=i.text.length<=3&&s.origx<e&&s.origx<n?s.origx+25:s.origx,i.y=s.origy}return i}computeCursorDistance(t,e,n){return Math.sqrt((t-n.x)**2+(e-n.y)**2)}handlePickStoneUp(t,e){let n=null,i=0;for(let s of this.foilStones){if(this.computeCursorDistance(t,e,s)<=40){n=s,n.foilStoneIndex=i;break}i++}return n}handleHoveringToAnotherStone(t,e,n){let i=null,s=0;for(let a of this.foilStones){if(this.computeCursorDistance(t,e,a)<=40&&n(a.text,s)){i=a,i.foilStoneIndex=s;break}s++}return i}handleMovingStoneLetter(t,e,n){const i=t,s=this.canvas.getBoundingClientRect();return i.x=e-s.left,i.y=n-s.top,i}playDragAudioIfNecessary(t){t.frame>99&&this.audioPlayer.playAudio("./assets/audios/onDrag.mp3")}}class Lt{width;height;context;tutorialImg;imagesLoaded=!1;targetStonePositions;startx;starty;endx;endy;endTutorial=!1;puzzleNumber;playMnstrClkTtrlAnim=!0;totalTime=0;monsterStoneDifference=0;x;y;dx;dy;absdx;absdy;startRipple=!1;drawRipple;constructor(t,e,n,i){this.width=e,this.height=n,this.context=t,this.startx=0,this.starty=0,this.endx=this.width/2,this.endy=this.height/2,this.puzzleNumber=i>=0?i:null,this.tutorialImg=new Image,this.tutorialImg.src="./assets/images/tutorial_hand.webp",this.drawRipple=function(t){const e=t;if(!e)throw new Error("Canvas context is null");let n=0,i=0,s=10,a=10;return function(t,r,o){o&&(s=0,a=0),n=t,i=r,e.beginPath(),e.arc(n,i,s,0,2*Math.PI),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.closePath(),e.beginPath(),e.arc(n,i,a,0,2*Math.PI),e.strokeStyle="white",e.lineWidth=2,e.stroke(),e.closePath(),s+=.5,a+=.5,(s>=60||a>=60)&&(s=10,a=10)}}(this.context),this.tutorialImg.onload=()=>{this.imagesLoaded=!0}}updateTargetStonePositions(t){this.startx=t[0]-22,this.starty=t[1]-50,this.monsterStoneDifference=Math.sqrt((this.startx-this.endx)*(this.startx-this.endx)+(this.starty-this.endy)*(this.starty-this.endy)),this.animateImage()}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}setTutorialEnd(t){this.endTutorial=t}animateImage(){this.x=this.startx,this.y=this.starty,this.dx=(this.endx-this.startx)/5e3,this.dy=(this.endy-this.starty)/5e3,this.absdx=this.isMobile()?3*Math.abs(this.dx):Math.abs(this.dx),this.absdy=this.isMobile()?3*Math.abs(this.dy):Math.abs(this.dy),this.setTutorialEnd(!1)}draw(t,e,n){if(this.imagesLoaded&&!this.endTutorial&&this.shouldPlayTutorial()){this.x=this.dx>=0?this.x+this.absdx*t:this.x-this.absdx*t,this.y=this.dy>=0?this.y+this.absdy*t:this.y-this.absdy*t;const i=this.x-this.endx+this.absdx,s=this.y-this.endy+this.absdy;let a=100*Math.sqrt(i*i+s*s)/this.monsterStoneDifference;if(a<15)a>1?this.createHandScaleAnimation(t,this.endx,this.endy+30,!0):(this.x=this.startx,this.y=this.starty);else if(a>80)this.createHandScaleAnimation(t,this.startx+15,this.starty+10,!1);else{let t=this.context.globalAlpha;this.context.globalAlpha=.4,this.context.drawImage(e,this.x,this.y+20,n,n),this.context.globalAlpha=t,this.context.drawImage(this.tutorialImg,this.x+15,this.y+10)}}}createHandScaleAnimation(t,e,n,i){this.totalTime+=Math.floor(t);const s=this.sinusoidalInterpolation(this.totalTime,1,1.5,500),a=this.tutorialImg.width*s,r=this.tutorialImg.height*s;this.context.drawImage(this.tutorialImg,e,n,a,r),!i&&this.drawRipple(e+.02*this.width,n+this.tutorialImg.height/2,!1)}sinusoidalInterpolation(t,e,n,i){const s=(n-e)/2,a=Math.PI/i;return e+s*Math.sin(a*t)}clickOnMonsterTutorial(t){if(this.shouldPlayMonsterClickTutorialAnimation()){const e=2e3,n=this.height/1.9+this.tutorialImg.height/.8,i=this.height/1.9+this.tutorialImg.height/.8-this.tutorialImg.height;let s;const a=this.endx;this.totalTime<e/2?(s=i+this.totalTime/(e/2)*(n-i),this.drawRipple(a,this.height/1.9+this.tutorialImg.height/1.5,!0)):(s=n-(this.totalTime-e/2)/(e/2)*(n-i),this.drawRipple(a,this.height/1.9+this.tutorialImg.height/1.2+this.tutorialImg.height)),this.context.drawImage(this.tutorialImg,a,s,this.tutorialImg.width,this.tutorialImg.height),s<=i&&(this.totalTime=0),this.totalTime+=t}}shouldPlayTutorial(){return Z.getAllGameLevelInfo().length<=0&&0==this.puzzleNumber}shouldPlayMonsterClickTutorialAnimation(){return Z.getAllGameLevelInfo().length<=0&&this.playMnstrClkTtrlAnim}setPuzzleNumber(t){this.puzzleNumber=t}setPlayMonsterClickAnimation(t){this.playMnstrClkTtrlAnim=t}}class Pt{element;constructor(t){this.element=document.getElementById(t)}setClassName(t){this.element&&(this.element.className="",this.element.classList.add(t))}createElementWithImage(t,e,n,i){const s=document.createElement("div");s.className=t;const a=document.createElement("img");return a.src=e,a.alt=n,a.id=i,s.appendChild(a),s}}class kt extends Pt{constructor(){super("background")}generateBackground(t){const e=document.getElementById("background-elements");if(!e)return;const n=this.getAssetsForSeason(t);this.clearBackgroundContent();const i=this.createBackgroundSection(t,n);e.appendChild(i)}static createBackgroundComponent(t){const e=["summer","autumn","winter"],n=Math.floor(t/10)%e.length,i=t>=30?e[n%3]:e[n];return this.updateBackgroundClass(i),i}createBackgroundGameplay(t){const e=document.getElementById("background-elements");if(!e)return;const n=this.getAssetsForSeason(t),i=document.createElement("div");i.className=`${t}-section`;const s=this.createElementWithImage("ftm-mountain",n.hill,"Hill","hill-img"),a=this.createElementWithImage("ftm-fence",n.fence,"Fence","fence-img"),r=this.createElementWithImage("ftm-totem",n.totem,"Totem","totem-img");i.append(s,a,r),e.appendChild(i)}getAssetsForSeason(t){switch(t){case"summer":return{hill:E.ASSETS_PATH_HILL,fence:E.ASSETS_PATH_FENCE,totem:E.ASSETS_PATH_TOTEM};case"autumn":return{hill:T.AUTUMN_HILL_1,fence:T.AUTUMN_FENCE_1,totem:T.AUTUMN_SIGN_1};case"winter":return{hill:x.WINTER_HILL_1,fence:x.WINTER_FENCE_1,totem:x.WINTER_SIGN_1};default:throw new Error("Unknown season: "+t)}}clearBackgroundContent(){const t=document.getElementById("background-elements");t&&(t.innerHTML="")}createBackgroundSection(t,e){const n=document.createElement("div");n.className=t;const i=this.createElementWithImage("ftm-mountain",e.hill,"Hill","hill-img"),s=this.createElementWithImage("ftm-fence",e.fence,"Fence","fence-img"),a=this.createElementWithImage("ftm-totem",e.totem,"Totem","totem-img");return n.append(i,s,a),n}static updateBackgroundClass(t){const e=document.getElementById("background"),n=`${t}-bg`;e&&e.className!==n&&(e.className=n)}}class Dt{feedbackTextElement;hideTimeoutId;constructor(){this.feedbackTextElement=document.getElementById("feedback-text"),this.hideTimeoutId=null,this.initialize()}initialize(){this.isFeedbackElementAvailable()}isFeedbackElementAvailable(){return!!this.feedbackTextElement}wrapText(t){this.isFeedbackElementAvailable()&&(this.feedbackTextElement.textContent=t,o(!1,this.feedbackTextElement))}hideText(){this.isFeedbackElementAvailable()&&o(!0,this.feedbackTextElement)}}class Bt{ctx;particles;mouse;isDiamond;clickTrailToggle;unsubscribeEvent;constructor(t){this.ctx=t.getContext("2d"),this.particles=[],this.mouse={x:void 0,y:void 0},this.isDiamond=!1,this.clickTrailToggle=!1,this.init()}init(){this.draw(),this.unsubscribeEvent=Ct.subscribe(Ct.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,(t=>{this.clickTrailToggle=t}))}draw(){this.drawTrail();let t=[];for(let e=0;e<this.particles.length;e++)this.particles[e].time<=this.particles[e].ttl&&t.push(this.particles[e]);this.particles=t}drawTrail(){for(let t=0;t<this.particles.length;t++)this.particles[t].update(),this.isDiamond=!this.isDiamond,this.particles[t].draw(this.isDiamond)}addTrailParticlesOnMove(t,e){this.clickTrailToggle&&(this.mouse.x=t,this.mouse.y=e,this.particles.push(new Mt(this.ctx,this.mouse)))}resetParticles(){this.mouse.x=void 0,this.mouse.y=void 0}clearTrailSubscription(){this.unsubscribeEvent()}}class Mt{ctx;start;end;size;style;time;ttl;x;y;rgb;hyp;starX;starY;starAngle;constructor(t,e){const n=this.determineValueByScreenWidth(30,15),i=this.determineValueByScreenWidth(30,15),s=this.determineValueByScreenWidth(3,.5),a=this.determineValueByScreenWidth(2,.5);this.ctx=t,this.rgb=["rgb(255,255,255)","rgb(249,217,170)","rgb(244,182,81)","rgb(244,159,34)"],this.start={x:e.x+this.getRandomInt(-n,n),y:e.y+this.getRandomInt(-i,i),size:this.determineValueByScreenWidth(3,2)},this.end={x:this.start.x+this.getRandomInt(-s,s),y:this.start.y+this.getRandomInt(-a,a)},this.x=this.start.x,this.y=this.start.y,this.size=this.start.size,this.style=this.rgb[this.getRandomInt(0,this.rgb.length-1)],this.time=0,this.ttl=75,this.hyp=0,this.starX=0,this.starY=0,this.starAngle=0}determineValueByScreenWidth(t,e){return window.screen.width>768?t:e}update(){if(this.time<=this.ttl){const t=1-(this.ttl-this.time)/this.ttl;this.size=this.start.size*(1-this.easeOutQuart(t)),this.x=this.x+.01*(this.end.x-this.x),this.y=this.y+.01*(this.end.y-this.y)}this.time++}draw(t){t?this.starParticle():this.circleParticle()}circleParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill()}starParticle(){this.ctx.fillStyle=this.style,this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y-this.size),this.ctx.lineTo(this.x+this.size,this.y),this.ctx.lineTo(this.x,this.y+this.size),this.ctx.lineTo(this.x-this.size,this.y),this.ctx.closePath(),this.ctx.fill()}getRandomInt(t,e){return Math.round(Math.random()*(e-t))+t}easeOutQuart(t){return 1-Math.pow(1-t,4)}}var zt=n(278),Nt={};Nt.styleTagTransform=bt(),Nt.setAttributes=mt(),Nt.insert=dt().bind(null,"head"),Nt.domAPI=ht(),Nt.insertStyleElement=gt();lt()(zt.A,Nt);zt.A&&zt.A.locals&&zt.A.locals;const Ot={root:"#background"},Rt=t=>`\n  <div id="${t}" class="timer-ticking-wrapper">\n    <img id="timer-empty" class="timer-empty" src="${y}" alt="Timer Empty" />\n    <img id="rotating-clock" class="rotating-clock" src="${w}" alt="Rotating Clock" />\n    <div id="timer-full-container" class="timer-full-container">\n      <div class="timer-mask"></div>\n    </div>\n  </div>\n`;class Ft extends rt{constructor(t="timer-html-component",e={selectors:Ot}){super(e,t,Rt),this.render()}}class jt extends at{width;height;timerWidth;timerHeight;widthToClear;timer;isTimerStarted;isTimerEnded;isTimerRunningOut;timer_full;pauseButtonClicked;images;loadedImages;callback;imagesLoaded=!1;startMyTimer=!0;isMyTimerOver=!1;isStoneDropped=!1;audioPlayer;playLevelEndAudioOnce=!0;timerFullContainer=null;timerHtmlComponent;constructor(t,e,n){super({stoneDropCallbackHandler:t=>this.handleStoneDrop(t),loadPuzzleCallbackHandler:t=>this.handleLoadPuzzle(t)}),this.width=t,this.height=e,this.widthToClear=this.width/3.4,this.callback=n,this.timer=0,this.isTimerStarted=!1,this.isTimerEnded=!1,this.isTimerRunningOut=!1,this.audioPlayer=new et,this.playLevelEndAudioOnce=!0,this.images={timer_empty:y,rotating_clock:w,timer_full:"./assets/images/timer_full.png"},this.timerHtmlComponent=new Ft("timer-ticking"),setTimeout((()=>{this.timerFullContainer=document.getElementById("timer-full-container"),this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}),0),s(this.images,(t=>{this.loadedImages=Object.assign({},t),this.imagesLoaded=!0})),this.timerFullContainer=this.getTimerFullContainer()}startTimer(){this.readyTimer(),this.startMyTimer=!0,this.isMyTimerOver=!1}readyTimer(){this.timer=0,this.timerFullContainer&&(this.timerFullContainer.style.width="100%")}update(t){if(this.startMyTimer&&!this.isStoneDropped){this.timer+=.008*t;const e=Math.max(0,100-this.timer);this.timerFullContainer.style.width=`${e}%`,e<10&&!this.isMyTimerOver&&(this.playLevelEndAudioOnce&&this.audioPlayer.playAudio("./assets/audios/timeout.mp3"),this.playLevelEndAudioOnce=!1),e<=0&&!this.isMyTimerOver&&(this.isMyTimerOver=!0,this.callback(!0))}}getTimerFullContainer(){return document.getElementById("timer-full-container")}stopTimer(){this.isTimerRunningOut=!1}handleStoneDrop(t){this.isStoneDropped=!0}handleLoadPuzzle(t){this.playLevelEndAudioOnce=!0,this.isStoneDropped=!1,this.startTimer()}destroy(){this.stopTimer(),this.timerHtmlComponent?.destroy()}}const Vt=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):55296==(64512&s)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},Ut={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const s=t[e],a=e+1<t.length,r=a?t[e+1]:0,o=e+2<t.length,l=o?t[e+2]:0,c=s>>2,h=(3&s)<<4|r>>4;let u=(15&r)<<2|l>>6,d=63&l;o||(d=64,a||(u=64)),i.push(n[c],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vt(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(1023&a))}else{const a=t[n++],r=t[n++];e[i++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&r)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],a=e<t.length?n[t.charAt(e)]:0;++e;const r=e<t.length?n[t.charAt(e)]:64;++e;const o=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==a||null==r||null==o)throw new $t;const l=s<<2|a>>4;if(i.push(l),64!==r){const t=a<<4&240|r>>2;if(i.push(t),64!==o){const t=r<<6&192|o;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wt=function(t){return function(t){const e=Vt(t);return Ut.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Ht=function(t){try{return Ut.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Gt=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Xt=()=>{try{return Gt()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&Ht(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Yt=()=>{var t;return null===(t=Xt())||void 0===t?void 0:t.config};class qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function Kt(){try{return"object"==typeof indexedDB}catch(t){return!1}}function Jt(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class Qt extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],a=s?function(t,e){return t.replace(te,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",r=`${this.serviceName}: ${a} (${i}).`;return new Qt(i,r,n)}}const te=/\{\$([^}]+)}/g;function ee(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const n=t[s],a=e[s];if(ne(n)&&ne(a)){if(!ee(n,a))return!1}else if(n!==a)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function ne(t){return null!==t&&"object"==typeof t}const ie=1e3,se=2,ae=144e5,re=.5;function oe(t,e=ie,n=se){const i=e*Math.pow(n,t),s=Math.round(re*i*(Math.random()-.5)*2);return Math.min(ae,i+s)}function le(t){return t&&t._delegate?t._delegate:t}class ce{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const he="[DEFAULT]";class ue{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new qt;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:he})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=he){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=he){return this.instances.has(t)}getOptions(t=he){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(t)&&e.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&t(a,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===he?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t=he){return this.component?this.component.multipleInstances?t:he:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new ue(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const pe=[];var me;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(me||(me={}));const fe={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},ge=me.INFO,ve={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},be=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),s=ve[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${i}]  ${t.name}:`,...n)};class ye{constructor(t){this.name=t,this._logLevel=ge,this._logHandler=be,this._userLogHandler=null,pe.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?fe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...t),this._logHandler(this,me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...t),this._logHandler(this,me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,me.INFO,...t),this._logHandler(this,me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,me.WARN,...t),this._logHandler(this,me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...t),this._logHandler(this,me.ERROR,...t)}}const we=(t,e)=>e.some((e=>t instanceof e));let Se,Ee;const Te=new WeakMap,xe=new WeakMap,_e=new WeakMap,Ae=new WeakMap,Ce=new WeakMap;let Ie={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return xe.get(t);if("objectStoreNames"===e)return t.objectStoreNames||_e.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ke(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Le(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(De(this),e),ke(Te.get(this))}:function(...e){return ke(t.apply(De(this),e))}:function(e,...n){const i=t.call(De(this),e,...n);return _e.set(i,e.sort?e.sort():[e]),ke(i)}}function Pe(t){return"function"==typeof t?Le(t):(t instanceof IDBTransaction&&function(t){if(xe.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)}));xe.set(t,e)}(t),we(t,Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Ie):t)}function ke(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{e(ke(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)}));return e.then((e=>{e instanceof IDBCursor&&Te.set(e,t)})).catch((()=>{})),Ce.set(e,t),e}(t);if(Ae.has(t))return Ae.get(t);const e=Pe(t);return e!==t&&(Ae.set(t,e),Ce.set(e,t)),e}const De=t=>Ce.get(t);const Be=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],ze=new Map;function Ne(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ze.get(e))return ze.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=Me.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Be.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,s?"readwrite":"readonly");let r=a.store;return i&&(r=r.index(e.shift())),(await Promise.all([r[n](...e),s&&a.done]))[0]};return ze.set(e,a),a}Ie=(t=>({...t,get:(e,n,i)=>Ne(e,n)||t.get(e,n,i),has:(e,n)=>!!Ne(e,n)||t.has(e,n)}))(Ie);class Oe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Re="@firebase/app",Fe="0.9.15",je=new ye("@firebase/app"),Ve="@firebase/app-compat",Ue="@firebase/analytics-compat",$e="@firebase/analytics",We="@firebase/app-check-compat",He="@firebase/app-check",Ge="@firebase/auth",Xe="@firebase/auth-compat",Ye="@firebase/database",qe="@firebase/database-compat",Ke="@firebase/functions",Je="@firebase/functions-compat",Qe="@firebase/installations",Ze="@firebase/installations-compat",tn="@firebase/messaging",en="@firebase/messaging-compat",nn="@firebase/performance",sn="@firebase/performance-compat",an="@firebase/remote-config",rn="@firebase/remote-config-compat",on="@firebase/storage",ln="@firebase/storage-compat",cn="@firebase/firestore",hn="@firebase/firestore-compat",un="firebase",dn="[DEFAULT]",pn={[Re]:"fire-core",[Ve]:"fire-core-compat",[$e]:"fire-analytics",[Ue]:"fire-analytics-compat",[He]:"fire-app-check",[We]:"fire-app-check-compat",[Ge]:"fire-auth",[Xe]:"fire-auth-compat",[Ye]:"fire-rtdb",[qe]:"fire-rtdb-compat",[Ke]:"fire-fn",[Je]:"fire-fn-compat",[Qe]:"fire-iid",[Ze]:"fire-iid-compat",[tn]:"fire-fcm",[en]:"fire-fcm-compat",[nn]:"fire-perf",[sn]:"fire-perf-compat",[an]:"fire-rc",[rn]:"fire-rc-compat",[on]:"fire-gcs",[ln]:"fire-gcs-compat",[cn]:"fire-fst",[hn]:"fire-fst-compat","fire-js":"fire-js",[un]:"fire-js-all"},mn=new Map,fn=new Map;function gn(t,e){try{t.container.addComponent(e)}catch(n){je.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vn(t){const e=t.name;if(fn.has(e))return je.debug(`There were multiple attempts to register component ${e}.`),!1;fn.set(e,t);for(const e of mn.values())gn(e,t);return!0}function bn(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const yn=new Zt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ce("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}function Sn(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const i=Object.assign({name:dn,automaticDataCollectionEnabled:!1},e),s=i.name;if("string"!=typeof s||!s)throw yn.create("bad-app-name",{appName:String(s)});if(n||(n=Yt()),!n)throw yn.create("no-options");const a=mn.get(s);if(a){if(ee(n,a.options)&&ee(i,a.config))return a;throw yn.create("duplicate-app",{appName:s})}const r=new de(s);for(const t of fn.values())r.addComponent(t);const o=new wn(n,i,r);return mn.set(s,o),o}function En(t,e,n){var i;let s=null!==(i=pn[t])&&void 0!==i?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),r=e.match(/\s|\//);if(a||r){const t=[`Unable to register library "${s}" with version "${e}":`];return a&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&r&&t.push("and"),r&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void je.warn(t.join(" "))}vn(new ce(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}const Tn="firebase-heartbeat-database",xn=1,_n="firebase-heartbeat-store";let An=null;function Cn(){return An||(An=function(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const r=indexedDB.open(t,e),o=ke(r);return i&&r.addEventListener("upgradeneeded",(t=>{i(ke(r.result),t.oldVersion,t.newVersion,ke(r.transaction),t)})),n&&r.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),o.then((t=>{a&&t.addEventListener("close",(()=>a())),s&&t.addEventListener("versionchange",(t=>s(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}(Tn,xn,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(_n)}}).catch((t=>{throw yn.create("idb-open",{originalErrorMessage:t.message})}))),An}async function In(t,e){try{const n=(await Cn()).transaction(_n,"readwrite"),i=n.objectStore(_n);await i.put(e,Ln(t)),await n.done}catch(t){if(t instanceof Qt)je.warn(t.message);else{const e=yn.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});je.warn(e.message)}}}function Ln(t){return`${t.name}!${t.options.appId}`}class Pn{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Dn(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=kn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=kn(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let i=t.slice();for(const s of t){const t=n.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),Bn(n)>e){t.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Bn(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Wt(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function kn(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Kt()&&Jt().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await Cn();return await e.transaction(_n).objectStore(_n).get(Ln(t))}catch(t){if(t instanceof Qt)je.warn(t.message);else{const e=yn.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});je.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return In(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return In(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Bn(t){return Wt(JSON.stringify({version:2,heartbeats:t})).length}var Mn;Mn="",vn(new ce("platform-logger",(t=>new Oe(t)),"PRIVATE")),vn(new ce("heartbeat",(t=>new Pn(t)),"PRIVATE")),En(Re,Fe,Mn),En(Re,Fe,"esm2017"),En("fire-js","");En("firebase","10.1.0","app");const zn=(t,e)=>e.some((e=>t instanceof e));let Nn,On;const Rn=new WeakMap,Fn=new WeakMap,jn=new WeakMap,Vn=new WeakMap,Un=new WeakMap;let $n={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Fn.get(t);if("objectStoreNames"===e)return t.objectStoreNames||jn.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Wn(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(On||(On=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xn(this),e),Gn(Rn.get(this))}:function(...e){return Gn(t.apply(Xn(this),e))}:function(e,...n){const i=t.call(Xn(this),e,...n);return jn.set(i,e.sort?e.sort():[e]),Gn(i)}}function Hn(t){return"function"==typeof t?Wn(t):(t instanceof IDBTransaction&&function(t){if(Fn.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{e(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)}));Fn.set(t,e)}(t),zn(t,Nn||(Nn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,$n):t)}function Gn(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{e(Gn(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)}));return e.then((e=>{e instanceof IDBCursor&&Rn.set(e,t)})).catch((()=>{})),Un.set(e,t),e}(t);if(Vn.has(t))return Vn.get(t);const e=Hn(t);return e!==t&&(Vn.set(t,e),Un.set(e,t)),e}const Xn=t=>Un.get(t);const Yn=["get","getKey","getAll","getAllKeys","count"],qn=["put","add","delete","clear"],Kn=new Map;function Jn(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Kn.get(e))return Kn.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=qn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Yn.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,s?"readwrite":"readonly");let r=a.store;return i&&(r=r.index(e.shift())),(await Promise.all([r[n](...e),s&&a.done]))[0]};return Kn.set(e,a),a}!function(t){$n=t($n)}((t=>({...t,get:(e,n,i)=>Jn(e,n)||t.get(e,n,i),has:(e,n)=>!!Jn(e,n)||t.has(e,n)})));const Qn="@firebase/installations",Zn="0.6.4",ti=1e4,ei=`w:${Zn}`,ni="FIS_v2",ii="https://firebaseinstallations.googleapis.com/v1",si=36e5,ai=new Zt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ri(t){return t instanceof Qt&&t.code.includes("request-failed")}function oi({projectId:t}){return`${ii}/projects/${t}/installations`}function li(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function ci(t,e){const n=(await e.json()).error;return ai.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function hi({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ui(t,{refreshToken:e}){const n=hi(t);return n.append("Authorization",function(t){return`${ni} ${t}`}(e)),n}async function di(t){const e=await t();return e.status>=500&&e.status<600?t():e}function pi(t){return new Promise((e=>{setTimeout(e,t)}))}const mi=/^[cdef][\w-]{21}$/,fi="";function gi(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}(t);return mi.test(e)?e:fi}catch(t){return fi}}function vi(t){return`${t.appName}!${t.appId}`}const bi=new Map;function yi(t,e){const n=vi(t);wi(n,e),function(t,e){const n=Ei();n&&n.postMessage({key:t,fid:e});Ti()}(n,e)}function wi(t,e){const n=bi.get(t);if(n)for(const t of n)t(e)}let Si=null;function Ei(){return!Si&&"BroadcastChannel"in self&&(Si=new BroadcastChannel("[Firebase] FID Change"),Si.onmessage=t=>{wi(t.data.key,t.data.fid)}),Si}function Ti(){0===bi.size&&Si&&(Si.close(),Si=null)}const xi="firebase-installations-database",_i=1,Ai="firebase-installations-store";let Ci=null;function Ii(){return Ci||(Ci=function(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const r=indexedDB.open(t,e),o=Gn(r);return i&&r.addEventListener("upgradeneeded",(t=>{i(Gn(r.result),t.oldVersion,t.newVersion,Gn(r.transaction))})),n&&r.addEventListener("blocked",(()=>n())),o.then((t=>{a&&t.addEventListener("close",(()=>a())),s&&t.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),o}(xi,_i,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(Ai)}})),Ci}async function Li(t,e){const n=vi(t),i=(await Ii()).transaction(Ai,"readwrite"),s=i.objectStore(Ai),a=await s.get(n);return await s.put(e,n),await i.done,a&&a.fid===e.fid||yi(t,e.fid),e}async function Pi(t){const e=vi(t),n=(await Ii()).transaction(Ai,"readwrite");await n.objectStore(Ai).delete(e),await n.done}async function ki(t,e){const n=vi(t),i=(await Ii()).transaction(Ai,"readwrite"),s=i.objectStore(Ai),a=await s.get(n),r=e(a);return void 0===r?await s.delete(n):await s.put(r,n),await i.done,!r||a&&a.fid===r.fid||yi(t,r.fid),r}async function Di(t){let e;const n=await ki(t.appConfig,(n=>{const i=function(t){const e=t||{fid:gi(),registrationStatus:0};return zi(e)}(n),s=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(ai.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=oi(t),s=hi(t),a=e.getImmediate({optional:!0});if(a){const t=await a.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const r={fid:n,authVersion:ni,appId:t.appId,sdkVersion:ei},o={method:"POST",headers:s,body:JSON.stringify(r)},l=await di((()=>fetch(i,o)));if(l.ok){const t=await l.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:li(t.authToken)}}throw await ci("Create Installation",l)}(t,e);return Li(t.appConfig,n)}catch(n){throw ri(n)&&409===n.customData.serverCode?await Pi(t.appConfig):await Li(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Bi(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry}));return n.fid===fi?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Bi(t){let e=await Mi(t.appConfig);for(;1===e.registrationStatus;)await pi(100),e=await Mi(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Di(t);return n||e}return e}function Mi(t){return ki(t,(t=>{if(!t)throw ai.create("installation-not-found");return zi(t)}))}function zi(t){return 1===(e=t).registrationStatus&&e.registrationTime+ti<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Ni({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${oi(t)}/${e}/authTokens:generate`}(t,n),s=ui(t,n),a=e.getImmediate({optional:!0});if(a){const t=await a.getHeartbeatsHeader();t&&s.append("x-firebase-client",t)}const r={installation:{sdkVersion:ei,appId:t.appId}},o={method:"POST",headers:s,body:JSON.stringify(r)},l=await di((()=>fetch(i,o)));if(l.ok){return li(await l.json())}throw await ci("Generate Auth Token",l)}async function Oi(t,e=!1){let n;const i=await ki(t.appConfig,(i=>{if(!Fi(i))throw ai.create("not-registered");const s=i.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+si}(t)}(s))return i;if(1===s.requestStatus)return n=async function(t,e){let n=await Ri(t.appConfig);for(;1===n.authToken.requestStatus;)await pi(100),n=await Ri(t.appConfig);const i=n.authToken;return 0===i.requestStatus?Oi(t,e):i}(t,e),i;{if(!navigator.onLine)throw ai.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await Ni(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Li(t.appConfig,i),n}catch(n){if(!ri(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Li(t.appConfig,n)}else await Pi(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function Ri(t){return ki(t,(t=>{if(!Fi(t))throw ai.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+ti<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n}))}function Fi(t){return void 0!==t&&2===t.registrationStatus}async function ji(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await Di(t);e&&await e}(n);return(await Oi(n,e)).token}function Vi(t){return ai.create("missing-app-config-values",{valueName:t})}const Ui="installations",$i=t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Vi("App Configuration");if(!t.name)throw Vi("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Vi(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:bn(e,"heartbeat"),_delete:()=>Promise.resolve()}},Wi=t=>{const e=bn(t.getProvider("app").getImmediate(),Ui).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await Di(e);return i?i.catch(console.error):Oi(e).catch(console.error),n.fid}(e),getToken:t=>ji(e,t)}};vn(new ce(Ui,$i,"PUBLIC")),vn(new ce("installations-internal",Wi,"PRIVATE")),En(Qn,Zn),En(Qn,Zn,"esm2017");const Hi="analytics",Gi="firebase_id",Xi="origin",Yi=6e4,qi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ki="https://www.googletagmanager.com/gtag/js",Ji=new ye("@firebase/analytics"),Qi=new Zt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Zi(t){if(!t.startsWith(Ki)){const e=Qi.create("invalid-gtag-resource",{gtagURL:t});return Ji.warn(e.message),""}return t}function ts(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function es(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Zi}),i=document.createElement("script"),s=`${Ki}?l=${t}&id=${e}`;i.src=n?null==n?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function ns(t,e,n,i){return async function(s,...a){try{if("event"===s){const[i,s]=a;await async function(t,e,n,i,s){try{let a=[];if(s&&s.send_to){let t=s.send_to;Array.isArray(t)||(t=[t]);const i=await ts(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),s=t&&e[t.appId];if(!s){a=[];break}a.push(s)}}0===a.length&&(a=Object.values(e)),await Promise.all(a),t("event",i,s||{})}catch(t){Ji.error(t)}}(t,e,n,i,s)}else if("config"===s){const[s,r]=a;await async function(t,e,n,i,s,a){const r=i[s];try{if(r)await e[r];else{const t=(await ts(n)).find((t=>t.measurementId===s));t&&await e[t.appId]}}catch(t){Ji.error(t)}t("config",s,a)}(t,e,n,i,s,r)}else if("consent"===s){const[e]=a;t("consent","update",e)}else if("get"===s){const[e,n,i]=a;t("get",e,n,i)}else if("set"===s){const[e]=a;t("set",e)}else t(s,...a)}catch(t){Ji.error(t)}}}const is=30;const ss=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function as(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function rs(t,e=ss,n){const{appId:i,apiKey:s,measurementId:a}=t.options;if(!i)throw Qi.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw Qi.create("no-api-key")}const r=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ls;return setTimeout((async()=>{o.abort()}),void 0!==n?n:Yi),os({appId:i,apiKey:s,measurementId:a},r,o,e)}async function os(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=ss){var a;const{appId:r,measurementId:o}=t;try{await function(t,e){return new Promise(((n,i)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener((()=>{clearTimeout(a),i(Qi.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(o)return Ji.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:r,measurementId:o};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:as(i)},a=qi.replace("{app-id}",n),r=await fetch(a,s);if(200!==r.status&&304!==r.status){let t="";try{const n=await r.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw Qi.create("config-fetch-failed",{httpStatus:r.status,responseMessage:t})}return r.json()}(t);return s.deleteThrottleMetadata(r),e}catch(e){const l=e;if(!function(t){if(!(t instanceof Qt&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(s.deleteThrottleMetadata(r),o)return Ji.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:r,measurementId:o};throw e}const c=503===Number(null===(a=null==l?void 0:l.customData)||void 0===a?void 0:a.httpStatus)?oe(n,s.intervalMillis,is):oe(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return s.setThrottleMetadata(r,h),Ji.debug(`Calling attemptFetch again in ${c} millis`),os(t,h,i,s)}}class ls{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let cs,hs;function us(t){hs=t}function ds(t){cs=t}async function ps(t,e,n,i,s,a,r){var o;const l=rs(t);l.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ji.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Ji.error(t))),e.push(l);const c=async function(){if(!Kt())return Ji.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Jt()}catch(t){return Ji.warn(Qi.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[h,u]=await Promise.all([l,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ki)&&n.src.includes(t))return n;return null})(a)||es(a,h.measurementId),hs&&(s("consent","default",hs),us(void 0)),s("js",new Date);const d=null!==(o=null==r?void 0:r.config)&&void 0!==o?o:{};return d[Xi]="firebase",d.update=!0,null!=u&&(d[Gi]=u),s("config",h.measurementId,d),cs&&(s("set",cs),ds(void 0)),h.measurementId}class ms{constructor(t){this.app=t}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}}let fs={},gs=[];const vs={};let bs,ys,ws="dataLayer",Ss="gtag",Es=!1;function Ts(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Qi.create("invalid-analytics-context",{errorInfo:e});Ji.warn(n.message)}}function xs(t,e,n){Ts();const i=t.options.appId;if(!i)throw Qi.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Qi.create("no-api-key");Ji.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fs[i])throw Qi.create("already-exists",{id:i});if(!Es){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(ws);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,s){let a=function(...t){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(a=window[s]),window[s]=ns(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}(fs,gs,vs,ws,Ss);ys=t,bs=e,Es=!0}fs[i]=ps(t,gs,vs,e,bs,ws,n);return new ms(t)}function _s(t=function(t=dn){const e=mn.get(t);if(!e&&t===dn&&Yt())return Sn();if(!e)throw yn.create("no-app",{appName:t});return e}()){const e=bn(t=le(t),Hi);return e.isInitialized()?e.getImmediate():function(t,e={}){const n=bn(t,Hi);if(n.isInitialized()){const t=n.getImmediate();if(ee(e,n.getOptions()))return t;throw Qi.create("already-initialized")}const i=n.initialize({options:e});return i}(t)}function As(t,e,n){t=le(t),async function(t,e,n,i){if(i&&i.global){const e={};for(const t of Object.keys(n))e[`user_properties.${t}`]=n[t];return t("set",e),Promise.resolve()}t("config",await e,{update:!0,user_properties:n})}(ys,fs[t.app.options.appId],e,n).catch((t=>Ji.error(t)))}function Cs(t,e,n,i){t=le(t),async function(t,e,n,i,s){if(s&&s.global)t("event",n,i);else{const s=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(ys,fs[t.app.options.appId],e,n,i).catch((t=>Ji.error(t)))}const Is="@firebase/analytics",Ls="0.10.0";vn(new ce(Hi,((t,{options:e})=>xs(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),vn(new ce("analytics-internal",(function(t){try{const e=t.getProvider(Hi).getImmediate();return{logEvent:(t,n,i)=>Cs(e,t,n,i)}}catch(t){throw Qi.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),En(Is,Ls),En(Is,Ls,"esm2017");const Ps={apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:a63f4eaddc949f539de10c",measurementId:"G-FVLSN7D7NM"};class ks{firebaseApp;analytics;constructor(){this.initializeFirebase(),console.log(" source : ",M," and  campaign_id: ",z),null==M&&null==z||this.setUserProperty(M,z)}customEvents(t,e){try{Cs(this.analytics,t,e)}catch(t){console.error("Error while logging custom event:",t)}}sessionEnd(){try{navigator.onLine&&void 0!==this.analytics&&Cs(this.analytics,"session_end")}catch(t){console.error("Error while logging session_end event:",t)}}setUserProperty(t,e){try{As(this.analytics,{source:t,campaign_id:e},{global:!0}),console.log("User properties set: ",{source:t,campaignId:e})}catch(t){console.error("Error while setting user properties:",t)}}initializeFirebase(){try{this.firebaseApp=Sn(Ps),this.analytics=_s(this.firebaseApp)}catch(t){console.error("Error while initializing Firebase:",t)}}}class Ds extends ks{static instance;constructor(){super()}static getInstance(){return Ds.instance||(Ds.instance=new Ds),Ds.instance}sendSessionStartEvent(t){this.customEvents("session_start",t)}sendSessionEndEvent(t){this.customEvents("session_end",t)}sendSelectedLevelEvent(t){this.customEvents("selected_level",t)}sendTappedStartEvent(t){this.customEvents("tapped_start",t)}sendPuzzleCompletedEvent(t){this.customEvents("puzzle_completed",t)}sendLevelCompletedEvent(t){this.customEvents("level_completed",t)}sendUserClickedOnPlayEvent(){this.customEvents("user_clicked",{click:"Click"})}sendDownloadCompletedEvent(t){this.customEvents("download_completed",t)}}class Bs{levelData;puzzleNumber;groupedLetters;droppedLetters;groupedObj;droppedHistory;hideListObj;constructor(t,e){this.levelData=t,this.puzzleNumber=e,this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={}}getTargetWord(){return this.levelData.puzzles[this.puzzleNumber]?.prompt?.promptText}getValues(){return{groupedLetters:this.groupedLetters,droppedLetters:this.droppedLetters,groupedObj:{...this.groupedObj},droppedHistory:{...this.droppedHistory},hideListObj:{...this.hideListObj}}}checkIsWordPuzzle(){return"Word"===this.levelData?.levelMeta?.levelType}updatePuzzleLevel(t){this.clearAllValues(),this.puzzleNumber=t}clearPickedUp(){this.groupedLetters="",this.groupedObj={},this.hideListObj={...this.droppedHistory}}clearAllValues(){this.groupedLetters="",this.droppedLetters="",this.groupedObj={},this.droppedHistory={},this.hideListObj={},this.puzzleNumber=0}validateShouldHideLetter(t){return!this.hideListObj[t]}handleCheckHoveredStone(t,e){const n=this.groupedLetters,i=this.getTargetWord();if(!this.droppedLetters.length&&i[0]!==n[0])return!1;const s=!n.includes(t),a=!this.groupedObj[e];return i.includes(`${this.droppedLetters}${n}${t}`)&&(s||a)}validateFedLetters(){const t=this.getTargetWord();return this.droppedLetters===t.substring(0,this.droppedLetters.length)}validateWordPuzzle(){const t=this.getTargetWord();return this.droppedLetters===t}setGroupToDropped(){this.droppedLetters=`${this.droppedLetters}${this.groupedLetters}`,this.droppedHistory={...this.droppedHistory,...this.groupedObj}}setPickUpLetter(t,e){this.hideListObj={...this.hideListObj,...this.groupedObj},this.groupedLetters=`${this.groupedLetters}${t}`,this.groupedObj[e]=t}}class Ms extends it{constructor(t={}){super({id:t.id||"close-button",className:t.className||"close-button-image",imageSrc:"./assets/images/map_btn.webp",imageAlt:t.imageAlt||"Close Icon",targetId:t.targetId||"game-control",...t})}}class zs extends it{constructor(t={}){super({id:t.id||"cancel-button",className:t.className||"cancel-button-image",imageSrc:"./assets/images/close_btn.webp",imageAlt:t.imageAlt||"Cancel Icon",targetId:t.targetId||"game-control",...t})}}class Ns extends it{constructor(t={}){super({id:t.id||"next-button",className:t.className||"next-button-image",imageSrc:S,imageAlt:t.imageAlt||"Next Icon",targetId:t.targetId||"game-control",...t})}}class Os extends it{constructor(t={}){super({id:t.id||"retry-button",className:t.className||"retry-button-image",imageSrc:"./assets/images/retry_btn.webp",imageAlt:t.imageAlt||"Retry Icon",targetId:t.targetId||"game-control",...t})}}class Rs extends it{constructor(t={}){super({id:t.id||"yes-button",className:t.className||"yes-button-image",imageSrc:"./assets/images/confirm_btn.webp",imageAlt:t.imageAlt||"Yes Icon",targetId:t.targetId||"game-control",...t})}}class Fs{context;levelData;posX;posY;originalPosX;originalPosY;size;radiusOffSet;bloonSize;btnSize;lockSize;textFontSize;constructor(t,e,n){this.context=e,this.levelData=n,this.posX=this.levelData.x,this.posY=this.levelData.y,this.originalPosX=this.posX,this.originalPosY=this.posY,this.size=t.height/5,this.radiusOffSet=t.height/20,this.bloonSize=this.isLevelSpecial(this.size),this.btnSize=this.bloonSize,this.lockSize=t.height/13,this.textFontSize=this.size/6}isSpecialLevel(t){return k.includes(t)}isLevelSpecial(t){return this.levelData?.isSpecial?.9*t:t}draw(t,e,n,i){this.context.drawImage(this.levelData?.balloonImg,this.posX,this.posY,this.btnSize,this.btnSize),this.context.fillStyle="white",this.context.font=this.textFontSize+`px ${O}, monospace`,this.context.textAlign="center",this.context.fillText(`${this.levelData.index+t}`,this.levelData.x+this.size/3.5,this.levelData.y+this.size/3),this.context.font=this.textFontSize-this.size/30+`px ${O}, monospace`,this.btnSize<this.bloonSize?this.btnSize=this.btnSize+.5:(this.btnSize=this.bloonSize,this.posX=this.levelData.x,this.posY=this.levelData.y),this.drawIcons(t,e,n,i)}applyPulseEffect(){const t=.7,e=Date.now()%1500/1500,n=e<=t,i=n?e/t:(e-t)/(n?t:.30000000000000004),s=n?15*i:15+45*i,a=n?.5*(1-i):0;if(a<=0)return;const{x:r,y:o,radius:l}=this.levelData?.isSpecial?{x:3,y:2.5,radius:2.2}:{x:3.4,y:3.8,radius:3.2},c=this.posX+this.btnSize/r,h=this.posY+this.btnSize/o,u=this.btnSize/l+s;this.context.save(),this.context.beginPath(),this.context.arc(c,h,u,0,2*Math.PI),this.context.fillStyle=`rgba(255, 255, 255, ${a})`,this.context.fill(),this.context.restore()}drawIcons(t,e,n,i){const s=this.levelData.index;if(R.DebugMode||s+t-1>e+1&&this.drawLock(),n.length&&s+t<=i)for(let e=0;e<n.length;e++)if(s-1+t===parseInt(n[e].levelNumber)){this.checkStars(n[e].starCount);break}}drawLock(){this.context.drawImage(this.levelData?.lockImg,this.levelData.x,this.levelData.y,this.lockSize,this.lockSize)}checkStars(t){const e=this.levelData.x,n=this.levelData.y,i=this.size;t>=1&&this.drawStar(e,n-.01*i),t>1&&this.drawStar(e+i/2.5,n-.01*i),3===t&&this.drawStar(e+i/5,n-.1*i)}drawStar(t,e){this.context.drawImage(this.levelData?.starImg,t,e,this.size/5,this.size/5)}onClick(t,e,n,i,s){Math.sqrt((t-this.levelData.x-this.radiusOffSet)*(t-this.levelData.x-this.radiusOffSet)+(e-this.levelData.y-this.radiusOffSet)*(e-this.levelData.y-this.radiusOffSet))<45&&(R.DebugMode||this.levelData.index+n<=i)&&(this.btnSize=this.bloonSize-4,this.posX=this.originalPosX+.5,this.posY=this.originalPosY+1,s(this.levelData.index))}}var js=n(424),Vs={};Vs.styleTagTransform=bt(),Vs.setAttributes=mt(),Vs.insert=dt().bind(null,"head"),Vs.domAPI=ht(),Vs.insertStyleElement=gt();lt()(js.A,Vs);js.A&&js.A.locals&&js.A.locals;class Us extends it{constructor(t={}){super({id:t.id||"play-button",className:t.className||"play-button-image",imageSrc:t?.imageSrc||"./assets/images/Play_button.webp",imageAlt:t.imageAlt||"Play Icon",targetId:t.targetId||"game-scene",...t})}}var $s=n(636),Ws={};Ws.styleTagTransform=bt(),Ws.setAttributes=mt(),Ws.insert=dt().bind(null,"head"),Ws.domAPI=ht(),Ws.insertStyleElement=gt();lt()($s.A,Ws);$s.A&&$s.A.locals&&$s.A.locals;const Hs={root:".game-scene",closeButton:'[data-click="close"]'},Gs="[data-click]",Xs="show";class Ys{popupEl;closeButton;static EVENTS={ON_CLOSE:"onClose",ON_BTN_CLICK:"onClick"};id="base-popup";template="";isRendered=!1;options;pubSub=new At;constructor(t){this.options={selectors:Hs,...t},this._init()}onInit(){}open(){this.isRendered||this.render(),this.setVisibility(!0)}close(t){this.setVisibility(!1),this.pubSub.publish(Ys.EVENTS.ON_CLOSE,t)}destroy(){this.popupEl?.remove(),this._removeEventListeners()}handleClick(t,e=300){setTimeout((()=>{this.close({data:t})}),e)}onButtonClick(t){return this.pubSub.subscribe(Ys.EVENTS.ON_BTN_CLICK,t)}onClose(t){return this.pubSub.subscribe(Ys.EVENTS.ON_CLOSE,t)}render(){if(this.isRendered)return;const t=(e=this.id,n=this.template,`\n  <div id="${e}" class="popup">\n    <div class="popup__overlay"></div>\n    <div id="${e}-content-wrapper" class="popup__content-wrapper" style="background-image: url(./assets/images/popup_bg_v01.webp)">\n      <div id="${e}-content-container" class="popup__content-container">${n}</div>\n    </div>\n  </div>\n`);var e,n;const{root:i}=this.options.selectors,s=document.querySelector(i);s.insertAdjacentHTML("beforeend",t),this.popupEl=s.querySelector(`#${this.id}`),this.options.hideClose||(this.closeButton=new zs({targetId:this.contentWrapperId}),this.closeButton.onClick((()=>{setTimeout((()=>{this.close({data:!1})}),300)}))),this.isRendered=!0}get contentContainerId(){return`${this.id}-content-container`}get contentWrapperId(){return`${this.id}-content-wrapper`}_init(){setTimeout((()=>{this.render(),this.onInit(),this._addEventListeners()}))}_click=t=>{const e=t.target.closest(Gs).dataset.click,n="close"===e,i={data:e,event:t};setTimeout((()=>{n?this.close(i):this.pubSub.publish(Ys.EVENTS.ON_BTN_CLICK,i)}),300)};_addEventListeners(){const t=this.popupEl?.querySelectorAll(Gs);t?.length&&t.forEach((t=>{t.addEventListener("click",this._click)}))}_removeEventListeners(){const t=this.popupEl?.querySelectorAll(Gs);t?.length&&t.forEach((t=>{t.removeEventListener("click",this._click)}))}setVisibility(t){t?this.popupEl.classList.add(Xs):this.popupEl.classList.remove(Xs)}}class qs extends Ys{confirmButton;cancelButton;enableTimeoutId;id="confirm-popup";template='\n    <div class="confirm-message text-align-center w-100 mb-3 font-size-3">Are you sure?</div>\n    <div id="confirm-button-container" class="button-container d-flex justify-content-center w-100"></div>\n  ';onInit(){const t="confirm-button-container";this.cancelButton=new zs({id:this.createButtonId("cancel-button"),targetId:t,className:"me-4"}),this.cancelButton.onClick((()=>this.handleClick(!1))),this.confirmButton=new Rs({id:this.createButtonId("confirm-button"),targetId:t}),this.confirmButton.onClick((()=>this.handleClick(!0)))}createButtonId(t){return`${this.id}-${t}`}handleClick(t){this.disableButtons(),super.handleClick(t),this.scheduleEnableButtons(800)}disableButtons(){this.confirmButton?.setDisabled(!0),this.cancelButton?.setDisabled(!0)}enableButtons(){this.confirmButton?.setDisabled(!1),this.cancelButton?.setDisabled(!1)}scheduleEnableButtons(t){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),t)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),super.destroy()}}const Ks=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const Js="object"==typeof global&&global&&global.Object===Object&&global;var Qs="object"==typeof self&&self&&self.Object===Object&&self;const Zs=Js||Qs||Function("return this")();const ta=function(){return Zs.Date.now()};var ea=/\s/;const na=function(t){for(var e=t.length;e--&&ea.test(t.charAt(e)););return e};var ia=/^\s+/;const sa=function(t){return t?t.slice(0,na(t)+1).replace(ia,""):t};const aa=Zs.Symbol;var ra=Object.prototype,oa=ra.hasOwnProperty,la=ra.toString,ca=aa?aa.toStringTag:void 0;const ha=function(t){var e=oa.call(t,ca),n=t[ca];try{t[ca]=void 0;var i=!0}catch(t){}var s=la.call(t);return i&&(e?t[ca]=n:delete t[ca]),s};var ua=Object.prototype.toString;const da=function(t){return ua.call(t)};var pa=aa?aa.toStringTag:void 0;const ma=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":pa&&pa in Object(t)?ha(t):da(t)};const fa=function(t){return null!=t&&"object"==typeof t};const ga=function(t){return"symbol"==typeof t||fa(t)&&"[object Symbol]"==ma(t)};var va=/^[-+]0x[0-9a-f]+$/i,ba=/^0b[01]+$/i,ya=/^0o[0-7]+$/i,wa=parseInt;const Sa=function(t){if("number"==typeof t)return t;if(ga(t))return NaN;if(Ks(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ks(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=sa(t);var n=ba.test(t);return n||ya.test(t)?wa(t.slice(2),n?2:8):va.test(t)?NaN:+t};var Ea=Math.max,Ta=Math.min;const xa=function(t,e,n){var i,s,a,r,o,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,a=s;return i=s=void 0,c=e,r=t.apply(a,n)}function m(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=a}function f(){var t=ta();if(m(t))return g(t);o=setTimeout(f,function(t){var n=e-(t-l);return u?Ta(n,a-(t-c)):n}(t))}function g(t){return o=void 0,d&&i?p(t):(i=s=void 0,r)}function v(){var t=ta(),n=m(t);if(i=arguments,s=this,l=t,n){if(void 0===o)return function(t){return c=t,o=setTimeout(f,e),h?p(t):r}(l);if(u)return clearTimeout(o),o=setTimeout(f,e),p(l)}return void 0===o&&(o=setTimeout(f,e)),r}return e=Sa(e)||0,Ks(n)&&(h=!!n.leading,a=(u="maxWait"in n)?Ea(Sa(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==o&&clearTimeout(o),c=0,i=l=s=o=void 0},v.flush=function(){return void 0===o?r:g(ta())},v},_a="select-level",Aa="restart-level";class Ca extends Ys{selectLevelButton;restartLevelButton;confirmPopup;openConfirm=()=>{};audioPlayer=new et;enableTimeoutId;id="pause-popup";onInit(){const t=this.contentContainerId;this.selectLevelButton=new Ms({id:"map-button",className:"me-4",targetId:t}),this.selectLevelButton&&this.selectLevelButton.onClick((()=>this.handleClick("select-level"))),this.restartLevelButton=new Os({targetId:t}),this.restartLevelButton&&this.restartLevelButton.onClick((()=>this.handleClick("restart-level"))),this.confirmPopup=new qs({hideClose:!0}),this.openConfirm=xa((()=>{this.confirmPopup.open(),this.audioPlayer.playAudio("./assets/audios/are-you-sure.mp3")}),300)}handleClick(t){if(this.disableButtons(),"english"===N){const e=this.confirmPopup.onClose((n=>{e(),this.handleConfirmClose(n,t),this.scheduleEnableButtons(800)}));this.openConfirm()}else super.handleClick(t),this.scheduleEnableButtons(800)}handleConfirmClose(t,e){t.data&&super.handleClick(e),super.handleClick(!1,0)}disableButtons(){this.selectLevelButton?.setDisabled(!0),this.restartLevelButton?.setDisabled(!0)}enableButtons(){this.selectLevelButton?.setDisabled(!1),this.restartLevelButton?.setDisabled(!1)}scheduleEnableButtons(t){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.enableTimeoutId=window.setTimeout((()=>{this.enableButtons(),this.enableTimeoutId=void 0}),t)}destroy(){this.enableTimeoutId&&clearTimeout(this.enableTimeoutId),this.confirmPopup?.destroy(),super.destroy()}}var Ia=n(52);class La{props;riveInstance;src="./assets/monsterrive.riv";stateMachines="State Machine 1";game;x;y;hitboxRangeX;hitboxRangeY;static Animations={OPENING_MOUTH_EAT:"Opening Mouth Eat",EAT_HAPPY:"Eat Happy",IDLE:"Idle",EAT_DISGUST:"Eat Disgust"};constructor(t){if(this.props=t,this.props.gameCanvas){this.game=this.props.gameCanvas,this.x=this.game.width/2-.243*this.game.width,this.y=this.game.width/3,this.hitboxRangeX={from:0,to:0},this.hitboxRangeY={from:0,to:0};const t=70,e=50,n=this.game.width/2,i=n/2;this.hitboxRangeX.from=n-t,this.hitboxRangeX.to=n+t,this.hitboxRangeY.from=i-e,this.hitboxRangeY.to=i+e}this.riveInstance=new Ia.Rive({src:this.src,canvas:this.props.canvas,autoplay:this.props.autoplay,stateMachines:this.stateMachines,layout:new Ia.Layout({fit:Ia.Fit[this.props.fit||"Contain"],alignment:Ia.Alignment[this.props.alignment||"TopCenter"]}),onLoad:()=>{this.props.onLoad&&this.props.onLoad()}})}play(t){this.riveInstance&&this.riveInstance.play(t)}stop(){this.riveInstance&&this.riveInstance.stop()}onStateChange(t){this.riveInstance.stateMachine.inputs.forEach((e=>{e.onStateChange((e=>{t(e)}))}))}checkHitboxDistance(t){const e=this.props.canvas.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top,s=n>=this.hitboxRangeX.from&&n<=this.hitboxRangeX.to,a=i>=this.hitboxRangeY.from&&i<=this.hitboxRangeY.to;return s&&a}onClick(t,e){const n=this.x+this.game.width/4,i=this.y+this.game.height/2.2;return Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))<=100}stopRiveMonster(){this.riveInstance&&this.riveInstance.stop()}unregisterEventListener(){this.riveInstance&&this.riveInstance.cleanup()}dispose(){this.unregisterEventListener(),this.riveInstance&&(this.riveInstance=null)}}class Pa{width;height;monster;jsonVersionNumber;canvas;levelData;timerTicking;promptText;pauseButton;tutorial;id;context;levelIndicators;stonesCount=1;monsterPhaseNumber;pickedStone;puzzleStartTime;pausePopupComponent=new Ca;showTutorial;feedBackTexts;isPuzzleCompleted;rightToLeft;switchSceneToEnd;levelNumber;stoneHandler;counter=0;handler;pickedStoneObject;isPauseButtonClicked;background;feedBackTextCanavsElement;feedbackTextEffects;isGameStarted=!1;time=0;score=0;switchToLevelSelection;reloadScene;data;audioPlayer;firebaseIntegration;startTime;puzzleTime;isDisposing;trailParticles;wordPuzzleLogic;riveMonsterElement;gameControl;unsubscribeEvent;timeTicker;isFeedBackTriggered;constructor({monsterPhaseNumber:t,switchSceneToEnd:e,switchToLevelSelection:n,reloadScene:i}){const s=Ct.getGamePlaySceneDetails();this.initializeProperties(s),this.setupUIElements(),this.monsterPhaseNumber=t||1,this.switchSceneToEnd=e,this.switchToLevelSelection=n,this.reloadScene=i,this.isDisposing=!1,this.initializeGameComponents(s);var a=this.levelData.levelMeta.levelNumber;R.DebugMode?localStorage.setItem(c+N+"Debug",a):localStorage.setItem(c+N,a),this.addEventListeners(),this.startGameTime(),this.startPuzzleTime(),this.firebaseIntegration=new Ds,this.feedbackTextEffects=new Dt,this.audioPlayer=new et,this.wordPuzzleLogic=new Bs(this.levelData,this.counter),this.unsubscribeEvent=Ct.subscribe(Ct.EVENTS.GAME_PAUSE_STATUS_EVENT,(t=>{this.isPauseButtonClicked=t,t&&this.pausePopupComponent.open()})),this.pausePopupComponent.onClose((t=>{const{data:e}=t;switch(e){case Aa:Ct.publish(Ct.EVENTS.GAMEPLAY_DATA_EVENT,{currentLevelData:this.levelData,selectedLevelNumber:this.levelNumber}),Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,!0),this.reloadScene("GamePlay");break;case _a:Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,!0),Ct.publish(Ct.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),this.switchToLevelSelection("GamePlay");default:Ct.publish(Ct.EVENTS.GAME_PAUSE_STATUS_EVENT,!1),this.resumeGame()}})),this.setupBg()}initializeRiveMonster(t=La.Animations.IDLE){return new La({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"topCenter",onLoad:()=>{this.monster.play(t)},gameCanvas:this.canvas})}initializeGameComponents(t){this.trailParticles=new Bt(this.canvas),this.pauseButton=new st,this.pauseButton.onClick((()=>{Ct.publish(Ct.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()})),this.timerTicking=new jt(this.width,this.height,this.loadPuzzle),this.stoneHandler=new It(this.context,this.canvas,this.counter,this.levelData,t.feedbackAudios,this.timerTicking),this.tutorial=new Lt(this.context,this.width,this.height),this.promptText=new _t(this.width,this.height,this.levelData.puzzles[this.counter],this.levelData,this.rightToLeft),this.levelIndicators=new xt,this.levelIndicators.setIndicators(this.counter),this.monster=this.initializeRiveMonster()}setupUIElements(){this.handler=document.getElementById("canvas"),this.riveMonsterElement=document.getElementById("rivecanvas"),this.riveMonsterElement.style.zIndex="4",this.gameControl=document.getElementById("game-control"),this.gameControl.style.zIndex="5"}initializeProperties(t){this.isPauseButtonClicked=t?.isGamePaused,this.width=t.width,this.height=t.height,this.rightToLeft=t.rightToLeft,this.canvas=t.canvas,this.context=t.gameCanvasContext,this.levelData=t.levelData,this.levelNumber=t.levelNumber,this.jsonVersionNumber=t.jsonVersionNumber,this.feedBackTexts=t.feedBackTexts,this.data=t.data}setupBg=()=>{const t=kt.createBackgroundComponent(this.levelData.levelMeta.levelNumber);(new kt).generateBackground(t)};resumeGame=()=>{this.addEventListeners()};getRandomFeedBackText(t){const e=Object.keys(this.feedBackTexts)[t];return this.feedBackTexts[e]}getRandomInt(t,e){const n=Object.values(this.feedBackTexts).filter((t=>null!=t)).length-1;return Math.floor(Math.random()*(n-t+1))+t}handleMouseUp=t=>{if(this.monster.checkHitboxDistance(t)&&this.pickedStone){const{text:t}=this.pickedStone;switch(this.levelData.levelMeta.levelType){case"LetterOnly":case"LetterInWord":this.letterPuzzle(t);break;case"Word":case"SoundWord":this.wordPuzzle(this.pickedStone)}}else this.pickedStone&&this.pickedStoneObject&&this.pickedStone.text&&"number"==typeof this.pickedStoneObject.origx&&"number"==typeof this.pickedStoneObject.origy&&(this.pickedStone.x=this.pickedStoneObject.origx,this.pickedStone.y=this.pickedStoneObject.origy);this.pickedStone=null,this.wordPuzzleLogic.clearPickedUp(),Ct.publish(Ct.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,!1)};handleMouseDown=t=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let e=this.canvas.getBoundingClientRect();const n=t.clientX-e.left,i=t.clientY-e.top;if(this.wordPuzzleLogic.checkIsWordPuzzle())this.setPickedUp(n,i);else for(let t of this.stoneHandler.foilStones){if(Math.sqrt((n-t.x)**2+(i-t.y)**2)<=40){this.pickedStoneObject=t,this.pickedStone=t,this.stoneHandler.playDragAudioIfNecessary(t);break}}Ct.publish(Ct.EVENTS.GAME_TRAIL_EFFECT_TOGGLE_EVENT,!0)};setPickedUp(t,e){if(this.pickedStone&&this.pickedStone.frame<=99)return;const n=this.stoneHandler.handlePickStoneUp(t,e);n&&(this.pickedStoneObject=n,this.pickedStone=n,this.stoneHandler.playDragAudioIfNecessary(n),"Word"===this.levelData?.levelMeta?.levelType&&this.wordPuzzleLogic.setPickUpLetter(n?.text,n?.foilStoneIndex))}handleMouseMove=t=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;let e=t.clientX,n=t.clientY;if(this.pickedStone){if(this.wordPuzzleLogic.checkIsWordPuzzle()){const i=this.stoneHandler.handleMovingStoneLetter(this.pickedStone,t.clientX,t.clientY);if(this.pickedStone=i,e=i.x,n=i.y,this.wordPuzzleLogic.checkIsWordPuzzle()){const t=this.stoneHandler.handleHoveringToAnotherStone(e,n,((t,e)=>this.wordPuzzleLogic.handleCheckHoveredStone(t,e)));t&&(this.wordPuzzleLogic.setPickUpLetter(t?.text,t?.foilStoneIndex),this.pickedStone=this.stoneHandler.resetStonePosition(this.width,this.pickedStone,this.pickedStoneObject),this.pickedStoneObject=t,this.pickedStone=t)}}else{let i=this.canvas.getBoundingClientRect();const s=t.clientX-i.left,a=t.clientY-i.top;this.monster.play(La.Animations.OPENING_MOUTH_EAT),this.pickedStone.x=s,this.pickedStone.y=a,e=s,n=a}this.monster.play(La.Animations.OPENING_MOUTH_EAT)}this.trailParticles?.addTrailParticlesOnMove(e,n)};handleMouseClick=t=>{let e=this.canvas.getBoundingClientRect();const n=t.clientX-e.left,i=t.clientY-e.top;this.monster.onClick(n,i)&&(this.isGameStarted=!0,this.time=0,this.tutorial.setPlayMonsterClickAnimation(!1)),this.promptText.onClick(n,i)&&this.promptText.playSound()};handleTouchStart=t=>{if(this.pickedStone&&this.pickedStone.frame<=99)return;const e=t.touches[0];this.handleMouseDown({clientX:e.clientX,clientY:e.clientY}),this.trailParticles?.resetParticles()};handleTouchMove=t=>{const e=t.touches[0];this.handleMouseMove({clientX:e.clientX,clientY:e.clientY}),this.trailParticles?.addTrailParticlesOnMove(e.clientX,e.clientY)};handleTouchEnd=t=>{const e=t.changedTouches[0];this.handleMouseUp({clientX:e.clientX,clientY:e.clientY}),this.trailParticles?.resetParticles()};draw(t){this.isGameStarted||this.isPauseButtonClicked||(this.time=this.time+t,this.time>=5e3&&(this.isGameStarted=!0,this.time=0,this.tutorial.setPlayMonsterClickAnimation(!1))),this.promptText.draw(t),this.trailParticles?.draw(),this.isPauseButtonClicked&&this.isGameStarted&&this.handleStoneLetterDrawing(t),this.isPauseButtonClicked||this.isGameStarted||0==this.counter&&this.tutorial.clickOnMonsterTutorial(t),!this.isPauseButtonClicked&&this.isGameStarted&&this.handleStoneLetterDrawing(t)}handleStoneLetterDrawing(t){if(this.wordPuzzleLogic.checkIsWordPuzzle()){const{groupedObj:e}=this.wordPuzzleLogic.getValues();this.stoneHandler.drawWordPuzzleLetters(t,(t=>this.wordPuzzleLogic.validateShouldHideLetter(t)),e)}else this.stoneHandler.draw(t)}addEventListeners(){this.handler.addEventListener("mouseup",this.handleMouseUp,!1),this.handler.addEventListener("mousemove",this.handleMouseMove,!1),this.handler.addEventListener("mousedown",this.handleMouseDown,!1),this.handler.addEventListener("touchstart",this.handleTouchStart,!1),this.handler.addEventListener("touchmove",this.handleTouchMove,!1),this.handler.addEventListener("touchend",this.handleTouchEnd,!1),this.handler.addEventListener(V,this.handleMouseClick,!1),document.addEventListener(U,this.handleVisibilityChange,!1)}removeEventListeners(){this.handler.removeEventListener(V,this.handleMouseClick,!1),this.handler.removeEventListener("mouseup",this.handleMouseUp,!1),this.handler.removeEventListener("mousemove",this.handleMouseMove,!1),this.handler.removeEventListener("mousedown",this.handleMouseDown,!1),this.handler.removeEventListener("touchstart",this.handleTouchStart,!1),this.handler.removeEventListener("touchmove",this.handleTouchMove,!1),this.handler.removeEventListener("touchend",this.handleTouchEnd,!1)}loadPuzzle=t=>{this.removeEventListeners(),this.stonesCount=1;const e=Boolean(t);if(e&&this.logPuzzleEndFirebaseEvent(!1),this.counter+=1,this.isGameStarted=!1,this.counter===this.levelData.puzzles.length){const t=()=>{this.levelIndicators.setIndicators(this.counter),this.logLevelEndFirebaseEvent(),Z.setGameLevelScore(this.levelData,this.score);const t={starCount:Z.calculateStarCount(this.score),currentLevel:this.levelNumber,isTimerEnded:e};Ct.publish(Ct.EVENTS.LEVEL_END_DATA_EVENT,{levelEndData:t,data:this.data}),this.switchSceneToEnd()};if(e)return void t();const n=setTimeout(t,4500);if(this.isFeedBackTriggered){const e=this.audioPlayer?.audioSourcs||[],i=e[e.length-1];i&&(i.onended=()=>{clearTimeout(n),t()})}}else{const t=new CustomEvent(F,{detail:{counter:this.counter}});setTimeout((()=>{this.isDisposing||(this.initNewPuzzle(t),this.timerTicking.startTimer())}),e?0:4500)}};dispose=()=>{this.timerTicking&&(this.timerTicking.destroy(),this.timerTicking=null),this.trailParticles.clearTrailSubscription(),this.unsubscribeEvent(),this.isDisposing=!0,this.audioPlayer.stopAllAudios(),this.monster.dispose(),this.levelIndicators.dispose(),this.stoneHandler.dispose(),this.promptText.dispose(),document.removeEventListener(U,this.handleVisibilityChange,!1),this.removeEventListeners(),this.pausePopupComponent.destroy(),this.pauseButton.dispose()};checkStoneDropped(t,e,n=!1){return this.stoneHandler.isStoneLetterDropCorrect(t,e,n)}letterPuzzle(t){if(this.pickedStone&&this.pickedStone.frame<=99)return;const e=this.getRandomInt(0,1),n=this.checkStoneDropped(t,e);n&&this.handleCorrectStoneDrop(e),this.isFeedBackTriggered=!0,this.handleStoneDropEnd(n)}wordPuzzle(t){if(t.frame<=99)return;this.audioPlayer.stopFeedbackAudio(),t.x=-999,t.y=-999;const e=this.getRandomInt(0,1);this.wordPuzzleLogic.setGroupToDropped();const{droppedLetters:n}=this.wordPuzzleLogic.getValues(),i=this.wordPuzzleLogic.validateFedLetters();if(this.stoneHandler.processLetterDropFeedbackAudio(e,i,!0,n),i){if(this.wordPuzzleLogic.validateWordPuzzle())return this.handleCorrectStoneDrop(e),this.handleStoneDropEnd(i,"Word"),void(this.stonesCount=1);this.timerTicking.startTimer(),this.monster.play(La.Animations.EAT_HAPPY),this.promptText.droppedStoneIndex("arabic"==N?this.stonesCount:n.length),this.stonesCount++}else this.handleStoneDropEnd(i,"Word"),this.stonesCount=1}handleStoneDropEnd(t,e=null){t?this.monster.play(La.Animations.EAT_HAPPY):this.monster.play(La.Animations.EAT_DISGUST),this.logPuzzleEndFirebaseEvent(t,e),this.dispatchStoneDropEvent(t),this.loadPuzzle()}handleCorrectStoneDrop=t=>{this.score+=100;const e=this.getRandomFeedBackText(t);this.feedbackTextEffects.wrapText(e);setTimeout((()=>{this.feedbackTextEffects.hideText()}),4500)};dispatchStoneDropEvent(t){const e=new CustomEvent(j,{detail:{isCorrect:t}});document.dispatchEvent(e)}initNewPuzzle(t){this.monster=this.initializeRiveMonster(),this.removeEventListeners(),this.isGameStarted=!1,this.time=0,this.wordPuzzleLogic.updatePuzzleLevel(t?.detail?.counter),this.pickedStone=null,document.dispatchEvent(t),this.addEventListeners(),this.audioPlayer.stopAllAudios(),this.startPuzzleTime()}logPuzzleEndFirebaseEvent(t,e){let n=Date.now();const{droppedLetters:i}=this.wordPuzzleLogic.getValues(),s={cr_user_id:B,ftm_language:N,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:t?"success":"failure",level_number:this.levelData.levelMeta.levelNumber,puzzle_number:this.counter,item_selected:"Word"==e?null==i||null==i?"TIMEOUT":i:null==this.pickedStone||null==this.pickedStone?"TIMEOUT":this.pickedStone?.text,target:this.stoneHandler.getCorrectTargetStone(),foils:this.stoneHandler.getFoilStones(),response_time:(n-this.puzzleTime)/1e3};this.firebaseIntegration.sendPuzzleCompletedEvent(s)}logLevelEndFirebaseEvent(){let t=Date.now();const e={cr_user_id:B,ftm_language:N,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.jsonVersionNumber,success_or_failure:Z.calculateStarCount(this.score)>=3?"success":"failure",number_of_successful_puzzles:this.score/100,level_number:this.levelData.levelMeta.levelNumber,duration:(t-this.startTime)/1e3};this.firebaseIntegration.sendLevelCompletedEvent(e)}startGameTime(){this.startTime=Date.now()}startPuzzleTime(){this.puzzleTime=Date.now()}pauseGamePlay=()=>{this.removeEventListeners(),this.audioPlayer.stopAllAudios()};handleVisibilityChange=()=>{this.audioPlayer.stopAllAudios(),Ct.publish(Ct.EVENTS.GAME_PAUSE_STATUS_EVENT,!0),this.pauseGamePlay()}}function ka(t,e,n,i){return{draw:()=>{t.drawImage(i?.LEVEL_SELECTION_BACKGROUND,0,0,e,n)}}}async function Da(t,e,n,i){const s=(t=>k.includes(t))(n);return{...{x:t,y:e,index:n,isSpecial:s,...i,balloonImg:s?i?.specialBloonImg:i?.balloonImg}}}class Ba{canvas;data;width;height;canvasElement;context;levels;gameLevelData;callBack;audioPlayer;images;loadedImages;imagesLoaded=!1;xDown;yDown;previousPlayedLevelNumber;levelSelectionPageIndex=0;levelNumber;levelsSectionCount;unlockLevelIndex;majVersion;minVersion;firebaseIntegration;background;rightBtnSize;rightBtnX;rightBtnY;leftBtnSize;leftBtnX;leftBtnY;levelButtons;riveMonsterElement;gameControl;constructor(t,e,n){this.canvas=t,this.data=e,this.width=t.width,this.height=t.height;let i=this;this.callBack=n,this.levelsSectionCount=i.data.levels.length/10>Math.floor(i.data.levels.length/10)?Math.floor(i.data.levels.length/10)+1:Math.floor(i.data.levels.length/10),this.levels=[],this.firebaseIntegration=new Ds,this.init(),this.riveMonsterElement=document.getElementById("rivecanvas"),this.gameControl=document.getElementById("game-control"),this.canvasElement=document.getElementById("canvas"),this.context=this.canvasElement.getContext("2d"),this.createLevelButtons(),this.gameLevelData=Z.getAllGameLevelInfo(),this.audioPlayer=new et,this.unlockLevelIndex=-1,this.previousPlayedLevelNumber=0|parseInt(R.DebugMode?localStorage.getItem(c+N+"Debug"):localStorage.getItem(c+N)),null!=this.previousPlayedLevelNumber&&(this.levelSelectionPageIndex=10*Math.floor(this.previousPlayedLevelNumber/10)),this.setupBg(),this.riveMonsterElement.style.zIndex="-1",this.images={nextbtn:S,backbtn:"./assets/images/back_btn.webp"},s(this.images,(t=>{this.loadedImages=Object.assign({},t),this.imagesLoaded=!0,"visible"===document.visibilityState&&this.audioPlayer.playAudio(p)})),this.addListeners(),this.rightBtnSize=10,this.rightBtnX=.73,this.rightBtnY=1.3,this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3,this.gameControl.style.zIndex="-1"}async init(){const t=await W();this.majVersion=t.majversion,this.minVersion=t.minversion}setupBg=async()=>{this.background=await async function(t,e,n,i,s){return{...{...s(t,e,n,{...await a(i)})}}}(this.context,this.width,this.height,{LEVEL_SELECTION_BACKGROUND:"./assets/images/map.webp"},ka)};async createLevelButtons(){const t=await a({balloonImg:"./assets/images/mapIcon.webp",specialBloonImg:"./assets/images/map_icon_monster_level_v01.webp",lockImg:"./assets/images/mapLock.webp",starImg:"./assets/images/star.webp"}),e=[[[(n=this.canvas).width/10,n.height/10],[n.width/2.5,n.height/10],[n.width/3+n.width/2.8,n.height/10],[n.width/10,n.height/3],[n.width/2.5,n.height/3],[n.width/3+n.width/2.8,n.height/3],[n.width/10,n.height/1.8],[n.width/2.5,n.height/1.8],[n.width/3+n.width/2.8,n.height/1.8],[n.width/2.5,n.height/1.3]]];var n;const i=this.data.levels.length,s=Math.max(0,i-this.levelSelectionPageIndex),r=Math.min(10,s),o=e[0].slice(0,r).map(((e,n)=>Da(e[0],e[1],n+1,t)));this.levels=await Promise.all(o),this.levelButtons=this.levels.map((t=>new Fs(this.canvas,this.context,{...t})))}async updatePage(t){this.levelSelectionPageIndex=t,await this.createLevelButtons(),this.downButton(this.levelSelectionPageIndex)}addListeners(){document.getElementById("canvas").addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").addEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").addEventListener("touchmove",this.handleTouchMove,!1)}pausePlayAudios=()=>{"visible"===document.visibilityState?this.audioPlayer.playAudio(p):this.audioPlayer.stopAllAudios()};getTouches(t){return t.touches||t.originalEvent.touches}handleTouchStart=t=>{const e=this.getTouches(t)[0];this.xDown=e.clientX,this.yDown=e.clientY};handleTouchMove=t=>{if(!this.xDown||!this.yDown)return;let e=t.touches[0].clientX,n=t.touches[0].clientY,i=this.xDown-e,s=this.yDown-n;Math.abs(i)>Math.abs(s)&&(i>0?this.levelSelectionPageIndex!=10*this.levelsSectionCount-10&&this.updatePage(this.levelSelectionPageIndex+10):0!=this.levelSelectionPageIndex&&this.updatePage(this.levelSelectionPageIndex-10)),this.xDown=null,this.yDown=null};handleMouseDown=t=>{t.preventDefault();let e=document.getElementById("canvas").getBoundingClientRect();const n=t.clientX-e.left,i=t.clientY-e.top,s=(t,e=1.3)=>n>=t&&n<t+this.canvas.height/10&&i>this.canvas.height/e&&i<this.canvas.height/e+this.canvas.height/10,a=s(.7*this.canvas.width),r=s(this.canvas.width/10);if(r||a){const t=this.levelSelectionPageIndex;a&&t!=10*this.levelsSectionCount-10?(this.audioPlayer.playButtonClickSound(),this.updatePage(t+10),this.rightBtnSize=10.5,this.rightBtnY=1.299):r&&0!=t&&(this.audioPlayer.playButtonClickSound(),this.updatePage(t-10),this.leftBtnSize=10.3,this.leftBtnY=1.299)}for(let t of this.levelButtons)t.onClick(n,i,this.levelSelectionPageIndex-1,this.unlockLevelIndex+1,(t=>{this.audioPlayer.playButtonClickSound(),this.levelNumber=t+this.levelSelectionPageIndex-1,this.startGame(this.levelNumber)}))};isLevelCompleted(t,e){const n=e.find((e=>e.levelNumber===t));return(n?.starCount||0)>=2}drawLevel(t,e){const n=t.levelData.index+this.levelSelectionPageIndex,i=n-1;this.unlockLevelIndex+1!==i||this.isLevelCompleted(i,e)||t.applyPulseEffect(),n<=this.data.levels.length&&(this.checkUnlockedLevel(e),t.draw(this.levelSelectionPageIndex,this.unlockLevelIndex,e,this.data.levels.length),R.DebugMode&&this.context.fillText(this.data.levels[n-1].levelMeta.levelType,t.levelData.x+t.btnSize/3.5,t.levelData.y+t.btnSize/1.3))}drawLevelSelection(){for(let t of this.levelButtons)this.drawLevel(t,this.gameLevelData)}downButton(t){t!=10*this.levelsSectionCount-10?(this.context.drawImage(this.loadedImages.nextbtn,this.canvas.width*this.rightBtnX,this.canvas.height/this.rightBtnY,this.canvas.height/this.rightBtnSize,this.canvas.height/this.rightBtnSize),this.rightBtnSize>10&&(this.rightBtnSize=this.rightBtnSize-.025),this.rightBtnY=this.rightBtnSize>10?1.299:1.3):(this.rightBtnSize=10,this.rightBtnX=.7,this.rightBtnY=1.3),0!=t?(this.context.drawImage(this.loadedImages.backbtn,this.canvas.width/this.leftBtnX,this.canvas.height/this.leftBtnY,this.canvas.height/this.leftBtnSize,this.canvas.height/this.leftBtnSize),this.leftBtnSize>10&&(this.leftBtnSize=this.leftBtnSize-.025),this.leftBtnY=this.leftBtnSize>10?1.299:1.3):(this.leftBtnSize=10,this.leftBtnX=10,this.leftBtnY=1.3)}checkUnlockedLevel(t){if(null!=t.length)for(let e of t)this.unlockLevelIndex<parseInt(e.levelNumber)&&e.starCount>=2&&(this.unlockLevelIndex=parseInt(e.levelNumber))}startGame(t){this.dispose(),this.audioPlayer.stopAllAudios();const e={currentLevelData:{...this.data.levels[t],levelNumber:t},selectedLevelNumber:t};Ct.publish(Ct.EVENTS.GAMEPLAY_DATA_EVENT,e),Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,!0),this.logSelectedLevelEvent(),this.callBack(I)}logSelectedLevelEvent(){const t={cr_user_id:B,ftm_language:N,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",level_selected:this.levelNumber};this.firebaseIntegration.sendSelectedLevelEvent(t)}draw(){this.imagesLoaded&&(this.background?.draw(),this.drawLevelSelection(),this.downButton(this.levelSelectionPageIndex))}dispose(){this.audioPlayer.stopAllAudios(),document.getElementById("canvas").removeEventListener("mousedown",this.handleMouseDown,!1),document.removeEventListener("visibilitychange",this.pausePlayAudios,!1),document.getElementById("canvas").removeEventListener("touchstart",this.handleTouchStart,!1),document.getElementById("canvas").removeEventListener("touchmove",this.handleTouchMove,!1)}}var Ma=n(717),za={};za.styleTagTransform=bt(),za.setAttributes=mt(),za.insert=dt().bind(null,"head"),za.domAPI=ht(),za.insertStyleElement=gt();lt()(Ma.A,za);Ma.A&&Ma.A.locals&&Ma.A.locals;class Na{static renderButtonsHTML(){throw new Error("Method not implemented.")}starCount;currentLevel;switchToGameplayCB;switchToLevelSelectionCB;data;audioPlayer;isLastLevel;levelEndElement=document.getElementById("levelEnd");nextButtonInstance;retryButtonInstance;mapButtonInstance;riveMonster;canvasElement;constructor(t,e){const{starCount:n,currentLevel:i,data:s}=Ct.getLevelEndSceneData(),{isLastLevel:a,canvas:r}=Ct.getGamePlaySceneDetails();this.canvasElement=r,this.switchToGameplayCB=t,this.switchToLevelSelectionCB=e,this.data=s,this.audioPlayer=new et,this.canvasElement=document.getElementById("rivecanvas"),this.starCount=n,this.currentLevel=i,this.isLastLevel=a,this.initializeRiveMonster(),this.toggleLevelEndBackground(!0),this.showLevelEndScreen(),this.addEventListener(),this.renderStarsHTML(),this.switchToReactionAnimation()}initializeRiveMonster(){this.riveMonster=new La({canvas:this.canvasElement,autoplay:!0,fit:"contain",alignment:"topCenter",onLoad:()=>{this.riveMonster.play(La.Animations.IDLE)}})}toggleLevelEndBackground=t=>{this.levelEndElement&&(this.levelEndElement.style.display=t?"block":"none",this.levelEndElement.style.zIndex="11")};showLevelEndScreen(){this.toggleLevelEndBackground(!0),this.renderStarsHTML(),this.renderButtonsHTML()}switchToReactionAnimation=()=>{this.starCount<=1?(r()&&this.audioPlayer.playAudio("./assets/audios/LevelLoseFanfare.mp3"),this.riveMonster.play(La.Animations.EAT_DISGUST)):(r()&&(this.audioPlayer.playAudio("./assets/audios/LevelWinFanfare.mp3"),this.audioPlayer.playAudio(p)),this.riveMonster.play(La.Animations.EAT_HAPPY))};renderStarsHTML(){const t=document.querySelector(".stars-container");if(!t)return;t.innerHTML="";const e=["./assets/images/pinStar1.webp","./assets/images/pinStar2.webp","./assets/images/pinStar3.webp"];for(let n=0;n<this.starCount;n++){const i=document.createElement("img");i.src=e[n],i.alt=`Star ${n+1}`,i.classList.add("stars",`star${n+1}`),t.appendChild(i),setTimeout((()=>{i.classList.add("show")}),500*n)}}createButton(t,e,n){const i=new t({targetId:"levelEndButtons",id:e});t===Ns?this.nextButtonInstance=i:t===Os?this.retryButtonInstance=i:t===Ms&&(this.mapButtonInstance=i);const s=document.getElementById("game-control");i.onClick((()=>{this.levelEndElement.style.zIndex="7",s.style.zIndex="-1",n()}))}buttonCallbackFn(t){const e=t=>{const e={currentLevelData:{...this.data.levels[t],levelNumber:t},selectedLevelNumber:t};this.handlePublishEvent(!0,e),this.switchToGameplayCB()};switch(t){case"map":this.handlePublishEvent(!0),this.switchToLevelSelectionCB();break;case"retry":e(this.currentLevel);break;case"next":this.currentLevel<this.data.levels.length&&e(this.currentLevel+1);break;default:console.warn(`Unhandled action: ${t}`)}}renderButtonsHTML(){const t=document.getElementById("levelend-next-btn"),e=[{ButtonClass:Ms,id:"levelend-map-btn",onClick:()=>{this.buttonCallbackFn("map")}},{ButtonClass:Os,id:"levelend-retry-btn",onClick:()=>{this.buttonCallbackFn("retry")}}];!this.isLastLevel&&this.starCount>=2?e.push({ButtonClass:Ns,id:"levelend-next-btn",onClick:()=>{this.buttonCallbackFn("next")}}):t&&t.remove(),e.forEach((({ButtonClass:t,id:e,onClick:n})=>{this.createButton(t,e,n)}))}addEventListener(){document.addEventListener("visibilitychange",this.pauseAudios,!1)}handlePublishEvent(t,e=null){e&&Ct.publish(Ct.EVENTS.GAMEPLAY_DATA_EVENT,e),Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,t),setTimeout((()=>{this.toggleLevelEndBackground(!t)}),800)}handleMouseClick=t=>{var e=document.getElementById("canvas").getBoundingClientRect();t.clientX,e.left,t.clientY,e.top};pauseAudios=()=>{r()?this.starCount>=2&&this.audioPlayer.playAudio(p):this.audioPlayer.stopAllAudios()};dispose=()=>{this.audioPlayer.stopAllAudios(),document.removeEventListener("visibilitychange",this.pauseAudios,!1),this.nextButtonInstance&&(this.nextButtonInstance.dispose(),this.nextButtonInstance=null),this.retryButtonInstance&&(this.retryButtonInstance.dispose(),this.retryButtonInstance=null),this.mapButtonInstance&&(this.mapButtonInstance.dispose(),this.mapButtonInstance=null)}}class Oa{canvas;height;width;context;shouldShowLoading;images;loadedImages;imagesLoaded;cloudXPosition=-500;stopCloudMoving=!1;cloudMovingTimeOut=0;unsubscribeEvent;constructor(){const t=Ct.getLoadingSceneDetails();this.canvas=t.canvas,this.height=t.height,this.width=t.width,this.context=t.context,this.shouldShowLoading=!1,this.images={cloud6:"./assets/images/cloud_01.png",cloud7:"./assets/images/cloud_02.png",cloud8:"./assets/images/cloud_03.png"},s(this.images,(t=>{this.loadedImages=Object.assign({},t),this.imagesLoaded=!0})),this.unsubscribeEvent=Ct.subscribe(Ct.EVENTS.SCENE_LOADING_EVENT,(t=>{this.handleLoadingScreen(t)}))}handleLoadingScreen(t){t&&this.initCloud(),this.shouldShowLoading=t,document.getElementById("loading").style.zIndex=t?"10":"-1"}draw(t){this.shouldShowLoading&&(this.context.clearRect(0,0,this.width,this.height),this.cloudXPosition+=.75*t,this.cloudMovingTimeOut+=t,this.cloudMovingTimeOut>2983&&Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,!1),this.cloudXPosition>=.5*this.width&&!this.stopCloudMoving&&(this.cloudMovingTimeOut+=t,this.cloudMovingTimeOut>2e3&&(this.stopCloudMoving=!0,this.cloudXPosition=0)),this.imagesLoaded&&(this.stopCloudMoving?(this.context.drawImage(this.loadedImages.cloud6,0+this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.4*this.width+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,0+this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*-this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.05*this.width+this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.6*-this.width+this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,.5*this.width+this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,.4*-this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,.4*this.width+this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,.2*-this.width+this.cloudXPosition,.2*this.height,this.width,.5*this.height)):(this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=0?0:this.cloudXPosition,.6*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=0?0:this.cloudXPosition,.15*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.15*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.05*this.width?.05*this.width:this.cloudXPosition,.2*-this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.6*-this.width?.6*-this.width:this.cloudXPosition,.3*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.5*this.width?.5*this.width:this.cloudXPosition,.4*this.height,this.width,.4*this.height),this.context.drawImage(this.loadedImages.cloud7,this.cloudXPosition>=.4*-this.width?.4*-this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud8,this.cloudXPosition>=.4*this.width?.4*this.width:this.cloudXPosition,.7*this.height,this.width,.5*this.height),this.context.drawImage(this.loadedImages.cloud6,this.cloudXPosition>=.2*-this.width?.2*-this.width:this.cloudXPosition,.2*this.height,this.width,.5*this.height))))}initCloud=()=>{this.cloudXPosition=-500,this.stopCloudMoving=!1,this.cloudMovingTimeOut=0}}class Ra{canvas;data;width;height;pickedStone;pwa_status;firebase_analytics;id;canavsElement;riveMonsterElement;context;buttonContext;playButton;images;loadedImages;imagesLoaded=!1;handler;static SceneName;switchSceneToLevelSelection;audioPlayer;toggleBtn;pwa_install_status;titleTextElement;riveMonster;firebaseIntegration;loadingElement;onClickArea;constructor(t,e,n){this.canvas=t,this.data=e,this.width=t.width,this.height=t.height,this.riveMonsterElement=document.getElementById("rivecanvas"),this.canavsElement=document.getElementById("canvas"),this.context=this.canavsElement.getContext("2d"),this.toggleBtn=document.getElementById("toggle-btn"),this.loadingElement=document.getElementById("loading-screen"),this.riveMonster=new La({canvas:this.riveMonsterElement,autoplay:!0,fit:"contain",alignment:"topCenter",width:this.canavsElement.width,height:this.canavsElement.height,onLoad:()=>{this.riveMonster.play(La.Animations.IDLE)}}),this.onClickArea=new rt({selectors:{root:"#background"}},"start-scene-click-area",(t=>`<div id="${t}"></div>`)),this.switchSceneToLevelSelection=n,this.audioPlayer=new et,this.pwa_status=localStorage.getItem(l),this.handler=document.getElementById("start-scene-click-area"),this.devToggle(),this.createPlayButton(),window.addEventListener("beforeinstallprompt",this.handlerInstallPrompt),this.setupBg(),this.titleTextElement=document.getElementById("title"),this.generateGameTitle(),this.riveMonsterElement.style.zIndex="6",this.firebaseIntegration=new Ds,this.hideInitialLoading(),this.setOnClicknAreaStyle()}setupBg=async()=>{const t=kt.createBackgroundComponent(1);(new kt).generateBackground(t)};setOnClicknAreaStyle=()=>{this.handler.style.width="inherit",this.handler.style.height="inherit",this.handler.style.position="absolute",this.handler.style.zIndex="5"};hideInitialLoading=()=>{setTimeout((()=>{this.loadingElement.style.zIndex="-1",this.loadingElement.style.display="none"}),750)};devToggle=()=>{this.toggleBtn.addEventListener("click",(()=>(t=>{t.classList.toggle("on");const e=t.classList.contains("on");R.DebugMode=e,t.innerText="Dev"})(this.toggleBtn)))};generateGameTitle=()=>{this.titleTextElement.textContent=this.data.title};draw=t=>{this.context.clearRect(0,0,this.width,this.height)};createPlayButton(){this.playButton=new Us({targetId:"background"}),this.playButton.onClick((()=>{this.toggleBtn.style.display="none",this.logTappedStartFirebaseEvent(),this.audioPlayer.playButtonClickSound(),Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,!0),this.switchSceneToLevelSelection()})),document.addEventListener("selectstart",(function(t){t.preventDefault()})),this.handler.addEventListener("click",this.handleMouseClick,!1)}handleMouseClick=t=>{t.preventDefault(),Ds.getInstance().sendUserClickedOnPlayEvent(),fbq("trackCustom","user_clicked",{event:"click"}),this.toggleBtn.style.display="none",this.audioPlayer.playButtonClickSound(),Ct.publish(Ct.EVENTS.SCENE_LOADING_EVENT,!0),this.switchSceneToLevelSelection()};dispose(){this.audioPlayer.stopAllAudios(),this.handler.removeEventListener("click",this.handleMouseClick,!1),this.playButton.dispose(),this.playButton.destroy(),this.onClickArea.destroy(),window.removeEventListener("beforeinstallprompt",this.handlerInstallPrompt,!1)}handlerInstallPrompt=t=>{t.preventDefault(),this.pwa_install_status=t,localStorage.setItem(l,"false")};logTappedStartFirebaseEvent(){Date.now();const t={cr_user_id:B,ftm_language:N,profile_number:0,version_number:document.getElementById("version-info-id").innerHTML,json_version_number:this.data.majVersion&&this.data.minVersion?this.data.majVersion.toString()+"."+this.data.minVersion.toString():""};this.firebaseIntegration.sendTappedStartEvent(t)}}class Fa{scenes;activeScene;canvas;data;width;height;canavasElement;context;lastTime=0;toggleBtn;titleTextElement;constructor(t,e){Ct.setDefaultGameStateValues(e,t,document.getElementById("canvas")),this.scenes={},this.activeScene=null,this.canvas=t,this.data=e,this.width=t.width,this.height=t.height,this.canavasElement=document.getElementById("canvas"),this.context=this.canavasElement.getContext("2d"),this.toggleBtn=document.getElementById("toggle-btn"),this.titleTextElement=document.getElementById("title"),window.addEventListener("beforeinstallprompt",this.handleInstallPrompt),this.startAnimationLoop(),this.init(t,e)}init(t,e){this.addScene(A,new Oa),this.addScene(C,new Ra(t,e,this.switchSceneToLevelSelection)),this.gotoScene(C)}addScene(t,e){this.scenes[t]=e}gotoScene(t){this.activeScene&&this.activeScene?.dispose(),this.activeScene=this.scenes[t]}timerWrapper=(t,e=800)=>{setTimeout((()=>{t()}),e)};startAnimationLoop(){const t=e=>{this.animation(e),requestAnimationFrame(t)};requestAnimationFrame(t)}devToggle(){this.toggleBtn.addEventListener("click",(()=>{this.toggleBtn.classList.toggle("on"),this.toggleBtn.classList.contains("on")?(R.DebugMode=!0,this.toggleBtn.innerText="Dev"):(R.DebugMode=!1,this.toggleBtn.innerText="Dev")}))}checkMonsterPhaseUpdation(){const t=Z.getTotalStarCount(),e=Math.floor(t/12)+1||1;return e<=4?e:4}animation=t=>{const e=t-this.lastTime;this.lastTime=t,this.context.clearRect(0,0,this.width,this.height),this.scenes[A].draw(e),this.activeScene&&!(this.activeScene instanceof Na)&&this.activeScene.draw(e)};switchSceneToLevelSelection=()=>{this.timerWrapper((()=>{this.addScene(I,new Ba(this.canvas,this.data,this.switchSceneToGameplay)),this.gotoScene(I),this.titleTextElement.style.display="none"}))};switchSceneToGameplay=()=>{this.timerWrapper((()=>{this.addScene(L,new Pa({monsterPhaseNumber:this.checkMonsterPhaseUpdation(),switchSceneToEnd:this.switchSceneToEndLevel,switchToLevelSelection:()=>{this.switchSceneToLevelSelection()},reloadScene:this.switchSceneToGameplay})),this.gotoScene(L)}))};switchSceneToEndLevel=()=>{this.timerWrapper((()=>{this.addScene(P,new Na(this.switchSceneToGameplay,this.switchSceneToLevelSelection)),this.gotoScene(P)}))};handleInstallPrompt=t=>{t.preventDefault(),localStorage.setItem(l,"false")}}try{self["workbox:window:4.3.1"]&&_()}catch(ja){}var ja=function(t,e){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(t){return n(t.data)},t.postMessage(e,[i.port2])}))};function Va(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ua(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}try{self["workbox:core:4.3.1"]&&_()}catch(ja){}var $a=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Wa=function(t,e){return new URL(t,location).href===new URL(e,location).href},Ha=function(t,e){Object.assign(this,e,{type:t})};function Ga(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function Xa(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Ya(){}var qa=function(t){var e,n;function i(e,n){var i;return void 0===n&&(n={}),(i=t.call(this)||this).t=e,i.i=n,i.o=0,i.u=new $a,i.s=new $a,i.h=new $a,i.v=i.v.bind(Ua(Ua(i))),i.l=i.l.bind(Ua(Ua(i))),i.g=i.g.bind(Ua(Ua(i))),i.m=i.m.bind(Ua(Ua(i))),i}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var s,a,r=i.prototype;return r.register=Ga((function(t){var e,n,i=this,s=(void 0===t?{}:t).immediate,a=void 0!==s&&s;return e=function(){return i.p=Boolean(navigator.serviceWorker.controller),i.P=i.R(),Xa(i.k(),(function(t){i.B=t,i.P&&(i.O=i.P,i.s.resolve(i.P),i.h.resolve(i.P),i.j(i.P),i.P.addEventListener("statechange",i.l,{once:!0}));var e=i.B.waiting;return e&&Wa(e.scriptURL,i.t)&&(i.O=e,Promise.resolve().then((function(){i.dispatchEvent(new Ha("waiting",{sw:e,wasWaitingBeforeRegister:!0}))}))),i.O&&i.u.resolve(i.O),i.B.addEventListener("updatefound",i.g),navigator.serviceWorker.addEventListener("controllerchange",i.m,{once:!0}),"BroadcastChannel"in self&&(i.C=new BroadcastChannel("workbox"),i.C.addEventListener("message",i.v)),navigator.serviceWorker.addEventListener("message",i.v),i.B}))},(n=function(){if(!a&&"complete"!==document.readyState)return function(t,e){return t&&t.then?t.then(Ya):Promise.resolve()}(new Promise((function(t){return addEventListener("load",t)})))}())&&n.then?n.then(e):e()})),r.getSW=Ga((function(){return this.O||this.u.promise})),r.messageSW=Ga((function(t){return Xa(this.getSW(),(function(e){return ja(e,t)}))})),r.R=function(){var t=navigator.serviceWorker.controller;if(t&&Wa(t.scriptURL,this.t))return t},r.k=Ga((function(){var t=this;return function(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}((function(){return Xa(navigator.serviceWorker.register(t.t,t.i),(function(e){return t.L=performance.now(),e}))}),(function(t){throw t}))})),r.j=function(t){ja(t,{type:"WINDOW_READY",meta:"workbox-window"})},r.g=function(){var t=this.B.installing;this.o>0||!Wa(t.scriptURL,this.t)||performance.now()>this.L+6e4?(this.W=t,this.B.removeEventListener("updatefound",this.g)):(this.O=t,this.u.resolve(t)),++this.o,t.addEventListener("statechange",this.l)},r.l=function(t){var e=this,n=t.target,i=n.state,s=n===this.W,a=s?"external":"",r={sw:n,originalEvent:t};!s&&this.p&&(r.isUpdate=!0),this.dispatchEvent(new Ha(a+i,r)),"installed"===i?this._=setTimeout((function(){"installed"===i&&e.B.waiting===n&&e.dispatchEvent(new Ha(a+"waiting",r))}),200):"activating"===i&&(clearTimeout(this._),s||this.s.resolve(n))},r.m=function(t){var e=this.O;e===navigator.serviceWorker.controller&&(this.dispatchEvent(new Ha("controlling",{sw:e,originalEvent:t})),this.h.resolve(e))},r.v=function(t){var e=t.data;this.dispatchEvent(new Ha("message",{data:e,originalEvent:t}))},s=i,(a=[{key:"active",get:function(){return this.s.promise}},{key:"controlling",get:function(){return this.h.promise}}])&&Va(s.prototype,a),i}(function(){function t(){this.D={}}var e=t.prototype;return e.addEventListener=function(t,e){this.T(t).add(e)},e.removeEventListener=function(t,e){this.T(t).delete(e)},e.dispatchEvent=function(t){t.target=this,this.T(t.type).forEach((function(e){return e(t)}))},e.T=function(t){return this.D[t]=this.D[t]||new Set},t}()),Ka=n(664),Ja={};Ja.styleTagTransform=bt(),Ja.setAttributes=mt(),Ja.insert=dt().bind(null,"head"),Ja.domAPI=ht(),Ja.insertStyleElement=gt();lt()(Ka.A,Ja);Ka.A&&Ka.A.locals&&Ka.A.locals;new class{canvas;versionInfoElement;lang;is_cached;progressBar;progressBarContainer;channel;sceneHandler;loadingElement;majVersion;minVersion;dataModal;startSessionTime;titleTextElement;feedBackTextElement;currentProgress;background;firebaseIntegration;constructor(t){this.lang=t,this.currentProgress=10,this.canvas=document.getElementById("canvas"),this.background=document.getElementById("background"),this.channel=new BroadcastChannel("my-channel"),this.progressBar=document.getElementById("progress-bar"),this.titleTextElement=document.getElementById("title"),this.feedBackTextElement=document.getElementById("feedback-text"),this.progressBarContainer=document.getElementById("progress-bar-container"),this.versionInfoElement=document.getElementById("version-info-id"),this.loadingElement=document.getElementById("loading-screen"),this.is_cached=this.initializeCachedData(),this.firebaseIntegration=new Ds,this.startSessionTime=0,this.init(),this.channel.addEventListener("message",this.handleServiceWorkerMessage),window.addEventListener("beforeunload",this.handleBeforeUnload),document.addEventListener(U,this.handleVisibilityChange),window.addEventListener("resize",this.handleResize.bind(this))}async init(){const t=await i.getLanguageSpecificFont(this.lang);await this.loadAndCacheFont(t,`./assets/fonts/${t}.ttf`),await this.loadTitleFeedbackCustomFont(),await this.preloadGameAudios(),this.handleLoadingScreen(),this.setupCanvas();const e=await W();this.majVersion=e.majversion,this.minVersion=e.minversion,this.dataModal=this.createDataModal(e),this.globalInitialization(e),this.logSessionStartFirebaseEvent(),window.addEventListener("resize",(async()=>{this.handleResize(this.dataModal)}));const n=localStorage.getItem(this.lang+"gamePlayedInfo"),s=n?JSON.parse(n).length-1:0,a=R.DebugMode?c+this.lang+"Debug":c+this.lang;localStorage.setItem(a,s.toString()),this.is_cached.has(this.lang)&&this.handleCachedScenario(this.dataModal),this.registerWorkbox()}async loadTitleFeedbackCustomFont(){const t=tt[this.lang]||tt.default,e=`'${t}', sans-serif`;await this.loadAndCacheFont(t,`./assets/fonts/${t}.ttf`),[this.titleTextElement,this.feedBackTextElement].forEach((t=>{t&&(t.style.fontFamily=e)}))}logSessionStartFirebaseEvent(){let t=localStorage.getItem("lastSessionEndTime"),e=0;if(this.startSessionTime=(new Date).getTime(),t){let n=parseInt(t);isNaN(n)||(e=Math.abs((new Date).getTime()-n))}const n=parseFloat((e?e/864e5:0).toFixed(3)),i={cr_user_id:B,ftm_language:N,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",days_since_last:n};this.firebaseIntegration.sendSessionStartEvent(i)}logSessionEndFirebaseEvent(){const t={cr_user_id:B,ftm_language:N,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.majVersion&&this.minVersion?this.majVersion.toString()+"."+this.minVersion.toString():"",duration:((new Date).getTime()-this.startSessionTime)/1e3};localStorage.setItem("lastSessionEndTime",(new Date).getTime().toString()),this.firebaseIntegration.sendSessionEndEvent(t)}initializeCachedData(){const t=localStorage.getItem(h);return t?new Map(JSON.parse(t)):new Map}async loadAndCacheFont(t,e){try{const n=await caches.open("fontCache");if(!await n.match(e)){const t=await fetch(e),i=await t.blob();await n.put(e,new Response(i))}const i=new FontFace(t,`url(${e}) format('truetype')`);await i.load(),document.fonts.add(i)}catch(t){console.error(`Failed to load and cache font: ${t}`)}}handleLoadingScreen=()=>{this.is_cached.get(N)?(this.progressBarContainer.style.display="none",this.progressBar.style.display="none"):(this.progressBarContainer.style.display="flex",this.progressBar.style.display="flex",this.progressBar.style.width="10%")};async registerWorkbox(){if("serviceWorker"in navigator)try{const t=new qa("./sw.js",{});await t.register(),await navigator.serviceWorker.ready,this.is_cached.has(this.lang)?fetch($+"?cache-bust="+(new Date).getTime(),{method:"GET",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},cache:"no-store"}).then((async t=>{if(!t.ok)return void console.error("Failed to fetch the content file from the server!");const e=await t.json(),n=e.majversion+"."+e.minversion,i=localStorage.getItem("version"+N.toLowerCase());if(n&&i!=n){console.log("Content version mismatch! Reloading...");var s=JSON.parse(localStorage.getItem("is_cached"));console.log("current lang  "+N);var a=s.filter((t=>!t.toString().includes(N)));localStorage.setItem(h,JSON.stringify(a)),localStorage.removeItem("version"+N.toLowerCase()),caches.delete(N),this.handleUpdateFoundMessage()}})).catch((t=>{console.error("Error fetching the content file: "+t)})):this.channel.postMessage({command:"Cache",data:this.lang}),navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerMessage)}catch(t){console.error(`Failed to register service worker: ${t}`)}}setupCanvas(){const t=window.screen.width>1024?768:window.innerWidth;this.canvas.height=window.innerHeight,this.canvas.width=t,this.background.style.width=`${t}px`}createDataModal(t){return new H(t.title,t.OtherAudios,t.Levels,t.FeedbackTexts,t.RightToLeft,t.FeedbackAudios,t.majversion,t.minversion,t.version)}globalInitialization(t){globalThis.aboutCompany=t.aboutCompany,globalThis.descriptionText=t.descriptionText}handleResize(t){this.is_cached.has(this.lang)&&(this.updateVersionInfoElement(t),this.setupCanvas(),this.reinitializeSceneHandler(t))}updateVersionInfoElement(t){this.is_cached.has(this.lang)&&R.DevelopmentLink&&(t.majVersion&&t.minVersion?this.versionInfoElement.innerHTML+=`/j.v${t.majVersion}.${t.minVersion}`:t.version&&(this.versionInfoElement.innerHTML+=`/j.v${t.version}`),document.getElementById("toggle-btn").style.display="block")}reinitializeSceneHandler(t){delete this.sceneHandler,this.sceneHandler=new Fa(this.canvas,t),this.passingDataToContainer()}handleCachedScenario(t){this.updateVersionInfoElement(t),this.sceneHandler=new Fa(this.canvas,t),this.passingDataToContainer()}passingDataToContainer=()=>{window.Android&&window.Android.cachedStatus(1==this.is_cached.get(this.lang))};setContainerAppOrientation(){window.Android&&window.Android.setContainerAppOrientation("portrait")}handleUpdateFoundMessage(){confirm("Update Found\nPress ok to update")&&window.location.reload()}handleLoadingMessage=t=>{if(this.progressBarContainer&&this.progressBar){this.showProgressBar();const e=Math.min(100,Math.max(0,t.data));e>this.currentProgress&&(this.currentProgress=e,this.progressBar.style.width=`${this.currentProgress}%`),this.isDownloadCompleted(this.currentProgress)&&(this.cacheLanguage(),this.sendCompletionEvent(),this.hideLoadingScreen())}};showProgressBar(){this.progressBarContainer.classList.add("visible"),this.progressBar.classList.add("visible")}isDownloadCompleted(t){return 100===t&&!this.is_cached.get(this.lang)}cacheLanguage(){try{this.is_cached.set(this.lang,!0),localStorage.setItem(h,JSON.stringify(Array.from(this.is_cached.entries())))}catch(t){console.error("Error caching language:",t)}}sendCompletionEvent(){const t={cr_user_id:B,ftm_language:N,profile_number:0,version_number:this.versionInfoElement.innerHTML,json_version_number:this.getJsonVersionNumber()};this.firebaseIntegration.sendDownloadCompletedEvent(t)}getJsonVersionNumber(){return this.majVersion&&this.minVersion?this.majVersion+"."+this.minVersion:""}hideLoadingScreen(){try{localStorage.setItem("version"+this.lang,this.getJsonVersionNumber()),this.loadingElement.style.display="none",this.handleResize(this.dataModal)}catch(t){console.error("Error hiding loading screen:",t)}}handleServiceWorkerMessage=t=>{"Loading"===t.data.msg?this.handleLoadingMessage(t.data):"Update Found"===t.data.msg&&this.handleUpdateFoundMessage()};handleVisibilityChange=()=>{r()?this.logSessionStartFirebaseEvent():this.logSessionEndFirebaseEvent()};handleBeforeUnload=async t=>{this.logSessionEndFirebaseEvent(),this.dispose()};preloadGameAudios=async()=>{let t=m;return new Promise(((e,n)=>{const i=t.map((t=>(new et).preloadGameAudio(t)));Promise.all(i).then((()=>e())).catch((t=>{console.error("Error preloading audio:",t),n(t)}))}))};dispose(){this.channel.removeEventListener("message",this.handleServiceWorkerMessage),window.removeEventListener("beforeunload",this.handleBeforeUnload),document.removeEventListener(U,this.handleVisibilityChange),window.removeEventListener("resize",this.handleResize),navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",this.handleServiceWorkerMessage)}}(N)})()})();